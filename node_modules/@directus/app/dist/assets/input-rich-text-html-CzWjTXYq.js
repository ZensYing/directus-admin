import{k as EF,n as TF,o as Eq,u as kq,p as _q,_ as Aq}from"./index.DYrFk73V.entry.js";import{w as o2,d as mq,bj as fq,e as Ql,n as rq,m as Oq,aR as Dq,b as Rq,a as Mq,h as aq,c as n2,b5 as lu,b6 as Nq,aY as _g,af as wy,y as Ar,u as Bn,aN as cq,bf as yi,ae as TR,bw as dl,ak as ER,ag as Or,aF as l1,by as lq,ad as xF,I as $j}from"./runtime-core.esm-bundler-DhTmOO-X.js";import{useI18n as Pq}from"./vue-i18n.8VWz_hPO.entry.js";import"./vue.runtime.esm-bundler-D4Mhr4E9.js";import"./index-sx58KpRg.js";import"./pinia.DFmwLz6V.entry.js";import"./vue-router.YxiUBFHd.entry.js";var Bq=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],$q=function(lt){return Bq.map(function($n){return $n.toLowerCase()}).indexOf(lt.toLowerCase())!==-1},Iq=function(lt,$n,an){Object.keys($n).filter($q).forEach(function(Xt){var yt=$n[Xt];typeof yt=="function"&&(Xt==="onInit"?yt(lt,an):an.on(Xt.substring(2),function(Ut){return yt(Ut,an)}))})},Lq=function(lt,$n,an,Xt){var yt=lt.modelEvents?lt.modelEvents:null,Ut=Array.isArray(yt)?yt.join(" "):yt;o2(Xt,function(Zn,Mt){an&&typeof Zn=="string"&&Zn!==Mt&&Zn!==an.getContent({format:lt.outputFormat})&&an.setContent(Zn)}),an.on(Ut||"change input undo redo",function(){$n.emit("update:modelValue",an.getContent({format:lt.outputFormat}))})},Fq=function(lt,$n,an,Xt,yt,Ut){Xt.setContent(Ut()),an.attrs["onUpdate:modelValue"]&&Lq($n,an,Xt,yt),Iq(lt,an.attrs,Xt)},iq=0,gq=function(lt){var $n=Date.now(),an=Math.floor(Math.random()*1e9);return iq++,lt+"_"+an+iq+String($n)},Hq=function(lt){return lt!==null&&lt.tagName.toLowerCase()==="textarea"},uq=function(lt){return typeof lt>"u"||lt===""?[]:Array.isArray(lt)?lt:lt.split(" ")},Vq=function(lt,$n){return uq(lt).concat(uq($n))},zq=function(lt){return lt==null},dq=function(){return{listeners:[],scriptId:gq("tiny-script"),scriptLoaded:!1}},Uq=function(){var lt=dq(),$n=function(yt,Ut,Zn,Mt){var qt=Ut.createElement("script");qt.referrerPolicy="origin",qt.type="application/javascript",qt.id=yt,qt.src=Zn;var eo=function(){qt.removeEventListener("load",eo),Mt()};qt.addEventListener("load",eo),Ut.head&&Ut.head.appendChild(qt)},an=function(yt,Ut,Zn){lt.scriptLoaded?Zn():(lt.listeners.push(Zn),yt.getElementById(lt.scriptId)||$n(lt.scriptId,yt,Ut,function(){lt.listeners.forEach(function(Mt){return Mt()}),lt.scriptLoaded=!0}))},Xt=function(){lt=dq()};return{load:an,reinitialize:Xt}},Wq=Uq(),Zq=function(){return typeof window<"u"?window:global},t2=function(){var lt=Zq();return lt&&lt.tinymce?lt.tinymce:null},jq={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(lt){return lt==="html"||lt==="text"}}},i1=function(){return i1=Object.assign||function(lt){for(var $n,an=1,Xt=arguments.length;an<Xt;an++){$n=arguments[an];for(var yt in $n)Object.prototype.hasOwnProperty.call($n,yt)&&(lt[yt]=$n[yt])}return lt},i1.apply(this,arguments)},Gq=function(lt,$n,an,Xt){return lt(Xt||"div",{id:$n,ref:an})},qq=function(lt,$n,an){return lt("textarea",{id:$n,visibility:"hidden",ref:an})},Ij={selector:void 0,target:void 0},Kq=mq({props:jq,setup:function(lt,$n){var an=lt.init?i1(i1({},lt.init),Ij):i1({},Ij),Xt=fq(lt),yt=Xt.disabled,Ut=Xt.modelValue,Zn=Xt.tagName,Mt=Ql(null),qt=null,eo=lt.id||gq("tiny-vue"),Cn=lt.init&&lt.init.inline||lt.inline,Qt=!!$n.attrs["onUpdate:modelValue"],Sn=!0,Nt=lt.initialValue?lt.initialValue:"",_t="",qe=function(Ct){return Qt?function(){return Ut!=null&&Ut.value?Ut.value:""}:function(){return Ct?Nt:_t}},tt=function(){var Ct=qe(Sn),q=i1(i1({},an),{readonly:lt.disabled,target:Mt.value,plugins:Vq(an.plugins,lt.plugins),toolbar:lt.toolbar||an.toolbar,inline:Cn,setup:function(Fe){qt=Fe,Fe.on("init",function(En){return Fq(En,lt,$n,Fe,Ut,Ct)}),typeof an.setup=="function"&&an.setup(Fe)}});Hq(Mt.value)&&(Mt.value.style.visibility=""),t2().init(q),Sn=!1};o2(yt,function(Ct){var q;qt!==null&&(typeof((q=qt.mode)===null||q===void 0?void 0:q.set)=="function"?qt.mode.set(Ct?"readonly":"design"):qt.setMode(Ct?"readonly":"design"))}),o2(Zn,function(Ct){var q;Qt||(_t=qt.getContent()),(q=t2())===null||q===void 0||q.remove(qt),rq(function(){return tt()})}),Oq(function(){if(t2()!==null)tt();else if(Mt.value&&Mt.value.ownerDocument){var Ct=lt.cloudChannel?lt.cloudChannel:"6",q=lt.apiKey?lt.apiKey:"no-api-key",Fe=zq(lt.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(q,"/tinymce/").concat(Ct,"/tinymce.min.js"):lt.tinymceScriptSrc;Wq.load(Mt.value.ownerDocument,Fe,tt)}}),Dq(function(){t2()!==null&&t2().remove(qt)}),Cn||(Rq(function(){Sn||tt()}),Mq(function(){var Ct;Qt||(_t=qt.getContent()),(Ct=t2())===null||Ct===void 0||Ct.remove(qt)}));var jn=function(Ct){var q;_t=qt.getContent(),(q=t2())===null||q===void 0||q.remove(qt),an=i1(i1(i1({},an),Ct),Ij),rq(function(){return tt()})};return $n.expose({rerender:jn,getEditor:function(){return qt}}),function(){return Cn?Gq(aq,eo,Mt,lt.tagName):qq(aq,eo,Mt)}}});const Yq=""+new URL("FiraMono-Medium-CE-6Frqh.woff2",import.meta.url).href,Xq=""+new URL("FiraMono-Medium-CjwgnWCQ.woff",import.meta.url).href,Jq=""+new URL("merriweather-regular-D4NWdWaV.woff2",import.meta.url).href,Qq=""+new URL("merriweather-regular-B5k5JYwq.woff",import.meta.url).href;function ml(lt){return getComputedStyle(document.body).getPropertyValue(lt)}function eK(lt){return`
@font-face {
	font-family: 'Fira Mono';
	font-style: normal;
	src: url(${Yq}) format('woff2'),
	url(${Xq}) format('woff');
}

@font-face {
	font-family: 'Merriweather';
	font-style: normal;
	src: url(${Jq}) format('woff2'),
	url(${Qq}) format('woff');
}

::selection {
	background: ${ml("--background-normal-alt")};
}
body {
	color: ${ml("--theme--form--field--input--foreground")};
	background-color: ${ml("--theme--form--field--input--background")};
	margin: 20px;
	font-family: ${ml("--theme--fonts--sans--font-family")};
	-webkit-font-smoothing: antialiased;
	text-rendering: optimizeLegibility;
	-moz-osx-font-smoothing: grayscale;
}
body.mce-content-readonly {
	color: ${ml("--foreground-subdued")};
	background-color: ${ml("--background-subdued")};
}
.mce-offscreen-selection {
	display: none;
}
h1, h2, h3, h4, h5, h6 {
	font-family: ${ml(`--family-${lt}`)}, serif;
	color: ${ml("--theme--form--field--input--foreground-accent")};
	font-weight: 700;
	margin-bottom: 0;
}
h1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p {
	margin-top: 0.5em;
}
h1 {
	font-size: 36px;
	line-height: 46px;
	margin-top: 1em;
}
h2 {
	font-size: 24px;
	line-height: 34px;
	margin-top: 1.25em;
}
h3 {
	font-size: 19px;
	line-height: 29px;
	margin-top: 1.25em;
}
h4 {
	font-size: 16px;
	line-height: 26px;
	margin-top: 1.5em;
}
h5 {
	font-size: 14px;
	line-height: 24px;
	margin-top: 2em;
}
h6 {
	font-size: 12px;
	line-height: 22px;
	margin-top: 2em;
}
p {
	font-family: ${ml(`--family-${lt}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
a {
	color: ${ml("--theme--primary-accent")};
	text-decoration: none;
}
ul, ol {
	font-family: ${ml(`--family-${lt}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
ul ul,
	ol ol,
		ul ol,
			ol ul {
	margin: 0;
}
b, strong {
	font-weight: 700;
}
code {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 2px 4px;
	font-family: ${ml("--theme--fonts--monospace--font-family")}, monospace;
	background-color: ${ml("--theme--background-accent")};
	border-radius: ${ml("--theme--border-radius")};
	overflow-wrap: break-word;
}
pre {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 1em;
	font-family: ${ml("--theme--fonts--monospace--font-family")}, monospace;
	background-color: ${ml("--theme--background-accent")};
	border-radius: ${ml("--theme--border-radius")};
	overflow: auto;
}
blockquote {
	font-family: ${ml(`--family-${lt}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	border-left: 2px solid ${ml("--theme--form--field--input--border-color")};
	padding-left: 1em;
	margin-left: 0px;
}
video,
img {
	max-width: 100%;
	border-radius: ${ml("--theme--border-radius")};
	height: auto;
}
iframe {
	max-width: 100%;
	border-radius: ${ml("--theme--border-radius")};
}
hr {
	background-color: ${ml("--theme--form--field--input--border-color")};
	height: 1px;
	border: none;
	margin-top: 2em;
	margin-bottom: 2em;
}
table {
	border-collapse: collapse;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
}
table th,
table td {
	border: 1px solid ${ml("--theme--form--field--input--border-color")};
	padding: 0.4rem;
}
figure {
	display: table;
	margin: 1rem auto;
}
figure figcaption {
	color: #999;
	display: block;
	margin-top: 0.25rem;
	text-align: center;
}`}function tK(lt,$n,an){const Xt=Ql(!1),yt=Ql(null),Ut=Ql();o2(()=>{var Qt;return(Qt=yt.value)==null?void 0:Qt.transformationKey},Qt=>{Ut.value=an.storageAssetPresets.value.find(Sn=>Sn.key===Qt),Ut.value&&(yt.value.width=Ut.value.width??void 0,yt.value.height=Ut.value.height??void 0)});const Zn={icon:"image",tooltip:EF.global.t("wysiwyg_options.image"),onAction:Qt=>{if(Xt.value=!0,Qt===!0||Qt.isActive()){const Sn=lt.value.selection.getNode(),Nt=Sn.getAttribute("src"),_t=Nt?new URL(Nt).searchParams:void 0,qe=Sn.getAttribute("alt"),tt=Sn.getAttribute("loading")==="lazy",jn=Number((_t==null?void 0:_t.get("width"))||void 0)||void 0,Ct=Number((_t==null?void 0:_t.get("height"))||void 0)||void 0,q=(_t==null?void 0:_t.get("key"))||void 0;if(Nt===null||qe===null)return;q&&(Ut.value=an.storageAssetPresets.value.find(Fe=>Fe.key===q)),yt.value={imageUrl:Nt,alt:qe,lazy:tt,width:Ut.value?Ut.value.width??void 0:jn,height:Ut.value?Ut.value.height??void 0:Ct,transformationKey:q,previewUrl:Cn(Nt,$n.value)}}else yt.value=null},onSetup:Qt=>{const Sn=Nt=>{Qt.setActive(Nt.element.tagName==="IMG")};return lt.value.on("NodeChange",Sn),function(){lt.value.off("NodeChange",Sn)}}};return{imageDrawerOpen:Xt,imageSelection:yt,closeImageDrawer:Mt,onImageSelect:qt,saveImage:eo,imageButton:Zn};function Mt(){yt.value=null,Xt.value=!1}function qt(Qt){const Sn=TF()+"assets/"+Qt.id;yt.value={imageUrl:Cn(Sn,$n.value),alt:Qt.title,lazy:!1,width:Qt.width,height:Qt.height,previewUrl:Cn(Sn,$n.value)}}function eo(){lt.value.fire("focus");const Qt=yt.value;if(Qt===null)return;const Sn={},Nt=new URL(Qt.imageUrl);Nt.searchParams.delete("width"),Nt.searchParams.delete("height"),Nt.searchParams.delete("key"),an.storageAssetTransform.value==="all"?Qt.transformationKey?Sn.key=Qt.transformationKey:(Sn.width=Qt.width,Sn.height=Qt.height):an.storageAssetTransform.value==="presets"&&Qt.transformationKey&&(Sn.key=Qt.transformationKey);const qe=`<img src="${Eq(Nt.toString(),Sn)}" alt="${Qt.alt}" ${Qt.lazy?'loading="lazy" ':""}/>`;lt.value.selection.setContent(qe),lt.value.undoManager.add(),Mt()}function Cn(Qt,Sn){if(!Qt.includes(TF()+"assets/"))return Qt;try{const Nt=new URL(Qt),_t=new URLSearchParams(Nt.search);return Sn?_t.set("access_token",Sn):_t.delete("access_token"),Array.from(_t).length>0?`${Nt.origin}${Nt.pathname}?${_t.toString()}`:`${Nt.origin}${Nt.pathname}`}catch{return Qt}}}function nK(lt){const $n=Ql(!1),an={url:null,displayText:null,title:null,newTab:!0},Xt=Ql(an),yt=Ql(null),Ut=Ql(null),Zn={icon:"link",tooltip:EF.global.t("wysiwyg_options.link"),onAction:()=>{if(lt.value.plugins.fullscreen.isFullscreen()&&lt.value.execCommand("mceFullScreen"),$n.value=!0,yt.value){lt.value.selection.select(Ut.value);const Cn=yt.value.getAttribute("href"),Qt=yt.value.getAttribute("title"),Sn=yt.value.innerText,Nt=yt.value.getAttribute("target");if(Cn===null||Sn===null)return;Xt.value={url:Cn,displayText:Sn,title:Qt||null,newTab:Nt==="_blank"}}else{const Cn=lt.value.selection.getContent();try{const Qt=new URL(Cn).toString();Mt({url:Qt})}catch{Mt({displayText:Cn||null})}}},onSetup:Cn=>{const Qt=Sn=>{let Nt=Sn.element;for(Ut.value=Sn.element,yt.value=null;Nt&&Nt.id!=="tinymce";){if(Nt.tagName==="A"){yt.value=Nt;break}Nt=Nt.parentElement}Cn.setActive(!!yt.value)};return lt.value.on("NodeChange",Qt),function(){lt.value.off("NodeChange",Qt)}}};return{linkDrawerOpen:$n,linkSelection:Xt,linkNode:yt,closeLinkDrawer:qt,saveLink:eo,linkButton:Zn};function Mt(Cn={}){Xt.value=Object.assign({},an,Cn)}function qt(){Mt(),$n.value=!1}function eo(){lt.value.fire("focus");const Cn=Xt.value;if(Cn.url===null){yt.value&&(lt.value.selection.setContent(yt.value.innerText),qt());return}const Qt=`<a href="${Cn.url}" ${Cn.title?`title="${Cn.title}"`:""} ${Cn.newTab?'target="_blank"':""} >${Cn.displayText||Cn.url}</a>`;!yt.value||Ut.value===yt.value?lt.value.selection.setContent(Qt):Ut.value&&(Ut.value.innerHTML=Cn.displayText||Cn.url,yt.value.setAttribute("data-mce-href",Cn.url),yt.value.setAttribute("href",Cn.url),Cn.title&&yt.value.setAttribute("title",Cn.title),yt.value.setAttribute("target",Cn.newTab?"_blank":"_self"),lt.value.selection.select(yt.value),lt.value.selection.setNode(yt.value)),lt.value.undoManager.add(),qt()}}function oK(lt,$n){const an=Ql(!1),Xt=Ql(null),yt=Ql(["video","audio"]),Ut=Ql(""),Zn=Ql(""),Mt={icon:"embed",tooltip:EF.global.t("wysiwyg_options.media"),onAction:qe=>{if(an.value=!0,qe.isActive()){if(lt.value.selection.getContent()===null)return;Ut.value=lt.value.selection.getContent(),Zn.value=Ut.value}else Xt.value=null},onSetup:qe=>{const tt=jn=>{qe.setActive(jn.element.tagName==="SPAN"&&jn.element.classList.contains("mce-preview-object"))};return lt.value.on("NodeChange",tt),function(){lt.value.off("NodeChange",tt)}}},qt=n2({get(){var qe;return(qe=Xt.value)==null?void 0:qe.sourceUrl},set(qe){Xt.value={...Xt.value,sourceUrl:qe},Xt.value.previewUrl=_t(qe,$n.value)}}),eo=n2({get(){var qe;return(qe=Xt.value)==null?void 0:qe.width},set(qe){Xt.value!==null&&(Xt.value={...Xt.value,width:qe})}}),Cn=n2({get(){var qe;return(qe=Xt.value)==null?void 0:qe.height},set(qe){Xt.value!==null&&(Xt.value={...Xt.value,height:qe})}});return o2(Xt,qe=>{if(Ut.value===""){if(qe===null)return;Ut.value=`<${qe.tag} width="${qe.width}" height="${qe.height}" controls><source src="${qe.sourceUrl}" type="${qe.type}" /></${qe.tag}>`}else Ut.value=Ut.value.replace(/src=".*?"/g,`src="${qe==null?void 0:qe.sourceUrl}"`).replace(/width=".*?"/g,`width="${qe==null?void 0:qe.width}"`).replace(/height=".*?"/g,`height="${qe==null?void 0:qe.height}"`).replace(/type=".*?"/g,`type="${qe==null?void 0:qe.type}"`).replaceAll(/<(video|audio|iframe)/g,`<${qe==null?void 0:qe.tag}`).replaceAll(/<\/(video|audio|iframe)/g,`</${qe==null?void 0:qe.tag}`)}),o2(Ut,qe=>{var tt,jn,Ct,q,Fe;if(qe==="")Xt.value=null;else{const En=(tt=/<(video|audio|iframe)/g.exec(qe))==null?void 0:tt[1],nt=((jn=/src="(.*?)"/g.exec(qe))==null?void 0:jn[1])||void 0,W=Number((Ct=/width="(.*?)"/g.exec(qe))==null?void 0:Ct[1])||void 0,St=Number((q=/height="(.*?)"/g.exec(qe))==null?void 0:q[1])||void 0,Gt=((Fe=/type="(.*?)"/g.exec(qe))==null?void 0:Fe[1])||void 0;if(nt===void 0)return;const cn=_t(nt,$n.value);Xt.value={tag:En,sourceUrl:nt,width:W,height:St,type:Gt,previewUrl:cn}}}),{mediaDrawerOpen:an,mediaSelection:Xt,closeMediaDrawer:Qt,openMediaTab:yt,onMediaSelect:Sn,embed:Ut,saveMedia:Nt,startEmbed:Zn,mediaHeight:Cn,mediaWidth:eo,mediaSource:qt,mediaButton:Mt};function Qt(){Ut.value="",Zn.value="",Xt.value=null,an.value=!1,yt.value=["video"]}function Sn(qe){const tt=TF()+"assets/"+qe.id,jn=qe.type.startsWith("audio")?"audio":"video";Xt.value={sourceUrl:_t(tt,$n.value),width:qe.width||300,height:qe.height||150,tag:jn,type:qe.type,previewUrl:_t(tt,$n.value)}}function Nt(){if(lt.value.fire("focus"),Ut.value!==""){if(Zn.value!==""){const qe=lt.value.getContent().replace(Zn.value,Ut.value);lt.value.setContent(qe)}else lt.value.selection.setContent(Ut.value);lt.value.undoManager.add(),Qt()}}function _t(qe,tt){if(!qe.includes(TF()+"assets/"))return qe;try{const jn=new URL(qe),Ct=new URLSearchParams(jn.search);return tt?Ct.set("access_token",tt):Ct.delete("access_token"),Array.from(Ct).length>0?`${jn.origin}${jn.pathname}?${Ct.toString()}`:`${jn.origin}${jn.pathname}`}catch{return qe}}}function sK(lt){const $n=Ql(!1),an=Ql(),Xt={icon:"sourcecode",tooltip:EF.global.t("wysiwyg_options.source_code"),onAction:()=>{$n.value=!0,an.value=lt.value.getContent()}};return{codeDrawerOpen:$n,code:an,closeCodeDrawer:yt,saveCode:Ut,sourceCodeButton:Xt};function yt(){$n.value=!1}function Ut(){lt.value.fire("focus"),lt.value.setContent(an.value),lt.value.undoManager.add(),yt()}}var rK={exports:{}};(function(lt){(function(){var $n=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},an=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Xt=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},yt=function(e,n){return Ut(function(o,r){return e.eq(n(o),n(r))})},Ut=function(e){return{eq:e}},Zn=Ut(function(e,n){return e===n}),Mt=Zn,qt=function(e){return Ut(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},eo=function(e,n){return yt(qt(e),function(o){return Xt(o,n)})},Cn=function(e){return Ut(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!eo(Mt).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},Qt=Ut(function(e,n){if(e===n)return!0;var o=$n(e),r=$n(n);return o!==r?!1:an(o)?e===n:o==="array"?qt(Qt).eq(e,n):o==="object"?Cn(Qt).eq(e,n):!1});const Sn=Object.getPrototypeOf,Nt=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},_t=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Nt(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},qe=e=>n=>_t(n)===e,tt=e=>n=>typeof n===e,jn=e=>n=>e===n,Ct=(e,n)=>Fe(e)&&Nt(e,n,(o,r)=>Sn(o)===r),q=qe("string"),Fe=qe("object"),En=e=>Ct(e,Object),nt=qe("array"),W=jn(null),St=tt("boolean"),Gt=jn(void 0),cn=e=>e==null,Ae=e=>!cn(e),le=tt("function"),Bo=tt("number"),ro=(e,n)=>{if(nt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Wt=()=>{},A=(e,n)=>(...o)=>e(n.apply(null,o)),lo=(e,n)=>o=>e(n(o)),rt=e=>()=>e,Ho=e=>e,ln=(e,n)=>e===n;function Ke(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const vo=e=>n=>!e(n),Gs=e=>()=>{throw new Error(e)},mo=e=>e(),qs=e=>{e()},Ze=rt(!1),ut=rt(!0);class L{constructor(n,o){this.tag=n,this.value=o}static some(n){return new L(!0,n)}static none(){return L.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?L.some(n(this.value)):L.none()}bind(n){return this.tag?n(this.value):L.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:L.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Ae(n)?L.some(n):L.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}L.singletonNone=new L(!1);const Lr=Array.prototype.slice,io=Array.prototype.indexOf,as=Array.prototype.push,Vo=(e,n)=>io.call(e,n),kc=(e,n)=>{const o=Vo(e,n);return o===-1?L.none():L.some(o)},An=(e,n)=>Vo(e,n)>-1,Xo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},tn=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},we=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},vt=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},So=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},It=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Ks=(e,n,o)=>(vt(e,(r,c)=>{o=n(o,r,c)}),o),zo=(e,n,o)=>(we(e,(r,c)=>{o=n(o,r,c)}),o),jr=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return L.some(u);if(o(u,r))break}return L.none()},bs=(e,n)=>jr(e,n,Ze),Qs=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return L.some(o)}return L.none()},lc=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!nt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);as.apply(n,e[o])}return n},er=(e,n)=>lc(tn(e,n)),gs=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},es=e=>{const n=Lr.call(e,0);return n.reverse(),n},ma=(e,n)=>It(e,o=>!An(n,o)),Ne=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Xe=(e,n)=>{const o=Lr.call(e,0);return o.sort(n),o},rn=(e,n)=>n>=0&&n<e.length?L.some(e[n]):L.none(),$t=e=>rn(e,0),to=e=>rn(e,e.length-1),Jo=le(Array.from)?Array.from:e=>Lr.call(e),ir=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return L.none()},Hn=(e,n)=>{const o=[],r=le(n)?c=>Xo(o,u=>n(u,c)):c=>An(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},cs=Object.keys,ur=Object.hasOwnProperty,mt=(e,n)=>{const o=cs(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},po=(e,n)=>Dr(e,(o,r)=>({k:r,v:n(o,r)})),Dr=(e,n)=>{const o={};return mt(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},fa=e=>(n,o)=>{e[o]=n},ga=(e,n,o,r)=>{mt(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},ha=(e,n)=>{const o={},r={};return ga(e,n,fa(o),fa(r)),{t:o,f:r}},ls=(e,n)=>{const o={};return ga(e,n,fa(o),Wt),o},Ta=(e,n)=>{const o=[];return mt(e,(r,c)=>{o.push(n(r,c))}),o},Ya=e=>Ta(e,Ho),is=(e,n)=>wn(e,n)?L.from(e[n]):L.none(),wn=(e,n)=>ur.call(e,n),wr=(e,n)=>wn(e,n)&&e[n]!==void 0&&e[n]!==null,Xa=(e,n,o=Qt)=>Cn(o).eq(e,n),Uc=e=>{const n={};return we(e,o=>{n[o]={}}),cs(n)},fl=e=>e.length!==void 0,tr=Array.isArray,nr=e=>{if(tr(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},zs=(e,n,o)=>{if(!e)return!1;if(o=o||e,fl(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(wn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},La=(e,n)=>{const o=[];return zs(e,(r,c)=>{o.push(n(r,c,e))}),o},gl=(e,n)=>{const o=[];return zs(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},Fr=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},ce=(e,n,o,r)=>{let c=Gt(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},se=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},Oe=e=>e[e.length-1],He=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},fn=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=c||!u&&f&&r("(min-device-width:768px)"),E=u||f&&!y,M=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,N=!E&&!y&&!M;return{isiPad:rt(c),isiPhone:rt(u),isTablet:rt(y),isPhone:rt(E),isTouch:rt(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:rt(M),isDesktop:rt(N)}},Tn=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},no=(e,n)=>{const o=Tn(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Un(r(1),r(2))},Rs=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?he():no(e,o)},he=()=>Un(0,0),Un=(e,n)=>({major:e,minor:n}),Us={nu:Un,detect:Rs,unknown:he},br=(e,n)=>ir(n.brands,o=>{const r=o.brand.toLowerCase();return bs(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:Us.nu(parseInt(o.version,10),0)}))}),Kr=(e,n)=>{const o=String(n).toLowerCase();return bs(e,r=>r.search(o))},ts=(e,n)=>Kr(e,n).map(o=>{const r=Us.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Dl=(e,n)=>Kr(e,n).map(o=>{const r=Us.detect(o.versionRegexes,n);return{current:o.name,version:r}}),ic=(e,n)=>e.substring(n),ra=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Rr=(e,n)=>qo(e,n)?ic(e,n.length):e,$o=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Gt(r)?!0:c+n.length<=r:!1},qo=(e,n)=>ra(e,n,0),vr=(e,n)=>ra(e,n,e.length-n.length),aa=e=>n=>n.replace(e,""),_c=aa(/^\s+|\s+$/g),ei=aa(/^\s+/g),Xc=aa(/\s+$/g),Uo=e=>e.length>0,dr=e=>!Uo(e),Ea=(e,n)=>n<=0?"":new Array(n+1).join(e),Rl=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?L.none():L.some(o)},pa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,As=e=>n=>$o(n,e),hs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>$o(e,"edge/")&&$o(e,"chrome")&&$o(e,"safari")&&$o(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,pa],search:e=>$o(e,"chrome")&&!$o(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>$o(e,"msie")||$o(e,"trident")},{name:"Opera",versionRegexes:[pa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:As("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:As("firefox")},{name:"Safari",versionRegexes:[pa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>($o(e,"safari")||$o(e,"mobile/"))&&$o(e,"applewebkit")}],Fa=[{name:"Windows",search:As("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>$o(e,"iphone")||$o(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:As("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:As("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:As("linux"),versionRegexes:[]},{name:"Solaris",search:As("sunos"),versionRegexes:[]},{name:"FreeBSD",search:As("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:As("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ml={browsers:rt(hs),oses:rt(Fa)},Ko="Edge",Yr="Chromium",ba="IE",Sr="Opera",Ha="Firefox",hl="Safari",Xr=()=>Ja({current:void 0,version:Us.unknown()}),Ja=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(Ko),isChromium:r(Yr),isIE:r(ba),isOpera:r(Sr),isFirefox:r(Ha),isSafari:r(hl)}},Ac={unknown:Xr,nu:Ja,edge:rt(Ko),chromium:rt(Yr),ie:rt(ba),opera:rt(Sr),firefox:rt(Ha),safari:rt(hl)},iu="Windows",uc="iOS",Nl="Android",va="Linux",pl="macOS",Pl="Solaris",ti="FreeBSD",Nu="ChromeOS",Fi=()=>j({current:void 0,version:Us.unknown()}),j=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(iu),isiOS:r(uc),isAndroid:r(Nl),isMacOS:r(pl),isLinux:r(va),isSolaris:r(Pl),isFreeBSD:r(ti),isChromeOS:r(Nu)}},de={unknown:Fi,nu:j,windows:rt(iu),ios:rt(uc),android:rt(Nl),linux:rt(va),macos:rt(pl),solaris:rt(Pl),freebsd:rt(ti),chromeos:rt(Nu)},ze={detect:(e,n,o)=>{const r=Ml.browsers(),c=Ml.oses(),u=n.bind(y=>br(r,y)).orThunk(()=>ts(r,e)).fold(Ac.unknown,Ac.nu),f=Dl(c,e).fold(de.unknown,de.nu),b=fn(f,u,e,o);return{browser:u,os:f,deviceType:b}}},wt=e=>window.matchMedia(e).matches;let kn=He(()=>ze.detect(navigator.userAgent,L.from(navigator.userAgentData),wt));const ko=()=>kn(),xr=navigator.userAgent,Io=ko(),No=Io.browser,Wo=Io.os,Hr=Io.deviceType,Ci=xr.indexOf("Windows Phone")!==-1,Ot={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:No.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!No.isIE(),windowsPhone:Ci,browser:{current:No.current,version:No.version,isChromium:No.isChromium,isEdge:No.isEdge,isFirefox:No.isFirefox,isIE:No.isIE,isOpera:No.isOpera,isSafari:No.isSafari},os:{current:Wo.current,version:Wo.version,isAndroid:Wo.isAndroid,isChromeOS:Wo.isChromeOS,isFreeBSD:Wo.isFreeBSD,isiOS:Wo.isiOS,isLinux:Wo.isLinux,isMacOS:Wo.isMacOS,isSolaris:Wo.isSolaris,isWindows:Wo.isWindows},deviceType:{isDesktop:Hr.isDesktop,isiPad:Hr.isiPad,isiPhone:Hr.isiPhone,isPhone:Hr.isPhone,isTablet:Hr.isTablet,isTouch:Hr.isTouch,isWebView:Hr.isWebView}},Zd=/^\s*|\s*$/g,Ns=e=>cn(e)?"":(""+e).replace(Zd,""),B=(e,n)=>n?n==="array"&&tr(e)?!0:typeof e===n:e!==void 0,X=(e,n,o={})=>{const r=q(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},oe=wn,De=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(wn(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Bt=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),zs(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Bt(c,n,o,r),!0)))},at={trim:Ns,isArray:tr,is:B,toArray:nr,makeMap:X,each:zs,map:La,grep:gl,inArray:Fr,hasOwn:oe,extend:De,walk:Bt,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>nt(e)?e:e===""?[]:La(e.split(n||","),Ns),_addCacheSuffix:e=>{const n=Ot.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},xs=(e,n,o=ln)=>e.exists(r=>o(r,n)),Qa=(e,n,o=ln)=>Vr(e,n,o).getOr(e.isNone()&&n.isNone()),Ms=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Vr=(e,n,o)=>e.isSome()&&n.isSome()?L.some(o(e.getOrDie(),n.getOrDie())):L.none(),bl=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?L.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):L.none(),_o=(e,n)=>e?L.some(n):L.none(),ec=typeof window<"u"?window:Function("return this;")(),Zs=(e,n)=>{let o=n??ec;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},ni=(e,n)=>{const o=e.split(".");return Zs(o,n)},Ys=(e,n)=>ni(e,n),Pu=(e,n)=>{const o=Ys(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Pm=Object.getPrototypeOf,Ag=e=>Pu("HTMLElement",e),or=e=>{const n=ni("ownerDocument.defaultView",e);return Fe(e)&&(Ag(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Pm(e).constructor.name))},Bl=8,ya=9,ka=11,tc=1,jd=3,Ao=e=>e.dom.nodeName.toLowerCase(),dc=e=>e.dom.nodeType,Va=e=>n=>dc(n)===e,K=e=>dc(e)===Bl||Ao(e)==="#comment",ne=e=>xe(e)&&or(e.dom),xe=Va(tc),Re=Va(jd),hn=Va(ya),bo=Va(ka),Ps=e=>n=>xe(n)&&Ao(n)===e,Ca=(e,n,o)=>{if(q(o)||St(o)||Bo(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Co=(e,n,o)=>{Ca(e.dom,n,o)},Jr=(e,n)=>{const o=e.dom;mt(n,(r,c)=>{Ca(o,c,r)})},js=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Mr=(e,n)=>L.from(js(e,n)),Tr=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},yr=(e,n)=>{e.dom.removeAttribute(n)},Wc=e=>{const n=e.dom.attributes;return n==null||n.length===0},oi=e=>zo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),_a=(e,n)=>{const o=js(e,n);return o===void 0||o===""?[]:o.split(" ")},Zc=(e,n,o)=>{const c=_a(e,n).concat([o]);return Co(e,n,c.join(" ")),!0},wi=(e,n,o)=>{const r=It(_a(e,n),c=>c!==o);return r.length>0?Co(e,n,r.join(" ")):yr(e,n),!1},Si=e=>e.dom.classList!==void 0,Cf=e=>_a(e,"class"),Bu=(e,n)=>Zc(e,"class",n),si=(e,n)=>wi(e,"class",n),Oc=(e,n)=>An(Cf(e),n)?si(e,n):Bu(e,n),$u=(e,n)=>{Si(e)?e.dom.classList.add(n):Bu(e,n)},Gd=e=>{(Si(e)?e.dom.classList:Cf(e)).length===0&&yr(e,"class")},Hi=(e,n)=>{Si(e)?e.dom.classList.remove(n):si(e,n),Gd(e)},Og=(e,n)=>{const o=Si(e)?e.dom.classList.toggle(n):Oc(e,n);return Gd(e),o},qd=(e,n)=>Si(e)&&e.dom.classList.contains(n),Dg=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return fd(r.childNodes[0])},md=(e,n)=>{const r=(n||document).createElement(e);return fd(r)},Rg=(e,n)=>{const r=(n||document).createTextNode(e);return fd(r)},fd=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ie={fromHtml:Dg,fromTag:md,fromText:Rg,fromDom:fd,fromPoint:(e,n,o)=>L.from(e.dom.elementFromPoint(n,o)).map(fd)},Bm=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Jc=(e,n)=>{const o=e.dom;if(o.nodeType!==tc)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},uu=e=>e.nodeType!==tc&&e.nodeType!==ya&&e.nodeType!==ka||e.childElementCount===0,Mg=(e,n)=>{const o=n===void 0?document:n.dom;return uu(o)?[]:tn(o.querySelectorAll(e),ie.fromDom)},Lh=(e,n)=>{const o=n===void 0?document:n.dom;return uu(o)?L.none():L.from(o.querySelector(e)).map(ie.fromDom)},ns=(e,n)=>e.dom===n.dom,ri=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},vl=e=>ie.fromDom(e.dom.ownerDocument),Aa=e=>hn(e)?e:vl(e),gd=e=>ie.fromDom(Aa(e).dom.documentElement),xi=e=>ie.fromDom(Aa(e).dom.defaultView),mc=e=>L.from(e.dom.parentNode).map(ie.fromDom),Ti=e=>L.from(e.dom.parentElement).map(ie.fromDom),Ng=(e,n)=>{const o=le(n)?n:Ze;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=ie.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},Fh=e=>{const n=o=>It(o,r=>!ns(e,r));return mc(e).map(Oa).map(n).getOr([])},$l=e=>L.from(e.dom.previousSibling).map(ie.fromDom),Ei=e=>L.from(e.dom.nextSibling).map(ie.fromDom),Pg=e=>es(Bm(e,$l)),jc=e=>Bm(e,Ei),Oa=e=>tn(e.dom.childNodes,ie.fromDom),Iu=(e,n)=>{const o=e.dom.childNodes;return L.from(o[n]).map(ie.fromDom)},Kd=e=>Iu(e,0),ai=e=>Iu(e,e.dom.childNodes.length-1),nc=e=>e.dom.childNodes.length,wf=e=>e.dom.hasChildNodes(),Hh=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ie.fromDom(n)},$m=e=>bo(e)&&Ae(e.dom.host),Yd=le(Element.prototype.attachShadow)&&le(Node.prototype.getRootNode),Xd=rt(Yd),du=Yd?e=>ie.fromDom(e.dom.getRootNode()):Aa,Sf=e=>$m(e)?e:Hh(Aa(e)),d1=e=>$m(e)?e:ie.fromDom(Aa(e).dom.body),Vh=e=>{const n=du(e);return $m(n)?L.some(n):L.none()},Bg=e=>ie.fromDom(e.dom.host),Jd=e=>{if(Xd()&&Ae(e.target)){const n=ie.fromDom(e.target);if(xe(n)&&xf(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return $t(o)}}return L.from(e.target)},xf=e=>Ae(e.dom.shadowRoot),hd=e=>{const n=Re(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Vh(ie.fromDom(n)).fold(()=>o.body.contains(n),lo(hd,Bg))};var zr=(e,n,o,r,c)=>e(o,r)?L.some(o):le(c)&&c(o)?L.none():n(o,r,c);const mr=(e,n,o)=>{let r=e.dom;const c=le(o)?o:Ze;for(;r.parentNode;){r=r.parentNode;const u=ie.fromDom(r);if(n(u))return L.some(u);if(c(u))break}return L.none()},Da=(e,n,o)=>zr((c,u)=>u(c),mr,e,n,o),$g=(e,n)=>{const o=e.dom;return o.parentNode?zh(ie.fromDom(o.parentNode),r=>!ns(e,r)&&n(r)):L.none()},zh=(e,n)=>{const o=c=>n(ie.fromDom(c));return bs(e.dom.childNodes,o).map(ie.fromDom)},za=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=ie.fromDom(r.childNodes[c]);if(n(u))return L.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return L.none()};return o(e.dom)},gn=(e,n,o)=>mr(e,r=>Jc(r,n),o),Lu=(e,n)=>Lh(n,e),pd=(e,n,o)=>zr((c,u)=>Jc(c,u),gn,e,n,o),Gc=e=>pd(e,"[contenteditable]"),os=(e,n=!1)=>hd(e)?e.dom.isContentEditable:Gc(e).fold(rt(n),o=>Ig(o)==="true"),Ig=e=>e.dom.contentEditable,Qd=e=>e.style!==void 0&&le(e.style.getPropertyValue),Im=(e,n,o)=>{if(!q(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Qd(e)&&e.style.setProperty(n,o)},Lg=(e,n)=>{Qd(e)&&e.style.removeProperty(n)},ao=(e,n,o)=>{const r=e.dom;Im(r,n,o)},Ra=(e,n)=>{const o=e.dom;mt(n,(r,c)=>{Im(o,c,r)})},yl=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!hd(e)?Il(o,n):c},Il=(e,n)=>Qd(e)?e.style.getPropertyValue(n):"",Dc=(e,n)=>{const o=e.dom,r=Il(o,n);return L.from(r).filter(c=>c.length>0)},Rc=e=>{const n={},o=e.dom;if(Qd(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},Qr=(e,n)=>{const o=e.dom;Lg(o,n),xs(Mr(e,"style").map(_c),"")&&yr(e,"style")},Fg=e=>e.dom.offsetWidth,oc=(e,n)=>{mc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Vi=(e,n)=>{Ei(e).fold(()=>{mc(e).each(c=>{ea(c,n)})},r=>{oc(r,n)})},zi=(e,n)=>{Kd(e).fold(()=>{ea(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},ea=(e,n)=>{e.dom.appendChild(n.dom)},Ur=(e,n)=>{oc(e,n),ea(n,e)},Uh=(e,n)=>{we(n,(o,r)=>{const c=r===0?e:n[r-1];Vi(c,o)})},ci=(e,n)=>{we(n,o=>{ea(e,o)})},ki=e=>{e.dom.textContent="",we(Oa(e),n=>{Bs(n)})},Bs=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Ll=e=>{const n=Oa(e);n.length>0&&Uh(e,n),Bs(e)},bd=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Oa(ie.fromDom(r))},$s=e=>tn(e,ie.fromDom),em=e=>e.dom.innerHTML,qc=(e,n)=>{const r=vl(e).dom,c=ie.fromDom(r.createDocumentFragment()),u=bd(n,r);ci(c,u),ki(e),ea(e,c)},wo=e=>{const n=ie.fromTag("div"),o=ie.fromDom(e.dom.cloneNode(!0));return ea(n,o),em(n)},vd=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),Lm=e=>{const n=ie.fromDom(Jd(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=A(r,o);return vd(n,e.clientX,e.clientY,o,r,c,e)},Tf=(e,n)=>o=>{e(o)&&n(Lm(o))},Wh=(e,n,o,r,c)=>{const u=Tf(o,r);return e.dom.addEventListener(n,u,c),{unbind:Ke(m1,e,n,u,c)}},Ef=(e,n,o,r)=>Wh(e,n,o,r,!1),m1=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},x=(e,n)=>({left:e,top:n,translate:(r,c)=>x(e+r,n+c)}),R=x,V=e=>{const n=e.getBoundingClientRect();return R(n.left,n.top)},re=(e,n)=>e!==void 0?e:n!==void 0?n:0,ge=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return R(o.offsetLeft,o.offsetTop);const u=re(r==null?void 0:r.pageYOffset,c.scrollTop),f=re(r==null?void 0:r.pageXOffset,c.scrollLeft),b=re(c.clientTop,o.clientTop),y=re(c.clientLeft,o.clientLeft);return Je(e).translate(f-y,u-b)},Je=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?R(r.offsetLeft,r.offsetTop):hd(e)?V(n):R(0,0)},On=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return R(o,r)},Jn=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},Gn=(e,n)=>{ko().browser.isSafari()&&le(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Dn=e=>{const n=e===void 0?window:e;return ko().browser.isFirefox()?L.none():L.from(n.visualViewport)},sr=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Er=e=>{const n=e===void 0?window:e,o=n.document,r=On(ie.fromDom(o));return Dn(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return sr(r.left,r.top,u,f)},c=>sr(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},Cl=(e,n)=>It(Oa(e),n),Ui=(e,n)=>{let o=[];return we(Oa(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Ui(r,n))}),o},fc=(e,n)=>Mg(n,e),f1=(e,n,o)=>mr(e,n,o).isSome(),Qb=(e,n)=>$g(e,n).isSome(),Sy=(e,n)=>za(e,n).isSome();class gc{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Fm="\uFEFF",sc=" ",Ua=e=>e===Fm,Nn=e=>e.replace(/\uFEFF/g,""),tm=/^[ \t\r\n]*$/,mu=e=>tm.test(e),kf=e=>{for(const n of e)if(!Ua(n))return!1;return!0},xy=e=>" \f	\v".indexOf(e)!==-1,Zh=e=>e===`
`||e==="\r",fu=(e,n)=>n<e.length&&n>=0?Zh(e[n]):!1,Hg=(e,n=4,o=!0,r=!0)=>{const c=Ea(" ",n),u=e.replace(/\t/g,c);return zo(u,(b,y)=>xy(y)||y===sc?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||fu(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+sc}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Zh(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},gu=e=>n=>!!n&&n.nodeType===e,wa=e=>!!e&&!Object.getPrototypeOf(e),nn=gu(1),hu=e=>nn(e)&&ne(ie.fromDom(e)),g1=e=>nn(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",_f=e=>{const n=e.toLowerCase();return o=>Ae(o)&&o.nodeName.toLowerCase()===n},Wi=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return An(n,r)}return!1}},pu=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(nn(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},Ty=e=>n=>nn(n)&&n.hasAttribute(e),bu=e=>nn(e)&&e.hasAttribute("data-mce-bogus"),ev=e=>nn(e)&&e.getAttribute("data-mce-bogus")==="all",Fu=e=>nn(e)&&e.tagName==="TABLE",Nr=e=>n=>!!(hu(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),li=Wi(["textarea","input"]),st=gu(3),vu=gu(4),Fl=gu(7),yd=gu(8),ca=gu(9),hc=gu(11),Pr=_f("br"),Qe=_f("img"),ta=Nr("true"),fr=Nr("false"),Gr=Wi(["td","th"]),Hu=Wi(["td","th","caption"]),Vu=Wi(["video","audio","object","embed"]),Zi=_f("li"),h1=_f("details"),nm=_f("summary"),p1={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},ii=(e,n,o)=>{const r=ie.fromDom(n),c=ie.fromDom(e),u=o.getWhitespaceElements();return f1(c,b=>wn(u,Ao(b)),Ke(ns,r))},ms=e=>nn(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),zu=(e,n)=>nn(e)&&wn(n.getNonEmptyElements(),e.nodeName),Hm=Ty("data-mce-bookmark"),rc=e=>Ti(ie.fromDom(e)).exists(n=>!os(n)),b1=(e,n,o)=>mu(e.data)&&!ii(e,n,o),om=(e,n,o,r)=>st(e)&&!b1(e,n,o)&&(!r.includeZwsp||!kf(e.data)),Vg=(e,n,o,r)=>le(r.isContent)&&r.isContent(n)||zu(n,e)||Hm(n)||ms(n)||om(n,o,e,r)||fr(n)||ta(n)&&rc(n),qr=(e,n,o)=>{const r={...p1,...o};if(r.checkRootAsContent&&Vg(e,n,n,r))return!1;let c=n.firstChild,u=0;if(!c)return!0;const f=new gc(c,n);do{if(r.skipBogus&&nn(c)){const b=c.getAttribute("data-mce-bogus");if(b){c=f.next(b==="all");continue}}if(yd(c)){c=f.next(!0);continue}if(Pr(c)){u++,c=f.next();continue}if(Vg(e,c,n,r))return!1;c=f.next()}while(c);return u<=1},Wa=(e,n,o)=>qr(e,n.dom,{checkRootAsContent:!0,...o}),ke=(e,n,o)=>Vg(e,n,n,{includeZwsp:p1.includeZwsp,...o}),rr=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},Af=e=>{const n=rr(L.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(L.some(b))}}},ji=e=>{const n=rr(L.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(L.some(setInterval(b,e)))}}},Mc=()=>{const e=Af(Wt);return{...e,on:o=>e.get().each(o)}},pc=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},kr=e=>pc(e)!=="html",S=e=>kr(e.nodeName),k=e=>pc(e.nodeName),F=["svg","math"],J=()=>{const e=Mc(),n=()=>e.get().map(k).getOr("html");return{track:c=>(S(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},me="data-mce-block",je=e=>It(cs(e),n=>!/[A-Z]/.test(n)),pt=e=>tn(je(e),n=>{const o=CSS.escape(n);return`${o}:`+tn(F,r=>`not(${r} ${o})`).join(":")}).join(","),Jt=(e,n)=>Ae(n.querySelector(e))?(n.setAttribute(me,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(me),!1),qn=(e,n)=>{const o=pt(e.getTransparentElements()),r=pt(e.getBlockElements());return It(n.querySelectorAll(o),c=>Jt(r,c))},go=(e,n,o)=>{var r;const c=o?"lastChild":"firstChild";for(let u=n[c];u;u=u[c])if(qr(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},vs=(e,n,o)=>{const r=document.createRange(),c=n.parentNode;if(c){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();go(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();go(e,f,!1),qr(e,u,{checkRootAsContent:!0})||c.insertBefore(u,n),qr(e,o,{checkRootAsContent:!0})||c.insertBefore(o,n),qr(e,f,{checkRootAsContent:!0})||c.insertBefore(f,n),c.removeChild(n)}},ss=(e,n,o)=>{const r=e.getBlockElements(),c=ie.fromDom(n),u=b=>Ao(b)in r,f=b=>ns(b,c);we($s(o),b=>{mr(b,u,f).each(y=>{const E=Cl(b,M=>u(M)&&!e.isValidChild(Ao(y),Ao(M)));if(E.length>0){const M=Ti(y);we(E,N=>{mr(N,u,f).each($=>{vs(e,$.dom,N.dom)})}),M.each(N=>qn(e,N.dom))}})})},gr=(e,n,o)=>{we([...o,...Gi(e,n)?[n]:[]],r=>we(fc(ie.fromDom(r),r.nodeName.toLowerCase()),c=>{yu(e,c.dom)&&Ll(c)}))},Qc=(e,n)=>{const o=qn(e,n);ss(e,n,o),gr(e,n,o)},Uu=(e,n)=>{if(Vm(e,n)){const o=pt(e.getBlockElements());Jt(o,n)}},wl=(e,n,o)=>{const r=u=>ns(u,ie.fromDom(n)),c=Ng(ie.fromDom(o),r);rn(c,c.length-2).filter(xe).fold(()=>Qc(e,n),u=>Qc(e,u.dom))},Wu=e=>e.hasAttribute(me),sm=(e,n)=>wn(e.getTransparentElements(),n),Vm=(e,n)=>nn(n)&&sm(e,n.nodeName),Gi=(e,n)=>Vm(e,n)&&Wu(n),yu=(e,n)=>Vm(e,n)&&!Wu(n),Of=(e,n)=>n.type===1&&sm(e,n.name)&&q(n.attr(me)),jh=ko().browser,zg=e=>bs(e,xe),v1=e=>jh.isFirefox()&&Ao(e)==="table"?zg(Oa(e)).filter(n=>Ao(n)==="caption").bind(n=>zg(jc(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,Ma=(e,n)=>e.children&&An(e.children,n),Do=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&yl(ie.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!Ma(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!Ma(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=v1(ie.fromDom(n))}return{x:r,y:c}},Xs=(e,n={})=>{let o=0;const r={},c=ie.fromDom(e),u=Aa(c),f=be=>{n.referrerPolicy=be},b=be=>{n.contentCssCors=be},y=be=>{ea(Sf(c),be)},E=be=>{const ye=Sf(c);Lu(ye,"#"+be).each(Bs)},M=be=>is(r,be).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),N=be=>new Promise((ye,ve)=>{let Te;const et=at._addCacheSuffix(be),xt=M(et);r[et]=xt,xt.count++;const Vt=(Ht,bn)=>{we(Ht,qs),xt.status=bn,xt.passed=[],xt.failed=[],Te&&(Te.onload=null,Te.onerror=null,Te=null)},it=()=>Vt(xt.passed,2),Le=()=>Vt(xt.failed,3);if(ye&&xt.passed.push(ye),ve&&xt.failed.push(ve),xt.status===1)return;if(xt.status===2){it();return}if(xt.status===3){Le();return}xt.status=1;const Ge=ie.fromTag("link",u.dom);Jr(Ge,{rel:"stylesheet",type:"text/css",id:xt.id}),n.contentCssCors&&Co(Ge,"crossOrigin","anonymous"),n.referrerPolicy&&Co(Ge,"referrerpolicy",n.referrerPolicy),Te=Ge.dom,Te.onload=it,Te.onerror=Le,y(Ge),Co(Ge,"href",et)}),$=(be,ye)=>{const ve=M(be);r[be]=ve,ve.count++;const Te=ie.fromTag("style",u.dom);Jr(Te,{rel:"stylesheet",type:"text/css",id:ve.id}),Te.dom.innerHTML=ye,y(Te)},G=be=>Promise.allSettled(tn(be,ve=>N(ve).then(rt(ve)))).then(ve=>{const Te=So(ve,et=>et.status==="fulfilled");return Te.fail.length>0?Promise.reject(tn(Te.fail,et=>et.reason)):tn(Te.pass,et=>et.value)}),ee=be=>{const ye=at._addCacheSuffix(be);is(r,ye).each(ve=>{--ve.count===0&&(delete r[ye],E(ve.id))})};return{load:N,loadRawCss:$,loadAll:G,unload:ee,unloadRawCss:be=>{is(r,be).each(ye=>{--ye.count===0&&(delete r[be],E(ye.id))})},unloadAll:be=>{we(be,ye=>{ee(ye)})},_setReferrerPolicy:f,_setContentCssCors:b}},Hl=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=du(o).dom;return L.from(e.get(u)).getOrThunk(()=>{const f=Xs(u,r);return e.set(u,f),f})}}})(),ui=e=>e.nodeName.toLowerCase()==="span",Ug=(e,n)=>Ae(e)&&(ke(n,e)||n.isInline(e.nodeName.toLowerCase())),Cd=(e,n,o)=>{const r=new gc(e,n).prev(!1),c=new gc(e,n).next(!1),u=Gt(r)||Ug(r,o),f=Gt(c)||Ug(c,o);return u&&f},rm=e=>ui(e)&&e.getAttribute("data-mce-type")==="bookmark",am=(e,n,o)=>st(e)&&e.data.length>0&&Cd(e,n,o),wd=e=>nn(e)?e.childNodes.length>0:!1,Df=e=>hc(e)||ca(e),qi=(e,n,o,r)=>{var c;const u=r||n;if(nn(n)&&rm(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)qi(e,f[b],o,u);if(nn(n)){const b=n.childNodes;b.length===1&&rm(b[0])&&((c=n.parentNode)===null||c===void 0||c.insertBefore(b[0],n))}return!Df(n)&&!ke(o,n)&&!wd(n)&&!am(n,u,o)&&e.remove(n),n},s2=at.makeMap,cm=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zm=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wg=/[<>&\"\']/g,r2=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,y1={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Rf={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ey={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},la=e=>{const n=ie.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},ky=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!Rf[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},Zu=ky("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Um=(e,n)=>e.replace(n?cm:zm,o=>Rf[o]||o),Mf=e=>(""+e).replace(Wg,n=>Rf[n]||n),ju=(e,n)=>e.replace(n?cm:zm,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Rf[o]||"&#"+o.charCodeAt(0)+";"),di=(e,n,o)=>{const r=o||Zu;return e.replace(n?cm:zm,c=>Rf[c]||r[c]||c)},Nf={encodeRaw:Um,encodeAllRaw:Mf,encodeNumeric:ju,encodeNamed:di,getEncodeFunc:(e,n)=>{const o=ky(n)||Zu,r=(f,b)=>f.replace(b?cm:zm,y=>Rf[y]!==void 0?Rf[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),c=(f,b)=>di(f,b,o),u=s2(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:di:u.numeric?ju:Um},decode:e=>e.replace(r2,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):y1[o]||String.fromCharCode(o)):Ey[n]||Zu[n]||la(n))},bc=(e,n)=>(e=at.trim(e),e?e.split(n||" "):[]),nv=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),w1=e=>Fe(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",S1=e=>{const n=o=>nt(o)?tn(o,n):w1(o)?new RegExp(o.source,o.flags):Fe(o)?po(o,n):o;return n(e)},a2=e=>{const n=/^(~)?(.+)$/;return er(bc(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},Zg=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),lm=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},el=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=lm(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(n),phrasingContent:c(o),flowContent:c(r)})},Gu={html4:He(()=>el("html4")),html5:He(()=>el("html5")),"html5-strict":He(()=>el("html5-strict"))},Wm=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Gu[e]();return n==="blocks"?L.some(o):n==="phrasing"?L.some(r):n==="flow"?L.some(c):L.none()},_y=e=>{const n=Zg(e),{phrasingContent:o,flowContent:r}=lm(e),c={},u=(y,E,M)=>{c[y]={attributes:Ne(E,rt({})),attributesOrder:E,children:Ne(M,rt({}))}},f=(y,E="",M="")=>{const N=bc(M),$=bc(y);let G=$.length;const ee=[...n,...bc(E)];for(;G--;)u($[G],ee.slice(),N)},b=(y,E)=>{const M=bc(y),N=bc(E);let $=M.length;for(;$--;){const G=c[M[$]];for(let ee=0,Y=N.length;ee<Y;ee++)G.attributes[N[ee]]={},G.attributesOrder.push(N[ee])}};return e!=="html5-strict"&&(we(bc("acronym applet basefont big font strike tt"),M=>{f(M,"",o)}),we(bc("center dir isindex noframes"),M=>{f(M,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&we([c.video,c.audio],y=>{delete y.children.audio,delete y.children.video}),we(bc("a form meter progress dfn"),y=>{c[y]&&delete c[y].children[y]}),delete c.caption.children.table,delete c.script,c},x1=e=>e==="-"?"remove":"add",T1=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return L.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},c2=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return er(bc(e,","),o=>{const r=n.exec(o);if(r){const c=r[1],u=c?x1(c):"replace",f=r[2],b=er(bc(r[3],"|"),y=>T1(y).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},l2=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=n;return we(bc(e,"|"),f=>{const b=o.exec(f);if(b){const y={},E=b[1],M=b[2].replace(/[\\:]:/g,":"),N=b[3],$=b[4];if(E==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(M),y.required=!0),E==="-"){delete c[M],u.splice(at.inArray(u,M),1);return}if(N&&(N==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:M,value:$}),y.defaultValue=$):N==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:M,value:$}),y.forcedValue=$):N==="<"&&(y.validValues=at.makeMap($,"?"))),r.test(M)){const G=y;n.attributePatterns=n.attributePatterns||[],G.pattern=nv(M),n.attributePatterns.push(G)}else c[M]||u.push(M),c[M]=y}})},i2=(e,n)=>{mt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},E1=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return er(bc(n,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],b=c[3],y=c[4],E=c[5],M={attributes:{},attributesOrder:[]};if(e.each(N=>i2(N,M)),u==="#"?M.paddEmpty=!0:u==="-"&&(M.removeEmpty=!0),y==="!"&&(M.removeEmptyAttrs=!0),E&&l2(E,M),b&&(M.outputName=f),f==="@")if(e.isNone())e=L.some(M);else return[];return[b?{name:f,element:M,aliasName:b}:{name:f,element:M}]}else return[]})},Gh={},Ro=at.makeMap,dn=at.each,Pf=at.extend,k1=at.explode,ov=(e,n={})=>{const o=Ro(e," ",Ro(e.toUpperCase()," "));return Pf(o,n)},u2=e=>ov("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),_1=(e,n)=>{if(e){const o={};return q(e)&&(e={"*":e}),dn(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?Ro(r,/[, ]/):k1(r,/[, ]/)}),o}else return},ys=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(yn,Go,$r)=>{const sa=e[yn];if(sa)return Ro(sa,/[, ]/,Ro(sa.toUpperCase(),/[, ]/));{let Ia=Gh[yn];return Ia||(Ia=ov(Go,$r),Gh[yn]=Ia),Ia}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",E=_y(y);e.verify_html===!1&&(e.valid_elements="*[*]");const M=_1(e.valid_styles),N=_1(e.invalid_styles,"map"),$=_1(e.valid_classes,"map"),G=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ee=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Y=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),te=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),be="td th iframe video audio object script code",ye=b("non_empty_elements",be+" pre svg textarea summary",Y),ve=b("move_caret_before_on_enter_elements",be+" table",Y),Te="h1 h2 h3 h4 h5 h6",et=b("text_block_elements",Te+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),xt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",et),Vt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),it=b("transparent_elements","a ins del canvas map"),Le=b("wrap_block_elements","pre "+Te);dn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),yn=>{f[yn]=new RegExp("</"+yn+"[^>]*>","gi")});const Ge=yn=>{const Go=L.from(o["@"]),$r=/[*?+]/;we(E1(Go,yn??""),({name:sa,element:Ia,aliasName:Ec})=>{if(Ec&&(o[Ec]=Ia),$r.test(sa)){const Sa=Ia;Sa.pattern=nv(sa),c.push(Sa)}else o[sa]=Ia})},Ht=yn=>{c=[],we(cs(o),Go=>{delete o[Go]}),Ge(yn)},bn=(yn,Go)=>{var $r,sa;delete Gh.text_block_elements,delete Gh.block_elements;const Ia=Go.extends?!Ru(Go.extends):!1,Ec=Go.extends;if(r[yn]=Ec?r[Ec]:{},u[yn]=Ec??yn,ye[yn.toUpperCase()]={},ye[yn]={},Ia||(xt[yn.toUpperCase()]={},xt[yn]={}),Ec&&!o[yn]&&o[Ec]){const Sa=S1(o[Ec]);delete Sa.removeEmptyAttrs,delete Sa.removeEmpty,o[yn]=Sa}else o[yn]={attributesOrder:[],attributes:{}};if(nt(Go.attributes)){const Sa=Xl=>{xa.attributesOrder.push(Xl),xa.attributes[Xl]={}},xa=($r=o[yn])!==null&&$r!==void 0?$r:{};delete xa.attributesDefault,delete xa.attributesForced,delete xa.attributePatterns,delete xa.attributesRequired,xa.attributesOrder=[],xa.attributes={},we(Go.attributes,Xl=>{const Am=Zg(y);T1(Xl).each(({preset:Om,name:Ud})=>{Om?Ud==="global"&&we(Am,Sa):Sa(Ud)})}),o[yn]=xa}if(St(Go.padEmpty)){const Sa=(sa=o[yn])!==null&&sa!==void 0?sa:{};Sa.paddEmpty=Go.padEmpty,o[yn]=Sa}if(nt(Go.children)){const Sa={},xa=Am=>{Sa[Am]={}},Xl=Am=>{Wm(y,Am).each(Om=>{we(Om,xa)})};we(Go.children,Am=>{T1(Am).each(({preset:Om,name:Ud})=>{Om?Xl(Ud):xa(Ud)})}),r[yn]=Sa}Ec&&mt(r,(Sa,xa)=>{Sa[Ec]&&(r[xa]=Sa=Pf({},r[xa]),Sa[yn]=Sa[Ec])})},uo=yn=>{we(a2(yn??""),({name:Go,cloneName:$r})=>{bn(Go,{extends:$r})})},Lo=yn=>{Fe(yn)?mt(yn,(Go,$r)=>bn($r,Go)):q(yn)&&uo(yn)},_s=yn=>{we(c2(yn??""),({operation:Go,name:$r,validChildren:sa})=>{const Ia=Go==="replace"?{"#comment":{}}:r[$r],Ec=xa=>{Go==="remove"?delete Ia[xa]:Ia[xa]={}},Sa=xa=>{Wm(y,xa).each(Xl=>{we(Xl,Ec)})};we(sa,({preset:xa,name:Xl})=>{xa?Sa(Xl):Ec(Xl)}),r[$r]=Ia})},Fs=yn=>{const Go=o[yn];if(Go)return Go;let $r=c.length;for(;$r--;){const sa=c[$r];if(sa.pattern.test(yn))return sa}},pr=()=>{e.valid_elements?(Ht(e.valid_elements),dn(E,(yn,Go)=>{r[Go]=yn.children})):(dn(E,(yn,Go)=>{o[Go]={attributes:yn.attributes,attributesOrder:yn.attributesOrder},r[Go]=yn.children}),dn(bc("strong/b em/i"),yn=>{const Go=bc(yn,"/");o[Go[1]].outputName=Go[0]}),dn(Vt,(yn,Go)=>{o[Go]&&(e.padd_empty_block_inline_children&&(o[Go].paddInEmptyBlock=!0),o[Go].removeEmpty=!0)}),dn(bc("ol ul blockquote a table tbody"),yn=>{o[yn]&&(o[yn].removeEmpty=!0)}),dn(bc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),yn=>{o[yn]&&(o[yn].paddEmpty=!0)}),dn(bc("span"),yn=>{o[yn].removeEmptyAttrs=!0})),delete o.svg,Lo(e.custom_elements),_s(e.valid_children),Ge(e.extended_valid_elements),_s("+ol[ul|ol],+ul[ul|ol]"),dn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(yn,Go)=>{o[Go]&&(o[Go].parentsRequired=bc(yn))}),e.invalid_elements&&dn(k1(e.invalid_elements),yn=>{o[yn]&&delete o[yn]}),Fs("span")||Ge("span[!data-mce-type|*]")},il=rt(M),Hs=rt(N),Rt=rt($),un=rt(te),rs=rt(xt),Ft=rt(et),Rn=rt(Vt),xo=rt(Object.seal(Y)),zt=rt(ee),ho=rt(ye),To=rt(ve),Tc=rt(G),Ss=rt(it),qa=rt(Le),Vd=rt(Object.seal(f)),_m=(yn,Go)=>{const $r=r[yn.toLowerCase()];return!!($r&&$r[Go.toLowerCase()])},bi=(yn,Go)=>{const $r=Fs(yn);if($r)if(Go){if($r.attributes[Go])return!0;const sa=$r.attributePatterns;if(sa){let Ia=sa.length;for(;Ia--;)if(sa[Ia].pattern.test(Go))return!0}}else return!0;return!1},Ru=yn=>wn(rs(),yn),zd=yn=>!qo(yn,"#")&&bi(yn)&&!Ru(yn),Mu=yn=>wn(qa(),yn)||zd(yn),ld=rt(u);return pr(),{type:y,children:r,elements:o,getValidStyles:il,getValidClasses:Rt,getBlockElements:rs,getInvalidStyles:Hs,getVoidElements:xo,getTextBlockElements:Ft,getTextInlineElements:Rn,getBoolAttrs:un,getElementRule:Fs,getSelfClosingElements:zt,getNonEmptyElements:ho,getMoveCaretBeforeOnEnterElements:To,getWhitespaceElements:Tc,getTransparentElements:Ss,getSpecialElements:Vd,isValidChild:_m,isValid:bi,isBlock:Ru,isInline:zd,isWrapper:Mu,getCustomElements:ld,addValidElements:Ge,setValidElements:Ht,addCustomElements:Lo,addValidChildren:_s}},d2=e=>({value:Kk(e)}),Kk=e=>Rr(e,"#").toUpperCase(),qh=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Ye=e=>{const n=qh(e.red)+qh(e.green)+qh(e.blue);return d2(n)},Kh=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Yk=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Bf=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),m2=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return Bf(c,u,f,b)},jg=e=>{if(e==="transparent")return L.some(Bf(0,0,0,0));const n=Kh.exec(e);if(n!==null)return L.some(m2(n[1],n[2],n[3],"1"));const o=Yk.exec(e);return o!==null?L.some(m2(o[1],o[2],o[3],o[4])):L.none()},Ay=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Sd=e=>jg(e).map(Ye).map(n=>"#"+n.value).getOr(e),Oy=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u=/rgba *\(/i,f={};let b,y;const E=Fm;n&&(b=n.getValidStyles(),y=n.getInvalidStyles());const M=(`\\" \\' \\; \\: ; : `+E).split(" ");for(let $=0;$<M.length;$++)f[M[$]]=E+$,f[E+$]=M[$];const N={parse:$=>{const G={};let ee=!1;const Y=e.url_converter,te=e.url_converter_scope||N,be=(Le,Ge,Ht)=>{const bn=G[Le+"-top"+Ge];if(!bn)return;const uo=G[Le+"-right"+Ge];if(!uo)return;const Lo=G[Le+"-bottom"+Ge];if(!Lo)return;const _s=G[Le+"-left"+Ge];if(!_s)return;const Fs=[bn,uo,Lo,_s];let pr=Fs.length-1;for(;pr--&&Fs[pr]===Fs[pr+1];);pr>-1&&Ht||(G[Le+Ge]=pr===-1?Fs[0]:Fs.join(" "),delete G[Le+"-top"+Ge],delete G[Le+"-right"+Ge],delete G[Le+"-bottom"+Ge],delete G[Le+"-left"+Ge])},ye=Le=>{const Ge=G[Le];if(!Ge)return;const Ht=Ge.indexOf(",")>-1?[Ge]:Ge.split(" ");let bn=Ht.length;for(;bn--;)if(Ht[bn]!==Ht[0])return!1;return G[Le]=Ht[0],!0},ve=(Le,Ge,Ht,bn)=>{ye(Ge)&&ye(Ht)&&ye(bn)&&(G[Le]=G[Ge]+" "+G[Ht]+" "+G[bn],delete G[Ge],delete G[Ht],delete G[bn])},Te=Le=>(ee=!0,f[Le]),et=(Le,Ge)=>(ee&&(Le=Le.replace(/\uFEFF[0-9]/g,Ht=>f[Ht])),Ge||(Le=Le.replace(/\\([\'\";:])/g,"$1")),Le),xt=Le=>String.fromCharCode(parseInt(Le.slice(1),16)),Vt=Le=>Le.replace(/\\[0-9a-f]+/gi,xt),it=(Le,Ge,Ht,bn,uo,Lo)=>{if(uo=uo||Lo,uo)return uo=et(uo),"'"+uo.replace(/\'/g,"\\'")+"'";if(Ge=et(Ge||Ht||bn||""),!e.allow_script_urls){const _s=Ge.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(_s)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(_s))return""}return Y&&(Ge=Y.call(te,Ge,"style")),"url('"+Ge.replace(/\'/g,"\\'")+"')"};if($){$=$.replace(/[\u0000-\u001F]/g,""),$=$.replace(/\\[\"\';:\uFEFF]/g,Te).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ge=>Ge.replace(/[;:]/g,Te));let Le;for(;Le=r.exec($);){r.lastIndex=Le.index+Le[0].length;let Ge=Le[1].replace(c,"").toLowerCase(),Ht=Le[2].replace(c,"");if(Ge&&Ht){if(Ge=Vt(Ge),Ht=Vt(Ht),Ge.indexOf(E)!==-1||Ge.indexOf('"')!==-1||!e.allow_script_urls&&(Ge==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ht)))continue;Ge==="font-weight"&&Ht==="700"?Ht="bold":(Ge==="color"||Ge==="background-color")&&(Ht=Ht.toLowerCase()),u.test(Ht)||jg(Ht).each(bn=>{Ht=Sd(Ay(bn)).toLowerCase()}),Ht=Ht.replace(o,it),G[Ge]=ee?et(Ht,!0):Ht}}be("border","",!0),be("border","-width"),be("border","-color"),be("border","-style"),be("padding",""),be("margin",""),ve("border","border-width","border-style","border-color"),G.border==="medium none"&&delete G.border,G["border-image"]==="none"&&delete G["border-image"]}return G},serialize:($,G)=>{let ee="";const Y=(be,ye)=>{const ve=ye[be];if(ve)for(let Te=0,et=ve.length;Te<et;Te++){const xt=ve[Te],Vt=$[xt];Vt&&(ee+=(ee.length>0?" ":"")+xt+": "+Vt+";")}},te=(be,ye)=>{if(!y||!ye)return!0;let ve=y["*"];return ve&&ve[be]?!1:(ve=y[ye],!(ve&&ve[be]))};return G&&b?(Y("*",b),Y(G,b)):mt($,(be,ye)=>{be&&te(ye,G)&&(ee+=(ee.length>0?" ":"")+ye+": "+be+";")}),ee}};return N},Yh={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},_r=e=>e instanceof Event||le(e.initEvent),im=e=>e.isDefaultPrevented===ut||e.isDefaultPrevented===Ze,f2=e=>cn(e.preventDefault)||_r(e),qu=(e,n)=>{const o=n??{};for(const r in e)wn(Yh,r)||(o[r]=e[r]);return Ae(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Ae(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Ae(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Dy=(e,n,o,r)=>{var c;const u=qu(n,r);return u.type=e,cn(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),f2(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=ut,le(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=ut,le(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=ut,u.stopPropagation()},im(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?ut:Ze,u.isPropagationStopped=u.cancelBubble===!0?ut:Ze,u.isImmediatePropagationStopped=Ze)),u},A1="mce-data-",Xh=/^(?:mouse|contextmenu)|click/,O1=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},_i=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},g2=e=>Ae(e)&&Xh.test(e.type),D1=(e,n)=>{const o=Dy(e.type,e,document,n);if(g2(e)&&Gt(e.pageX)&&!Gt(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},Ry=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{_i(e,"DOMContentLoaded",f),_i(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():O1(e,"DOMContentLoaded",f),o.domLoaded||O1(e,"load",f)};class $f{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=A1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,y=$=>{u.executeHandlers(D1($||b.event),E)};if(!n||st(n)||yd(n))return r;let E;n[u.expando]?E=n[u.expando]:(E=u.count++,n[u.expando]=E,u.events[E]={}),c=c||n;const M=o.split(" ");let N=M.length;for(;N--;){let $=M[N],G=y,ee=!1,Y=!1;if($==="DOMContentLoaded"&&($="ready"),u.domLoaded&&$==="ready"&&n.readyState==="complete"){r.call(c,D1({type:$}));continue}!u.hasFocusIn&&($==="focusin"||$==="focusout")&&(ee=!0,Y=$==="focusin"?"focus":"blur",G=te=>{const be=D1(te||b.event);be.type=be.type==="focus"?"focusin":"focusout",u.executeHandlers(be,E)}),f=u.events[E][$],f?$==="ready"&&u.domLoaded?r(D1({type:$})):f.push({func:r,scope:c}):(u.events[E][$]=f=[{func:r,scope:c}],f.fakeName=Y,f.capture=ee,f.nativeHandler=G,$==="ready"?Ry(n,G,u):O1(n,Y||$,G,ee))}return n=f=null,r}unbind(n,o,r){if(!n||st(n)||yd(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],E=u[y];if(E){if(r){let M=E.length;for(;M--;)if(E[M].func===r){const N=E.nativeHandler,$=E.fakeName,G=E.capture,ee=E.slice(0,M).concat(E.slice(M+1));ee.nativeHandler=N,ee.fakeName=$,ee.capture=G,u[y]=ee}}(!r||E.length===0)&&(delete u[y],_i(n,E.fakeName||y,E.nativeHandler,E.capture))}}}else mt(u,(f,b)=>{_i(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(wn(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||st(n)||yd(n))return this;const c=D1({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||st(n)||yd(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}$f.Event=new $f;const My=at.each,h2=at.grep,Ny="data-mce-style",p2=at.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Sl=(e,n,o)=>{cn(o)||o===""?yr(e,n):Co(e,n,o)},Ai=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),ft=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&st(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},sv=(e,n)=>{const o=js(n,"style"),r=e.serialize(e.parse(o),Ao(n));Sl(n,Ny,r)},Nc=(e,n)=>Bo(e)?wn(p2,n)?e+"":e+"px":e,rv=(e,n,o)=>{const r=Ai(n);cn(o)||o===""?Qr(e,r):ao(e,r,Nc(o,r))},b2=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,y)=>{const E=ie.fromDom(f);le(n.url_converter)&&Ae(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const M="data-mce-"+y;Sl(E,M,b),Sl(E,y,b)},get:(f,b)=>{const y=ie.fromDom(f);return js(y,"data-mce-"+b)||js(y,b)}},u={style:{set:(f,b)=>{const y=ie.fromDom(f);r&&Sl(y,Ny,b),yr(y,"style"),q(b)&&Ra(y,e.parse(b))},get:f=>{const b=ie.fromDom(f),y=js(b,Ny)||js(b,"style");return e.serialize(e.parse(y),Ao(b))}}};return r&&(u.href=u.src=c),u},hr=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,y=Hl.forElement(ie.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),E=[],M=n.schema?n.schema:ys({}),N=Oy({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),$=n.ownEvents?new $f:$f.Event,G=M.getBlockElements(),ee=Me=>q(Me)?wn(G,Me):nn(Me)&&(wn(G,Me.nodeName)||Gi(M,Me)),Y=Me=>Me&&e&&q(Me)?e.getElementById(Me):Me,te=Me=>{const Be=Y(Me);return Ae(Be)?ie.fromDom(Be):null},be=(Me,Be,At="")=>{let bt;const Fn=te(Me);if(Ae(Fn)&&xe(Fn)){const Po=yy[Be];Po&&Po.get?bt=Po.get(Fn.dom,Be):bt=js(Fn,Be)}return Ae(bt)?bt:At},ye=Me=>{const Be=Y(Me);return cn(Be)?[]:Be.attributes},ve=(Me,Be,At)=>{un(Me,bt=>{if(nn(bt)){const Fn=ie.fromDom(bt),Po=At===""?null:At,Ir=js(Fn,Be),Rm=yy[Be];Rm&&Rm.set?Rm.set(Fn.dom,Po,Be):Sl(Fn,Be,Po),Ir!==Po&&n.onSetAttrib&&n.onSetAttrib({attrElm:Fn.dom,attrName:Be,attrValue:Po})}})},Te=(Me,Be)=>Me.cloneNode(Be),et=()=>n.root_element||e.body,xt=Me=>{const Be=Er(Me);return{x:Be.x,y:Be.y,w:Be.width,h:Be.height}},Vt=(Me,Be)=>Do(e.body,Y(Me),Be),it=(Me,Be,At)=>{un(Me,bt=>{const Fn=ie.fromDom(bt);rv(Fn,Be,At),n.update_styles&&sv(N,Fn)})},Le=(Me,Be)=>{un(Me,At=>{const bt=ie.fromDom(At);mt(Be,(Fn,Po)=>{rv(bt,Po,Fn)}),n.update_styles&&sv(N,bt)})},Ge=(Me,Be,At)=>{const bt=Y(Me);if(!(cn(bt)||!hu(bt)&&!g1(bt)))return At?yl(ie.fromDom(bt),Ai(Be)):(Be=Be.replace(/-(\D)/g,(Fn,Po)=>Po.toUpperCase()),Be==="float"&&(Be="cssFloat"),bt.style?bt.style[Be]:void 0)},Ht=Me=>{const Be=Y(Me);if(!Be)return{w:0,h:0};let At=Ge(Be,"width"),bt=Ge(Be,"height");return(!At||At.indexOf("px")===-1)&&(At="0"),(!bt||bt.indexOf("px")===-1)&&(bt="0"),{w:parseInt(At,10)||Be.offsetWidth||Be.clientWidth,h:parseInt(bt,10)||Be.offsetHeight||Be.clientHeight}},bn=Me=>{const Be=Y(Me),At=Vt(Be),bt=Ht(Be);return{x:At.x,y:At.y,w:bt.w,h:bt.h}},uo=(Me,Be)=>{if(!Me)return!1;const At=nt(Me)?Me:[Me];return Xo(At,bt=>Jc(ie.fromDom(bt),Be))},Lo=(Me,Be,At,bt)=>{const Fn=[];let Po=Y(Me);bt=bt===void 0;const Ir=At||(et().nodeName!=="BODY"?et().parentNode:null);if(q(Be))if(Be==="*")Be=nn;else{const Rm=Be;Be=XS=>uo(XS,Rm)}for(;Po&&!(Po===Ir||cn(Po.nodeType)||ca(Po)||hc(Po));){if(!Be||Be(Po))if(bt)Fn.push(Po);else return[Po];Po=Po.parentNode}return bt?Fn:null},_s=(Me,Be,At)=>{const bt=Lo(Me,Be,At,!1);return bt&&bt.length>0?bt[0]:null},Fs=(Me,Be,At)=>{let bt=Be;if(Me){q(Be)&&(bt=Fn=>uo(Fn,Be));for(let Fn=Me[At];Fn;Fn=Fn[At])if(le(bt)&&bt(Fn))return Fn}return null},pr=(Me,Be)=>Fs(Me,Be,"nextSibling"),il=(Me,Be)=>Fs(Me,Be,"previousSibling"),Hs=Me=>le(Me.querySelectorAll),Rt=(Me,Be)=>{var At,bt;const Fn=(bt=(At=Y(Be))!==null&&At!==void 0?At:n.root_element)!==null&&bt!==void 0?bt:e;return Hs(Fn)?Jo(Fn.querySelectorAll(Me)):[]},un=function(Me,Be,At){const bt=At??this;if(nt(Me)){const Fn=[];return My(Me,(Po,Ir)=>{const Rm=Y(Po);Rm&&Fn.push(Be.call(bt,Rm,Ir))}),Fn}else{const Fn=Y(Me);return Fn?Be.call(bt,Fn):!1}},rs=(Me,Be)=>{un(Me,At=>{mt(Be,(bt,Fn)=>{ve(At,Fn,bt)})})},Ft=(Me,Be)=>{un(Me,At=>{const bt=ie.fromDom(At);qc(bt,Be)})},Rn=(Me,Be,At,bt,Fn)=>un(Me,Po=>{const Ir=q(Be)?e.createElement(Be):Be;return Ae(At)&&rs(Ir,At),bt&&(!q(bt)&&bt.nodeType?Ir.appendChild(bt):q(bt)&&Ft(Ir,bt)),Fn?Ir:Po.appendChild(Ir)}),xo=(Me,Be,At)=>Rn(e.createElement(Me),Me,Be,At,!0),zt=Nf.decode,ho=Nf.encodeAllRaw,To=(Me,Be,At="")=>{let bt="<"+Me;for(const Fn in Be)wr(Be,Fn)&&(bt+=" "+Fn+'="'+ho(Be[Fn])+'"');return dr(At)&&wn(M.getVoidElements(),Me)?bt+" />":bt+">"+At+"</"+Me+">"},Tc=Me=>{const Be=e.createElement("div"),At=e.createDocumentFragment();At.appendChild(Be),Me&&(Be.innerHTML=Me);let bt;for(;bt=Be.firstChild;)At.appendChild(bt);return At.removeChild(Be),At},Ss=(Me,Be)=>un(Me,At=>{const bt=ie.fromDom(At);return Be&&we(Oa(bt),Fn=>{Re(Fn)&&Fn.dom.length===0?Bs(Fn):oc(bt,Fn)}),Bs(bt),bt.dom}),qa=Me=>un(Me,Be=>{const At=Be.attributes;for(let bt=At.length-1;bt>=0;bt--)Be.removeAttributeNode(At.item(bt))}),Vd=Me=>N.parse(Me),_m=(Me,Be)=>N.serialize(Me,Be),bi=Me=>{if(xg!==hr.DOM&&e===document){if(o[Me])return;o[Me]=!0}let Be=e.getElementById("mceDefaultStyles");if(!Be){Be=e.createElement("style"),Be.id="mceDefaultStyles",Be.type="text/css";const At=e.head;At.firstChild?At.insertBefore(Be,At.firstChild):At.appendChild(Be)}Be.styleSheet?Be.styleSheet.cssText+=Me:Be.appendChild(e.createTextNode(Me))},Ru=Me=>{Me||(Me=""),we(Me.split(","),Be=>{c[Be]=!0,y.load(Be).catch(Wt)})},zd=(Me,Be,At)=>{un(Me,bt=>{if(nn(bt)){const Fn=ie.fromDom(bt),Po=Be.split(" ");we(Po,Ir=>{Ae(At)?(At?$u:Hi)(Fn,Ir):Og(Fn,Ir)})}})},Mu=(Me,Be)=>{zd(Me,Be,!0)},ld=(Me,Be)=>{zd(Me,Be,!1)},yn=(Me,Be)=>{const At=te(Me),bt=Be.split(" ");return Ae(At)&&gs(bt,Fn=>qd(At,Fn))},Go=Me=>{un(Me,Be=>Qr(ie.fromDom(Be),"display"))},$r=Me=>{un(Me,Be=>ao(ie.fromDom(Be),"display","none"))},sa=Me=>{const Be=te(Me);return Ae(Be)&&xs(Dc(Be,"display"),"none")},Ia=Me=>(Me||"mce_")+u++,Ec=Me=>{const Be=te(Me);return Ae(Be)?nn(Be.dom)?Be.dom.outerHTML:wo(Be):""},Sa=(Me,Be)=>{un(Me,At=>{nn(At)&&(At.outerHTML=Be)})},xa=(Me,Be)=>{const At=Y(Be);return un(Me,bt=>{const Fn=At==null?void 0:At.parentNode,Po=At==null?void 0:At.nextSibling;return Fn&&(Po?Fn.insertBefore(bt,Po):Fn.appendChild(bt)),bt})},Xl=(Me,Be,At)=>un(Be,bt=>{var Fn;const Po=nt(Be)?Me.cloneNode(!0):Me;return At&&My(h2(bt.childNodes),Ir=>{Po.appendChild(Ir)}),(Fn=bt.parentNode)===null||Fn===void 0||Fn.replaceChild(Po,bt),bt}),Am=(Me,Be)=>{if(Me.nodeName!==Be.toUpperCase()){const At=xo(Be);return My(ye(Me),bt=>{ve(At,bt.nodeName,be(Me,bt.nodeName))}),Xl(At,Me,!0),At}else return Me},Om=(Me,Be)=>{let At=Me;for(;At;){let bt=Be;for(;bt&&At!==bt;)bt=bt.parentNode;if(At===bt)break;At=At.parentNode}return!At&&Me.ownerDocument?Me.ownerDocument.documentElement:At},Ud=(Me,Be,At)=>En(Be)?qr(M,Me,{...At,isContent:Fn=>{const Po=Fn.nodeName.toLowerCase();return!!Be[Po]}}):qr(M,Me,At),id=()=>e.createRange(),$h=(Me,Be,At)=>{let bt=id(),Fn,Po;if(Me&&Be&&Me.parentNode&&Be.parentNode){const Ir=Me.parentNode;return bt.setStart(Ir,ft(Me)),bt.setEnd(Be.parentNode,ft(Be)),Fn=bt.extractContents(),bt=id(),bt.setStart(Be.parentNode,ft(Be)+1),bt.setEnd(Ir,ft(Me)+1),Po=bt.extractContents(),Ir.insertBefore(qi(xg,Fn,M),Me),At?Ir.insertBefore(At,Me):Ir.insertBefore(Be,Me),Ir.insertBefore(qi(xg,Po,M),Me),Ss(Me),At||Be}else return},Kb=(Me,Be,At,bt)=>{if(nt(Me)){let Fn=Me.length;const Po=[];for(;Fn--;)Po[Fn]=Kb(Me[Fn],Be,At,bt);return Po}else return n.collect&&(Me===e||Me===r)&&E.push([Me,Be,At,bt]),$.bind(Me,Be,At,bt||xg)},c1=(Me,Be,At)=>{if(nt(Me)){let bt=Me.length;const Fn=[];for(;bt--;)Fn[bt]=c1(Me[bt],Be,At);return Fn}else{if(E.length>0&&(Me===e||Me===r)){let bt=E.length;for(;bt--;){const[Fn,Po,Ir]=E[bt];Me===Fn&&(!Be||Be===Po)&&(!At||At===Ir)&&$.unbind(Fn,Po,Ir)}}return $.unbind(Me,Be,At)}},KS=(Me,Be,At)=>$.dispatch(Me,Be,At),Dm=(Me,Be,At)=>$.dispatch(Me,Be,At),YS=Me=>{if(Me&&hu(Me)){const Be=Me.getAttribute("data-mce-contenteditable");return Be&&Be!=="inherit"?Be:Me.contentEditable!=="inherit"?Me.contentEditable:null}else return null},xg={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:E,styles:N,schema:M,events:$,isBlock:ee,root:null,clone:Te,getRoot:et,getViewPort:xt,getRect:bn,getSize:Ht,getParent:_s,getParents:Lo,get:Y,getNext:pr,getPrev:il,select:Rt,is:uo,add:Rn,create:xo,createHTML:To,createFragment:Tc,remove:Ss,setStyle:it,getStyle:Ge,setStyles:Le,removeAllAttribs:qa,setAttrib:ve,setAttribs:rs,getAttrib:be,getPos:Vt,parseStyle:Vd,serializeStyle:_m,addStyle:bi,loadCSS:Ru,addClass:Mu,removeClass:ld,hasClass:yn,toggleClass:zd,show:Go,hide:$r,isHidden:sa,uniqueId:Ia,setHTML:Ft,getOuterHTML:Ec,setOuterHTML:Sa,decode:zt,encode:ho,insertAfter:xa,replace:Xl,rename:Am,findCommonAncestor:Om,run:un,getAttribs:ye,isEmpty:Ud,createRng:id,nodeIndex:ft,split:$h,bind:Kb,unbind:c1,fire:Dm,dispatch:KS,getContentEditable:YS,getContentEditableParent:Me=>{const Be=et();let At=null;for(let bt=Me;bt&&bt!==Be&&(At=YS(bt),At===null);bt=bt.parentNode);return At},isEditable:Me=>{if(Ae(Me)){const Be=nn(Me)?Me:Me.parentElement;return Ae(Be)&&hu(Be)&&os(ie.fromDom(Be))}else return!1},destroy:()=>{if(E.length>0){let Me=E.length;for(;Me--;){const[Be,At,bt]=E[Me];$.unbind(Be,At,bt)}}mt(c,(Me,Be)=>{y.unload(Be),delete c[Be]})},isChildOf:(Me,Be)=>Me===Be||Be.contains(Me),dumpRng:Me=>"startContainer: "+Me.startContainer.nodeName+", startOffset: "+Me.startOffset+", endContainer: "+Me.endContainer.nodeName+", endOffset: "+Me.endOffset},yy=b2(N,n,rt(xg));return xg};hr.DOM=hr(document),hr.nodeIndex=ft;const Zm=hr.DOM,av=0,Xk=1,jm=2,cv=3;class xd{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=Zm;let u;const f=()=>{c.remove(E),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},E=c.uniqueId();u=document.createElement("script"),u.id=E,u.type="text/javascript",u.src=at._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===jm}markDone(n){this.states[n]=jm}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=av),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,E)=>{is(o.scriptLoadedCallbacks,E).each(M=>{we(M,N=>N[y](E))}),delete o.scriptLoadedCallbacks[E]},c=y=>{const E=It(y,M=>M.status==="rejected");return E.length>0?Promise.reject(er(E,({reason:M})=>nt(M)?M:[M])):Promise.resolve()},u=y=>Promise.allSettled(tn(y,E=>o.states[E]===jm?(r("resolve",E),Promise.resolve()):o.states[E]===cv?(r("reject",E),Promise.reject(E)):(o.states[E]=Xk,o.loadScript(E).then(()=>{o.states[E]=jm,r("resolve",E);const M=o.queue;return M.length>0?(o.queue=[],u(M).then(c)):Promise.resolve()},()=>(o.states[E]=cv,r("reject",E),Promise.reject(E)))))),f=y=>(o.loading=!0,u(y).then(E=>{o.loading=!1;const M=o.queueLoadedCallbacks.shift();return L.from(M).each(qs),c(E)})),b=Uc(n);return o.loading?new Promise((y,E)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(y,E)})}):f(b)}}xd.ScriptLoader=new xd;const v2=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Py=e=>Fe(e)&&wn(e,"raw"),ar=e=>nt(e)&&e.length>1,Jh={},Wr=rr("en"),y2=()=>is(Jh,Wr.get()),vc={getData:()=>po(Jh,e=>({...e})),setCode:e=>{e&&Wr.set(e)},getCode:()=>Wr.get(),add:(e,n)=>{let o=Jh[e];o||(Jh[e]=o={});const r=tn(cs(n),c=>c.toLowerCase());mt(n,(c,u)=>{const f=u.toLowerCase();f!==u&&v2(r,f)?(wn(n,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const n=y2().getOr({}),o=f=>le(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return wn(n,b)?o(n[b]):is(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(Py(e))return o(e.raw);if(ar(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(y,E)=>wn(f,E)?o(f[E]):y);return u(b)}return u(c(e))},isRtl:()=>y2().bind(e=>is(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>wn(Jh,e)},Vl=()=>{const e=[],n={},o={},r=[],c=(Y,te)=>{const be=It(r,ye=>ye.name===Y&&ye.state===te);we(be,ye=>ye.resolve())},u=Y=>wn(n,Y),f=Y=>wn(o,Y),b=Y=>{if(o[Y])return o[Y].instance},y=(Y,te)=>{const be=vc.getCode(),ye=","+(te||"")+",";!be||te&&ye.indexOf(","+be+",")===-1||xd.ScriptLoader.add(n[Y]+"/langs/"+be+".js")},E=(Y,te)=>{Vl.languageLoad!==!1&&(u(Y)?y(Y,te):ee(Y,"loaded").then(()=>y(Y,te)))},M=(Y,te)=>(e.push(te),o[Y]={instance:te},c(Y,"added"),te),N=Y=>{delete n[Y],delete o[Y]},$=(Y,te)=>q(te)?q(Y)?{prefix:"",resource:te,suffix:""}:{prefix:Y.prefix,resource:te,suffix:Y.suffix}:te,G=(Y,te)=>{if(n[Y])return Promise.resolve();let be=q(te)?te:te.prefix+te.resource+te.suffix;be.indexOf("/")!==0&&be.indexOf("://")===-1&&(be=Vl.baseURL+"/"+be),n[Y]=be.substring(0,be.lastIndexOf("/"));const ye=()=>(c(Y,"loaded"),Promise.resolve());return o[Y]?ye():xd.ScriptLoader.add(be).then(ye)},ee=(Y,te="added")=>te==="added"&&f(Y)||te==="loaded"&&u(Y)?Promise.resolve():new Promise(be=>{r.push({name:Y,state:te,resolve:be})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:E,add:M,remove:N,createUrl:$,load:G,waitFor:ee}};Vl.languageLoad=!0,Vl.baseURL="",Vl.PluginManager=Vl(),Vl.ThemeManager=Vl(),Vl.ModelManager=Vl();const R1=(e,n)=>{let o=null;return{cancel:()=>{W(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{W(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},If=(e,n)=>{let o=null;const r=()=>{W(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},By=(e,n,o)=>gn(e,n,o).isSome(),ep=rt("mce-annotation"),um=rt("data-mce-annotation"),tp=rt("data-mce-annotation-uid"),Gg=rt("data-mce-annotation-active"),Lf=rt("data-mce-annotation-classes"),dm=rt("data-mce-annotation-attrs"),qg=e=>n=>ns(n,e),Kg=(e,n)=>{const o=e.selection.getRng(),r=ie.fromDom(o.startContainer),c=ie.fromDom(e.getBody()),u=n.fold(()=>"."+ep(),y=>`[${um()}="${y}"]`),f=Iu(r,o.startOffset).getOr(r);return pd(f,u,qg(c)).bind(y=>Mr(y,`${tp()}`).bind(E=>Mr(y,`${um()}`).map(M=>{const N=lv(e,E);return{uid:E,name:M,elements:N}})))},n_=e=>xe(e)&&qd(e,ep()),$y=(e,n)=>Tr(e,"data-mce-bogus")||By(e,'[data-mce-bogus="all"]',qg(n)),lv=(e,n)=>{const o=ie.fromDom(e.getBody()),r=fc(o,`[${tp()}="${n}"]`);return It(r,c=>!$y(c,o))},C2=(e,n)=>{const o=ie.fromDom(e.getBody()),r=fc(o,`[${um()}="${n}"]`),c={};return we(r,u=>{if(!$y(u,o)){const f=js(u,tp()),b=is(c,f).getOr([]);c[f]=b.concat([u])}}),c},Iy=(e,n)=>{const o=rr({}),r=()=>({listeners:[],previous:Mc()}),c=(N,$)=>{u(N,G=>($(G),G))},u=(N,$)=>{const G=o.get(),ee=is(G,N).getOrThunk(r),Y=$(ee);G[N]=Y,o.set(G)},f=(N,$,G)=>{c(N,ee=>{we(ee.listeners,Y=>Y(!0,N,{uid:$,nodes:tn(G,te=>te.dom)}))})},b=N=>{c(N,$=>{we($.listeners,G=>G(!1,N))})},y=(N,$)=>{we(lv(e,N),G=>{$?Co(G,Gg(),"true"):yr(G,Gg())})},E=If(()=>{const N=Xe(n.getNames());we(N,$=>{u($,G=>{const ee=G.previous.get();return Kg(e,L.some($)).fold(()=>{ee.each(Y=>{b($),G.previous.clear(),y(Y,!1)})},({uid:Y,name:te,elements:be})=>{xs(ee,Y)||(ee.each(ye=>y(ye,!1)),f(te,Y,be),G.previous.set(Y),y(Y,!0))}),{previous:G.previous,listeners:G.listeners}})})},30);return e.on("remove",()=>{E.cancel()}),e.on("NodeChange",()=>{E.throttle()}),{addListener:(N,$)=>{u(N,G=>({previous:G.previous,listeners:G.listeners.concat([$])}))}}},iv=(e,n)=>{const o=um(),r=u=>L.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(tp(),null),u.attr(um(),null),u.attr(Gg(),null);const y=L.from(u.attr(dm())).map($=>$.split(",")).getOr([]),E=L.from(u.attr(Lf())).map($=>$.split(",")).getOr([]);we(y,$=>u.attr($,null));const M=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],N=ma(M,[ep()].concat(E));u.attr("class",N.length>0?N.join(" "):null),u.attr(Lf(),null),u.attr(dm(),null)};e.serializer.addTempAttr(Gg()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},Ly=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>is(e,c).map(u=>u.settings),getNames:()=>cs(e)}};let uv=0;const np=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return uv++,e+"_"+r+uv+String(o)},dv=(e,n)=>{we(n,o=>{$u(e,o)})},kR=(e,n)=>{we(n,o=>{Hi(e,o)})},o_=(e,n)=>ie.fromDom(e.dom.cloneNode(n)),Td=e=>o_(e,!1),op=e=>o_(e,!0),w2=(e,n)=>{const o=ie.fromTag(n),r=oi(e);return Jr(o,r),o},S2=(e,n)=>{const o=w2(e,n);Vi(e,o);const r=Oa(e);return ci(o,r),Bs(e),o},mv=(e,n,o=Ze)=>{const r=new gc(e,n),c=u=>{let f;do f=r[u]();while(f&&!st(f)&&!o(f));return L.from(f).filter(st)};return{current:()=>L.from(r.current()).filter(st),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},Ff=(e,n)=>{const o=n||(f=>e.isBlock(f)||Pr(f)||fr(f)),r=(f,b,y,E)=>{if(st(f)){const M=E(f,b,f.data);if(M!==-1)return L.some({container:f,offset:M})}return y().bind(M=>r(M.container,M.offset,y,E))};return{backwards:(f,b,y,E)=>{const M=mv(f,E??e.getRoot(),o);return r(f,b,()=>M.prev().map(N=>({container:N,offset:N.length})),y).getOrNull()},forwards:(f,b,y,E)=>{const M=mv(f,E??e.getRoot(),o);return r(f,b,()=>M.next().map(N=>({container:N,offset:0})),y).getOrNull()}}},Fy=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?L.from(u.dom.nodeValue):L.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Re,"text"),M1=e=>Fy.get(e),r_=e=>Fy.getOption(e),fv=(e,n)=>Fy.set(e,n),sp=["td","th"],x2=["thead","tbody","tfoot"],gv=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Hy=["li","dd","dt"],T2=["ul","ol","dl"],tl=["pre","script","textarea","style"],N1=e=>{let n;return o=>(n=n||Ne(e,ut),wn(n,Ao(o)))},Vy=e=>Ao(e)==="table",rp=e=>xe(e)&&Ao(e)==="br",E2=N1(gv),Ed=N1(T2),mi=N1(Hy),ap=N1(x2),cp=N1(sp),P1=N1(tl),a_=e=>{const n=[];let o=e.dom;for(;o;)n.push(ie.fromDom(o)),o=o.lastChild;return n},c_=e=>{const n=fc(e,"br"),o=It(a_(e).slice(-1),rp);n.length===o.length&&we(o,Bs)},lp=()=>{const e=ie.fromTag("br");return Co(e,"data-mce-bogus","1"),e},Ri=e=>{ki(e),ea(e,lp())},k2=(e,n)=>{ai(e).each(o=>{$l(o).each(r=>{n.isBlock(Ao(e))&&rp(o)&&n.isBlock(Ao(r))&&Bs(o)})})},ia=Fm,Yg=Ua,Mi=Nn,_R=e=>e.insertContent(ia,{preserve_zwsp:!0}),hv=nn,ip=st,Xg=e=>(ip(e)&&(e=e.parentNode),hv(e)&&e.hasAttribute("data-mce-caret")),kd=e=>ip(e)&&Yg(e.data),Ni=e=>Xg(e)||kd(e),zy=e=>e.firstChild!==e.lastChild||!Pr(e.firstChild),Uy=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ia),u=e.parentNode;if(n){const f=e.previousSibling;if(ip(f)){if(Ni(f))return f;if(mm(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(ip(f)){if(Ni(f))return f;if(Qg(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},Wy=e=>{const n=e.container();return st(n)?n.data.charAt(e.offset())===ia||e.isAtStart()&&kd(n.previousSibling):!1},Jg=e=>{const n=e.container();return st(n)?n.data.charAt(e.offset()-1)===ia||e.isAtEnd()&&kd(n.nextSibling):!1},l_=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(lp().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},Qg=e=>ip(e)&&e.data[0]===ia,mm=e=>ip(e)&&e.data[e.data.length-1]===ia,B1=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];bu(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Zo=e=>e&&e.hasAttribute("data-mce-caret")?(B1(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,zl=e=>Xg(e.startContainer),Cu=Math.round,Gm=e=>e?{left:Cu(e.left),top:Cu(e.top),bottom:Cu(e.bottom),right:Cu(e.right),width:Cu(e.width),height:Cu(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},cr=(e,n)=>(e=Gm(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),_2=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,pv=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,$1=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:pv(n.top-e.bottom,e,n)},bv=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:pv(n.bottom-e.top,e,n),i_=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Br=e=>zo(e,(n,o)=>n.fold(()=>L.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return L.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),L.none()),Zy=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},u_=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),d_=(e,n,o)=>Math.min(Math.max(e,n),o),up=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},jt=(e,n)=>{if(nn(e)&&e.hasChildNodes()){const o=e.childNodes,r=d_(n,0,o.length-1);return o[r]}else return e},m_=(e,n)=>{if(!(n<0&&nn(e)&&e.hasChildNodes()))return jt(e,n)},A2=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),vv=e=>q(e)&&e.charCodeAt(0)>=768&&A2.test(e),jy=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},f_=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},I1=ta,L1=fr,eh=Pr,AR=st,fm=Wi(["script","style","textarea"]),g_=Wi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),qm=Wi(["table"]),O2=Ni,_d=e=>O2(e)?!1:AR(e)?!fm(e.parentNode):g_(e)||eh(e)||qm(e)||dp(e),D2=e=>nn(e)&&e.getAttribute("unselectable")==="true",dp=e=>!D2(e)&&L1(e),h_=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(dp(o))return!1;if(I1(o))return!0}return!0},p_=e=>dp(e)?!zo(Jo(e.getElementsByTagName("*")),(n,o)=>n||I1(o),!1):!1,b_=e=>g_(e)||p_(e),Gy=(e,n)=>_d(e)&&h_(e,n),yv=nn,R2=_d,qy=pu("display","block table"),v_=pu("float","left right"),F1=f_(yv,R2,vo(v_)),Hf=vo(pu("white-space","pre pre-line pre-wrap")),mp=st,Cv=Pr,Ky=hr.nodeIndex,wv=m_,Yy=e=>e?e.createRange():hr.DOM.createRng(),Xy=e=>q(e)&&/[\r\n\t ]/.test(e),Jy=e=>!!e.setStart&&!!e.setEnd,M2=e=>{const n=e.startContainer,o=e.startOffset;if(Xy(e.toString())&&Hf(n.parentNode)&&st(n)){const r=n.data;if(Xy(r[o-1])||Xy(r[o+1]))return!0}return!1},Pc=e=>{const n=e.ownerDocument,o=Yy(n),r=n.createTextNode(sc),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Gm(o.getBoundingClientRect());return c.removeChild(r),u},y_=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&st(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Vf(u)}else return null},N2=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Vf=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Gm(r[0]):o=Gm(e.getBoundingClientRect()),!Jy(e)&&Cv(e)&&N2(o)?Pc(e):N2(o)&&Jy(e)&&(n=y_(e))!==null&&n!==void 0?n:o},th=(e,n)=>{const o=cr(e,n);return o.width=1,o.right=o.left+1,o},Qy=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&_2(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=Yy(f.ownerDocument);if(b<f.data.length){if(vv(f.data[b]))return;if(vv(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!M2(y))){o(th(Vf(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),M2(y)||o(th(Vf(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),M2(y)||o(th(Vf(y),!0)))},c=e.container(),u=e.offset();if(mp(c))return r(c,u),n;if(yv(c))if(e.isAtEnd()){const f=wv(c,u);mp(f)&&r(f,f.data.length),F1(f)&&!Cv(f)&&o(th(Vf(f),!1))}else{const f=wv(c,u);if(mp(f)&&r(f,0),F1(f)&&e.isAtEnd())return o(th(Vf(f),!1)),n;const b=wv(e.container(),e.offset()-1);F1(b)&&!Cv(b)&&(qy(b)||qy(f)||!F1(f))&&o(th(Vf(b),!1)),F1(f)&&o(th(Vf(f),!0))}return n},Pe=(e,n,o)=>{const r=()=>(mp(e),n===0),c=()=>mp(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const M=Yy(e.ownerDocument);return M.setStart(e,n),M.setEnd(e,n),M},f=()=>(o||(o=Qy(Pe(e,n))),o),b=()=>f().length>0,y=M=>M&&e===M.container()&&n===M.offset(),E=M=>wv(e,M?n-1:n);return{container:rt(e),offset:rt(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:y,getNode:E}};Pe.fromRangeStart=e=>Pe(e.startContainer,e.startOffset),Pe.fromRangeEnd=e=>Pe(e.endContainer,e.endOffset),Pe.after=e=>Pe(e.parentNode,Ky(e)+1),Pe.before=e=>Pe(e.parentNode,Ky(e)),Pe.isAbove=(e,n)=>Vr($t(n.getClientRects()),to(e.getClientRects()),$1).getOr(!1),Pe.isBelow=(e,n)=>Vr(to(n.getClientRects()),$t(e.getClientRects()),bv).getOr(!1),Pe.isAtStart=e=>e?e.isAtStart():!1,Pe.isAtEnd=e=>e?e.isAtEnd():!1,Pe.isTextPosition=e=>e?st(e.container()):!1,Pe.isElementPosition=e=>!Pe.isTextPosition(e);const gm=(e,n)=>{st(n)&&n.data.length===0&&e.remove(n)},C_=(e,n,o)=>{n.insertNode(o),gm(e,o.previousSibling),gm(e,o.nextSibling)},P2=(e,n,o)=>{const r=L.from(o.firstChild),c=L.from(o.lastChild);n.insertNode(o),r.each(u=>gm(e,u.previousSibling)),c.each(u=>gm(e,u.nextSibling))},H1=(e,n,o)=>{hc(o)?P2(e,n,o):C_(e,n,o)},wu=st,V1=bu,B2=hr.nodeIndex,eC=e=>{const n=e.parentNode;return V1(n)?eC(n):n},xl=e=>e?ce(e.childNodes,(n,o)=>(V1(o)&&o.nodeName!=="BR"?n=n.concat(xl(o)):n.push(o),n),[]):[],Sv=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&wu(o);)n+=o.data.length;return n},$2=e=>n=>e===n,w_=e=>{let n,o;n=xl(eC(e)),o=se(n,$2(e),e),n=n.slice(0,o+1);const r=ce(n,(c,u,f)=>(wu(u)&&wu(n[f-1])&&c++,c),0);return n=gl(n,Wi([e.nodeName])),o=se(n,$2(e),e),o-r},I2=e=>(wu(e)?"text()":e.nodeName.toLowerCase())+"["+w_(e)+"]",S_=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},L2=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(wu(r))u=Sv(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(I2(r));let f=S_(e,r);return f=gl(f,vo(bu)),o=o.concat(La(f,b=>I2(b))),o.reverse().join("/")+","+u},x_=(e,n,o)=>{let r=xl(e);return r=gl(r,(c,u)=>!wu(c)||!wu(r[u-1])),r=gl(r,Wi([n])),r[o]},T_=(e,n)=>{let o=e,r=0;for(;wu(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!wu(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return wu(e)&&n>e.data.length&&(n=e.data.length),Pe(e,n)},F2=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=ce(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),x_(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!wu(u)&&u.parentNode){let f;return c==="after"?f=B2(u)+1:f=B2(u),Pe(u.parentNode,f)}return T_(u,parseInt(c,10))},fp=fr,E_=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&st(c);c=c.previousSibling)r+=e(c.data).length;return r},H2=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(st(u))b.push(o?E_(n,u,f):f);else{let E=0;const M=u.childNodes;f>=M.length&&M.length&&(E=1,f=Math.max(0,M.length-1)),b.push(e.nodeIndex(M[f],o)+E)}for(let E=u;E&&E!==y;E=E.parentNode)b.push(e.nodeIndex(E,o));return b},na=(e,n,o,r)=>{const c=n.dom,u=H2(c,e,o,r,!0),f=n.isForward(),b=zl(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=H2(c,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},xv=(e,n,o)=>{let r=0;return at.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},V2=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(nn(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},z2=e=>(V2(e,!0),V2(e,!1),e),Tv=(e,n)=>{if(nn(e)&&(e=jt(e,n),fp(e)))return e;if(Ni(e)){st(e)&&Xg(e)&&(e=e.parentNode);let o=e.previousSibling;if(fp(o)||(o=e.nextSibling,fp(o)))return o}},nl=e=>Tv(e.startContainer,e.startOffset)||Tv(e.endContainer,e.endOffset),Tl=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||fp(r)){const f=r.nodeName;return{name:f,index:xv(o.dom,f,r)}}const u=nl(c);if(u){const f=u.tagName;return{name:f,index:xv(o.dom,f,u)}}return na(e,o,n,c)},U2=e=>{const n=e.getRng();return{start:L2(e.dom.getRoot(),Pe.fromRangeStart(n)),end:L2(e.dom.getRoot(),Pe.fromRangeEnd(n)),forward:e.isForward()}},W2=e=>({rng:e.getRng(),forward:e.isForward()}),tC=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Z2=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:xv(o,b,f)};const E=z2(r.cloneRange());if(!u){E.collapse(!1);const N=tC(o,c+"_end",n);H1(o,E,N)}r=z2(r),r.collapse(!0);const M=tC(o,c+"_start",n);return H1(o,r,M),e.moveToBookmark({id:c,keep:!0,forward:y}),{id:c,forward:y}},j2=(e,n,o=!1)=>n===2?Tl(Mi,o,e):n===3?U2(e):n?W2(e):Z2(e,!1),nC=Ke(Tl,Ho,!0),oC=e=>{const n=u=>u(e),o=rt(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:ut,isError:Ze,map:u=>Ul.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>L.some(e)};return c},Ev=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:Ze,isError:ut,map:n,mapError:r=>Ul.error(r(e)),bind:n,exists:Ze,forall:ut,getOr:Ho,or:Ho,getOrThunk:mo,orThunk:mo,getOrDie:Gs(String(e)),each:Wt,toOptional:L.none};return o},Ul={value:oC,error:Ev,fromOption:(e,n)=>e.fold(()=>Ev(n),oC)},Cs={generate:e=>{if(!nt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return we(e,(r,c)=>{const u=cs(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!nt(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const E=y.length;if(E!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+E);return{fold:(...N)=>{if(N.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+N.length);return N[c].apply(null,y)},match:N=>{const $=cs(N);if(n.length!==$.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+$.join(","));if(!gs(n,ee=>An($,ee)))throw new Error("Not all branches were specified when using match. Specified: "+$.join(", ")+`
Required: `+n.join(", "));return N[f].apply(null,y)},log:N=>{console.log(N,{constructors:n,constructor:f,params:y})}}}}),o}};Cs.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ad=e=>{const n=[],o=[];return we(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},z1=e=>e.type==="inline-command"||e.type==="inline-format",G2=e=>e.type==="block-command"||e.type==="block-format",kv=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,_v=e=>{var n;const o=c=>Ul.error({message:c,pattern:e}),r=(c,u,f)=>{if(e.format!==void 0){let b;if(nt(e.format)){if(!gs(e.format,q))return o(c+" pattern has non-string items in the `format` array");b=e.format}else if(q(e.format))b=[e.format];else return o(c+" pattern has non-string `format` parameter");return Ul.value(u(b))}else return e.cmd!==void 0?q(e.cmd)?Ul.value(f(e.cmd,e.value)):o(c+" pattern has non-string `cmd` parameter"):o(c+" pattern is missing both `format` and `cmd` parameters")};if(!Fe(e))return o("Raw pattern is not an object");if(!q(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!q(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let c=e.start,u=e.end;return u.length===0&&(u=c,c=""),r("Inline",f=>({type:"inline-format",start:c,end:u,format:f}),(f,b)=>({type:"inline-command",start:c,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return q(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Ul.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const c=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:c}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:c}))}}},zf=e=>It(e,G2),Bc=e=>It(e,z1),Uf=(e,n)=>({inlinePatterns:Bc(e),blockPatterns:zf(e),dynamicPatternsLookup:n}),rC=(e,n)=>({...e,blockPatterns:It(e.blockPatterns,o=>kv(o,n))}),q2=e=>{const n=Ad(tn(e,_v));return we(n.errors,o=>console.error(o.message,o.pattern)),n.values},k_=e=>n=>{const o=e(n);return q2(o)},gp=ko().deviceType,aC=gp.isTouch(),cC=hr.DOM,lC=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return zo(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[_c(u)]=_c(f),o},{})},iC=e=>Ct(e,RegExp),Kt=e=>n=>n.options.get(e),U1=e=>q(e)||Fe(e),uC=(e,n="")=>o=>{const r=q(o);if(r)if(o.indexOf("=")!==-1){const c=lC(o);return{value:is(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},hp=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:uC(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:uC(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=q(o)&&Uo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=An(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>St(o)?{valid:!0,value:o}:q(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||q(o)||ro(o,q);return r?q(o)?{value:tn(o.split(","),_c),valid:r}:nt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:rh(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=q(o)||ro(o,q);return r?{value:nt(o)?o:tn(o.split(","),_c),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=St(o)||q(o);return r?o===!1||gp.isiPhone()||gp.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!aC}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||q(o)||le(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||q(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:U1}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:U1}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:U1}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:U1}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>q(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>ro(o,Fe)||o===!1?{value:q2(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>le(o)?{value:k_(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>ro(o,iC)?{value:o,valid:!0}:iC(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=An(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=An(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:vc.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:cC.getAttrib(e.getElement(),"placeholder")})})},Ku=Kt("iframe_attrs"),__=Kt("doctype"),$c=Kt("document_base_url"),A_=Kt("body_id"),Wf=Kt("body_class"),dC=Kt("content_security_policy"),K2=Kt("br_in_pre"),ol=Kt("forced_root_block"),Zf=Kt("forced_root_block_attrs"),Av=Kt("newline_behavior"),jf=Kt("br_newline_selector"),O_=Kt("no_newline_selector"),D_=Kt("keep_styles"),Za=Kt("end_container_on_empty_block"),Na=Kt("automatic_uploads"),ja=Kt("images_reuse_filename"),Os=Kt("images_replace_blob_uris"),cc=Kt("icons"),Pa=Kt("icons_url"),mC=Kt("images_upload_url"),Ov=Kt("images_upload_base_path"),fC=Kt("images_upload_credentials"),Y2=Kt("images_upload_handler"),X2=Kt("content_css_cors"),Dv=Kt("referrer_policy"),Rv=Kt("language"),nh=Kt("language_url"),gC=Kt("indent_use_margin"),kF=Kt("indentation"),oh=Kt("content_css"),R_=Kt("content_style"),fi=Kt("font_css"),OR=Kt("directionality"),M_=Kt("inline_boundaries_selector"),Ki=Kt("object_resizing"),W1=Kt("resize_img_proportional"),Z1=Kt("placeholder"),Od=Kt("event_root"),Wl=Kt("service_message"),Gf=Kt("theme"),hC=Kt("theme_url"),Mv=Kt("model"),J2=Kt("model_url"),sh=Kt("inline_boundaries"),pC=Kt("formats"),bC=Kt("preview_styles"),Q2=Kt("format_empty_lines"),ex=Kt("format_noneditable_selector"),j1=Kt("custom_ui_selector"),rh=Kt("inline"),vC=Kt("hidden_input"),yC=Kt("submit_patch"),tx=Kt("add_form_submit_trigger"),nx=Kt("add_unload_trigger"),N_=Kt("custom_undo_redo_levels"),Nv=Kt("disable_nodechange"),ox=Kt("readonly"),P_=Kt("editable_root"),sx=Kt("content_css_cors"),G1=Kt("plugins"),B_=Kt("external_plugins"),rx=Kt("block_unsupported_drop"),Zl=Kt("visual"),CC=Kt("visual_table_class"),wC=Kt("visual_anchor_class"),SC=Kt("iframe_aria_text"),Pv=Kt("setup"),$_=Kt("init_instance_callback"),I_=Kt("urlconverter_callback"),Bv=Kt("auto_focus"),ax=Kt("browser_spellcheck"),xC=Kt("protect"),TC=Kt("paste_block_drop"),q1=Kt("paste_data_images"),EC=Kt("paste_preprocess"),cx=Kt("paste_postprocess"),lx=Kt("newdocument_content"),ix=Kt("paste_webkit_styles"),L_=Kt("paste_remove_styles_if_webkit"),ux=Kt("paste_merge_formats"),dx=Kt("smart_paste"),mx=Kt("paste_as_text"),$v=Kt("paste_tab_spaces"),pp=Kt("allow_html_data_urls"),fx=Kt("text_patterns"),F_=Kt("text_patterns_lookup"),Iv=Kt("noneditable_class"),H_=Kt("editable_class"),Yu=Kt("noneditable_regexp"),Lv=Kt("preserve_cdata"),Fv=Kt("highlight_on_focus"),Hv=Kt("xss_sanitization"),jl=Kt("init_content_sync"),qf=e=>e.options.isSet("text_patterns_lookup"),Kf=e=>at.explode(e.options.get("font_size_style_values")),V_=e=>at.explode(e.options.get("font_size_classes")),Yf=e=>e.options.get("encoding")==="xml",K1=e=>at.explode(e.options.get("images_file_types")),z_=Kt("table_tab_navigation"),U_=Kt("details_initial_state"),gx=Kt("details_serialized_state"),Vv=Kt("sandbox_iframes"),zv=e=>e.options.get("sandbox_iframes_exclusions"),W_=Kt("convert_unsafe_embeds"),Y1=Kt("license_key"),kC=Kt("api_key"),Z_=nn,_C=st,AC=e=>{const n=e.parentNode;n&&n.removeChild(e)},Uv=e=>{const n=Mi(e);return{count:e.length-n.length,text:n}},j_=e=>{let n;for(;(n=e.data.lastIndexOf(ia))!==-1;)e.deleteData(n,1)},ah=(e,n)=>(Xf(e),n),hx=(e,n)=>{const o=Uv(e.data.substr(0,n.offset())),r=Uv(e.data.substr(n.offset()));return(o.text+r.text).length>0?(j_(e),Pe(e,n.offset()-o.count)):n},OC=(e,n)=>{const o=n.container(),r=kc(Jo(o.childNodes),e).map(c=>c<n.offset()?Pe(o,n.offset()-1):n).getOr(n);return Xf(e),r},px=(e,n)=>_C(e)&&n.container()===e?hx(e,n):ah(e,n),Wv=(e,n)=>n.container()===e.parentNode?OC(e,n):ah(e,n),G_=(e,n)=>Pe.isTextPosition(n)?px(e,n):Wv(e,n),Xf=e=>{Z_(e)&&Ni(e)&&(zy(e)?e.removeAttribute("data-mce-caret"):AC(e)),_C(e)&&(j_(e),e.data.length===0&&AC(e))},DR=fr,bp=Vu,Zv=Gr,vp="*[contentEditable=false],video,audio,embed,object",yp=(e,n,o)=>{const r=cr(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},q_=e=>{var n,o;const r=fc(ie.fromDom(e),vp);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(mm(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,Qg(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},bx=(e,n,o,r)=>{const c=Mc();let u,f;const b=ol(e),y=e.dom,E=(Y,te)=>{let be;if(M(),Zv(te))return null;if(o(te)){const ye=l_(b,te,Y),ve=yp(n,te,Y);y.setStyle(ye,"top",ve.top),y.setStyle(ye,"caret-color","transparent"),f=ye;const Te=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(Te,{...ve}),y.add(n,Te),c.set({caret:Te,element:te,before:Y}),Y&&y.addClass(Te,"mce-visual-caret-before"),N(),be=te.ownerDocument.createRange(),be.setStart(ye,0),be.setEnd(ye,0)}else return f=Uy(te,Y),be=te.ownerDocument.createRange(),jv(f.nextSibling)?(be.setStart(f,0),be.setEnd(f,0)):(be.setStart(f,1),be.setEnd(f,1)),be;return be},M=()=>{q_(n),f&&(Xf(f),f=null),c.on(Y=>{y.remove(Y.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},N=()=>{u=setInterval(()=>{c.on(Y=>{r()?y.toggleClass(Y.caret,"mce-visual-caret-hidden"):y.addClass(Y.caret,"mce-visual-caret-hidden")})},500)};return{show:E,hide:M,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(Y=>{const te=yp(n,Y.element,Y.before);y.setStyles(Y.caret,{...te})})},destroy:()=>clearInterval(u)}},K_=()=>Ot.browser.isFirefox(),jv=e=>DR(e)||bp(e),Ym=e=>(jv(e)||Fu(e)&&K_())&&Ti(ie.fromDom(e)).exists(os),DC=ta,RC=fr,Y_=Vu,MC=pu("display","block table table-cell table-caption list-item"),vx=Ni,yx=Xg,Cx=nn,Cp=st,Gv=_d,ch=e=>e>0,Xm=e=>e<0,X1=(e,n)=>{let o;for(;o=e(n);)if(!yx(o))return o;return null},wp=(e,n,o,r,c)=>{const u=new gc(e,r),f=RC(e)||yx(e);let b;if(Xm(n)){if(f&&(b=X1(u.prev.bind(u),!0),o(b)))return b;for(;b=X1(u.prev.bind(u),c);)if(o(b))return b}if(ch(n)){if(f&&(b=X1(u.next.bind(u),!0),o(b)))return b;for(;b=X1(u.next.bind(u),c);)if(o(b))return b}return null},X_=(e,n)=>{const o=c=>DC(c.dom),r=c=>c.dom===n;return mr(ie.fromDom(e),o,r).map(c=>c.dom).getOr(n)},Dd=(e,n)=>{for(;e&&e!==n;){if(MC(e))return e;e=e.parentNode}return null},Yi=(e,n,o)=>Dd(e.container(),o)===Dd(n.container(),o),qv=(e,n)=>{if(!n)return L.none();const o=n.container(),r=n.offset();return Cx(o)?L.from(o.childNodes[r+e]):L.none()},J_=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},RR=(e,n,o)=>Dd(n,e)===Dd(o,e),lh=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&vx(u)&&(u=u[r]),RC(u)||Y_(u)){if(RR(n,u,c))return u;break}if(Gv(u))break;c=c.parentNode}return null},Sp=Ke(J_,!0),xp=Ke(J_,!1),sl=(e,n,o)=>{let r;const c=Ke(lh,!0,n),u=Ke(lh,!1,n),f=o.startContainer,b=o.startOffset;if(Xg(f)){const y=Cp(f)?f.parentNode:f,E=y.getAttribute("data-mce-caret");if(E==="before"&&(r=y.nextSibling,Ym(r)))return Sp(r);if(E==="after"&&(r=y.previousSibling,Ym(r)))return xp(r)}if(!o.collapsed)return o;if(st(f)){if(vx(f)){if(e===1){if(r=u(f),r)return Sp(r);if(r=c(f),r)return xp(r)}if(e===-1){if(r=c(f),r)return xp(r);if(r=u(f),r)return Sp(r)}return o}if(mm(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?Sp(r):o;if(Qg(f)&&b<=1)return e===-1&&(r=c(f),r)?xp(r):o;if(b===f.data.length)return r=u(f),r?Sp(r):o;if(b===0)return r=c(f),r?xp(r):o}return o},Kv=(e,n)=>qv(e?0:-1,n).filter(RC),ih=(e,n,o)=>{const r=sl(e,n,o);return e===-1?Pe.fromRangeStart(r):Pe.fromRangeEnd(r)},Yv=e=>L.from(e.getNode()).map(ie.fromDom),wx=e=>L.from(e.getNode(!0)).map(ie.fromDom),NC=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Xv=(e,n)=>{const o=Yi(e,n);return!o&&Pr(e.getNode())?!0:o};var yc;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(yc||(yc={}));const Jv=fr,Xu=st,PC=nn,BC=Pr,Jm=_d,Sx=b_,Jf=Gy,Qv=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},e0=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,$C=(e,n)=>{if(ch(e)){if(Jm(n.previousSibling)&&!Xu(n.previousSibling))return Pe.before(n);if(Xu(n))return Pe(n,0)}if(Xm(e)){if(Jm(n.nextSibling)&&!Xu(n.nextSibling))return Pe.after(n);if(Xu(n))return Pe(n,n.data.length)}return Xm(e)?BC(n)?Pe.before(n):Pe.after(n):Pe.before(n)},uh=(e,n)=>{const o=n.nextSibling;return o&&Jm(o)?Xu(o)?Pe(o,0):Pe.before(o):Tp(yc.Forwards,Pe.after(n),e)},Tp=(e,n,o)=>{let r,c,u,f;if(!PC(o)||!n)return null;if(n.isEqual(Pe.after(o))&&o.lastChild){if(f=Pe.after(o.lastChild),Xm(e)&&Jm(o.lastChild)&&PC(o.lastChild))return BC(o.lastChild)?Pe.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(Xu(b)){if(Xm(e)&&y>0)return Pe(b,--y);if(ch(e)&&y<b.length)return Pe(b,++y);r=b}else{if(Xm(e)&&y>0&&(c=e0(b,y-1),Jm(c)))return!Sx(c)&&(u=wp(c,e,Jf,c),u)?Xu(u)?Pe(u,u.data.length):Pe.after(u):Xu(c)?Pe(c,c.data.length):Pe.before(c);if(ch(e)&&y<b.childNodes.length&&(c=e0(b,y),Jm(c)))return BC(c)?uh(o,c):!Sx(c)&&(u=wp(c,e,Jf,c),u)?Xu(u)?Pe(u,0):Pe.before(u):Xu(c)?Pe(c,0):Pe.after(c);r=c||f.getNode()}if(r&&(ch(e)&&f.isAtEnd()||Xm(e)&&f.isAtStart())&&(r=wp(r,e,ut,o,!0),Jf(r,o)))return $C(e,r);c=r&&wp(r,e,Jf,o);const E=Oe(It(Qv(b,o),Jv));return E&&(!c||!E.contains(c))?(ch(e)?f=Pe.after(E):f=Pe.before(E),f):c?$C(e,c):null},Kc=e=>({next:n=>Tp(yc.Forwards,n,e),prev:n=>Tp(yc.Backwards,n,e)}),xx=(e,n,o)=>{const r=e?Pe.before(o):Pe.after(o);return Xi(e,n,r)},IC=e=>Pr(e)?Pe.before(e):Pe.after(e),LC=e=>Pe.isTextPosition(e)?e.offset()===0:_d(e.getNode()),Tx=e=>{if(Pe.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return _d(e.getNode(!0))},FC=(e,n)=>!Pe.isTextPosition(e)&&!Pe.isTextPosition(n)&&e.getNode()===n.getNode(!0),Ex=e=>!Pe.isTextPosition(e)&&Pr(e.getNode()),kx=(e,n,o)=>e?!FC(n,o)&&!Ex(n)&&Tx(n)&&LC(o):!FC(o,n)&&LC(n)&&Tx(o),Xi=(e,n,o)=>{const r=Kc(n);return L.from(e?r.next(o):r.prev(o))},Qm=(e,n,o)=>Xi(e,n,o).bind(r=>Yi(o,r,n)&&kx(e,o,r)?Xi(e,n,r):L.some(r)),_x=(e,n,o,r)=>Qm(e,n,o).bind(c=>r(c)?_x(e,n,c,r):L.some(c)),dh=(e,n)=>{const o=e?n.firstChild:n.lastChild;return st(o)?L.some(Pe(o,e?0:o.data.length)):o?_d(o)?L.some(e?Pe.before(o):IC(o)):xx(e,n,o):L.none()},El=Ke(Xi,!0),Pi=Ke(Xi,!1),kl=Ke(dh,!0),Ji=Ke(dh,!1),t0="_mce_caret",Qi=e=>nn(e)&&e.id===t0,mh=(e,n)=>{let o=n;for(;o&&o!==e;){if(Qi(o))return o;o=o.parentNode}return null},Q_=e=>q(e.start),Ax=e=>wn(e,"rng"),eA=e=>wn(e,"id"),Ox=e=>wn(e,"name"),Dx=e=>at.isArray(e.start),HC=e=>!Ox(e)&&St(e.forward)?e.forward:!0,VC=(e,n)=>(nn(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Ic=(e,n)=>{const o=L.from(F2(e.getRoot(),n.start)),r=L.from(F2(e.getRoot(),n.end));return Vr(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:HC(n)}})},zC=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ia);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},Qf=e=>!e.hasChildNodes(),Ep=(e,n)=>Ji(e).fold(Ze,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),UC=(e,n,o)=>Qf(n)&&mh(e,n)?(zC(n,o),!0):!1,n0=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let y=c.length-1;f&&y>=1;y--){const E=f.childNodes;if(UC(u,f,r))return!0;if(c[y]>E.length-1)return UC(u,f,r)?!0:Ep(f,r);f=E[c[y]]}st(f)&&(b=Math.min(c[0],f.data.length)),nn(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},J1=e=>st(e)&&e.data.length>0,WC=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):J1(r.nextSibling)?(f=r.nextSibling,b=0):J1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):J1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const y=r.previousSibling,E=r.nextSibling;at.each(at.grep(r.childNodes),N=>{st(N)&&(N.data=N.data.replace(/\uFEFF/g,""))});let M;for(;M=e.get(o.id+"_"+n);)e.remove(M,!0);if(st(E)&&st(y)&&!Ot.browser.isOpera()){const N=y.data.length;y.appendData(E.data),e.remove(E),f=y,b=N}}return L.some(Pe(f,b))}else return L.none()},kp=(e,n)=>{const o=e.createRng();return n0(e,!0,n,o)&&n0(e,!1,n,o)?L.some({range:o,forward:HC(n)}):L.none()},ZC=(e,n)=>{const o=WC(e,"start",n),r=WC(e,"end",n);return Vr(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(VC(e,c.container()),c.offset()),f.setEnd(VC(e,u.container()),u.offset()),{range:f,forward:HC(n)}})},hm=(e,n)=>L.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),fh=(e,n)=>{const o=e.dom;if(n){if(Dx(n))return kp(o,n);if(Q_(n))return Ic(o,n);if(eA(n))return ZC(o,n);if(Ox(n))return hm(o,n);if(Ax(n))return L.some({range:n.rng,forward:HC(n)})}return L.none()},Rx=(e,n,o)=>j2(e,n,o),ef=(e,n)=>{fh(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},eu=e=>nn(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",pm=(e=>n=>e===n)(sc),gh=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,jC=e=>!gh(e)&&!pm(e)&&!Ua(e),o0=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},Nx=e=>er(e,n=>{const o=up(n);return o?[ie.fromDom(o)]:[]}),tA=e=>o0(e).length>1,nA=e=>It(Nx(e),cp),Px=e=>fc(e,"td[data-mce-selected],th[data-mce-selected]"),eg=(e,n)=>{const o=Px(n);return o.length>0?o:nA(e)},_p=e=>eg(o0(e.selection.getSel()),ie.fromDom(e.getBody())),Q1=(e,n)=>gn(e,"table",n),oA=e=>{const n=e.startContainer,o=e.startOffset;return st(n)?o===0?L.some(ie.fromDom(n)):L.none():L.from(n.childNodes[o]).map(ie.fromDom)},sA=e=>{const n=e.endContainer,o=e.endOffset;return st(n)?o===n.data.length?L.some(ie.fromDom(n)):L.none():L.from(n.childNodes[o-1]).map(ie.fromDom)},Ap=e=>Kd(e).fold(rt([e]),n=>[e].concat(Ap(n))),GC=e=>ai(e).fold(rt([e]),n=>Ao(n)==="br"?$l(n).map(o=>[e].concat(GC(o))).getOr([]):[e].concat(GC(n))),s0=(e,n)=>Vr(oA(n),sA(n),(o,r)=>{const c=bs(Ap(e),Ke(ns,o)),u=bs(GC(e),Ke(ns,r));return c.isSome()&&u.isSome()}).getOr(!1),qC=(e,n,o,r)=>{const c=o,u=new gc(o,c),f=ls(e.schema.getMoveCaretBeforeOnEnterElements(),(y,E)=>!An(["td","th","table"],E.toLowerCase()));let b=o;do{if(st(b)&&at.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},KC=e=>{const n=e.selection.getSel();return Ae(n)&&n.rangeCount>0},Op=(e,n)=>{const o=_p(e);o.length>0?we(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},YC=(e,n,o)=>{const r=Z2(e,n);o(r),e.moveToBookmark(r)},Dp=e=>Bo(e==null?void 0:e.nodeType),XC=e=>nn(e)&&!eu(e)&&!Qi(e)&&!bu(e),Yo=(e,n)=>{if(XC(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},bm=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=fr(u);YC(r,!0,()=>{n()}),f&&fr(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&hh(c,r)},hh=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!Yo(e,b)&&nn(u)){const y=u.childNodes,E=e.getRoot();let M;if(f<y.length){const N=y[f];M=new gc(N,(o=e.getParent(N,e.isBlock))!==null&&o!==void 0?o:E)}else{const N=y[y.length-1];M=new gc(N,(r=e.getParent(N,e.isBlock))!==null&&r!==void 0?r:E),M.next(!0)}for(let N=M.current();N;N=M.next()){if(e.getContentEditable(N)==="false")return;if(st(N)&&!QC(N)){c.setStart(N,0),n.setRng(c);return}}}},eb=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(nn(e)||!QC(e))return e}},JC=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Gi(e,n),tf=(e,n,o)=>e.schema.isValidChild(n,o),QC=(e,n=!1)=>{if(Ae(e)&&st(e)){const o=n?e.data.replace(/ /g," "):e.data;return mu(o)}else return!1},r0=e=>Ae(e)&&st(e)&&e.length===0,ew=(e,n)=>{const o="[data-mce-cef-wrappable]",r=ex(e),c=dr(r)?o:`${o},${r}`;return Jc(ie.fromDom(n),c)},tw=(e,n)=>{const o=e.dom;return XC(n)&&o.getContentEditable(n)==="false"&&ew(e,n)&&o.select('[contenteditable="true"]',n).length===0},ph=(e,n)=>le(e)?e(n):(Ae(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),a0=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),bh=(e,n)=>{if(cn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Sd(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},c0=(e,n,o)=>{const r=e.getStyle(n,o);return bh(r,o)},Bx=(e,n)=>{let o;return e.getParent(n,r=>nn(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Rp=(e,n,o)=>e.getParents(n,o,e.getRoot()),l0=(e,n,o)=>{const r=e.formatter.get(n);return Ae(r)&&Xo(r,o)},rA=(e,n)=>l0(e,n,r=>{const c=u=>le(u)||u.length>1&&u.charAt(0)==="%";return Xo(["styles","attributes"],u=>is(r,u).exists(f=>{const b=nt(f)?f:Ya(f);return Xo(b,c)}))}),i0=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>ls(u,(f,b)=>Xo(r,y=>y===b));return l0(e,n,u=>{const f=c(u);return l0(e,o,b=>{const y=c(b);return Xa(f,y)})})},nf=e=>wr(e,"block"),aA=e=>nf(e)&&e.wrapper===!0,tb=e=>nf(e)&&e.wrapper!==!0,Su=e=>wr(e,"selector"),Cc=e=>wr(e,"inline"),cA=e=>Su(e)&&Cc(e)&&xs(is(e,"mixed"),!0),Rd=e=>Su(e)&&e.expand!==!1&&!Cc(e),lA=e=>{const n=[];let o=e;for(;o;){if(st(o)&&o.data!==ia||o.childNodes.length>1)return[];nn(o)&&n.push(o),o=o.firstChild}return n},$x=e=>lA(e).length>0,nb=e=>Qi(e.dom)&&$x(e.dom),Mp=eu,Ix=Rp,Lx=QC,MR=JC,NR=e=>Pr(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Fx=(e,n)=>{let o=n;for(;o;){if(nn(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Hx=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},Zt=(e,n,o)=>Hx(e,n,o,r=>pm(r)||gh(r)),wc=(e,n,o)=>Hx(e,n,o,jC),ob=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,y=(M,N,$)=>{const G=Ff(e),ee=c?G.backwards:G.forwards;return L.from(ee(M,N,(Y,te)=>Mp(Y.parentNode)?-1:(f=Y,$(c,Y,te)),b))};return y(o,r,Zt).bind(M=>u?y(M.container,M.offset+(c?-1:0),wc):L.some(M)).orThunk(()=>f?L.some({container:f,offset:c?0:f.length}):L.none())},Sc=(e,n,o,r,c)=>{const u=r[c];st(r)&&dr(r.data)&&u&&(r=u);const f=Ix(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const E=n[y];if(!(Ae(E.collapsed)&&E.collapsed!==o.collapsed)&&Su(E)&&e.is(f[b],E.selector))return f[b]}return r},xu=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(nf(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(c=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&c!==void 0?c:f;u=e.getParent(st(o)?o.parentNode:o,E=>E!==f&&MR(e.schema,E),y)}if(u&&nf(b)&&b.wrapper&&(u=Ix(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!a0(u,"br")););return u||o},nw=(e,n,o,r)=>{const c=o.parentNode;return Ae(o[r])?!1:c===n||cn(c)||e.isBlock(c)?!0:nw(e,n,c,r)},vh=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(st(o)&&!Lx(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const E=st(y)&&!nw(e,b,y,f);if(!Mp(y)&&!NR(y)&&!Lx(y,E))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},u0=e=>Mp(e.parentNode)||Mp(e),tg=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return nn(c)&&c.hasChildNodes()&&(c=jt(c,u),st(c)&&(u=0)),nn(f)&&f.hasChildNodes()&&(f=jt(f,n.collapsed?b:b-1),st(f)&&(b=f.data.length)),c=Fx(e,c),f=Fx(e,f),u0(c)&&(c=Mp(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,st(c)&&(u=n.collapsed?c.length:0)),u0(f)&&(f=Mp(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,st(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(ob(e,e.getRoot(),c,u,!0,r).each(({container:N,offset:$})=>{c=N,u=$}),ob(e,e.getRoot(),f,b,!1,r).each(({container:N,offset:$})=>{f=N,b=$})),(Cc(y)||y.block_expand)&&((!Cc(y)||!st(c)||u===0)&&(c=vh(e,o,c,u,!0)),(!Cc(y)||!st(f)||b===f.data.length)&&(f=vh(e,o,f,b,!1))),Rd(y)&&(c=Sc(e,o,n,c,"previousSibling"),f=Sc(e,o,n,f,"nextSibling")),(nf(y)||Su(y))&&(c=xu(e,o,c,"previousSibling"),f=xu(e,o,f,"nextSibling"),nf(y)&&(e.isBlock(c)||(c=vh(e,o,c,u,!0),st(c)&&(u=0)),e.isBlock(f)||(f=vh(e,o,f,b,!1),st(f)&&(b=f.data.length)))),nn(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),nn(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},sb=(e,n,o)=>{var r;const c=n.startOffset,u=jt(n.startContainer,c),f=n.endOffset,b=jt(n.endContainer,f-1),y=te=>{const be=te[0];st(be)&&be===u&&c>=be.data.length&&te.splice(0,1);const ye=te[te.length-1];return f===0&&te.length>0&&ye===b&&st(ye)&&te.splice(te.length-1,1),te},E=(te,be,ye)=>{const ve=[];for(;te&&te!==ye;te=te[be])ve.push(te);return ve},M=(te,be)=>e.getParent(te,ye=>ye.parentNode===be,be),N=(te,be,ye)=>{const ve=ye?"nextSibling":"previousSibling";for(let Te=te,et=Te.parentNode;Te&&Te!==be;Te=et){et=Te.parentNode;const xt=E(Te===te?Te:Te[ve],ve);xt.length&&(ye||xt.reverse(),o(y(xt)))}};if(u===b)return o(y([u]));const $=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return N(u,$,!0);if(e.isChildOf(b,u))return N(b,$);const G=M(u,$)||u,ee=M(b,$)||b;N(u,G,!0);const Y=E(G===u?G:G.nextSibling,"nextSibling",ee===b?ee.nextSibling:ee);Y.length&&o(y(Y)),N(b,ee)},Vx=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],iA=e=>Re(e)&&M1(e)===ia,uA=(e,n,o,r)=>mc(n).fold(()=>"skipping",c=>r==="br"||iA(n)?"valid":n_(n)?"existing":Qi(n.dom)?"caret":Xo(Vx,u=>Jc(n,u))?"valid-block":!tf(e,o,r)||!tf(e,Ao(c),o)?"invalid-child":"valid"),dA=(e,n)=>{const o=tg(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},ng=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;$u(e,ep()),Co(e,`${tp()}`,f),Co(e,`${um()}`,r);const{attributes:y={},classes:E=[]}=c(f,b);if(Jr(e,y),dv(e,E),u){E.length>0&&Co(e,`${Lf()}`,E.join(","));const M=cs(y);M.length>0&&Co(e,`${dm()}`,M.join(","))}},rb=e=>{Hi(e,ep()),yr(e,`${tp()}`),yr(e,`${um()}`),yr(e,`${Gg()}`);const n=Mr(e,`${dm()}`).map(r=>r.split(",")).getOr([]),o=Mr(e,`${Lf()}`).map(r=>r.split(",")).getOr([]);we(n,r=>yr(e,r)),kR(e,o),yr(e,`${Lf()}`),yr(e,`${dm()}`)},ab=(e,n,o,r,c)=>{const u=ie.fromTag("span",e);return ng(u,n,o,r,c,!1),u},d0=(e,n,o,r,c,u)=>{const f=[],b=ab(e.getDoc(),o,u,r,c),y=Mc(),E=()=>{y.clear()},M=()=>y.get().getOrThunk(()=>{const ee=Td(b);return f.push(ee),y.set(ee),ee}),N=ee=>{we(ee,$)},$=ee=>{switch(uA(e,ee,"span",Ao(ee))){case"invalid-child":{E();const te=Oa(ee);N(te),E();break}case"valid-block":{E(),ng(ee,o,u,r,c,!0);break}case"valid":{const te=M();Ur(ee,te);break}}},G=ee=>{const Y=tn(ee,ie.fromDom);N(Y)};return sb(e.dom,n,ee=>{E(),G(ee)}),f},Bi=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=_p(e).length>0,b=np("mce-annotation");if(u.collapsed&&!f&&dA(e,u),c.getRng().collapsed&&!f){const y=ab(e.getDoc(),b,r,n,o.decorate);qc(y,sc),c.getRng().insertNode(y.dom),c.select(y.dom)}else YC(c,!1,()=>{Op(e,y=>{d0(e,y,b,n,o.decorate,r)})})})},vm=e=>{const n=Ly();iv(e,n);const o=Iy(e,n),r=Ps("span"),c=u=>{we(u,f=>{r(f)?Ll(f):rb(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{Bi(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{Kg(e,L.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();mt(C2(e,u),(b,y)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=C2(e,u);return po(f,b=>tn(b,y=>y.dom))}}},og=e=>({getBookmark:Ke(Rx,e),moveToBookmark:Ke(ef,e)});og.isBookmarkNode=eu;const sg=(e,n,o)=>o.collapsed?!1:Xo(o.getClientRects(),r=>i_(r,e,n)),mA=(e,n)=>e.dispatch("PreProcess",n),m0=(e,n)=>e.dispatch("PostProcess",n),f0=e=>{e.dispatch("remove")},fA=e=>{e.dispatch("detach")},gA=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},hA=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},pA=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},zx=e=>{e.dispatch("PreInit")},g0=e=>{e.dispatch("PostRender")},bA=e=>{e.dispatch("Init")},h0=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Yc=(e,n,o)=>{e.dispatch(n,o)},Tu=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},tu=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},p0=(e,n)=>e.dispatch("BeforeSetContent",n),b0=(e,n)=>e.dispatch("SetContent",n),Ux=(e,n)=>e.dispatch("BeforeGetContent",n),ow=(e,n)=>e.dispatch("GetContent",n),Wx=(e,n)=>{e.dispatch("AutocompleterStart",n)},sw=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},Zx=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},jx=e=>{e.dispatch("AutocompleterEnd")},vA=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),yA=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),v0=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),rw=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),ht={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ht.metaKeyPressed(e),metaKeyPressed:e=>Ot.os.isMacOS()||Ot.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Gl="data-mce-selected",Gx="table,img,figure.image,hr,video,span.mce-preview-object,details",aw=Math.abs,cb=Math.round,lb={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},y0=e=>e.type==="longpress"||e.type.indexOf("touch")===0,ib=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,y,E,M,N,$,G,ee,Y,te,be,ye,ve,Te,et,xt;const Vt=zt=>Ae(zt)&&(Qe(zt)||o.is(zt,"figure.image")),it=zt=>Vu(zt)||o.hasClass(zt,"mce-preview-object"),Le=(zt,ho)=>{if(y0(zt)){const To=zt.touches[0];return Vt(zt.target)&&!sg(To.clientX,To.clientY,ho)}else return Vt(zt.target)&&!sg(zt.clientX,zt.clientY,ho)},Ge=zt=>{const ho=zt.target;Le(zt,n.selection.getRng())&&!zt.isDefaultPrevented()&&n.selection.select(ho)},Ht=zt=>o.hasClass(zt,"mce-preview-object")&&Ae(zt.firstElementChild)?[zt,zt.firstElementChild]:o.is(zt,"figure.image")?[zt.querySelector("img")]:[zt],bn=zt=>{const ho=Ki(n);return!ho||zt.getAttribute("data-mce-resize")==="false"||zt===n.getBody()?!1:o.hasClass(zt,"mce-preview-object")&&Ae(zt.firstElementChild)?Jc(ie.fromDom(zt.firstElementChild),ho):Jc(ie.fromDom(zt),ho)},uo=(zt,ho)=>{if(it(ho))return zt.create("img",{src:Ot.transparentSrc});if(Fu(ho)){const Tc=qo(E.name,"n")?$t:to,Ss=ho.cloneNode(!0);return Tc(zt.select("tr",Ss)).each(qa=>{const Vd=zt.select("td,th",qa);zt.setStyle(qa,"height",null),we(Vd,_m=>zt.setStyle(_m,"height",null))}),Ss}else return ho.cloneNode(!0)},Lo=(zt,ho,To)=>{if(Ae(To)){const Tc=Ht(zt);we(Tc,Ss=>{Ss.style[ho]||!n.schema.isValid(Ss.nodeName.toLowerCase(),ho)?o.setStyle(Ss,ho,To):o.setAttrib(Ss,ho,""+To)})}},_s=(zt,ho,To)=>{Lo(zt,"width",ho),Lo(zt,"height",To)},Fs=zt=>{let ho,To,Tc,Ss,qa;ho=zt.screenX-N,To=zt.screenY-$,ve=ho*E[2]+Y,Te=To*E[3]+te,ve=ve<5?5:ve,Te=Te<5?5:Te,(Vt(f)||it(f))&&W1(n)!==!1?Tc=!ht.modifierPressed(zt):Tc=ht.modifierPressed(zt),Tc&&(aw(ho)>aw(To)?(Te=cb(ve*be),ve=cb(Te/be)):(ve=cb(Te/be),Te=cb(ve*be))),_s(b,ve,Te),Ss=E.startPos.x+ho,qa=E.startPos.y+To,Ss=Ss>0?Ss:0,qa=qa>0?qa:0,o.setStyles(y,{left:Ss,top:qa,display:"block"}),y.innerHTML=ve+" &times; "+Te,E[2]<0&&b.clientWidth<=ve&&o.setStyle(b,"left",G+(Y-ve)),E[3]<0&&b.clientHeight<=Te&&o.setStyle(b,"top",ee+(te-Te)),ho=u.scrollWidth-et,To=u.scrollHeight-xt,ho+To!==0&&o.setStyles(y,{left:Ss-ho,top:qa-To}),ye||(hA(n,f,Y,te,"corner-"+E.name),ye=!0)},pr=()=>{const zt=ye;ye=!1,zt&&(Lo(f,"width",ve),Lo(f,"height",Te)),o.unbind(r,"mousemove",Fs),o.unbind(r,"mouseup",pr),c!==r&&(o.unbind(c,"mousemove",Fs),o.unbind(c,"mouseup",pr)),o.remove(b),o.remove(y),o.remove(M),il(f),zt&&(pA(n,f,ve,Te,"corner-"+E.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},il=zt=>{Ft();const ho=o.getPos(zt,u),To=ho.x,Tc=ho.y,Ss=zt.getBoundingClientRect(),qa=Ss.width||Ss.right-Ss.left,Vd=Ss.height||Ss.bottom-Ss.top;f!==zt&&(Rt(),f=zt,ve=Te=0);const _m=n.dispatch("ObjectSelected",{target:zt});bn(zt)&&!_m.isDefaultPrevented()?mt(lb,(bi,Ru)=>{const zd=ld=>{const yn=Ht(f)[0];N=ld.screenX,$=ld.screenY,Y=yn.clientWidth,te=yn.clientHeight,be=te/Y,E=bi,E.name=Ru,E.startPos={x:qa*bi[0]+To,y:Vd*bi[1]+Tc},et=u.scrollWidth,xt=u.scrollHeight,M=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(M,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=uo(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:To,top:Tc,margin:0}),_s(b,qa,Vd),b.removeAttribute(Gl),u.appendChild(b),o.bind(r,"mousemove",Fs),o.bind(r,"mouseup",pr),c!==r&&(o.bind(c,"mousemove",Fs),o.bind(c,"mouseup",pr)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},Y+" &times; "+te)};let Mu=o.get("mceResizeHandle"+Ru);Mu&&o.remove(Mu),Mu=o.add(u,"div",{id:"mceResizeHandle"+Ru,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Ru+"-resize; margin:0; padding:0"}),o.bind(Mu,"mousedown",ld=>{ld.stopImmediatePropagation(),ld.preventDefault(),zd(ld)}),bi.elm=Mu,o.setStyles(Mu,{left:qa*bi[0]+To-Mu.offsetWidth/2,top:Vd*bi[1]+Tc-Mu.offsetHeight/2})}):Rt(!1)},Hs=R1(il,0),Rt=(zt=!0)=>{Hs.cancel(),Ft(),f&&zt&&f.removeAttribute(Gl),mt(lb,(ho,To)=>{const Tc=o.get("mceResizeHandle"+To);Tc&&(o.unbind(Tc),o.remove(Tc))})},un=(zt,ho)=>o.isChildOf(zt,ho),rs=zt=>{if(ye||n.removed||n.composing)return;const ho=zt.type==="mousedown"?zt.target:e.getNode(),To=pd(ie.fromDom(ho),Gx).map(Ss=>Ss.dom).filter(Ss=>o.isEditable(Ss.parentElement)||Ss.nodeName==="IMG"&&o.isEditable(Ss)).getOrUndefined(),Tc=Ae(To)?o.getAttrib(To,Gl,"1"):"1";if(we(o.select(`img[${Gl}],hr[${Gl}]`),Ss=>{Ss.removeAttribute(Gl)}),Ae(To)&&un(To,u)&&n.hasFocus()){Rn();const Ss=e.getStart(!0);if(un(Ss,To)&&un(e.getEnd(!0),To)){o.setAttrib(To,Gl,Tc),Hs.throttle(To);return}}Rt()},Ft=()=>{mt(lb,zt=>{zt.elm&&(o.unbind(zt.elm),delete zt.elm)})},Rn=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Rn(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",rs),n.on("keyup compositionend",zt=>{f&&f.nodeName==="TABLE"&&rs(zt)}),n.on("hide blur",Rt),n.on("contextmenu longpress",Ge,!0)}),n.on("remove",Ft),{isResizable:bn,showResizeRect:il,hideResizeRect:Rt,updateResizeRect:rs,destroy:()=>{Hs.cancel(),f=b=M=null}}},qx=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Kx=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},cw=(e,n,o)=>{const r=e.document.createRange();return qx(r,n),Kx(r,o),r},lw=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},of=Cs.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),iw=(e,n,o)=>n(ie.fromDom(o.startContainer),o.startOffset,ie.fromDom(o.endContainer),o.endOffset),Yx=(e,n)=>n.match({domRange:o=>({ltr:rt(o),rtl:L.none}),relative:(o,r)=>({ltr:He(()=>cw(e,o,r)),rtl:He(()=>L.some(cw(e,r,o)))}),exact:(o,r,c,u)=>({ltr:He(()=>lw(e,o,r,c,u)),rtl:He(()=>L.some(lw(e,c,u,o,r)))})}),CA=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>of.rtl(ie.fromDom(c.endContainer),c.endOffset,ie.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>iw(e,of.ltr,o)):iw(e,of.ltr,o)},wA=(e,n)=>{const o=Yx(e,n);return CA(e,o)};of.ltr,of.rtl;const gi={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},_l=(e,n,o)=>{var r,c;return L.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return L.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),L.some(f)})},Np=(e,n,o)=>{var r,c;return L.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},PR=document.caretPositionFromPoint?_l:document.caretRangeFromPoint?Np:L.none,SA=(e,n,o)=>{const r=ie.fromDom(e.document);return PR(r,n,o).map(c=>gi.create(ie.fromDom(c.startContainer),c.startOffset,ie.fromDom(c.endContainer),c.endOffset))},uw=Cs.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),jo=(e,n,o,r)=>e.fold(n,o,r),BR=e=>e.fold(Ho,Ho,Ho),Jx=uw.before,Qx=uw.on,$R=uw.after,rg={before:Jx,on:Qx,after:$R,cata:jo,getStart:BR},ub=Cs.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),xA=e=>ub.exact(e.start,e.soffset,e.finish,e.foffset),TA=e=>e.match({domRange:n=>ie.fromDom(n.startContainer),relative:(n,o)=>rg.getStart(n),exact:(n,o,r,c)=>n}),EA=ub.domRange,C0=ub.relative,db=ub.exact,eT=e=>{const n=TA(e);return xi(n)},IR=gi.create,Pp={domRange:EA,relative:C0,exact:db,exactFromRange:xA,getWin:eT,range:IR},dw=(e,n)=>{const o=Ao(e);return o==="input"?rg.after(e):An(["br","img"],o)?n===0?rg.before(e):rg.after(e):rg.on(e,n)},LR=(e,n)=>{const o=e.fold(rg.before,dw,rg.after),r=n.fold(rg.before,dw,rg.after);return Pp.relative(o,r)},tT=(e,n,o,r)=>{const c=dw(e,n),u=dw(o,r);return Pp.relative(c,u)},kA=e=>e.match({domRange:n=>{const o=ie.fromDom(n.startContainer),r=ie.fromDom(n.endContainer);return tT(o,n.startOffset,r,n.endOffset)},relative:LR,exact:tT}),Ln=(e,n)=>{const r=document.createDocumentFragment();return we(e,c=>{r.appendChild(c.dom)}),ie.fromDom(r)},i=e=>{const n=Pp.getWin(e).dom,o=(c,u,f,b)=>lw(n,c,u,f,b),r=kA(e);return wA(n,r).match({ltr:o,rtl:o})},m=(e,n,o)=>SA(e,n,o),p=(e,n,o)=>{const r=xi(ie.fromDom(o));return m(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},v=(e,n)=>Ae(e)&&Ae(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,T=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},O=(e,n,o)=>T(e,n,o)!==null,I=(e,n,o)=>O(e,n,r=>r.nodeName===o),Z=(e,n)=>Ni(e)&&!O(e,n,Qi),Q=(e,n,o)=>{const r=n.parentNode;if(r){const c=new gc(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(Pr(u))return!0}return!1},ue=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},_e=(e,n)=>{let o=n;for(;o&&o!==e;){if(fr(o))return!0;o=o.parentNode}return!1},ct=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let y,E;if(!b)return L.none();const M=e.getParent(b,e.isBlock)||u;if(r&&Pr(c)&&n&&e.isEmpty(M))return L.some(Pe(b,e.nodeIndex(c)));const N=new gc(c,M);for(;E=N[r?"prev":"next"]();){if(e.getContentEditableParent(E)==="false"||Z(E,u))return L.none();if(st(E)&&E.data.length>0)return I(E,u,"A")?L.none():L.some(Pe(E,r?E.data.length:0));if(e.isBlock(E)||f[E.nodeName.toLowerCase()])return L.none();y=E}return yd(y)?L.none():o&&y?L.some(Pe(y,0)):L.none()},Lt=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const E=nn(b)&&y===b.childNodes.length,M=e.schema.getNonEmptyElements();let N=o;if(Ni(b))return L.none();if(nn(b)&&y>b.childNodes.length-1&&(N=!1),ca(b)&&(b=c,y=0),b===c){if(N&&(u=b.childNodes[y>0?y-1:0],u&&(Ni(u)||M[u.nodeName]||Fu(u))))return L.none();if(b.hasChildNodes()){if(y=Math.min(!N&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=st(b)&&E?b.data.length:0,!n&&b===c.lastChild&&Fu(b)||_e(c,b)||Ni(b)||h1(b))return L.none();if(b.hasChildNodes()&&!Fu(b)){u=b;const $=new gc(b,c);do{if(fr(u)||Ni(u)){f=!1;break}if(st(u)&&u.data.length>0){y=N?0:u.data.length,b=u,f=!0;break}if(M[u.nodeName.toLowerCase()]&&!Hu(u)){y=e.nodeIndex(u),b=u.parentNode,N||y++,f=!0;break}}while(u=N?$.next():$.prev())}}}return n&&(st(b)&&y===0&&ct(e,E,n,!0,b).each($=>{b=$.container(),y=$.offset(),f=!0}),nn(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&Pr(u)&&!ue(u,"A")&&!Q(e,u,!1)&&!Q(e,u,!0)&&ct(e,E,n,!0,u).each($=>{b=$.container(),y=$.offset(),f=!0}))),N&&!n&&st(b)&&y===b.data.length&&ct(e,E,n,!1,b).each($=>{b=$.container(),y=$.offset(),f=!0}),f&&b?L.some(Pe(b,y)):L.none()},Dt=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=Pe.fromRangeStart(n);return Lt(e,o,!0,r).each(u=>{(!o||!Pe.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||Lt(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),v(n,r)?L.none():L.some(r)},Tt=(e,n)=>e.splitText(n),on=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&st(n)){if(o>0&&o<n.data.length)if(r=Tt(n,o),n=r.previousSibling,c>o){c=c-o;const u=Tt(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(st(n)&&o>0&&o<n.data.length&&(n=Tt(n,o),o=0),st(r)&&c>0&&c<r.data.length){const u=Tt(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},ot=e=>({walk:(u,f)=>sb(e,u,f),split:on,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=tg(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>Dt(e,u).fold(Ze,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});ot.compareRanges=v,ot.getCaretRangeFromPoint=p,ot.getSelectedNode=up,ot.getNode=jt;const Pn=((e,n)=>{const o=(b,y)=>{if(!Bo(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const E=b.dom;Qd(E)&&(E.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const E=yl(b,e);return parseFloat(E)||0}return y},c=r,u=(b,y)=>zo(y,(E,M)=>{const N=yl(b,M),$=N===void 0?0:parseInt(N,10);return isNaN($)?E:E+$},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,y,E)=>{const M=u(b,E);return y>M?y-M:0}}})("height",e=>{const n=e.dom;return hd(e)?n.getBoundingClientRect().height:n.offsetHeight}),Pt=e=>Pn.get(e),us=()=>ie.fromDom(document),Ds=(e,n)=>e.view(n).fold(rt([]),r=>{const c=e.owner(r),u=Ds(e,c);return[r].concat(u)}),Ts=(e,n)=>{const o=n.owner(e);return Ds(n,o)};var ym=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?L.none():L.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ie.fromDom)},owner:e=>Aa(e)});const ag=e=>{const n=us(),o=On(n),r=Ts(e,ym),c=Je(e),u=Ks(r,(f,b)=>{const y=Je(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return R(u.left+c.left+o.left,u.top+c.top+o.top)},cg=e=>Ao(e)==="textarea",ws=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),ql=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Kl=(e,n)=>{const o=Oa(e);if(o.length===0||cg(e))return{element:e,offset:n};if(n<o.length&&!cg(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return cg(r)?{element:e,offset:n}:Ao(r)==="img"?{element:r,offset:1}:Re(r)?{element:r,offset:M1(r).length}:{element:r,offset:Oa(r).length}}},Eu=(e,n)=>{const o=ge(e),r=Pt(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},ku=(e,n)=>{const o=Kl(e,n),r=ie.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+ia+"</span>");return oc(o.element,r),Eu(r,()=>Bs(r))},Oo=e=>Eu(ie.fromDom(e),Wt),oa=(e,n,o,r)=>{oo(e,(c,u)=>mb(e,n,o,r),o)},Cm=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(ws(e,u))return;const f=On(n).top;o(e,n,f,r,c),ql(e,u)},mb=(e,n,o,r)=>{const c=ie.fromDom(e.getBody()),u=ie.fromDom(e.getDoc());Fg(c);const f=ku(ie.fromDom(o.startContainer),o.startOffset);Cm(e,u,n,f,r),f.cleanup()},$i=(e,n,o,r)=>{const c=ie.fromDom(e.getDoc());Cm(e,c,o,Oo(n),r)},oo=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(ie.fromDom(r),ie.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},mw=(e,n,o,r,c)=>{const u=n.pos;if(r)Jn(u.left,u.top,c);else{const f=u.top-o+n.height;Jn(-e.getBody().getBoundingClientRect().left,f,c)}},fw=(e,n,o,r,c,u)=>{const f=r+o,b=c.pos.top,y=c.bottom,E=y-b>=r;b<o?mw(e,c,r,u!==!1,n):b>f?mw(e,c,r,E?u!==!1:u===!0,n):y>f&&!E&&mw(e,c,r,u===!0,n)},w0=(e,n,o,r,c)=>{const u=xi(n).dom.innerHeight;fw(e,n,o,u,r,c)},nT=(e,n,o,r,c)=>{const u=xi(n).dom.innerHeight;fw(e,n,o,u,r,c);const f=ag(r.element),b=Er(window);f.top<b.y?Gn(r.element,c!==!1):f.top>b.bottom&&Gn(r.element,c===!0)},yh=(e,n,o)=>oa(e,w0,n,o),sf=(e,n,o)=>$i(e,n,w0,o),oT=(e,n,o)=>oa(e,nT,n,o),fb=(e,n,o)=>$i(e,n,nT,o),_F=(e,n,o)=>{(e.inline?sf:fb)(e,n,o)},gw=(e,n,o)=>{(e.inline?yh:oT)(e,n,o)},S0=(e,n=!1)=>e.dom.focus({preventScroll:n}),gb=e=>{const n=du(e).dom;return e.dom===n.activeElement},_A=(e=us())=>L.from(e.dom.activeElement).map(ie.fromDom),FR=e=>_A(du(e)).filter(n=>e.dom.contains(n.dom)),HR=(e,n)=>{const o=Re(n)?M1(n).length:Oa(n).length+1;return e>o?o:e<0?0:e},AF=e=>Pp.range(e.start,HR(e.soffset,e.start),e.finish,HR(e.foffset,e.finish)),VR=(e,n)=>!wa(n.dom)&&(ri(e,n)||ns(e,n)),AA=e=>n=>VR(e,n.start)&&VR(e,n.finish),Lj=e=>e.inline||Ot.browser.isFirefox(),OF=e=>Pp.range(ie.fromDom(e.startContainer),e.startOffset,ie.fromDom(e.endContainer),e.endOffset),zR=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?L.none():L.from(n.getRangeAt(0))).map(OF)},OA=e=>{const n=xi(e);return zR(n.dom).filter(AA(e))},DA=(e,n)=>L.from(n).filter(AA(e)).map(AF),RA=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),L.some(n)}catch{return L.none()}},hw=e=>{const n=Lj(e)?OA(ie.fromDom(e.getBody())):L.none();e.bookmark=n.isSome()?n:e.bookmark},sT=e=>(e.bookmark?e.bookmark:L.none()).bind(o=>DA(ie.fromDom(e.getBody()),o)).bind(RA),UR=e=>{sT(e).each(n=>e.selection.setRng(n))},WR={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},ZR=(e,n)=>(Bo(n)||(n=0),setTimeout(e,n)),DF=(e,n)=>(Bo(n)||(n=0),setInterval(e,n)),Ju={setEditorTimeout:(e,n,o)=>ZR(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=DF(()=>{e.removed?clearInterval(r):n()},o);return r}},jR=e=>e.type==="nodechange"&&e.selectionChange,GR=(e,n)=>{const o=()=>{n.throttle()};hr.DOM.bind(document,"mouseup",o),e.on("remove",()=>{hr.DOM.unbind(document,"mouseup",o)})},qR=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},KR=(e,n)=>{qR(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{jR(o)||hw(e)})},RF=e=>{const n=R1(()=>{hw(e)},0);e.on("init",()=>{e.inline&&GR(e,n),KR(e,n)}),e.on("remove",()=>{n.cancel()})};let x0;const NA=hr.DOM,MF=e=>nn(e)&&WR.isEditorUIElement(e),PA=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},rT=(e,n)=>{const o=j1(e);return NA.getParent(n,c=>MF(c)||(o?e.dom.is(c,o):!1))!==null},BA=e=>{try{const n=du(ie.fromDom(e.getElement()));return _A(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},NF=(e,n)=>{const o=n.editor;RF(o);const r=(c,u)=>{if(Fv(c)&&c.inline!==!0){const f=ie.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;PA(BA(o))&&r(o,$u),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Ju.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!PA(BA(o))||c!==o)&&r(o,Hi),!rT(o,BA(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),x0||(x0=c=>{const u=e.activeEditor;u&&Jd(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!rT(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},NA.bind(document,"focusin",x0))},aT=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&x0&&(NA.unbind(document,"focusin",x0),x0=null)},YR=e=>{e.on("AddEditor",Ke(NF,e)),e.on("RemoveEditor",Ke(aT,e))},PF=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),XR=e=>e.collapsed?L.from(jt(e.startContainer,e.startOffset)).map(ie.fromDom):L.none(),JR=(e,n)=>XR(n).bind(o=>ap(o)?L.some(o):ri(e,o)?L.none():L.some(e)),QR=(e,n)=>{JR(ie.fromDom(e.getBody()),n).bind(o=>kl(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},$A=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},BF=e=>gb(e)||FR(e).isSome(),$F=e=>Ae(e.iframeElement)&&gb(ie.fromDom(e.iframeElement)),IF=e=>{const n=e.getBody();return n&&BF(ie.fromDom(n))},eM=e=>{const n=du(ie.fromDom(e.getElement()));return _A(n).filter(o=>!PA(o.dom)&&rT(e,o.dom)).isSome()},Bp=e=>e.inline?IF(e):$F(e),pw=e=>Bp(e)||eM(e),LF=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Ae(e.bookmark)&&!Bp(e)&&sT(e).each(u=>{e.selection.setRng(u),r=u});const c=PF(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){$A(c),QR(e,r),IA(e);return}e.inline||(Ot.browser.isOpera()||$A(o),e.getWin().focus()),(Ot.browser.isFirefox()||e.inline)&&($A(o),QR(e,r)),IA(e)},IA=e=>e.editorManager.setActive(e),LA=(e,n)=>{e.removed||(n?IA(e):LF(e))},tM=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),FA=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return L.from(u).map(ie.fromDom).map(b=>!r||!n.collapsed?Iu(b,c(b,f)).getOr(b):b).bind(b=>xe(b)?L.some(b):mc(b).filter(xe)).map(b=>b.dom).getOr(e)},HA=(e,n,o=!1)=>FA(e,n,!0,o,(r,c)=>Math.min(nc(r),c)),VA=(e,n,o=!1)=>FA(e,n,!1,o,(r,c)=>c>0?c-1:c),nM=(e,n)=>{const o=e;for(;e&&st(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},FF=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),st(o)&&st(r)&&(o.length===c?o=nM(o.nextSibling,!0):o=o.parentNode,u===0?r=nM(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=st(f)?f.parentNode:f;return hu(b)?b:e},HF=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||HA(u,n,n.collapsed),e.isBlock),b=e.getParent(r||VA(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let y;const E=new gc(f,u);for(;(y=E.next())&&y!==b;)e.isBlock(y)&&c.push(y)}return b&&f!==b&&b!==u&&c.push(b),c},VF=(e,n,o)=>L.from(n).bind(r=>L.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(qC(e,f,r,!0),qC(e,f,r,!1)),f})),T0=(e,n)=>tn(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),oM={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},bw=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},sM=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!mu(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},zA=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Ii{static create(n,o){const r=new Ii(n,oM[n]||1);return o&&mt(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!q(n))return Ae(n)&&mt(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Ii(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=bw(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=bw(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(zA(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||zA(f))return!1}if(f.type===8||f.type===3&&!sM(f)||f.type===3&&f.parent&&o[f.parent.name]&&mu((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=bw(f,u));return!0}walk(n){return bw(this,null,n)}}const zF=at.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),rM=e=>q(e.nodeValue)&&e.nodeValue.includes(ia),aM=e=>`${e.length===0?"":`${tn(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,UF=(e,n)=>n.querySelectorAll(aM(e)),cM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>rM(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),lM=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(rM(n)){const o=n.parentNode;return o&&wn(zF,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),WF=e=>cM(e).nextNode()!==null,ZF=e=>lM(e).nextNode()!==null,jF=(e,n)=>n.querySelector(aM(e))!==null,GF=(e,n)=>{we(UF(e,n),o=>{const r=ie.fromDom(o);js(r,"data-mce-bogus")==="all"?Bs(r):we(e,c=>{Tr(r,c)&&yr(r,c)})})},iM=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},cT=A(iM,cM),uM=A(iM,lM),UA=(e,n)=>{const o=[{condition:Ke(jF,n),action:Ke(GF,n)},{condition:WF,action:cT},{condition:ZF,action:uM}];let r=e,c=!1;return we(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},dM=e=>{const n=fc(e,"[data-mce-bogus]");we(n,o=>{js(o,"data-mce-bogus")==="all"?Bs(o):rp(o)?(oc(o,ie.fromText(Fm)),Bs(o)):Ll(o)})},mM=e=>{const n=fc(e,"input");we(n,o=>{yr(o,"name")})},qF=(e,n)=>{const o=ol(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},KF=(e,n)=>{const o=e.getDoc(),r=du(ie.fromDom(e.getBody())),c=ie.fromTag("div",o);Co(c,"data-mce-bogus","all"),Ra(c,{position:"fixed",left:"-9999999px",top:"0"}),qc(c,n.innerHTML),dM(c),mM(c);const u=d1(r);ea(u,c);const f=Mi(c.dom.innerText);return Bs(c),f},YF=(e,n,o)=>{let r;return n.format==="raw"?r=at.trim(Mi(UA(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=KF(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=qF(e,e.serializer.serialize(o,n)),n.format!=="text"&&!P1(ie.fromDom(o))&&q(r)?at.trim(r):r},XF=(e,n)=>L.from(e.getBody()).fold(rt(n.format==="tree"?new Ii("body",11):""),o=>YF(e,n,o)),WA=at.makeMap,fM=e=>{const n=[];e=e||{};const o=e.indent,r=WA(e.indent_before||""),c=WA(e.indent_after||""),u=Nf.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,E)=>{if(o&&r[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let M=0,N=y.length;M<N;M++){const $=y[M];n.push(" ",$.name,'="',u($.value,!0),'"')}if(!E||f?n[n.length]=">":n[n.length]=" />",E&&o&&c[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&c[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Ch=(e={},n=ys())=>{const o=fM(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:y=>{var E;o.text((E=y.value)!==null&&E!==void 0?E:"",y.raw)},8:y=>{var E;o.comment((E=y.value)!==null&&E!==void 0?E:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var E;o.doctype((E=y.value)!==null&&E!==void 0?E:"")},4:y=>{var E;o.cdata((E=y.value)!==null&&E!==void 0?E:"")},11:y=>{let E=y;if(E=E.firstChild)do b(E);while(E=E.next)}};o.reset();const b=y=>{var E;const M=f[y.type];if(M)M(y);else{const N=y.name,$=N in n.getVoidElements();let G=y.attributes;if(u&&G&&G.length>1){const ee=[];ee.map={};const Y=n.getElementRule(y.name);if(Y){for(let te=0,be=Y.attributesOrder.length;te<be;te++){const ye=Y.attributesOrder[te];if(ye in G.map){const ve=G.map[ye];ee.map[ye]=ve,ee.push({name:ye,value:ve})}}for(let te=0,be=G.length;te<be;te++){const ye=G[te].name;if(!(ye in ee.map)){const ve=G.map[ye];ee.map[ye]=ve,ee.push({name:ye,value:ve})}}G=ee}}if(o.start(N,G,$),kr(N))q(y.value)&&o.text(y.value,!0),o.end(N);else if(!$){let ee=y.firstChild;if(ee){(N==="pre"||N==="textarea")&&ee.type===3&&((E=ee.value)===null||E===void 0?void 0:E[0])===`
`&&o.text(`
`,!0);do b(ee);while(ee=ee.next)}o.end(N)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},ZA=new Set;we(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{ZA.add(n)});const gM=["font","text-decoration","text-emphasis"],jA=(e,n)=>cs(e.parseStyle(e.getAttrib(n,"style"))),JF=e=>ZA.has(e),QF=(e,n)=>gs(jA(e,n),o=>!JF(o)),e6=e=>It(e,n=>Xo(gM,o=>qo(n,o))),t6=(e,n,o)=>{const r=jA(e,n),c=jA(e,o),u=f=>{var b,y;const E=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",M=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return Uo(E)&&Uo(M)&&E!==M};return Xo(r,f=>{const b=y=>Xo(y,E=>E===f);if(!b(c)&&b(gM)){const y=e6(c);return Xo(y,u)}else return u(f)})},hM=(e,n,o)=>L.from(o.container()).filter(st).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),GA=Ke(hM,!0,gh),qA=Ke(hM,!1,gh),n6=e=>{const n=e.container();return st(n)&&(n.data.length===0||Yg(n.data)&&og.isBookmarkNode(n.parentNode))},$p=(e,n)=>o=>qv(e?0:-1,o).filter(n).isSome(),pM=e=>Qe(e)&&yl(ie.fromDom(e),"display")==="block",bM=e=>fr(e)&&!ev(e),o6=$p(!0,pM),s6=$p(!1,pM),vw=$p(!0,Vu),yw=$p(!1,Vu),vM=$p(!0,Fu),yM=$p(!1,Fu),mn=$p(!0,bM),wh=$p(!1,bM),CM=e=>e.slice(0,-1),r6=(e,n,o)=>ri(n,e)?CM(Ng(e,r=>o(r)||ns(r,n))):[],lT=(e,n)=>r6(e,n,Ze),Sh=(e,n)=>[e].concat(lT(e,n)),KA=(e,n,o)=>_x(e,n,o,n6),a6=e=>n=>e.isBlock(Ao(n)),wM=(e,n,o)=>bs(Sh(ie.fromDom(n.container()),e),a6(o)),SM=(e,n,o,r)=>KA(e,n.dom,o).forall(c=>wM(n,o,r).fold(()=>!Yi(c,o,n.dom),u=>!Yi(c,o,n.dom)&&ri(u,ie.fromDom(c.container())))),Cw=(e,n,o,r)=>wM(n,o,r).fold(()=>KA(e,n.dom,o).forall(c=>!Yi(c,o,n.dom)),c=>KA(e,c.dom,o).isNone()),iT=Ke(Cw,!1),c6=Ke(Cw,!0),l6=Ke(SM,!1),Kn=Ke(SM,!0),i6=e=>Yv(e).exists(rp),co=(e,n,o,r)=>{const c=It(Sh(ie.fromDom(o.container()),n),f=>r.isBlock(Ao(f))),u=$t(c).getOr(n);return Xi(e,u.dom,o).filter(i6)},uT=(e,n,o)=>Yv(n).exists(rp)||co(!0,e,n,o).isSome(),xM=(e,n,o)=>wx(n).exists(rp)||co(!1,e,n,o).isSome(),Fj=Ke(co,!1),u6=Ke(co,!0),d6=e=>Pe.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),m6=(e,n,o)=>{const r=It(Sh(ie.fromDom(n.container()),e),c=>o.isBlock(Ao(c)));return $t(r).getOr(e)},TM=(e,n,o)=>d6(n)?qA(n):qA(n)||Pi(m6(e,n,o).dom,n).exists(qA),EM=(e,n,o)=>d6(n)?GA(n):GA(n)||El(m6(e,n,o).dom,n).exists(GA),Vn=e=>An(["pre","pre-wrap"],e),YA=e=>Yv(e).bind(n=>Da(n,xe)).exists(n=>Vn(yl(n,"white-space"))),f6=(e,n)=>Pi(e.dom,n).isNone(),g6=(e,n)=>El(e.dom,n).isNone(),ww=(e,n,o)=>f6(e,n)||g6(e,n)||iT(e,n,o)||c6(e,n,o)||xM(e,n,o)||uT(e,n,o),kM=e=>Ae(e)&&fr(e)&&MC(e),_M=(e,n)=>o=>kM(new gc(o,e)[n]()),h6=(e,n)=>{const o=El(e.dom,n).getOr(n),r=_M(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},p6=(e,n)=>{const o=Pi(e.dom,n).getOr(n),r=_M(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},XA=(e,n,o)=>YA(n)?!1:ww(e,n,o)||TM(e,n,o)||EM(e,n,o),Sw=(e,n,o)=>YA(n)?!1:iT(e,n,o)||l6(e,n,o)||xM(e,n,o)||TM(e,n,o)||p6(e,n),Hj=e=>{const n=e.container(),o=e.offset();return st(n)&&o<n.data.length?Pe(n,o+1):e},dT=(e,n,o)=>YA(n)?!1:c6(e,n,o)||Kn(e,n,o)||uT(e,n,o)||EM(e,n,o)||h6(e,n),JA=(e,n,o)=>Sw(e,n,o)||dT(e,Hj(n),o),AM=(e,n)=>pm(e.charAt(n)),OM=(e,n)=>gh(e.charAt(n)),b6=e=>{const n=e.container();return st(n)&&$o(n.data,sc)},DM=e=>{const n=e.split("");return tn(n,(o,r)=>pm(o)&&r>0&&r<n.length-1&&jC(n[r-1])&&jC(n[r+1])?" ":o).join("")},RM=(e,n,o,r)=>{const c=n.data,u=Pe(n,0);return!o&&AM(c,0)&&!JA(e,u,r)?(n.data=" "+c.slice(1),!0):o&&OM(c,0)&&Sw(e,u,r)?(n.data=sc+c.slice(1),!0):!1},yo=e=>{const n=e.data,o=DM(n);return o!==n?(e.data=o,!0):!1},QA=(e,n,o,r)=>{const c=n.data,u=Pe(n,c.length-1);return!o&&AM(c,c.length-1)&&!JA(e,u,r)?(n.data=c.slice(0,-1)+" ",!0):o&&OM(c,c.length-1)&&dT(e,u,r)?(n.data=c.slice(0,-1)+sc,!0):!1},mT=(e,n,o)=>{const r=n.container();if(!st(r))return L.none();if(b6(n)){const c=RM(e,r,!1,o)||yo(r)||QA(e,r,!1,o);return _o(c,n)}else if(JA(e,n,o)){const c=RM(e,r,!0,o)||QA(e,r,!0,o);return _o(c,n)}else return L.none()},MM=e=>{const n=ie.fromDom(e.getBody());e.selection.isCollapsed()&&mT(n,Pe.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},eO=(e,n,o,r)=>{if(o===0)return;const c=ie.fromDom(e),u=mr(c,E=>r.isBlock(Ao(E))).getOr(c),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&dT(u,Pe(e,e.data.length),r),y=n===0&&Sw(u,Pe(e,0),r);e.replaceData(n,o,Hg(f,4,y,b))},xw=(e,n,o)=>{const r=e.data.slice(n),c=r.length-ei(r).length;eO(e,n,c,o)},fT=(e,n,o)=>{const r=e.data.slice(0,n),c=r.length-Xc(r).length;eO(e,n-c,c,o)},gT=(e,n,o,r,c=!0)=>{const u=Xc(e.data).length,f=c?e:n,b=c?n:e;return c?f.appendData(b.data):f.insertData(0,b.data),Bs(ie.fromDom(b)),r&&xw(f,u,o),f},v6=(e,n)=>{const o=e.container(),r=e.offset();return!Pe.isTextPosition(e)&&o===n.parentNode&&r>Pe.before(n).offset()},NM=(e,n)=>v6(n,e)?Pe(n.container(),n.offset()-1):n,y6=e=>st(e)?Pe(e,0):Pe.before(e),C6=e=>st(e)?Pe(e,e.data.length):Pe.after(e),PM=e=>_d(e.previousSibling)?L.some(C6(e.previousSibling)):e.previousSibling?Ji(e.previousSibling):L.none(),BM=e=>_d(e.nextSibling)?L.some(y6(e.nextSibling)):e.nextSibling?kl(e.nextSibling):L.none(),w6=(e,n)=>L.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Pi(e,Pe.before(o))).orThunk(()=>El(e,Pe.after(n))),S6=(e,n)=>El(e,Pe.after(n)).orThunk(()=>Pi(e,Pe.before(n))),x6=(e,n)=>PM(n).orThunk(()=>BM(n)).orThunk(()=>w6(e,n)),T6=(e,n)=>BM(n).orThunk(()=>PM(n)).orThunk(()=>S6(e,n)),tO=(e,n,o)=>e?T6(n,o):x6(n,o),nO=(e,n,o)=>tO(e,n,o).map(Ke(NM,o)),$M=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},E6=e=>n=>n.dom===e,k6=(e,n)=>n&&wn(e.schema.getBlockElements(),Ao(n)),_6=(e,n,o)=>{if(Wa(e,n)){const r=ie.fromHtml('<br data-mce-bogus="1">');return o?we(Oa(n),c=>{nb(c)||Bs(c)}):ki(n),ea(n,r),L.some(Pe.before(r.dom))}else return L.none()},A6=(e,n,o,r)=>{const c=$l(e).filter(Re),u=Ei(e).filter(Re);return Bs(e),bl(c,u,n,(f,b,y)=>{const E=f.dom,M=b.dom,N=E.data.length;return gT(E,M,o,r),y.container()===M?Pe(E,N):y}).orThunk(()=>(r&&(c.each(f=>fT(f.dom,f.dom.length,o)),u.each(f=>xw(f.dom,0,o))),n))},O6=(e,n)=>wn(e.schema.getTextInlineElements(),Ao(n)),hb=(e,n,o,r=!0,c=!1)=>{const u=nO(n,e.getBody(),o.dom),f=mr(o,Ke(k6,e),E6(e.getBody())),b=A6(o,u,e.schema,O6(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(y=>_6(e.schema,y,c)).fold(()=>{r&&$M(e,n,b)},y=>{r&&$M(e,n,L.some(y))})},D6=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,IM=e=>D6.test(e),pb=(e,n)=>Jc(ie.fromDom(n),M_(e))&&!Gi(e.schema,n)&&e.dom.isEditable(n),LM=e=>{var n;return hr.DOM.getStyle(e,"direction",!0)==="rtl"||IM((n=e.textContent)!==null&&n!==void 0?n:"")},bb=(e,n,o)=>It(hr.DOM.getParents(o.container(),"*",n),e),Ip=(e,n,o)=>{const r=bb(e,n,o);return L.from(r[r.length-1])},FM=(e,n,o)=>{const r=Dd(n,e),c=Dd(o,e);return Ae(r)&&r===c},R6=e=>Wy(e)||Jg(e),Md=(e,n)=>{const o=n.container(),r=n.offset();return e?kd(o)?st(o.nextSibling)?Pe(o.nextSibling,0):Pe.after(o):Wy(n)?Pe(o,r+1):n:kd(o)?st(o.previousSibling)?Pe(o.previousSibling,o.previousSibling.data.length):Pe.before(o):Jg(n)?Pe(o,r-1):n},oO=Ke(Md,!0),sO=Ke(Md,!1),rO=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},HM=e=>{e.execCommand("delete")},Yl=e=>rO(e,"Delete"),M6=e=>rO(e,"ForwardDelete"),N6=e=>n=>xs(mc(n),e,ns),P6=e=>E2(e)||mi(e),hT=(e,n)=>ri(e,n)?Da(n,P6,N6(e)):L.none(),aO=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},Lp=(e,n,o)=>Vr(kl(o),Ji(o),(r,c)=>{const u=Md(!0,r),f=Md(!1,c),b=Md(!1,n);return e?El(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):Pi(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),VM=e=>(K(e)?$l(e):ai(e)).bind(VM).orThunk(()=>L.some(e)),zM=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=VM(o).getOr(o),f=ie.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?aO(e,r):Wa(e.schema,f,{checkRootAsContent:!1})&&(Ri(f),r&&e.selection.setCursorLocation(f.dom,0)),!ns(o,f)){const b=xs(mc(f),o)?[]:Fh(f);we(b.concat(Oa(o)),y=>{!ns(y,f)&&!ri(y,f)&&Wa(e.schema,y)&&Bs(y)})}},Zr=e=>n=>ns(e,n),E0=e=>fc(e,"td,th"),vb=(e,n)=>Q1(ie.fromDom(e),n),B6=e=>Vr(e.startTable,e.endTable,(n,o)=>{const r=Sy(n,u=>ns(u,o)),c=Sy(o,u=>ns(u,n));return!r&&!c?e:{...e,startTable:r?L.none():e.startTable,endTable:c?L.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),k0=e=>B6(e),Nd=(e,n)=>{const o=vb(e.startContainer,n),r=vb(e.endContainer,n),c=o.isSome(),u=r.isSome(),f=Vr(o,r,ns).getOr(!1);return k0({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},yb=(e,n)=>({start:e,end:n}),Js=(e,n,o)=>({rng:e,table:n,cells:o}),xh=Cs.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Tw=(e,n)=>pd(ie.fromDom(e),"td,th",n),cO=e=>!ns(e.start,e.end),pT=(e,n)=>Q1(e.start,n).bind(o=>Q1(e.end,n).bind(r=>_o(ns(o,r),o))),lO=(e,n)=>!cO(e)&&pT(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),iO=(e,n)=>{const o=Tw(e.startContainer,n),r=Tw(e.endContainer,n);return Vr(o,r,yb)},uO=e=>n=>Q1(n,e).bind(o=>to(E0(o)).map(r=>yb(n,r))),bT=e=>n=>Q1(n,e).bind(o=>$t(E0(o)).map(r=>yb(r,n))),Ew=e=>n=>pT(n,e).map(o=>Js(n,o,E0(o))),dO=(e,n,o,r)=>{if(o.collapsed||!e.forall(cO))return L.none();if(n.isSameTable){const c=e.bind(Ew(r));return L.some({start:c,end:c})}else{const c=Tw(o.startContainer,r),u=Tw(o.endContainer,r),f=c.bind(uO(r)).bind(Ew(r)),b=u.bind(bT(r)).bind(Ew(r));return L.some({start:f,end:b})}},mO=(e,n)=>Qs(e,o=>ns(o,n)),vT=e=>Vr(mO(e.cells,e.rng.start),mO(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),UM=(e,n,o)=>e.exists(r=>lO(r,o)&&s0(r.start,n)),fO=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},_0=(e,n,o,r)=>dO(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=vT(c).getOr([]);if(u&&c.cells.length===f.length)return L.some(xh.fullTable(c.table));if(f.length>0){if(u)return L.some(xh.partialTable(f,L.none()));{const b=fO(o,n);return L.some(xh.partialTable(f,L.some({...n,rng:b})))}}else return L.none()}),WM=(e,n,o,r)=>dO(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(vT).getOr([]),b=u.bind(vT).getOr([]);if(f.length>0&&b.length>0){const y=fO(o,n);return L.some(xh.multiTable(f,b,y))}else return L.none()}),gO=(e,n)=>{const o=Zr(e),r=iO(n,o),c=Nd(n,o);return UM(r,n,o)?r.map(u=>xh.singleCellTable(n,u.start)):c.isMultiTable?WM(r,c,n,o):_0(r,c,n,o)},ZM=e=>we(e,n=>{yr(n,"contenteditable"),Ri(n)}),$6=(e,n)=>L.from(e.dom.getParent(n,e.dom.isBlock)).map(ie.fromDom),jM=(e,n,o)=>{o.each(r=>{n?Bs(r):(Ri(r),e.selection.setCursorLocation(r.dom,0))})},yT=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),CT(e,c,n,!1).each(u=>u())},hO=e=>{const n=_p(e),o=ie.fromDom(e.selection.getNode());Gr(o.dom)&&Wa(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Xo(n,r=>ns(r,o))&&Co(o,"data-mce-selected","1")},kw=(e,n,o)=>L.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=$6(e,f?u.endContainer:u.startContainer);u.deleteContents(),jM(e,f,b.filter(Ke(Wa,e.schema)));const y=f?n[0]:n[n.length-1];return yT(e,y,r,f),Wa(e.schema,y)?L.none():L.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);ZM(c),hO(e)}),GM=(e,n,o,r)=>L.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];yT(e,u,c,!0),yT(e,f,c,!1);const b=Wa(e.schema,u)?n:n.slice(1),y=Wa(e.schema,f)?o:o.slice(0,-1);ZM(b.concat(y)),r.deleteContents(),hO(e)}),CT=(e,n,o,r=!0)=>L.some(()=>{zM(e,n,o,r)}),qM=(e,n)=>L.some(()=>hb(e,!1,n)),KM=(e,n,o)=>gO(n,o).bind(r=>r.fold(Ke(CT,e),Ke(qM,e),Ke(kw,e),Ke(GM,e))),YM=(e,n)=>A0(e,n),XM=(e,n,o,r)=>wT(n,r).fold(()=>KM(e,n,o),c=>YM(e,c)),JM=(e,n,o)=>{const r=ie.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?kw(e,o,L.none()):XM(e,r,c,n)},pO=(e,n)=>bs(Sh(n,e),cp),wT=(e,n)=>bs(Sh(n,e),Ps("caption")),QM=(e,n,o,r,c)=>Qm(o,e.getBody(),c).bind(u=>pO(n,ie.fromDom(u.getNode())).bind(f=>ns(f,r)?L.none():L.some(Wt))),A0=(e,n)=>L.some(()=>{Ri(n),e.selection.setCursorLocation(n.dom,0)}),eN=(e,n,o,r)=>kl(e.dom).bind(c=>Ji(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),tN=(e,n)=>A0(e,n),nN=(e,n,o)=>wT(e,ie.fromDom(o.getNode())).fold(()=>L.some(Wt),r=>_o(!ns(r,n),Wt)),oN=(e,n,o,r,c)=>Qm(o,e.getBody(),c).fold(()=>L.some(Wt),u=>eN(r,o,c,u)?tN(e,r):nN(n,r,u)),sN=(e,n,o,r)=>{const c=Pe.fromRangeStart(e.selection.getRng());return pO(o,r).bind(u=>Wa(e.schema,u,{checkRootAsContent:!1})?A0(e,u):QM(e,o,n,u,c))},rN=(e,n,o,r)=>{const c=Pe.fromRangeStart(e.selection.getRng());return Wa(e.schema,r)?A0(e,r):oN(e,o,n,r,c)},ST=(e,n)=>e?vM(n):yM(n),xT=(e,n)=>{const o=Pe.fromRangeStart(e.selection.getRng());return ST(n,o)||Xi(n,e.getBody(),o).exists(r=>ST(n,r))},bO=(e,n,o)=>{const r=ie.fromDom(e.getBody());return wT(r,o).fold(()=>sN(e,n,r,o).orThunk(()=>_o(xT(e,n),Wt)),c=>rN(e,n,r,c))},O0=(e,n)=>{const o=ie.fromDom(e.selection.getStart(!0)),r=_p(e);return e.selection.isCollapsed()&&r.length===0?bO(e,n,o):JM(e,o,r)},Fp=(e,n)=>{let o=n;for(;o&&o!==e;){if(ta(o)||fr(o))return o;o=o.parentNode}return null},TT=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],vO=at.each,Cb=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=E=>{const M={};return vO(n.getAttribs(E),N=>{const $=N.nodeName.toLowerCase();$!=="style"&&!c($)&&(M[$]=n.getAttrib(E,$))}),M},y=(E,M)=>{for(const N in E)if(wn(E,N)){const $=M[N];if(Gt($)||E[N]!==$)return!1;delete M[N]}for(const N in M)if(wn(M,N))return!1;return!0};return nn(u)&&nn(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!eu(u)&&!eu(f)},c=u=>Xo(TT,f=>qo(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},ET=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),aN=e=>e.name==="summary",D0=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},kT=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const y=r.nodes[c];y?y.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const E=r.attributes[y];E?E.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},yO=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&D0(o,c=>{kT(e,n,c,r)}),r},wb=(e,n)=>{const o=(r,c)=>{mt(r,u=>{const f=Jo(u.nodes);we(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const E=f[y];(!(c?E.attr(u.filter.name)!==void 0:E.name===u.filter.name)||cn(E.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},Th=(e,n,o,r={})=>{const c=yO(e,n,o);wb(c,r)},_T=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Ii("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Ii("#text",3)).value=sc},I6=e=>{var n;return cN(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===sc},cN=(e,n)=>{const o=e==null?void 0:e.firstChild;return Ae(o)&&o===e.lastChild&&o.name===n},lN=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},R0=(e,n,o,r)=>r.isEmpty(n,o,c=>lN(e,c)),L6=(e,n)=>Ae(e)&&(n(e)||e.name==="br"),Hp=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return L.from(n)},Eh=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&Eh(c,n,o);e.unwrap()}},iN=(e,n,o,r=Wt)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=at.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),y=new Set,E=M=>M!==o&&!b[M.name];for(let M=0;M<e.length;M++){const N=e[M];let $,G,ee;if(!N.parent||y.has(N))continue;if(c[N.name]&&N.parent.name==="li"){let te=N.next;for(;te&&c[te.name];){te.name="li",y.add(te),N.parent.insert(te,N.parent);te=te.next}N.unwrap();continue}const Y=[N];for($=N.parent;$&&!n.isValidChild($.name,N.name)&&E($);$=$.parent)Y.push($);if($&&Y.length>1)if(CO(n,N,$))Eh(N,n);else{Y.reverse(),G=Y[0].clone(),r(G);let te=G;for(let be=0;be<Y.length-1;be++){n.isValidChild(te.name,Y[be].name)&&be>0?(ee=Y[be].clone(),r(ee),te.append(ee)):ee=te;for(let ye=Y[be].firstChild;ye&&ye!==Y[be+1];){const ve=ye.next;ee.append(ye),ye=ve}te=ee}R0(n,u,f,G)?$.insert(N,Y[0],!0):($.insert(G,Y[0],!0),$.insert(N,G)),$=Y[0],(R0(n,u,f,$)||cN($,"br"))&&$.empty().remove()}else if(N.parent){if(N.name==="li"){let te=N.prev;if(te&&(te.name==="ul"||te.name==="ol")){te.append(N);continue}if(te=N.next,te&&(te.name==="ul"||te.name==="ol")&&te.firstChild){te.insert(N,te.firstChild,!0);continue}const be=new Ii("ul",1);r(be),N.wrap(be);continue}if(n.isValidChild(N.parent.name,"div")&&n.isValidChild("div",N.name)){const te=new Ii("div",1);r(te),N.wrap(te)}else Eh(N,n)}}},rl=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},CO=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&rl(o,"a")?!0:aN(o)&&ET(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,F6=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},kh=e=>{const n=Pe.fromRangeStart(e),o=Pe.fromRangeEnd(e),r=e.commonAncestorContainer;return Xi(!1,r,o).map(c=>!Yi(n,o,r)&&Yi(n,c,r)?F6(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},ps=e=>e.collapsed?e:kh(e),Vj=e=>Ae(e.firstChild)&&e.firstChild===e.lastChild,H6=e=>e.name==="br"||e.value===sc,V6=(e,n)=>e.getBlockElements()[n.name]&&Vj(n)&&H6(n.firstChild),Cr=(e,n)=>{const o=e.getNonEmptyElements();return Ae(n)&&(n.isEmpty(o)||V6(e,n))},uN=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),Cr(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},_w=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},Aw=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return _w(c)},AT=e=>{var n;return It((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},OT=e=>e.data===sc||Pr(e),dN=e=>Ae(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&OT(e.firstChild),zj=e=>!e.firstChild||dN(e),z6=e=>e.length>0&&zj(e[e.length-1])?e.slice(0,-1):e,mN=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},U6=(e,n)=>!!mN(e,n),W6=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},Uj=(e,n)=>{const o=Pe.before(e),c=Kc(n).next(o);return c?c.toRange():null},fN=(e,n)=>{const o=Pe.after(e),c=Kc(n).prev(o);return c?c.toRange():null},al=(e,n,o,r)=>{const c=W6(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),at.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),fN(n[n.length-1],o)},gN=(e,n,o)=>{const r=e.parentNode;return r&&at.each(n,c=>{r.insertBefore(c,e)}),Uj(e,o)},hN=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),fN(n[0],o)),Z6=(e,n,o,r)=>{const c=Aw(n,e,r),u=mN(n,o.startContainer),f=z6(AT(c.firstChild)),b=1,y=2,E=n.getRoot(),M=N=>{const $=Pe.fromRangeStart(o),G=Kc(n.getRoot()),ee=N===b?G.prev($):G.next($),Y=ee==null?void 0:ee.getNode();return Y?mN(n,Y)!==u:!0};return u?M(b)?gN(u,f,E):M(y)?hN(u,f,E,n):al(u,f,E,o):null},j6=["pre"],G6=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,E=An(j6,u.name);if(y&&E){const M=u.attr("contenteditable")!=="false",N=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,$=L.from(Fp(r,o)).forall(ta);return M&&N&&$}else return!1},Li=Gr,rf=(e,n,o)=>{if(Ae(o)){const r=e.getParent(n.endContainer,Li);return o===r&&s0(ie.fromDom(o),n)}else return!1},q6=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},wO=(e,n,o)=>{L.from(e.getParent(n,"td,th")).map(ie.fromDom).each(r=>k2(r,o))},SO=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=Cb(e);at.each(r.select("*[data-mce-fragment]"),f=>{if(Ae(o[f.nodeName.toLowerCase()])&&QF(r,f)){for(let y=f.parentElement;Ae(y)&&y!==c&&!t6(r,f,y);y=y.parentElement)if(u.compare(y,f)){r.remove(f,!0);break}}})}},K6=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},Y6=e=>{at.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},Ow=e=>!!e.getAttribute("data-mce-fragment"),DT=(e,n)=>Ae(n)&&!e.schema.getVoidElements()[n.nodeName],xO=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=Fp(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let E=f.createRng();const M=n.previousSibling;if(st(M)){E.setStart(M,(r=(o=M.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const G=n.nextSibling;st(G)&&(M.appendData(G.data),(c=G.parentNode)===null||c===void 0||c.removeChild(G))}else E.setStartBefore(n),E.setEndBefore(n);const N=G=>{let ee=Pe.fromRangeStart(G);return ee=Kc(e.getBody()).next(ee),ee==null?void 0:ee.toRange()},$=f.getParent(n,f.isBlock);if(f.remove(n),$&&f.isEmpty($)){const G=Li($);ki(ie.fromDom($)),E.setStart($,0),E.setEnd($,0),!G&&!Ow($)&&(u=N(E))?(E=u,f.remove($)):f.add($,f.create("br",G?{}:{"data-mce-bogus":"1"}))}b.setRng(E)},X6=e=>{const n=e.dom,o=ps(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Li);rf(n,o,r)?CT(e,o,ie.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&st(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},af=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return L.some(n);return L.none()},J6=(e,n,o)=>{var r;return Xo(o.children(),ET)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},Q6=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,E=Ch({validate:!0},e.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Mi(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,M);let N=u.getRng();const $=N.startContainer,G=e.getBody();$===G&&u.isCollapsed()&&f.isBlock(G.firstChild)&&DT(e,G.firstChild)&&f.isEmpty(G.firstChild)&&(N=f.createRng(),N.setStart(G.firstChild,0),N.setEnd(G.firstChild,0),u.setRng(N)),u.isCollapsed()||X6(e);const ee=u.getNode(),Y={context:ee.nodeName.toLowerCase(),data:o.data,insert:!0},te=b.parse(n,Y);if(o.paste===!0&&uN(e.schema,te)&&U6(f,ee))return N=Z6(E,f,u.getRng(),te),N&&u.setRng(N),n;o.paste===!0&&G6(f,te,ee,e.getBody())&&((r=te.firstChild)===null||r===void 0||r.unwrap()),K6(te);let be=te.lastChild;if(be&&be.attr("id")==="mce_marker"){const ye=be;for(be=be.prev;be;be=be.walk(!0))if(be.type===3||!f.isBlock(be.name)){be.parent&&e.schema.isValidChild(be.parent.name,"span")&&be.parent.insert(ye,be,be.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(ee),!Y.invalid&&!J6(f,ee,te))n=E.serialize(te),q6(e,n,ee);else{e.selection.setContent(M);let ye=u.getNode(),ve;const Te=e.getBody();for(ca(ye)?ye=ve=Te:ve=ye;ve&&ve!==Te;)ye=ve,ve=ve.parentNode;n=ye===Te?Te.innerHTML:f.getOuterHTML(ye);const et=b.parse(n),xt=af(et),Vt=xt.bind(Hp).getOr(et);xt.each(Ht=>Ht.replace(te));const it=te.children(),Le=(c=te.parent)!==null&&c!==void 0?c:et;te.unwrap();const Ge=It(it,Ht=>CO(e.schema,Ht,Le));iN(Ge,e.schema,Vt),Th(b.getNodeFilters(),b.getAttributeFilters(),et),n=E.serialize(et),ye===Te?f.setHTML(Te,n):f.setOuterHTML(ye,n)}return SO(e,y),xO(e,f.get("mce_marker")),Y6(e.getBody()),wO(f,u.getStart(),e.schema),wl(e.schema,e.getBody(),u.getStart()),n},nu=e=>e instanceof Ii,Dw=e=>{Bp(e)&&kl(e.getBody()).each(n=>{const o=n.getNode(),r=Fu(o)?kl(o).getOr(n):n;e.selection.setRng(r.toRange())})},Qu=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&Dw(e)},e8=(e,n,o,r)=>{if(o=Mi(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=ol(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Zf(e),o)):o||(o=c),Qu(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Ch({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=P1(ie.fromDom(n))?o:at.trim(o);return Qu(e,c,r.no_selection),{content:c,html:c}}},Is=(e,n,o,r)=>{Th(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Ch({validate:!1},e.schema).serialize(o),u=Mi(P1(ie.fromDom(n))?c:at.trim(c));return Qu(e,u,r.no_selection),{content:o,html:u}},M0=(e,n,o)=>L.from(e.getBody()).map(r=>nu(n)?Is(e,r,n,o):e8(e,r,n,o)).getOr({content:n,html:nu(o.content)?"":o.content}),Rw=e=>le(e)?e:Ze,pN=(e,n,o)=>{let r=e.dom;const c=Rw(o);for(;r.parentNode;){r=r.parentNode;const u=ie.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return L.none()},Mw=(e,n,o)=>{const r=n(e),c=Rw(o);return r.orThunk(()=>c(e)?L.none():pN(e,n,c))},Nw=a0,bN=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Su(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Pw=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>bN(e,b,o)?!0:b.parentNode===u||!!cf(e,b,o,r,!0));return!!cf(e,f,o,r,c)},RT=(e,n,o)=>Cc(o)&&Nw(n,o.inline)||nf(o)&&Nw(n,o.block)?!0:Su(o)?nn(n)&&e.is(n,o.selector):!1,TO=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(le(o.onmatch))return o.onmatch(n,o,r);if(f){if(fl(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):c0(e,n,f[y]))return!0}else for(const y in f)if(wn(f,y)){const E=b?e.getAttrib(n,y):c0(e,n,y),M=ph(f[y],u),N=cn(E)||dr(E);if(N&&cn(M))continue;if(c&&N&&!o.exact||(!c||o.exact)&&!Nw(E,bh(M,y)))return!1}}return!0},cf=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&nn(n))for(let b=0;b<u.length;b++){const y=u[b];if(RT(e.dom,n,y)&&TO(f,n,y,"attributes",c,r)&&TO(f,n,y,"styles",c,r)){const E=y.classes;if(E){for(let M=0;M<E.length;M++)if(!e.dom.hasClass(n,ph(E[M],r)))return}return y}}},Bw=(e,n,o,r,c)=>{if(r)return Pw(e,r,n,o,c);if(r=e.selection.getNode(),Pw(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&Pw(e,u,n,o,c))},vN=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!c[y]&&cf(e,f,y,o)&&(c[y]=!0,r.push(y))}},e.dom.getRoot()),r},MT=(e,n)=>{const o=c=>ns(c,ie.fromDom(e.getBody())),r=(c,u)=>cf(e,c.dom,u)?L.some(u):L.none();return L.from(e.selection.getStart(!0)).bind(c=>Mw(ie.fromDom(c),u=>ir(n,f=>r(u,f)),o)).getOrNull()},t8=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=Rp(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Su(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},n8=(e,n,o)=>zo(o,(r,c)=>{const u=rA(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),$w=ia,o8=(e,n)=>e.importNode(n,!0),yN=e=>{if(e){const n=new gc(e,e);for(let o=n.current();o;o=n.next())if(st(o))return o}return null},NT=e=>{const n=ie.fromTag("span");return Jr(n,{id:t0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ea(n,ie.fromText($w)),n},s8=e=>{const n=yN(e);return n&&n.data.charAt(0)===$w&&n.deleteData(0,1),n},EO=(e,n,o)=>{const r=e.dom,c=e.selection;if($x(n))hb(e,!1,ie.fromDom(n),o,!0);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,E=u.endContainer,M=u.endOffset,N=s8(n);r.remove(n,!0),b===N&&y>0&&u.setStart(N,y-1),E===N&&M>0&&u.setEnd(N,M-1),f&&r.isEmpty(f)&&Ri(ie.fromDom(f)),c.setRng(u)}},PT=(e,n,o)=>{const r=e.dom,c=e.selection;if(n)EO(e,n,o);else if(n=mh(e.getBody(),c.getStart()),!n)for(;n=r.get(t0);)EO(e,n,o)},CN=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,Ke(JC,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(c_(ie.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},wN=(e,n)=>(e.appendChild(n),n),SN=(e,n)=>{var o;const r=Ks(e,(u,f)=>wN(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return wN(r,c.createTextNode($w))},xN=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,y=It(cs(f.get()),N=>N!==r&&!$o(N,"removeformat")),E=n8(e,o,y);if(It(E,N=>!i0(e,N,r)).length>0){const N=o.cloneNode(!1);return b.add(n,N),f.remove(r,c,N,u),b.remove(N),L.some(N)}else return L.none()},r8=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const E=f.startContainer.nodeValue;r=mh(e.getBody(),c.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(E&&b>0&&b<E.length&&M.test(E.charAt(b))&&M.test(E.charAt(b-1))){const N=c.getBookmark();f.collapse(!0);let $=tg(e.dom,f,u);$=on($),e.formatter.apply(n,o,$),c.moveToBookmark(N)}else{let N=r?yN(r):null;(!r||(N==null?void 0:N.data)!==$w)&&(r=o8(e.getDoc(),NT(!0).dom),N=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(N,b)}},TN=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),E=y.startContainer,M=y.startOffset;let N=E;st(E)&&(M!==E.data.length&&(f=!0),N=N.parentNode);const $=[];let G;for(;N;){if(cf(e,N,n,o,r)){G=N;break}N.nextSibling&&(f=!0),$.push(N),N=N.parentNode}if(G)if(f){const ee=u.getBookmark();y.collapse(!0);let Y=tg(c,y,b,!0);Y=on(Y),e.formatter.remove(n,o,Y,r),u.moveToBookmark(ee)}else{const ee=mh(e.getBody(),G),Y=Ae(ee)?c.getParents(G.parentNode,ut,ee):[],te=NT(!1).dom;CN(e,te,ee??G);const be=xN(e,te,G,n,o,r),ye=SN([...$,...be.toArray(),...Y],te);ee&&EO(e,ee,Ae(ee)),u.setCursorLocation(ye,1),c.isEmpty(G)&&c.remove(G)}},ed=(e,n,o)=>{const r=e.selection,c=e.getBody();PT(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===$w&&PT(e,mh(c,r.getStart()),!0),(n===37||n===39)&&PT(e,mh(c,r.getStart()),!0)},a8=e=>st(e)&&vr(e.data,sc),EN=e=>{e.on("mouseup keydown",n=>{ed(e,n.keyCode,a8(e.selection.getRng().endContainer))})},BT=e=>{const n=NT(!1),o=SN(e,n.dom);return{caretContainer:n,caretPosition:Pe(o,0)}},$T=(e,n)=>{const{caretContainer:o,caretPosition:r}=BT(n);return oc(ie.fromDom(e),o),Bs(ie.fromDom(e)),r},kN=(e,n)=>{const{caretContainer:o,caretPosition:r}=BT(n);return e.insertNode(o.dom),r},kO=(e,n)=>{if(Qi(n.dom))return!1;const o=e.schema.getTextInlineElements();return wn(o,Ao(n))&&!Qi(n.dom)&&!bu(n.dom)},Iw={},_N=Wi(["pre"]),_O=(e,n)=>{Iw[e]||(Iw[e]=[]),Iw[e].push(n)},AN=(e,n)=>{wn(Iw,e)&&we(Iw[e],o=>{o(n)})};_O("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return _N(f)&&An(c,f)},r=(c,u)=>{const f=ie.fromDom(u),b=Aa(f).dom;Bs(f),ci(ie.fromDom(c),[ie.fromTag("br",b),ie.fromTag("br",b),...Oa(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=It(It(c,_N),o(c));we(u,f=>{r(f.previousSibling,f)})}});const Pd=["fontWeight","fontStyle","color","fontSize","fontFamily"],c8=e=>Fe(e.styles)&&Xo(cs(e.styles),n=>An(Pd,n)),l8=e=>bs(e,n=>Cc(n)&&n.inline==="span"&&c8(n)),i8=(e,n)=>{const o=e.get(n);return nt(o)?l8(o):L.none()},IT=(e,n)=>Pi(n,Pe.fromRangeStart(e)).isNone(),ON=(e,n)=>El(n,Pe.fromRangeEnd(e)).exists(o=>!Pr(o.getNode())||El(n,o).isSome())===!1,u8=e=>n=>Zi(n)&&e.isEditable(n),d8=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return IT(o,n[0])&&ON(o,n[0])?n:[];{const r=$t(n).filter(f=>IT(o,f)).toArray(),c=to(n).filter(f=>ON(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},AO=e=>It(d8(e),u8(e.dom)),wm=e=>It(e.getSelectedBlocks(),u8(e.dom)),Lw=at.each,N0=e=>nn(e)&&!eu(e)&&!Qi(e)&&!bu(e),LT=(e,n)=>{for(let o=e;o;o=o[n]){if(st(o)&&Uo(o.data))return e;if(nn(o)&&!eu(o))return o}return e},DN=(e,n,o)=>{const r=Cb(e),c=hu(n)&&e.dom.isEditable(n),u=hu(o)&&e.dom.isEditable(o);if(c&&u){const f=LT(n,"previousSibling"),b=LT(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const E=y;y=y.nextSibling,f.appendChild(E)}return e.dom.remove(b),at.each(at.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},OO=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=DN(e,eb(r),r))!==null&&c!==void 0?c:r;DN(e,u,eb(u,!0))}},m8=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";Lw(e.select(r,o),c=>{N0(c)&&e.isEditable(c)&&Lw(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},FT=(e,n,o)=>{Lw(e.childNodes,r=>{N0(r)&&(n(r)&&o(r),r.hasChildNodes()&&FT(r,n,o))})},DO=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},RN=(e,n)=>o=>!!(o&&c0(e,o,n)),RO=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),DO(e,r)},Sb=Cs.generate([{keep:[]},{rename:["name"]},{removed:[]}]),xb=/^(src|href|style)$/,HT=at.each,VT=a0,MN=e=>/^(TR|TH|TD)$/.test(e.nodeName),NN=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),PN=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(nn(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return st(r)&&o&&c>=r.data.length&&(r=new gc(r,e.getBody()).next()||r),st(r)&&!o&&c===0&&(r=new gc(r,e.getBody()).prev()||r),r},BN=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return MN(e)&&r?e.nodeName==="TR"&&r[o]||r:e},MO=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},$N=(e,n,o,r,c)=>{const u=ie.fromDom(n),f=ie.fromDom(e.create(r,c)),b=o?jc(u):Pg(u);return ci(f,b),o?(oc(u,f),zi(f,u)):(Vi(u,f),ea(f,u)),f.dom},IN=(e,n)=>n.links&&e.nodeName==="A",LN=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=ol(e);nf(o)&&r===u.getRoot()&&(!o.list_block||!VT(n,o.list_block))&&we(Jo(n.childNodes),b=>{tf(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=MO(u,b,f),u.setAttribs(c,Zf(e))):c=null}),!(cA(o)&&!VT(o.inline,n))&&u.remove(n,!0)},zT=(e,n,o)=>Bo(e)?{name:n,value:null}:{name:e,value:ph(n,o)},Vp=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},FN=(e,n,o,r,c)=>{let u=!1;HT(o.styles,(f,b)=>{const{name:y,value:E}=zT(b,f,r),M=bh(E,y);(o.remove_similar||W(E)||!nn(c)||VT(c0(e,c,y),M))&&e.setStyle(n,y,""),u=!0}),u&&Vp(e,n)},f8=(e,n,o)=>{n==="removeformat"?we(wm(e.selection),r=>{we(Pd,c=>e.dom.setStyle(r,c,"")),Vp(e.dom,r)}):i8(e.formatter,n).each(r=>{we(wm(e.selection),c=>FN(e.dom,c,r,o,null))})},Fw=(e,n,o,r,c)=>{const u=e.dom,f=Cb(e),b=e.schema;if(Cc(n)&&sm(b,n.inline)&&Gi(b,r)&&r.parentElement===e.getBody())return LN(e,r,n),Sb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!RT(u,r,n)&&!IN(r,n))return Sb.keep();const y=r,E=n.preserve_attributes;if(Cc(n)&&n.remove==="all"&&nt(E)){const M=It(u.getAttribs(y),N=>An(E,N.name.toLowerCase()));if(u.removeAllAttribs(y),we(M,N=>u.setAttrib(y,N.name,N.value)),M.length>0)return Sb.rename("span")}if(n.remove!=="all"){FN(u,y,n,o,c),HT(n.attributes,(N,$)=>{const{name:G,value:ee}=zT($,N,o);if(n.remove_similar||W(ee)||!nn(c)||VT(u.getAttrib(c,G),ee)){if(G==="class"){const Y=u.getAttrib(y,G);if(Y){let te="";if(we(Y.split(/\s+/),be=>{/mce\-\w+/.test(be)&&(te+=(te?" ":"")+be)}),te){u.setAttrib(y,G,te);return}}}if(xb.test(G)&&y.removeAttribute("data-mce-"+G),G==="style"&&Wi(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(G),u.setStyle(y,"list-style-type","none");return}G==="class"&&y.removeAttribute("className"),y.removeAttribute(G)}}),HT(n.classes,N=>{N=ph(N,o),(!nn(c)||u.hasClass(c,N))&&u.removeClass(y,N)});const M=u.getAttribs(y);for(let N=0;N<M.length;N++){const $=M[N].nodeName;if(!f.isAttributeInternal($))return Sb.keep()}}return n.remove!=="none"?(LN(e,y,n),Sb.removed()):Sb.keep()},HN=(e,n,o,r,c)=>{let u;return n.parentNode&&we(Rp(e.dom,n.parentNode).reverse(),f=>{if(!u&&nn(f)&&f.id!=="_start"&&f.id!=="_end"){const b=cf(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},VN=(e,n,o,r)=>Fw(e,n,o,r,r).fold(rt(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),rt(null)),g8=(e,n,o,r,c,u,f,b)=>{var y,E;let M,N;const $=e.dom;if(o){const G=o.parentNode;for(let ee=r.parentNode;ee&&ee!==G;ee=ee.parentNode){let Y=$.clone(ee,!1);for(let te=0;te<n.length&&(Y=VN(e,n[te],b,Y),Y!==null);te++);Y&&(M&&Y.appendChild(M),N||(N=Y),M=Y)}(!f.mixed||!$.isBlock(o))&&(r=(y=$.split(o,r))!==null&&y!==void 0?y:r),M&&N&&((E=c.parentNode)===null||E===void 0||E.insertBefore(M,c),N.appendChild(c),Cc(f)&&OO(e,f,b,M))}return r},zN=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,E=Y=>{const te=HN(e,Y,n,o,c);return g8(e,u,te,Y,Y,!0,f,o)},M=Y=>eu(Y)&&nn(Y)&&(Y.id==="_start"||Y.id==="_end"),N=Y=>Xo(u,te=>lf(e,te,o,Y,Y)),$=Y=>{const te=Jo(Y.childNodes),ye=N(Y)||Xo(u,et=>RT(b,Y,et)),ve=Y.parentNode;if(!ye&&Ae(ve)&&Rd(f)&&N(ve),f.deep&&te.length)for(let et=0;et<te.length;et++)$(te[et]);we(["underline","line-through","overline"],et=>{nn(Y)&&e.dom.getStyle(Y,"text-decoration")===et&&Y.parentNode&&Bx(b,Y.parentNode)===et&&lf(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:et}},void 0,Y)})},G=Y=>{const te=b.get(Y?"_start":"_end");if(te){let be=te[Y?"firstChild":"lastChild"];return M(be)&&(be=be[Y?"firstChild":"lastChild"]),st(be)&&be.data.length===0&&(be=Y?te.previousSibling||te.nextSibling:te.nextSibling||te.previousSibling),b.remove(te,!0),be}else return null},ee=Y=>{let te,be,ye=tg(b,Y,u,Y.collapsed);if(f.split){if(ye=on(ye),te=PN(e,ye,!0),be=PN(e,ye),te!==be){if(te=BN(te,!0),be=BN(be,!1),NN(b,te,be)){const Te=L.from(te.firstChild).getOr(te);E($N(b,Te,!0,"span",{id:"_start","data-mce-type":"bookmark"})),G(!0);return}if(NN(b,be,te)){const Te=L.from(be.lastChild).getOr(be);E($N(b,Te,!1,"span",{id:"_end","data-mce-type":"bookmark"})),G(!1);return}te=MO(b,te,"span",{id:"_start","data-mce-type":"bookmark"}),be=MO(b,be,"span",{id:"_end","data-mce-type":"bookmark"});const ve=b.createRng();ve.setStartAfter(te),ve.setEndBefore(be),sb(b,ve,Te=>{we(Te,et=>{!eu(et)&&!eu(et.parentNode)&&E(et)})}),E(te),E(be),te=G(!0),be=G()}else te=be=E(te);ye.startContainer=te.parentNode?te.parentNode:te,ye.startOffset=b.nodeIndex(te),ye.endContainer=be.parentNode?be.parentNode:be,ye.endOffset=b.nodeIndex(be)+1}sb(b,ye,ve=>{we(ve,$)})};if(r){if(Dp(r)){const Y=b.createRng();Y.setStartBefore(r),Y.setEndAfter(r),ee(Y)}else ee(r);tu(e,n,r,o);return}!y.isCollapsed()||!Cc(f)||_p(e).length?(bm(e,()=>Op(e,ee),Y=>Cc(f)&&Bw(e,n,o,Y)),e.nodeChanged()):TN(e,n,o,c),f8(e,n,o),tu(e,n,r,o)},UN=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&zN(e,n,o,r,c)},lf=(e,n,o,r,c)=>Fw(e,n,o,r,c).fold(Ze,u=>(e.dom.rename(r,u),!0),ut),NO=at.each,WN=(e,n,o,r)=>{const c=u=>{if(hu(u)&&nn(u.parentNode)&&e.isEditable(u)){const f=Bx(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(at.walk(r,c,"childNodes"),c(r))},ZN=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=RN(e,"fontSize");FT(r,u=>c(u)&&e.isEditable(u),RO(e,"backgroundColor",ph(n.styles.backgroundColor,o)))}},UT=(e,n,o,r)=>{if(Cc(n)&&(n.inline==="sub"||n.inline==="sup")){const c=RN(e,"fontSize");FT(r,f=>c(f)&&e.isEditable(f),RO(e,"fontSize",""));const u=It(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},jN=(e,n,o,r)=>{NO(n,c=>{Cc(c)&&NO(e.dom.select(c.inline,r),u=>{N0(u)&&lf(e,c,o,u,c.exact?u:null)}),m8(e.dom,c,r)})},h8=(e,n,o,r,c)=>{const u=c.parentNode;cf(e,u,o,r)&&lf(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>cf(e,f,o,r)?(lf(e,n,r,c),!0):!1)},Hw=at.each,p8=(e,n,o,r)=>{if(Q2(e)&&Cc(n)&&o.parentNode){const c=u2(e.schema),u=Qb(ie.fromDom(o),f=>Qi(f.dom));return wr(c,r)&&qr(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},GN=(e,n,o,r)=>{if(Hw(o.styles,(c,u)=>{e.setStyle(n,u,ph(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},WT=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,E=(ee,Y=u)=>{le(Y.onformat)&&Y.onformat(ee,Y,o,r),GN(b,ee,Y,o),Hw(Y.attributes,(te,be)=>{b.setAttrib(ee,be,ph(te,o))}),Hw(Y.classes,te=>{const be=ph(te,o);b.hasClass(ee,be)||b.addClass(ee,be)})},M=(ee,Y)=>{let te=!1;return Hw(ee,be=>Su(be)?b.getContentEditable(Y)==="false"&&!be.ceFalseOverride||Ae(be.collapsed)&&be.collapsed!==f?!0:b.is(Y,be.selector)&&!Qi(Y)?(E(Y,be),te=!0,!1):!0:!1),te},N=ee=>{if(q(ee)){const Y=b.create(ee);return E(Y),Y}else return null},$=(ee,Y,te)=>{const be=[];let ye=!0;const ve=u.inline||u.block,Te=N(ve),et=it=>aA(u)&&cf(e,it,n,o),xt=(it,Le,Ge)=>{const Ht=tb(u)&&JC(e.schema,it)&&tf(e,Le,ve);return Ge&&Ht},Vt=(it,Le,Ge,Ht)=>{const bn=it.nodeName.toLowerCase(),uo=tf(e,ve,bn)&&tf(e,Le,ve),Lo=!te&&st(it)&&Yg(it.data),_s=Qi(it),Fs=!Cc(u)||!ee.isBlock(it);return(Ge||Ht)&&uo&&!Lo&&!_s&&Fs};sb(ee,Y,it=>{let Le;const Ge=Ht=>{let bn=!1,uo=ye,Lo=!1;const _s=Ht.parentNode,Fs=_s.nodeName.toLowerCase(),pr=ee.getContentEditable(Ht);Ae(pr)&&(uo=ye,ye=pr==="true",bn=!0,Lo=tw(e,Ht));const il=ye&&!bn;if(Pr(Ht)&&!p8(e,u,Ht,Fs)){Le=null,nf(u)&&ee.remove(Ht);return}if(et(Ht)){Le=null;return}if(xt(Ht,Fs,il)){const Hs=ee.rename(Ht,ve);E(Hs),be.push(Hs),Le=null;return}if(Su(u)){let Hs=M(c,Ht);if(!Hs&&Ae(_s)&&Rd(u)&&(Hs=M(c,_s)),!Cc(u)||Hs){Le=null;return}}Ae(Te)&&Vt(Ht,Fs,il,Lo)?(Le||(Le=ee.clone(Te,!1),_s.insertBefore(Le,Ht),be.push(Le)),Lo&&bn&&(ye=uo),Le.appendChild(Ht)):(Le=null,we(Jo(Ht.childNodes),Ge),bn&&(ye=uo),Le=null)};we(it,Ge)}),u.links===!0&&we(be,it=>{const Le=Ge=>{Ge.nodeName==="A"&&E(Ge,u),we(Jo(Ge.childNodes),Le)};Le(it)}),we(be,it=>{const Le=bn=>{let uo=0;return we(bn.childNodes,Lo=>{!r0(Lo)&&!eu(Lo)&&uo++}),uo},Ge=bn=>bs(bn.childNodes,XC).filter(Lo=>ee.getContentEditable(Lo)!=="false"&&RT(ee,Lo,u)).map(Lo=>{const _s=ee.clone(Lo,!1);return E(_s),ee.replace(_s,bn,!0),ee.remove(Lo,!0),_s}).getOr(bn),Ht=Le(it);if((be.length>1||!ee.isBlock(it))&&Ht===0){ee.remove(it,!0);return}(Cc(u)||nf(u)&&u.wrapper)&&(!u.exact&&Ht===1&&(it=Ge(it)),jN(e,c,o,it),h8(e,u,n,o,it),ZN(ee,u,o,it),WN(ee,u,o,it),UT(ee,u,o,it),OO(e,u,o,it))})},G=Dp(r)?r:y.getNode();if(b.getContentEditable(G)==="false"&&!tw(e,G)){r=G,M(c,r),Tu(e,n,r,o);return}if(u){if(r)if(Dp(r)){if(!M(c,r)){const ee=b.createRng();ee.setStartBefore(r),ee.setEndAfter(r),$(b,tg(b,ee,c),!0)}}else $(b,r,!0);else!f||!Cc(u)||_p(e).length?(y.setRng(ps(y.getRng())),bm(e,()=>{Op(e,(ee,Y)=>{const te=Y?ee:tg(b,ee,c);$(b,te,!1)})},ut),e.nodeChanged()):r8(e,n,o),i8(e.formatter,n).each(ee=>{we(AO(e.selection),Y=>GN(b,Y,ee,o))});AN(n,e)}Tu(e,n,r,o)},PO=(e,n,o,r)=>{(r||e.selection.isEditable())&&WT(e,n,o,r)},ZT=e=>wn(e,"vars"),b8=(e,n)=>{e.set({}),n.on("NodeChange",o=>{$O(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=L.from(o.node).map(c=>Dp(c)?c:c.startContainer).bind(c=>nn(c)?L.some(c):L.from(c.parentElement)).getOrThunk(()=>qN(n));$O(n,r,e.get())})},qN=e=>e.selection.getStart(),BO=(e,n,o,r,c)=>jr(n,b=>{const y=e.formatter.matchNode(b,o,c??{},r);return!Gt(y)},b=>bN(e,b,o)?!0:r?!1:Ae(e.formatter.matchNode(b,o,c,!0))),jT=(e,n)=>{const o=n??qN(e);return It(Rp(e.dom,o),r=>nn(r)&&!bu(r))},$O=(e,n,o)=>{const r=jT(e,n);mt(o,(c,u)=>{const f=b=>{const y=BO(e,r,u,b.similar,ZT(b)?b.vars:void 0),E=y.isSome();if(b.state.get()!==E){b.state.set(E);const M=y.getOr(n);ZT(b)?b.callback(E,{node:M,format:u,parents:r}):we(b.callbacks,N=>N(E,{node:M,format:u,parents:r}))}};we([c.withSimilar,c.withoutSimilar],f),we(c.withVars,f)})},v8=(e,n,o,r,c,u)=>{const f=n.get();we(o.split(","),b=>{const y=is(f,b).getOrThunk(()=>{const M={withSimilar:{state:rr(!1),similar:!0,callbacks:[]},withoutSimilar:{state:rr(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=M,M}),E=()=>{const M=jT(e);return BO(e,M,b,c,u).isSome()};if(Gt(u)){const M=c?y.withSimilar:y.withoutSimilar;M.callbacks.push(r),M.callbacks.length===1&&M.state.set(E())}else y.withVars.push({state:rr(E()),similar:c,vars:u,callback:r})}),n.set(f)},y8=(e,n,o)=>{const r=e.get();we(n.split(","),c=>is(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:It(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:It(u.withoutSimilar.callbacks,f=>f!==o)},withVars:It(u.withVars,f=>f.callback!==o)}})),e.set(r)},C8=(e,n,o,r,c,u)=>(v8(e,n,o,r,c,u),{unbind:()=>y8(n,o,r)}),GT=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(Bw(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?UN(e,n,o,r):PO(e,n,o,r))},lg=at.explode,KN=()=>{const e={};return{addFilter:(c,u)=>{we(lg(c),f=>{wn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>Ya(e),removeFilter:(c,u)=>{we(lg(c),f=>{if(wn(e,f))if(Ae(u)){const b=e[f],y=It(b.callbacks,E=>E!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},IO=(e,n)=>{we(n,o=>{e.attr(o,null)})},$a=(e,n,o)=>{e.addNodeFilter("font",r=>{we(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),y=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&Rl(y).each(E=>{u["font-size"]=o[E-1]}),c.name="span",c.attr("style",n.serialize(u)),IO(c,["color","face","size"])})})},LO=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";we(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},FO=(e,n,o)=>{var r;const c=Oy();n.convert_fonts_to_spans&&$a(e,c,at.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),LO(e,o,c)},_h=(e,n,o)=>{n.inline_styles&&FO(e,n,o)},YN=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),XN=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Tb=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?XN(r):decodeURIComponent(r);return L.some({type:c[1],data:f,base64Encoded:u})}else return L.none()},JN=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return L.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return L.some(new Blob([c],{type:e}))},w8=e=>new Promise((n,o)=>{Tb(e).bind(({type:r,data:c,base64Encoded:u})=>JN(r,c,u)).fold(()=>o("Invalid data URI"),n)}),P0=e=>qo(e,"blob:")?YN(e):qo(e,"data:")?w8(e):Promise.reject("Unknown URI format"),QN=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let Eb=0;const S8=e=>"blobid"+Eb++,Ah=(e,n,o)=>Tb(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return L.none();{const f=u?r:btoa(r);return o(f,c)}}),td=(e,n,o)=>{const r=e.create(S8(),n,o);return e.add(r),r},B0=(e,n,o=!1)=>Ah(n,o,(r,c)=>L.from(e.getByData(r,c)).orThunk(()=>JN(c,r).map(u=>td(e,u,r)))),HO=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(qo(n,"blob:")){const r=e.getByUri(n);return Ae(r)?Promise.resolve(r):P0(n).then(c=>QN(c).then(u=>Ah(u,!1,f=>L.some(td(e,c,f))).getOrThunk(o)))}else return qo(n,"data:")?B0(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},VO=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,x8=e=>L.from(e.match(VO)).bind(n=>rn(n,1)).map(n=>qo(n,"www.")?n.substring(4):n),Vw=(e,n)=>{L.from(e.attr("src")).bind(x8).forall(o=>!An(n,o))&&e.attr("sandbox","")},zO=(e,n)=>qo(e,`${n}/`),Sm=e=>Gt(e)?"iframe":zO(e,"image")?"img":zO(e,"video")?"video":zO(e,"audio")?"audio":"iframe",qT=({type:e,src:n,width:o,height:r}={},c,u)=>{const f=Sm(e),b=new Ii(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&c&&Vw(b,u),b},eP=e=>Ae(e.attr("data-mce-bogus")),UO=e=>e.attr("src")===Ot.transparentSrc||Ae(e.attr("data-mce-placeholder")),WO=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");UO(c)||eP(c)||cn(u)||B0(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>we(c,r))}},kb=(e,n)=>{var o,r;const c=e.schema;e.addAttributeFilter("href",y=>{let E=y.length;const M=$=>$.split(" ").filter(ee=>ee.length>0).concat(["noopener"]).sort().join(" "),N=$=>{const G=$?at.trim($):"";return/\b(noopener)\b/g.test(G)?G:M(G)};if(!n.allow_unsafe_link_target)for(;E--;){const $=y[E];$.name==="a"&&$.attr("target")==="_blank"&&$.attr("rel",N($.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",y=>{let E=y.length,M,N,$,G;for(;E--;)if(G=y[E],G.name==="a"&&G.firstChild&&!G.attr("href"))for($=G.parent,M=G.lastChild;M&&$;)N=M.prev,$.insert(M,G),M=N}),n.fix_list_elements&&e.addNodeFilter("ul,ol",y=>{let E=y.length,M,N;for(;E--;)if(M=y[E],N=M.parent,N&&(N.name==="ul"||N.name==="ol"))if(M.prev&&M.prev.name==="li")M.prev.append(M);else{const $=new Ii("li",1);$.attr("style","list-style-type: none"),M.wrap($)}});const u=c.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",y=>{var E;let M=y.length;for(;M--;){const N=y[M],$=(E=N.attr("class"))!==null&&E!==void 0?E:"",G=at.explode($," ");let ee="";for(let Y=0;Y<G.length;Y++){const te=G[Y];let be=!1,ye=u["*"];ye&&ye[te]&&(be=!0),ye=u[N.name],!be&&ye&&ye[te]&&(be=!0),be&&(ee&&(ee+=" "),ee+=te)}ee.length||(ee=null),N.attr("class",ee)}}),WO(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=Hn((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",y=>we(y,E=>{E.replace(qT({type:E.attr("type"),src:E.name==="object"?E.attr("data"):E.attr("src"),width:E.attr("width"),height:E.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",y=>we(y,E=>Vw(E,b)))},{entries:KT,setPrototypeOf:tP,isFrozen:nP,getPrototypeOf:T8,getOwnPropertyDescriptor:E8}=Object;let{freeze:_u,seal:uf,create:zw}=Object,{apply:ZO,construct:YT}=typeof Reflect<"u"&&Reflect;ZO||(ZO=function(n,o,r){return n.apply(o,r)}),_u||(_u=function(n){return n}),uf||(uf=function(n){return n}),YT||(YT=function(n,o){return new n(...o)});const jO=xm(Array.prototype.forEach),k8=xm(Array.prototype.pop),$0=xm(Array.prototype.push),Uw=xm(String.prototype.toLowerCase),GO=xm(String.prototype.toString),_8=xm(String.prototype.match),df=xm(String.prototype.replace),A8=xm(String.prototype.indexOf),O8=xm(String.prototype.trim),Bd=xm(RegExp.prototype.test),Ww=D8(TypeError);function xm(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return ZO(e,n,r)}}function D8(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return YT(e,o)}}function Ls(e,n,o){var r;o=(r=o)!==null&&r!==void 0?r:Uw,tP&&tP(e,null);let c=n.length;for(;c--;){let u=n[c];if(typeof u=="string"){const f=o(u);f!==u&&(nP(n)||(n[c]=f),u=f)}e[u]=!0}return e}function I0(e){const n=zw(null);for(const[o,r]of KT(e))n[o]=r;return n}function XT(e,n){for(;e!==null;){const r=E8(e,n);if(r){if(r.get)return xm(r.get);if(typeof r.value=="function")return xm(r.value)}e=T8(e)}function o(r){return console.warn("fallback value for",r),null}return o}const oP=_u(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),JT=_u(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qO=_u(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),L0=_u(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),KO=_u(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),R8=_u(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),sP=_u(["#text"]),rP=_u(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),QT=_u(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),aP=_u(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),eE=_u(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),M8=uf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),N8=uf(/<%[\w\W]*|[\w\W]*%>/gm),P8=uf(/\${[\w\W]*}/gm),B8=uf(/^data-[\-\w.\u00B7-\uFFFF]/),$8=uf(/^aria-[\-\w]+$/),cP=uf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),I8=uf(/^(?:\w+script|data):/i),L8=uf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tE=uf(/^html$/i);var YO=Object.freeze({__proto__:null,MUSTACHE_EXPR:M8,ERB_EXPR:N8,TMPLIT_EXPR:P8,DATA_ATTR:B8,ARIA_ATTR:$8,IS_ALLOWED_URI:cP,IS_SCRIPT_OR_DATA:I8,ATTR_WHITESPACE:L8,DOCTYPE_NAME:tE});const Wj=()=>typeof window>"u"?null:window,Zw=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function lP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wj();const n=Mo=>lP(Mo);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:c}=e;const{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:y,NodeFilter:E,NamedNodeMap:M=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:N,DOMParser:$,trustedTypes:G}=e,ee=y.prototype,Y=XT(ee,"cloneNode"),te=XT(ee,"nextSibling"),be=XT(ee,"childNodes"),ye=XT(ee,"parentNode");if(typeof f=="function"){const Mo=c.createElement("template");Mo.content&&Mo.content.ownerDocument&&(c=Mo.content.ownerDocument)}let ve,Te="";const{implementation:et,createNodeIterator:xt,createDocumentFragment:Vt,getElementsByTagName:it}=c,{importNode:Le}=o;let Ge={};n.isSupported=typeof KT=="function"&&typeof ye=="function"&&et&&et.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ht,ERB_EXPR:bn,TMPLIT_EXPR:uo,DATA_ATTR:Lo,ARIA_ATTR:_s,IS_SCRIPT_OR_DATA:Fs,ATTR_WHITESPACE:pr}=YO;let{IS_ALLOWED_URI:il}=YO,Hs=null;const Rt=Ls({},[...oP,...JT,...qO,...KO,...sP]);let un=null;const rs=Ls({},[...rP,...QT,...aP,...eE]);let Ft=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Rn=null,xo=null,zt=!0,ho=!0,To=!1,Tc=!0,Ss=!1,qa=!1,Vd=!1,_m=!1,bi=!1,Ru=!1,zd=!1,Mu=!0,ld=!1;const yn="user-content-";let Go=!0,$r=!1,sa={},Ia=null;const Ec=Ls({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Sa=null;const xa=Ls({},["audio","video","img","source","image","track"]);let Xl=null;const Am=Ls({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Om="http://www.w3.org/1998/Math/MathML",Ud="http://www.w3.org/2000/svg",id="http://www.w3.org/1999/xhtml";let $h=id,Kb=!1,c1=null;const KS=Ls({},[Om,Ud,id],GO);let Dm;const YS=["application/xhtml+xml","text/html"],vR="text/html";let Al,Ih=null;const yR=c.createElement("form"),Uk=function($e){return $e instanceof RegExp||$e instanceof Function},xg=function($e){if(!(Ih&&Ih===$e)){if((!$e||typeof $e!="object")&&($e={}),$e=I0($e),Dm=YS.indexOf($e.PARSER_MEDIA_TYPE)===-1?Dm=vR:Dm=$e.PARSER_MEDIA_TYPE,Al=Dm==="application/xhtml+xml"?GO:Uw,Hs="ALLOWED_TAGS"in $e?Ls({},$e.ALLOWED_TAGS,Al):Rt,un="ALLOWED_ATTR"in $e?Ls({},$e.ALLOWED_ATTR,Al):rs,c1="ALLOWED_NAMESPACES"in $e?Ls({},$e.ALLOWED_NAMESPACES,GO):KS,Xl="ADD_URI_SAFE_ATTR"in $e?Ls(I0(Am),$e.ADD_URI_SAFE_ATTR,Al):Am,Sa="ADD_DATA_URI_TAGS"in $e?Ls(I0(xa),$e.ADD_DATA_URI_TAGS,Al):xa,Ia="FORBID_CONTENTS"in $e?Ls({},$e.FORBID_CONTENTS,Al):Ec,Rn="FORBID_TAGS"in $e?Ls({},$e.FORBID_TAGS,Al):{},xo="FORBID_ATTR"in $e?Ls({},$e.FORBID_ATTR,Al):{},sa="USE_PROFILES"in $e?$e.USE_PROFILES:!1,zt=$e.ALLOW_ARIA_ATTR!==!1,ho=$e.ALLOW_DATA_ATTR!==!1,To=$e.ALLOW_UNKNOWN_PROTOCOLS||!1,Tc=$e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ss=$e.SAFE_FOR_TEMPLATES||!1,qa=$e.WHOLE_DOCUMENT||!1,bi=$e.RETURN_DOM||!1,Ru=$e.RETURN_DOM_FRAGMENT||!1,zd=$e.RETURN_TRUSTED_TYPE||!1,_m=$e.FORCE_BODY||!1,Mu=$e.SANITIZE_DOM!==!1,ld=$e.SANITIZE_NAMED_PROPS||!1,Go=$e.KEEP_CONTENT!==!1,$r=$e.IN_PLACE||!1,il=$e.ALLOWED_URI_REGEXP||cP,$h=$e.NAMESPACE||id,Ft=$e.CUSTOM_ELEMENT_HANDLING||{},$e.CUSTOM_ELEMENT_HANDLING&&Uk($e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ft.tagNameCheck=$e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$e.CUSTOM_ELEMENT_HANDLING&&Uk($e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ft.attributeNameCheck=$e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$e.CUSTOM_ELEMENT_HANDLING&&typeof $e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ft.allowCustomizedBuiltInElements=$e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ss&&(ho=!1),Ru&&(bi=!0),sa&&(Hs=Ls({},[...sP]),un=[],sa.html===!0&&(Ls(Hs,oP),Ls(un,rP)),sa.svg===!0&&(Ls(Hs,JT),Ls(un,QT),Ls(un,eE)),sa.svgFilters===!0&&(Ls(Hs,qO),Ls(un,QT),Ls(un,eE)),sa.mathMl===!0&&(Ls(Hs,KO),Ls(un,aP),Ls(un,eE))),$e.ADD_TAGS&&(Hs===Rt&&(Hs=I0(Hs)),Ls(Hs,$e.ADD_TAGS,Al)),$e.ADD_ATTR&&(un===rs&&(un=I0(un)),Ls(un,$e.ADD_ATTR,Al)),$e.ADD_URI_SAFE_ATTR&&Ls(Xl,$e.ADD_URI_SAFE_ATTR,Al),$e.FORBID_CONTENTS&&(Ia===Ec&&(Ia=I0(Ia)),Ls(Ia,$e.FORBID_CONTENTS,Al)),Go&&(Hs["#text"]=!0),qa&&Ls(Hs,["html","head","body"]),Hs.table&&(Ls(Hs,["tbody"]),delete Rn.tbody),$e.TRUSTED_TYPES_POLICY){if(typeof $e.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ww('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ww('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ve=$e.TRUSTED_TYPES_POLICY,Te=ve.createHTML("")}else ve===void 0&&(ve=Zw(G,r)),ve!==null&&typeof Te=="string"&&(Te=ve.createHTML(""));_u&&_u($e),Ih=$e}},yy=Ls({},["mi","mo","mn","ms","mtext"]),Me=Ls({},["foreignobject","desc","title","annotation-xml"]),Be=Ls({},["title","style","font","a","script"]),At=Ls({},JT);Ls(At,qO),Ls(At,L0);const bt=Ls({},KO);Ls(bt,R8);const Fn=function($e){let pn=ye($e);(!pn||!pn.tagName)&&(pn={namespaceURI:$h,tagName:"template"});const zn=Uw($e.tagName),da=Uw(pn.tagName);return c1[$e.namespaceURI]?$e.namespaceURI===Ud?pn.namespaceURI===id?zn==="svg":pn.namespaceURI===Om?zn==="svg"&&(da==="annotation-xml"||yy[da]):!!At[zn]:$e.namespaceURI===Om?pn.namespaceURI===id?zn==="math":pn.namespaceURI===Ud?zn==="math"&&Me[da]:!!bt[zn]:$e.namespaceURI===id?pn.namespaceURI===Ud&&!Me[da]||pn.namespaceURI===Om&&!yy[da]?!1:!bt[zn]&&(Be[zn]||!At[zn]):!!(Dm==="application/xhtml+xml"&&c1[$e.namespaceURI]):!1},Po=function($e){$0(n.removed,{element:$e});try{$e.parentNode.removeChild($e)}catch{$e.remove()}},Ir=function($e,pn){try{$0(n.removed,{attribute:pn.getAttributeNode($e),from:pn})}catch{$0(n.removed,{attribute:null,from:pn})}if(pn.removeAttribute($e),$e==="is"&&!un[$e])if(bi||Ru)try{Po(pn)}catch{}else try{pn.setAttribute($e,"")}catch{}},Rm=function($e){let pn,zn;if(_m)$e="<remove></remove>"+$e;else{const Mm=_8($e,/^[\r\n\t ]+/);zn=Mm&&Mm[0]}Dm==="application/xhtml+xml"&&$h===id&&($e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$e+"</body></html>");const da=ve?ve.createHTML($e):$e;if($h===id)try{pn=new $().parseFromString(da,Dm)}catch{}if(!pn||!pn.documentElement){pn=et.createDocument($h,"template",null);try{pn.documentElement.innerHTML=Kb?Te:da}catch{}}const vi=pn.body||pn.documentElement;return $e&&zn&&vi.insertBefore(c.createTextNode(zn),vi.childNodes[0]||null),$h===id?it.call(pn,qa?"html":"body")[0]:qa?pn.documentElement:vi},XS=function($e){return xt.call($e.ownerDocument||$e,$e,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,null,!1)},_j=function($e){return $e instanceof N&&(typeof $e.nodeName!="string"||typeof $e.textContent!="string"||typeof $e.removeChild!="function"||!($e.attributes instanceof M)||typeof $e.removeAttribute!="function"||typeof $e.setAttribute!="function"||typeof $e.namespaceURI!="string"||typeof $e.insertBefore!="function"||typeof $e.hasChildNodes!="function")},JS=function($e){return typeof b=="object"?$e instanceof b:$e&&typeof $e=="object"&&typeof $e.nodeType=="number"&&typeof $e.nodeName=="string"},vf=function($e,pn,zn){Ge[$e]&&jO(Ge[$e],da=>{da.call(n,pn,zn,Ih)})},hF=function($e){let pn;if(vf("beforeSanitizeElements",$e,null),_j($e))return Po($e),!0;const zn=Al($e.nodeName);if(vf("uponSanitizeElement",$e,{tagName:zn,allowedTags:Hs}),$e.hasChildNodes()&&!JS($e.firstElementChild)&&(!JS($e.content)||!JS($e.content.firstElementChild))&&Bd(/<[/\w]/g,$e.innerHTML)&&Bd(/<[/\w]/g,$e.textContent))return Po($e),!0;if(!Hs[zn]||Rn[zn]){if(!Rn[zn]&&CR(zn)&&(Ft.tagNameCheck instanceof RegExp&&Bd(Ft.tagNameCheck,zn)||Ft.tagNameCheck instanceof Function&&Ft.tagNameCheck(zn)))return!1;if(Go&&!Ia[zn]){const da=ye($e)||$e.parentNode,vi=be($e)||$e.childNodes;if(vi&&da){const Mm=vi.length;for(let zc=Mm-1;zc>=0;--zc)da.insertBefore(Y(vi[zc],!0),te($e))}}return Po($e),!0}return $e instanceof y&&!Fn($e)||(zn==="noscript"||zn==="noembed"||zn==="noframes")&&Bd(/<\/no(script|embed|frames)/i,$e.innerHTML)?(Po($e),!0):(Ss&&$e.nodeType===3&&(pn=$e.textContent,pn=df(pn,Ht," "),pn=df(pn,bn," "),pn=df(pn,uo," "),$e.textContent!==pn&&($0(n.removed,{element:$e.cloneNode()}),$e.textContent=pn)),vf("afterSanitizeElements",$e,null),!1)},pF=function($e,pn,zn){if(Mu&&(pn==="id"||pn==="name")&&(zn in c||zn in yR))return!1;if(!(ho&&!xo[pn]&&Bd(Lo,pn))){if(!(zt&&Bd(_s,pn))){if(!un[pn]||xo[pn]){if(!(CR($e)&&(Ft.tagNameCheck instanceof RegExp&&Bd(Ft.tagNameCheck,$e)||Ft.tagNameCheck instanceof Function&&Ft.tagNameCheck($e))&&(Ft.attributeNameCheck instanceof RegExp&&Bd(Ft.attributeNameCheck,pn)||Ft.attributeNameCheck instanceof Function&&Ft.attributeNameCheck(pn))||pn==="is"&&Ft.allowCustomizedBuiltInElements&&(Ft.tagNameCheck instanceof RegExp&&Bd(Ft.tagNameCheck,zn)||Ft.tagNameCheck instanceof Function&&Ft.tagNameCheck(zn))))return!1}else if(!Xl[pn]){if(!Bd(il,df(zn,pr,""))){if(!((pn==="src"||pn==="xlink:href"||pn==="href")&&$e!=="script"&&A8(zn,"data:")===0&&Sa[$e])){if(!(To&&!Bd(Fs,df(zn,pr,"")))){if(zn)return!1}}}}}}return!0},CR=function($e){return $e.indexOf("-")>0},bF=function($e){let pn,zn,da,vi;vf("beforeSanitizeAttributes",$e,null);const{attributes:Mm}=$e;if(!Mm)return;const zc={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:un};for(vi=Mm.length;vi--;){pn=Mm[vi];const{name:Nm,namespaceURI:t}=pn;zn=Nm==="value"?pn.value:O8(pn.value);const s=zn;if(da=Al(Nm),zc.attrName=da,zc.attrValue=zn,zc.keepAttr=!0,zc.forceKeepAttr=void 0,vf("uponSanitizeAttribute",$e,zc),zn=zc.attrValue,zc.forceKeepAttr)continue;if(!zc.keepAttr){Ir(Nm,$e);continue}if(!Tc&&Bd(/\/>/i,zn)){Ir(Nm,$e);continue}Ss&&(zn=df(zn,Ht," "),zn=df(zn,bn," "),zn=df(zn,uo," "));const a=Al($e.nodeName);if(!pF(a,da,zn)){Ir(Nm,$e);continue}if(ld&&(da==="id"||da==="name")&&(Ir(Nm,$e),zn=yn+zn),ve&&typeof G=="object"&&typeof G.getAttributeType=="function"&&!t)switch(G.getAttributeType(a,da)){case"TrustedHTML":{zn=ve.createHTML(zn);break}case"TrustedScriptURL":{zn=ve.createScriptURL(zn);break}}if(zn!==s)try{t?$e.setAttributeNS(t,Nm,zn):$e.setAttribute(Nm,zn)}catch{Ir(Nm,$e)}}vf("afterSanitizeAttributes",$e,null)},Aj=function Mo($e){let pn;const zn=XS($e);for(vf("beforeSanitizeShadowDOM",$e,null);pn=zn.nextNode();)vf("uponSanitizeShadowNode",pn,null),!hF(pn)&&(pn.content instanceof u&&Mo(pn.content),bF(pn));vf("afterSanitizeShadowDOM",$e,null)};return n.sanitize=function(Mo){let $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pn,zn,da,vi;if(Kb=!Mo,Kb&&(Mo="<!-->"),typeof Mo!="string"&&!JS(Mo))if(typeof Mo.toString=="function"){if(Mo=Mo.toString(),typeof Mo!="string")throw Ww("dirty is not a string, aborting")}else throw Ww("toString is not a function");if(!n.isSupported)return Mo;if(Vd||xg($e),n.removed=[],typeof Mo=="string"&&($r=!1),$r){if(Mo.nodeName){const Nm=Al(Mo.nodeName);if(!Hs[Nm]||Rn[Nm])throw Ww("root node is forbidden and cannot be sanitized in-place")}}else if(Mo instanceof b)pn=Rm("<!---->"),zn=pn.ownerDocument.importNode(Mo,!0),zn.nodeType===1&&zn.nodeName==="BODY"||zn.nodeName==="HTML"?pn=zn:pn.appendChild(zn);else{if(!bi&&!Ss&&!qa&&Mo.indexOf("<")===-1)return ve&&zd?ve.createHTML(Mo):Mo;if(pn=Rm(Mo),!pn)return bi?null:zd?Te:""}pn&&_m&&Po(pn.firstChild);const Mm=XS($r?Mo:pn);for(;da=Mm.nextNode();)hF(da)||(da.content instanceof u&&Aj(da.content),bF(da));if($r)return Mo;if(bi){if(Ru)for(vi=Vt.call(pn.ownerDocument);pn.firstChild;)vi.appendChild(pn.firstChild);else vi=pn;return(un.shadowroot||un.shadowrootmode)&&(vi=Le.call(o,vi,!0)),vi}let zc=qa?pn.outerHTML:pn.innerHTML;return qa&&Hs["!doctype"]&&pn.ownerDocument&&pn.ownerDocument.doctype&&pn.ownerDocument.doctype.name&&Bd(tE,pn.ownerDocument.doctype.name)&&(zc="<!DOCTYPE "+pn.ownerDocument.doctype.name+`>
`+zc),Ss&&(zc=df(zc,Ht," "),zc=df(zc,bn," "),zc=df(zc,uo," ")),ve&&zd?ve.createHTML(zc):zc},n.setConfig=function(Mo){xg(Mo),Vd=!0},n.clearConfig=function(){Ih=null,Vd=!1},n.isValidAttribute=function(Mo,$e,pn){Ih||xg({});const zn=Al(Mo),da=Al($e);return pF(zn,da,pn)},n.addHook=function(Mo,$e){typeof $e=="function"&&(Ge[Mo]=Ge[Mo]||[],$0(Ge[Mo],$e))},n.removeHook=function(Mo){if(Ge[Mo])return k8(Ge[Mo])},n.removeHooks=function(Mo){Ge[Mo]&&(Ge[Mo]=[])},n.removeAllHooks=function(){Ge={}},n}var nE=lP();const iP=at.each,oE=at.trim,uP=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],xc={ftp:21,http:80,https:443,mailto:25},Zj=["img","video"],jj=(e,n)=>Ae(e)?!e:Ae(n)?!An(Zj,n):!0,Gj=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},F8=(e,n,o)=>{const r=Gj(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?jj(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Fc{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Nf.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!F8(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=oE(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Fc(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&iP(uP,(b,y)=>{let E=f[y];E&&(E=E.replace(/\(mce_at\)/g,"@@")),c[b]=E}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Fc(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Fc(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?xc[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?c+="/"+y[u]:c+=y[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];iP(u,N=>{N&&b.push(N)});const y=[];for(let N=f.length-1;N>=0;N--)if(!(f[N].length===0||f[N]===".")){if(f[N]===".."){r++;continue}if(r>0){r--;continue}y.push(f[N])}const E=b.length-r;let M;return E<=0?M=es(y).join("/"):M=b.slice(0,E).join("/")+"/"+es(y).join("/"),M.indexOf("/")!==0&&(M="/"+M),c&&M.lastIndexOf("/")!==M.length-1&&(M+=c),M}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const sE=at.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),ig="data-mce-type";let Oh=0;const dP=(e,n,o,r,c)=>{var u,f,b,y;const E=n.validate,M=o.getSpecialElements();e.nodeType===Bl&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const N=(f=c==null?void 0:c.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Ae(c)&&(c.allowedTags[N]=!0);return}if(e.nodeType!==tc||N==="body")return;const $=ie.fromDom(e),G=Tr($,ig),ee=js($,"data-mce-bogus");if(!G&&q(ee)){ee==="all"?Bs($):Ll($);return}const Y=o.getElementRule(N);if(E&&!Y){wn(M,N)?Bs($):Ll($);return}else Ae(c)&&(c.allowedTags[N]=!0);if(E&&Y&&!G){if(we((b=Y.attributesForced)!==null&&b!==void 0?b:[],te=>{Co($,te.name,te.value==="{$uid}"?`mce_${Oh++}`:te.value)}),we((y=Y.attributesDefault)!==null&&y!==void 0?y:[],te=>{Tr($,te.name)||Co($,te.name,te.value==="{$uid}"?`mce_${Oh++}`:te.value)}),Y.attributesRequired&&!Xo(Y.attributesRequired,te=>Tr($,te))){Ll($);return}if(Y.removeEmptyAttrs&&Wc($)){Ll($);return}Y.outputName&&Y.outputName!==N&&S2($,Y.outputName)}},H8=(e,n,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=_b(n,o,r,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,Ob(f,o)&&(c.attrValue=f),n.allow_svg_data_urls&&qo(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):Ab(e,f)&&(c.forceKeepAttr=!0)},_b=(e,n,o,r,c,u)=>o!=="html"&&!kr(r)?!0:!(c in sE&&F8(e,u,r))&&(!e.validate||n.isValid(r,c)||qo(c,"data-")||qo(c,"aria-")),Ab=(e,n)=>e.hasAttribute(ig)&&(n==="id"||n==="class"||n==="style"),Ob=(e,n)=>e in n.getBoolAttrs(),XO=(e,n,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],b=f.name,y=f.value;!_b(n,o,r,e.tagName.toLowerCase(),b,y)&&!Ab(e,b)?e.removeAttribute(b):Ob(b,o)&&e.setAttribute(b,b)}},JO=(e,n,o)=>{const r=nE();return r.addHook("uponSanitizeElement",(c,u)=>{dP(c,e,n,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{H8(c,e,n,o.current(),u)}),r},mP=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},fP=e=>{const n=k(e);if(n==="svg"){const o=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(c=>`xlink:${c}`),r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:o};nE().sanitize(e,r)}else if(n==="math"){const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};nE().sanitize(e,o)}else throw new Error("Not a namespace element")},V8=(e,n)=>{const o=J();if(e.sanitize){const r=JO(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,mP(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:fP}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let y;for(;y=b.nextNode();){const E=o.track(y);dP(y,e,n,E),nn(y)&&XO(y,e,n,E)}o.reset()},sanitizeNamespaceElement:Wt}},gP=at.makeMap,QO=at.extend,hP=(e,n,o,r)=>{const c=e.name,u=c in o&&c!=="title"&&c!=="textarea",f=n.childNodes;for(let b=0,y=f.length;b<y;b++){const E=f[b],M=new Ii(E.nodeName.toLowerCase(),E.nodeType);if(nn(E)){const N=E.attributes;for(let $=0,G=N.length;$<G;$++){const ee=N[$];M.attr(ee.name,ee.value)}kr(M.name)&&(r(E),M.value=E.innerHTML)}else st(E)?(M.value=E.data,u&&(M.raw=!0)):(yd(E)||vu(E)||Fl(E))&&(M.value=E.data);kr(M.name)||hP(M,E,o,r),e.append(M)}},z8=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;we(n,b=>b(f)),cn(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];we(o,f=>f(u))}},U8=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=QO(gP("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=u2(n),E=/[ \t\r\n]+/g,M=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,$=ye=>{let ve=ye.parent;for(;Ae(ve);){if(ve.name in f)return!0;ve=ve.parent}return!1},G=ye=>{let ve=ye;for(;Ae(ve);){if(ve.name in y)return R0(n,u,f,ve);ve=ve.parent}return!1},ee=ye=>ye.name in b||Of(n,ye)||kr(ye.name)&&ye.parent===e,Y=(ye,ve)=>{const Te=ve?ye.prev:ye.next;return Ae(Te)||cn(ye.parent)?!1:ee(ye.parent)&&(ye.parent!==e||r.isRootContent===!0)};return[ye=>{var ve;if(ye.type===3&&!$(ye)){let Te=(ve=ye.value)!==null&&ve!==void 0?ve:"";Te=Te.replace(E," "),(L6(ye.prev,ee)||Y(ye,!0))&&(Te=Te.replace(M,"")),Te.length===0?ye.remove():ye.value=Te}},ye=>{var ve;if(ye.type===1){const Te=n.getElementRule(ye.name);if(c&&Te){const et=R0(n,u,f,ye);Te.paddInEmptyBlock&&et&&G(ye)?_T(o,r,ee,ye):Te.removeEmpty&&et?ee(ye)?ye.remove():ye.unwrap():Te.paddEmpty&&(et||I6(ye))&&_T(o,r,ee,ye)}}else if(ye.type===3&&!$(ye)){let Te=(ve=ye.value)!==null&&ve!==void 0?ve:"";(ye.next&&ee(ye.next)||Y(ye,!1))&&(Te=Te.replace(N,"")),Te.length===0?ye.remove():ye.value=Te}}]},W8=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},F0=(e={},n=ys())=>{const o=KN(),r=KN(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=V8(c,n),b=(ve,Te,et="html")=>{const xt=et==="xhtml"?"application/xhtml+xml":"text/html",Vt=wn(n.getSpecialElements(),Te.toLowerCase()),it=Vt?`<${Te}>${ve}</${Te}>`:ve,Le=et==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${it}</body></html>`:`<body>${it}</body>`,Ge=u.parseFromString(Le,xt).body;return f.sanitizeHtmlElement(Ge,xt),Vt?Ge.firstChild:Ge},y=o.addFilter,E=o.getFilters,M=o.removeFilter,N=r.addFilter,$=r.getFilters,G=r.removeFilter,ee=(ve,Te)=>{CO(n,ve)&&Te.push(ve)},Y=(ve,Te)=>{const et=q(Te.attr(ig)),xt=Te.type===1&&!wn(ve,Te.name)&&!Of(n,Te)&&!kr(Te.name);return Te.type===3||xt&&!et},te=(ve,Te)=>{const et=QO(gP("script,style,head,html,body,title,meta,param"),n.getBlockElements()),xt=/^[ \t\r\n]+/,Vt=/[ \t\r\n]+$/;let it=ve.firstChild,Le=null;const Ge=Ht=>{var bn,uo;Ht&&(it=Ht.firstChild,it&&it.type===3&&(it.value=(bn=it.value)===null||bn===void 0?void 0:bn.replace(xt,"")),it=Ht.lastChild,it&&it.type===3&&(it.value=(uo=it.value)===null||uo===void 0?void 0:uo.replace(Vt,"")))};if(n.isValidChild(ve.name,Te.toLowerCase())){for(;it;){const Ht=it.next;Y(et,it)?(Le||(Le=new Ii(Te,1),Le.attr(c.forced_root_block_attrs),ve.insert(Le,it)),Le.append(it)):(Ge(Le),Le=null),it=Ht}Ge(Le)}},ye={schema:n,addAttributeFilter:N,getAttributeFilters:$,removeAttributeFilter:G,addNodeFilter:y,getNodeFilters:E,removeNodeFilter:M,parse:(ve,Te={})=>{var et;const xt=c.validate,Vt=(et=Te.context)!==null&&et!==void 0?et:c.root_name,it=b(ve,Vt,Te.format);Qc(n,it);const Le=new Ii(Vt,11);hP(Le,it,n.getSpecialElements(),f.sanitizeNamespaceElement),it.innerHTML="";const[Ge,Ht]=U8(Le,n,c,Te),bn=[],uo=xt?pr=>ee(pr,bn):Wt,Lo={nodes:{},attributes:{}},_s=pr=>kT(E(),$(),pr,Lo);if(z8(Le,[Ge,_s],[Ht,uo]),bn.reverse(),xt&&bn.length>0)if(Te.context){const{pass:pr,fail:il}=So(bn,Hs=>Hs.parent===Le);iN(il,n,Le,_s),Te.invalid=pr.length>0}else iN(bn,n,Le,_s);const Fs=W8(c,Te);return Fs&&(Le.name==="body"||Te.isRootContent)&&te(Le,Fs),Te.invalid||wb(Lo,Te),Le}};return kb(ye,c),_h(ye,c,n),ye},pP=e=>nu(e)?Ch({validate:!1}).serialize(e):e,bP=(e,n,o)=>{const r=pP(e),c=n(r);if(c.isDefaultPrevented())return c;if(nu(e))if(c.content!==r){const u=F0({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},H0=e=>({sanitize:Hv(e),sandbox_iframes:Vv(e),sandbox_iframes_exclusions:zv(e)}),e4=(e,n)=>{if(n.no_events)return Ul.value(n);{const o=Ux(e,n);return o.isDefaultPrevented()?Ul.error(ow(e,{content:"",...o}).content):Ul.value(o)}},vP=(e,n,o)=>o.no_events?n:bP(n,c=>ow(e,{...o,content:c}),H0(e)).content,rE=(e,n)=>{if(n.no_events)return Ul.value(n);{const o=bP(n.content,r=>p0(e,{...n,content:r}),H0(e));return o.isDefaultPrevented()?(b0(e,o),Ul.error(void 0)):Ul.value(o)}},t4=(e,n,o)=>{o.no_events||b0(e,{...o,content:n})},aE=(e,n,o)=>({element:e,width:n,rows:o}),yP=(e,n)=>({element:e,cells:n}),Z8=(e,n)=>({x:e,y:n}),n4=(e,n)=>Mr(e,n).bind(Rl).getOr(1),CP=(e,n,o,r,c)=>{const u=n4(c,"rowspan"),f=n4(c,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=yP(op(r),[]));for(let E=n;E<n+f;E++){const M=b[y].cells;M[E]=y===o&&E===n?c:Td(c)}}},wP=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},SP=(e,n,o)=>{for(;wP(e,n,o);)n++;return n},o4=e=>zo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),s4=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(ns(c[u],n))return L.some(Z8(u,r))}return L.none()},xP=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const y=f[b].cells,E=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(yP(f[b].element,E))}return u},j8=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?xP(e,r,c,u,f):xP(e,r,f,u,c);return aE(e.element,o4(b),b)},G8=(e,n)=>{const o=Td(e.element),r=ie.fromTag("tbody");return ci(r,n),ea(o,r),o},r4=e=>tn(e.rows,n=>{const o=tn(n.cells,c=>{const u=op(c);return yr(u,"colspan"),yr(u,"rowspan"),u}),r=Td(n.element);return ci(r,o),r}),jw=e=>{const n=aE(Td(e),0,[]);return we(fc(e,"tr"),(o,r)=>{we(fc(o,"td,th"),(c,u)=>{CP(n,SP(n,u,r),r,o,c)})}),aE(n.element,o4(n.rows),n.rows)},TP=e=>G8(e,r4(e)),EP=(e,n,o)=>s4(e,n).bind(r=>s4(e,o).map(c=>j8(e,r,c))),cE=e=>bs(e,n=>Ao(n)==="ul"||Ao(n)==="ol"),q8=(e,n)=>bs(e,o=>Ao(o)==="li"&&s0(o,n)).fold(rt([]),o=>cE(e).map(r=>{const c=ie.fromTag(Ao(r)),u=ls(Rc(r),(f,b)=>qo(b,"list-style"));return Ra(c,u),[ie.fromTag("li"),c]}).getOr([])),K8=(e,n)=>{const o=zo(n,(r,c)=>(ea(c,r),c),e);return n.length>0?Ln([o]):o},zp=e=>mi(e)?mc(e).filter(Ed).fold(rt([]),n=>[e,n]):Ed(e)?[e]:[],a4=(e,n,o)=>{const r=ie.fromDom(n.commonAncestorContainer),c=Sh(r,e),u=It(c,y=>o.isWrapper(Ao(y))),f=q8(c,n),b=u.concat(f.length?f:zp(r));return tn(b,Td)},c4=()=>Ln([]),Gw=(e,n,o)=>K8(ie.fromDom(n.cloneContents()),a4(e,n,o)),kP=(e,n)=>gn(n,"table",Ke(ns,e)),l4=(e,n)=>kP(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=jw(o);return EP(u,r,c).map(f=>Ln([TP(f)]))}).getOrThunk(c4),_P=(e,n,o)=>n.length>0&&n[0].collapsed?c4():Gw(e,n[0],o),AP=(e,n,o)=>{const r=eg(n,e);return r.length>0?l4(e,r):_P(e,n,o)},lE=(e,n)=>n>=0&&n<e.length&&gh(e.charAt(n)),OP=e=>Mi(e.innerText),Y8=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),i4=e=>L.from(e.selection.getRng()).map(n=>{var o;const r=L.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=Y8(r),f=ie.fromDom(n.cloneContents());dM(f),mM(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=OP(b),E=Mi((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),lE(E,0)||lE(E,E.length-1)){const M=r.getOr(c),N=OP(M),$=N.indexOf(y);if($===-1)return y;{const G=lE(N,$-1),ee=lE(N,$+y.length);return(G?" ":"")+y+(ee?" ":"")}}else return y}).getOr(""),X8=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=T0(e,o0(c)),f=n.contextual?AP(ie.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},DP=(e,n)=>{if(n.format==="text")return i4(e);{const o=X8(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},J8=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),Q8=(e,n,o={})=>{const r=J8(o,n);return e4(e,r).fold(Ho,c=>{const u=DP(e,c);return vP(e,u,c)})},u4=0,RP=1,MP=2,e7=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(M,N,$)=>({start:M,end:N,diag:$}),f=(M,N,$,G,ee)=>{const Y=y(M,N,$,G);if(Y===null||Y.start===N&&Y.diag===N-G||Y.end===M&&Y.diag===M-$){let te=M,be=$;for(;te<N||be<G;)te<N&&be<G&&e[te]===n[be]?(ee.push([u4,e[te]]),++te,++be):N-M>G-$?(ee.push([MP,e[te]]),++te):(ee.push([RP,n[be]]),++be)}else{f(M,Y.start,$,Y.start-Y.diag,ee);for(let te=Y.start;te<Y.end;++te)ee.push([u4,e[te]]);f(Y.end,N,Y.end-Y.diag,G,ee)}},b=(M,N,$,G)=>{let ee=M;for(;ee-N<G&&ee<$&&e[ee]===n[ee-N];)++ee;return u(M,ee,N)},y=(M,N,$,G)=>{const ee=N-M,Y=G-$;if(ee===0||Y===0)return null;const te=ee-Y,be=Y+ee,ye=(be%2===0?be:be+1)/2;r[1+ye]=M,c[1+ye]=N+1;let ve,Te,et,xt,Vt;for(ve=0;ve<=ye;++ve){for(Te=-ve;Te<=ve;Te+=2){for(et=Te+ye,Te===-ve||Te!==ve&&r[et-1]<r[et+1]?r[et]=r[et+1]:r[et]=r[et-1]+1,xt=r[et],Vt=xt-M+$-Te;xt<N&&Vt<G&&e[xt]===n[Vt];)r[et]=++xt,++Vt;if(te%2!==0&&te-ve<=Te&&Te<=te+ve&&c[et-te]<=r[et])return b(c[et-te],Te+M-$,N,G)}for(Te=te-ve;Te<=te+ve;Te+=2){for(et=Te+ye-te,Te===te-ve||Te!==te+ve&&c[et+1]<=c[et-1]?c[et]=c[et+1]-1:c[et]=c[et-1],xt=c[et]-1,Vt=xt-M+$-Te;xt>=M&&Vt>=$&&e[xt]===n[Vt];)c[et]=xt--,Vt--;if(te%2===0&&-ve<=Te&&Te<=ve&&c[et]<=r[et+te])return b(c[et],Te+M-$,N,G)}}return null},E=[];return f(0,e.length,0,n.length,E),E},NP=e=>nn(e)?e.outerHTML:st(e)?Nf.encodeRaw(e.data,!1):yd(e)?"<!--"+e.data+"-->":"",t7=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},n7=(e,n,o)=>{const r=t7(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},iE=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},hi=(e,n)=>{let o=0;we(e,r=>{r[0]===u4?o++:r[0]===RP?(n7(n,r[1],o),o++):r[0]===MP&&iE(n,o)})},o7=(e,n)=>It(tn(Jo(e.childNodes),A(Mi,NP)),o=>o.length>0),uE=(e,n)=>{const o=tn(Jo(n.childNodes),NP);return hi(e7(o,e),n),n},Db=He(()=>document.implementation.createHTMLDocument("undo")),PP=e=>e.querySelector("iframe")!==null,Au=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),Rb=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),qw=e=>{const n=e.serializer.getTempAttrs(),o=UA(e.getBody(),n);return PP(o)?Au(o7(o)):Rb(Mi(o.innerHTML))},d4=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?uE(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Ae(r)&&Dx(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},dE=e=>e.type==="fragmented"?e.fragments.join(""):e.content,BP=e=>{const n=ie.fromTag("body",Db());return qc(n,dE(e)),we(fc(n,"*[data-mce-bogus]"),Ll),em(n)},$P=(e,n)=>dE(e)===dE(n),Kw=(e,n)=>BP(e)===BP(n),Yw=(e,n)=>!e||!n?!1:$P(e,n)?!0:Kw(e,n),m4=e=>e.get()===0,Xw=(e,n,o)=>{m4(o)&&(e.typing=n)},IP=(e,n)=>{e.typing&&(Xw(e,!1,n),e.add())},f4=e=>{e.typing&&(e.typing=!1,e.add())},g4=(e,n,o)=>{m4(n)&&o.set(nC(e.selection))},s7=(e,n,o,r,c,u,f)=>{const b=qw(e),y=at.extend(u||{},b);if(!m4(r)||e.removed)return null;const E=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:E,originalEvent:f}).isDefaultPrevented()||E&&Yw(E,y))return null;n.data[o.get()]&&c.get().each($=>{n.data[o.get()].beforeBookmark=$});const M=N_(e);if(M&&n.data.length>M){for(let $=0;$<n.data.length-1;$++)n.data[$]=n.data[$+1];n.data.length--,o.set(n.data.length)}y.bookmark=nC(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const N={level:y,lastLevel:E,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",N),e.dispatch("change",N)):e.dispatch("AddUndo",N),y},r7=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},ug=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];d4(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},h4=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],d4(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},a7=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,Xw(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],d4(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},mE=e=>{e.clear(),e.add()},p4=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!Yw(qw(e),n.data[0]),LP=(e,n)=>n.get()<e.data.length-1&&!e.typing,FP=(e,n,o)=>(IP(e,n),e.beforeChange(),e.ignore(o),e.add()),HP=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},c7=(e,n)=>{const o=e.dom,r=Ae(n)?n:e.getBody();we(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=CC(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,y=wC(e);b&&e.hasVisual?o.addClass(c,y):o.removeClass(c,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},VP=e=>({init:{bindEvents:Wt},undoManager:{beforeChange:(n,o)=>g4(e,n,o),add:(n,o,r,c,u,f)=>s7(e,n,o,r,c,u,f),undo:(n,o,r)=>a7(e,n,o,r),redo:(n,o)=>h4(e,n,o),clear:(n,o)=>r7(e,n,o),reset:n=>mE(n),hasUndo:(n,o)=>p4(e,n,o),hasRedo:(n,o)=>LP(n,o),transact:(n,o,r)=>FP(n,o,r),ignore:(n,o)=>HP(n,o),extra:(n,o,r,c)=>ug(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>Bw(e,n,o,r,c),matchAll:(n,o)=>vN(e,n,o),matchNode:(n,o,r,c)=>cf(e,n,o,r,c),canApply:n=>t8(e,n),closest:n=>MT(e,n),apply:(n,o,r)=>PO(e,n,o,r),remove:(n,o,r,c)=>UN(e,n,o,r,c),toggle:(n,o,r)=>GT(e,n,o,r),formatChanged:(n,o,r,c,u)=>C8(e,n,o,r,c,u)},editor:{getContent:n=>XF(e,n),setContent:(n,o)=>M0(e,n,o),insertContent:(n,o)=>Q6(e,n,o),addVisual:n=>c7(e,n)},selection:{getContent:(n,o)=>Q8(e,n,o)},autocompleter:{addDecoration:Wt,removeDecoration:Wt},raw:{getModel:()=>L.none()}}),l7=e=>{const n=E=>Fe(E)?E:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(E,M,N)=>r.transact(N),ignore:(E,M)=>r.ignore(M),extra:(E,M,N,$)=>r.extra(N,$)},formatter:{match:(E,M,N,$)=>c.match(E,n(M),$),matchAll:c.matchAll,matchNode:c.matchNode,canApply:E=>c.canApply(E),closest:E=>c.closest(E),apply:(E,M,N)=>c.apply(E,n(M)),remove:(E,M,N,$)=>c.remove(E,n(M)),toggle:(E,M,N)=>c.toggle(E,n(M)),formatChanged:(E,M,N,$,G)=>c.formatChanged(M,N,$,G)},editor:{getContent:E=>u.getContent(E),setContent:(E,M)=>({content:u.setContent(E,M),html:""}),insertContent:(E,M)=>(u.insertContent(E),""),addVisual:u.addVisual},selection:{getContent:(E,M)=>f.getContent(M)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>L.some(y.getRawModel())}}},i7=()=>{const e=rt(null),n=rt("");return{init:{bindEvents:Wt},undoManager:{beforeChange:Wt,add:e,undo:e,redo:e,clear:Wt,reset:Wt,hasUndo:Ze,hasRedo:Ze,transact:e,ignore:Wt,extra:Wt},formatter:{match:Ze,matchAll:rt([]),matchNode:rt(void 0),canApply:Ze,closest:n,apply:Wt,remove:Wt,toggle:Wt,formatChanged:rt({unbind:Wt})},editor:{getContent:n,setContent:rt({content:"",html:""}),insertContent:rt(""),addVisual:Wt},selection:{getContent:n},autocompleter:{addDecoration:Wt,removeDecoration:Wt},raw:{getModel:rt(L.none())}}},dg=e=>wn(e.plugins,"rtc"),zP=e=>is(e.plugins,"rtc").bind(n=>L.from(n.setup)),u7=e=>{const n=e;return zP(e).fold(()=>(n.rtcInstance=VP(e),L.none()),o=>(n.rtcInstance=i7(),L.some(()=>o().then(r=>(n.rtcInstance=l7(r),r.rtc.isRemote)))))},b4=e=>e.rtcInstance?e.rtcInstance:VP(e),Hc=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},UP=(e,n,o)=>{Hc(e).undoManager.beforeChange(n,o)},v4=(e,n,o,r,c,u,f)=>Hc(e).undoManager.add(n,o,r,c,u,f),y4=(e,n,o,r)=>Hc(e).undoManager.undo(n,o,r),WP=(e,n,o)=>Hc(e).undoManager.redo(n,o),C4=(e,n,o)=>{Hc(e).undoManager.clear(n,o)},ZP=(e,n)=>{Hc(e).undoManager.reset(n)},jP=(e,n,o)=>Hc(e).undoManager.hasUndo(n,o),w4=(e,n,o)=>Hc(e).undoManager.hasRedo(n,o),GP=(e,n,o,r)=>Hc(e).undoManager.transact(n,o,r),qP=(e,n,o)=>{Hc(e).undoManager.ignore(n,o)},KP=(e,n,o,r,c)=>{Hc(e).undoManager.extra(n,o,r,c)},d7=(e,n,o,r,c)=>Hc(e).formatter.match(n,o,r,c),S4=(e,n,o)=>Hc(e).formatter.matchAll(n,o),m7=(e,n,o,r,c)=>Hc(e).formatter.matchNode(n,o,r,c),fE=(e,n)=>Hc(e).formatter.canApply(n),f7=(e,n)=>Hc(e).formatter.closest(n),g7=(e,n,o,r)=>{Hc(e).formatter.apply(n,o,r)},h7=(e,n,o,r,c)=>{Hc(e).formatter.remove(n,o,r,c)},YP=(e,n,o,r)=>{Hc(e).formatter.toggle(n,o,r)},XP=(e,n,o,r,c,u)=>Hc(e).formatter.formatChanged(n,o,r,c,u),p7=(e,n)=>b4(e).editor.getContent(n),b7=(e,n,o)=>b4(e).editor.setContent(n,o),v7=(e,n,o)=>b4(e).editor.insertContent(n,o),y7=(e,n,o)=>Hc(e).selection.getContent(n,o),C7=(e,n)=>Hc(e).editor.addVisual(n),x4=e=>Hc(e).init.bindEvents(),qj=(e,n={})=>{const o=n.format?n.format:"html";return y7(e,o,n)},JP=e=>e.dom.length===0?(Bs(e),L.none()):L.some(e),w7=(e,n)=>e.filter(o=>og.isBookmarkNode(o.dom)).bind(n?Ei:$l),S7=(e,n,o,r,c)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(gT(u,f,c,!1,!r),o.setStart(f,b)):(gT(f,u,c,!1,!r),o.setEnd(f,b))},x7=(e,n,o)=>{mc(e).each(r=>{const c=e.dom;n&&Sw(r,Pe(c,0),o)?xw(c,0,o):!n&&dT(r,Pe(c,c.length),o)&&fT(c,c.length,o)})},QP=(e,n,o,r,c)=>{e.bind(u=>((r?fT:xw)(u.dom,r?u.dom.length:0,c),n.filter(Re).map(b=>S7(u,b,o,r,c)))).orThunk(()=>w7(n,r).or(n).filter(Re).map(f=>x7(f,r,c)))},T7=(e,n,o)=>{const r=L.from(n.firstChild).map(ie.fromDom),c=L.from(n.lastChild).map(ie.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind($l).filter(Re).bind(JP),f=c.bind(Ei).filter(Re).bind(JP);QP(u,r,e,!0,o),QP(f,c,e,!1,o),e.collapse(!1)},E7=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),eB=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Ch({validate:!1},e.schema).serialize(u)}else return n.content},k7=(e,n,o={})=>{const r=E7(o,n);rE(e,r).each(c=>{const u=eB(e,c),f=e.selection.getRng();T7(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),gw(e,f),t4(e,u,c)})},tB=(e,n,o)=>{if(wn(e,n)){const r=It(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var _7=(e,n)=>{let o,r;const c=(b,y)=>bs(y,E=>e.is(E,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,E=u(y),M={};mt(o,(N,$)=>{c($,E).each(G=>{r[$]||(we(N,ee=>{ee(!0,{node:G,selector:$,parents:E})}),r[$]=N),M[$]=N})}),mt(r,(N,$)=>{M[$]||(delete r[$],we(N,G=>{G(!1,{node:y,selector:$,parents:E})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{tB(o,b,y),tB(r,b,y)}})}};const nB=e=>!!(e&&e.ownerDocument)&&ri(ie.fromDom(e.ownerDocument),ie.fromDom(e)),A7=e=>e?nB(e.startContainer)&&nB(e.endContainer):!1,O7=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=_7(e,r),b=(Rt,un)=>{const rs=e.createRng();Ae(Rt)&&Ae(un)?(rs.setStart(Rt,un),rs.setEnd(Rt,un),Te(rs),be(!1)):(qC(e,rs,r.getBody(),!0),Te(rs))},y=Rt=>qj(r,Rt),E=(Rt,un)=>k7(r,Rt,un),M=Rt=>HA(r.getBody(),ve(),Rt),N=Rt=>VA(r.getBody(),ve(),Rt),$=(Rt,un)=>il.getBookmark(Rt,un),G=Rt=>il.moveToBookmark(Rt),ee=(Rt,un)=>(VF(e,Rt,un).each(Te),Rt),Y=()=>{const Rt=ve(),un=ye();return!Rt||Rt.item?!1:Rt.compareEndPoints?Rt.compareEndPoints("StartToEnd",Rt)===0:!un||Rt.collapsed},te=()=>{const Rt=ve(),un=r.getBody().querySelectorAll('[data-mce-selected="1"]');return un.length>0?gs(un,rs=>e.isEditable(rs.parentElement)):tM(e,Rt)},be=Rt=>{const un=ve();un.collapse(!!Rt),Te(un)},ye=()=>n.getSelection?n.getSelection():n.document.selection,ve=()=>{let Rt;const un=(Ft,Rn,xo)=>{try{return Rn.compareBoundaryPoints(Ft,xo)}catch{return-1}},rs=n.document;if(Ae(r.bookmark)&&!Bp(r)){const Ft=sT(r);if(Ft.isSome())return Ft.map(Rn=>T0(r,[Rn])[0]).getOr(rs.createRange())}try{const Ft=ye();Ft&&!wa(Ft.anchorNode)&&(Ft.rangeCount>0?Rt=Ft.getRangeAt(0):Rt=rs.createRange(),Rt=T0(r,[Rt])[0])}catch{}if(Rt||(Rt=rs.createRange()),ca(Rt.startContainer)&&Rt.collapsed){const Ft=e.getRoot();Rt.setStart(Ft,0),Rt.setEnd(Ft,0)}return c&&u&&(un(Rt.START_TO_START,Rt,c)===0&&un(Rt.END_TO_END,Rt,c)===0?Rt=u:(c=null,u=null)),Rt},Te=(Rt,un)=>{if(!A7(Rt))return;const rs=ye();if(Rt=r.dispatch("SetSelectionRange",{range:Rt,forward:un}).range,rs){u=Rt;try{rs.removeAllRanges(),rs.addRange(Rt)}catch{}un===!1&&rs.extend&&(rs.collapse(Rt.endContainer,Rt.endOffset),rs.extend(Rt.startContainer,Rt.startOffset)),c=rs.rangeCount>0?rs.getRangeAt(0):null}if(!Rt.collapsed&&Rt.startContainer===Rt.endContainer&&(rs!=null&&rs.setBaseAndExtent)&&Rt.endOffset-Rt.startOffset<2&&Rt.startContainer.hasChildNodes()){const Rn=Rt.startContainer.childNodes[Rt.startOffset];Rn&&Rn.nodeName==="IMG"&&(rs.setBaseAndExtent(Rt.startContainer,Rt.startOffset,Rt.endContainer,Rt.endOffset),(rs.anchorNode!==Rt.startContainer||rs.focusNode!==Rt.endContainer)&&rs.setBaseAndExtent(Rn,0,Rn,1))}r.dispatch("AfterSetSelectionRange",{range:Rt,forward:un})},et=Rt=>(E(e.getOuterHTML(Rt)),Rt),xt=()=>FF(r.getBody(),ve()),Vt=(Rt,un)=>HF(e,ve(),Rt,un),it=()=>{const Rt=ye(),un=Rt==null?void 0:Rt.anchorNode,rs=Rt==null?void 0:Rt.focusNode;if(!Rt||!un||!rs||wa(un)||wa(rs))return!0;const Ft=e.createRng(),Rn=e.createRng();try{Ft.setStart(un,Rt.anchorOffset),Ft.collapse(!0),Rn.setStart(rs,Rt.focusOffset),Rn.collapse(!0)}catch{return!0}return Ft.compareBoundaryPoints(Ft.START_TO_START,Rn)<=0},pr={dom:e,win:n,serializer:o,editor:r,expand:(Rt={type:"word"})=>Te(ot(e).expand(ve(),Rt)),collapse:be,setCursorLocation:b,getContent:y,setContent:E,getBookmark:$,moveToBookmark:G,select:ee,isCollapsed:Y,isEditable:te,isForward:it,setNode:et,getNode:xt,getSel:ye,setRng:Te,getRng:ve,getStart:M,getEnd:N,getSelectedBlocks:Vt,normalize:()=>{const Rt=ve(),un=ye();if(!tA(un)&&KC(r)){const rs=Dt(e,Rt);return rs.each(Ft=>{Te(Ft,it())}),rs.getOr(Rt)}return Rt},selectorChanged:(Rt,un)=>(f(Rt,un),pr),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Rt,un=e.getRoot();for(;un&&un.nodeName!=="BODY";){if(un.scrollHeight>un.clientHeight){Rt=un;break}un=un.parentNode}return Rt},scrollIntoView:(Rt,un)=>{Ae(Rt)?_F(r,Rt,un):gw(r,ve(),un)},placeCaretAt:(Rt,un)=>Te(p(Rt,un,r.getDoc())),getBoundingClientRect:()=>{const Rt=ve();return Rt.collapsed?Pe.fromRangeStart(Rt).getClientRects()[0]:Rt.getBoundingClientRect()},destroy:()=>{n=c=u=null,Hs.destroy()}},il=og(pr),Hs=ib(pr,r);return pr.bookmarkManager=il,pr.controlSelection=Hs,pr},Kj=(e,n,o)=>{n.addNodeFilter("br",(r,c,u)=>{const f=at.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),y=o.getWhitespaceElements();f.body=1;const E=M=>M.name in f||Of(o,M);for(let M=0,N=r.length;M<N;M++){let $=r[M],G=$.parent;if(G&&E(G)&&$===G.lastChild){let ee=$.prev;for(;ee;){const Y=ee.name;if(Y!=="span"||ee.attr("data-mce-type")!=="bookmark"){Y==="br"&&($=null);break}ee=ee.prev}if($&&($.remove(),R0(o,b,y,G))){const Y=o.getElementRule(G.name);Y&&(Y.removeEmpty?G.remove():Y.paddEmpty&&_T(e,u,E,G))}}else{let ee=$;for(;G&&G.firstChild===ee&&G.lastChild===ee&&(ee=G,!f[G.name]);)G=G.parent;if(ee===G){const Y=new Ii("#text",3);Y.value=sc,$.replace(Y)}}}})},D7=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const E=r[y];let M=E.attr(u);M!==void 0?(E.attr(c,M.length>0?M:null),E.attr(u,null)):(M=E.attr(c),c==="style"?M=o.serializeStyle(o.parseStyle(M),E.name):f&&(M=f.call(b,M,c,E.name)),E.attr(c,M.length>0?M:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(L.from(b.firstChild).exists(E=>{var M;return!Yg((M=E.value)!==null&&M!==void 0?M:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=Nf.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],E=y.firstChild,M=(u=E==null?void 0:E.value)!==null&&u!==void 0?u:"";if(c==="script"){const N=y.attr("type");N&&y.attr("type",N==="mce-no/type"?null:N.replace(/^mce\-/,"")),n.element_format==="xhtml"&&E&&M.length>0&&(E.value=`// <![CDATA[
`+f(M)+`
// ]]>`)}else n.element_format==="xhtml"&&E&&M.length>0&&(E.value=`<!--
`+f(M)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{we(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&Kj(n,e,e.schema)},R7=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},Yj=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");at.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return mA(e,{...o,node:u}),r&&(c.doc=r),u},M7=(e,n)=>Ae(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,ua=(e,n,o)=>M7(e,o)?Yj(e,n,o):n,T4=(e,n,o)=>{at.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},Xj=(e,n,o)=>!n.no_events&&e?m0(e,{...n,content:o}).content:o,N7=(e,n,o)=>{const r=Mi(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||P1(ie.fromDom(n))?r:at.trim(r)},P7=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return R7(c),c},V0=(e,n,o)=>Ch(e,n).serialize(o),Jj=(e,n,o,r,c)=>{const u=V0(n,o,r);return Xj(e,c,u)},Qj=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=n&&n.dom?n.dom:hr.DOM,u=n&&n.schema?n.schema:ys(r),f=F0(r,u);D7(f,r,c);const b=(y,E={})=>{const M={format:"html",...E},N=ua(n,y,M),$=N7(c,N,M),G=P7(f,$,M);return M.format==="tree"?G:Jj(n,r,u,G,M)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Ke(T4,f,o),getTempAttrs:rt(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},cl=(e,n)=>{const o=Qj(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},oB="html",sB=(e,n)=>({...e,format:n,get:!0,getInner:!0}),rB=(e,n={})=>{const o=n.format?n.format:oB,r=sB(n,o);return e4(e,r).fold(Ho,c=>{const u=p7(e,c);return vP(e,u,c)})},B7="html",$7=(e,n)=>({format:B7,...e,set:!0,content:n}),z0=(e,n,o={})=>{const r=$7(o,n);return rE(e,r).map(c=>{const u=b7(e,c.content,c);return t4(e,u.html,c),u.content}).getOr(n)},I7="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),E4=[],L7="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),k4=[],_4=(e,n)=>{const o=It(n,r=>wn(e,r));return Xe(o)},A4=e=>{const n=_4(e,I7),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Xe(n)},aB=e=>_4(e,E4),gE=(e,n)=>{const o=at.makeMap(e.plugins," "),c=It(n,u=>wn(o,u));return Xe(c)},F7=e=>gE(e,L7),H7=e=>gE(e,k4.map(n=>n.name)),V7=(e,n)=>{const o=A4(e),r=F7(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",E=c?`

Plugins:${b}${r.join(b)}`:"",M=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+y+E+M)}},$d=e=>bs(k4,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),z7=(e,n)=>{const o=aB(e),r=H7(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map($d).join(f)}`:"",y=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+y)}},U7=(e,n)=>{V7(e,n),z7(e,n)},hE=hr.DOM,W7=e=>{hE.setStyle(e.id,"display",e.orgDisplay)},pE=e=>L.from(e).each(n=>n.destroy()),cB=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},Z7=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),hE.unbind(n,"submit reset",e.formEventDelegate))},j7=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Ae(c==null?void 0:c.nextSibling)&&hE.remove(c.nextSibling),f0(e),e.editorManager.remove(e),!e.inline&&r&&W7(e),fA(e),hE.remove(e.getContainer()),pE(n),pE(o),e.destroy()}},G7=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),pE(o),pE(r)),Z7(e),cB(e),e.destroyed=!0}},bE=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>wn(e,c)}})(),U0=Vl.ModelManager,D4=(e,n)=>n.dom[e],vE=(e,n)=>parseInt(yl(n,e),10),q7=Ke(D4,"clientWidth"),K7=Ke(D4,"clientHeight"),eG=Ke(vE,"margin-top"),Y7=Ke(vE,"margin-left"),Jw=e=>e.dom.getBoundingClientRect(),lB=(e,n,o)=>{const r=q7(e),c=K7(e);return n>=0&&o>=0&&n<=r&&o<=c},iB=(e,n,o,r)=>{const c=Jw(n),u=e?c.left+n.dom.clientLeft+Y7(n):0,f=e?c.top+n.dom.clientTop+eG(n):0,b=o-u,y=r-f;return{x:b,y}},X7=(e,n,o)=>{const r=ie.fromDom(e.getBody()),c=e.inline?r:gd(r),u=iB(e.inline,c,n,o);return lB(c,u.x,u.y)},uB=e=>L.from(e).map(ie.fromDom),J7=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return uB(n).map(hd).getOr(!1)};var Q7=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const dB=e=>{const n=[],o=()=>{const $=e.theme;return $&&$.getNotificationManagerImpl?$.getNotificationManagerImpl():Q7()},r=()=>L.from(n[0]),c=($,G)=>$.type===G.type&&$.text===G.text&&!$.progressBar&&!$.timeout&&!G.progressBar&&!G.timeout,u=()=>{r().each($=>{$.reposition()})},f=$=>{n.push($)},b=$=>{Qs(n,G=>G===$).each(G=>{n.splice(G,1)})},y=($,G=!0)=>e.removed||!J7(e)?{}:(G&&e.dispatch("BeforeOpenNotification",{notification:$}),bs(n,ee=>c(o().getArgs(ee),$)).getOrThunk(()=>{e.editorManager.setActive(e);const ee=o().open($,()=>{b(ee)},()=>pw(e));return f(ee),u(),e.dispatch("OpenNotification",{notification:{...ee}}),ee})),E=()=>{r().each($=>{o().close($),b($),u()})},M=rt(n);return($=>{$.on("SkinLoaded",()=>{const G=Wl($);G&&y({text:G,type:"warning",timeout:0},!1),u()}),$.on("show ResizeEditor NodeChange",()=>{requestAnimationFrame(u)}),$.on("remove",()=>{we(n.slice(),G=>{o().close(G)})}),$.addShortcut("alt+F12","Focus to notification",()=>r().map(G=>ie.fromDom(G.getEl())).each(G=>S0(G)))})(e),{open:y,close:E,getNotifications:M}},W0=Vl.PluginManager,Up=Vl.ThemeManager;var eH=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const mB=e=>{let n=[];const o=()=>{const Y=e.theme;return Y&&Y.getWindowManagerImpl?Y.getWindowManagerImpl():eH()},r=(Y,te)=>(...be)=>te?te.apply(Y,be):void 0,c=Y=>{e.dispatch("OpenWindow",{dialog:Y})},u=Y=>{e.dispatch("CloseWindow",{dialog:Y})},f=Y=>{n.push(Y),c(Y)},b=Y=>{u(Y),n=It(n,te=>te!==Y),n.length===0&&e.focus()},y=()=>L.from(n[n.length-1]),E=Y=>{e.editorManager.setActive(e),hw(e),e.ui.show();const te=Y();return f(te),te},M=(Y,te)=>E(()=>o().open(Y,te,b)),N=Y=>E(()=>o().openUrl(Y,b)),$=(Y,te,be)=>{const ye=o();ye.alert(Y,r(be||ye,te))},G=(Y,te,be)=>{const ye=o();ye.confirm(Y,r(be||ye,te))},ee=()=>{y().each(Y=>{o().close(Y),b(Y)})};return e.on("remove",()=>{we(n,Y=>{o().close(Y)})}),{open:M,openUrl:N,alert:$,confirm:G,close:ee}},Z0=(e,n)=>{e.notificationManager.open({type:"error",text:n})},Qw=(e,n)=>{e._skinLoaded?Z0(e,n):e.on("SkinLoaded",()=>{Z0(e,n)})},fB=(e,n)=>{Qw(e,vc.translate(["Failed to upload image: {0}",n]))},eS=(e,n,o)=>{Yc(e,n,{message:o}),console.error(o)},tS=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,tH=(e,n,o)=>{eS(e,"PluginLoadError",tS("plugin",n,o))},gB=(e,n,o)=>{eS(e,"IconsLoadError",tS("icons",n,o))},nH=(e,n,o)=>{eS(e,"LanguageLoadError",tS("language",n,o))},oH=(e,n,o)=>{eS(e,"ThemeLoadError",tS("theme",n,o))},sH=(e,n,o)=>{eS(e,"ModelLoadError",tS("model",n,o))},rH=(e,n,o)=>{const r=vc.translate(["Failed to initialize plugin: {0}",n]);Yc(e,"PluginLoadError",{message:r}),R4(r,o),Qw(e,r)},R4=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},mf=e=>/^[a-z0-9\-]+$/i.test(e),nS=e=>"content/"+e+"/content.css",aH=e=>tinymce.Resource.has(nS(e)),cH=e=>hB(e,oh(e)),lH=e=>hB(e,fi(e)),hB=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return tn(n,u=>aH(u)?u:mf(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},Es=e=>{e.contentCSS=e.contentCSS.concat(cH(e),lH(e))},iH=e=>e?Jo(e.getElementsByTagName("img")):[],oS=(e,n)=>{const o={};return{findAll:(c,u=ut)=>{const f=It(iH(c),y=>{const E=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!E||E===Ot.transparentSrc?!1:qo(E,"blob:")?!e.isUploaded(E)&&u(y):qo(E,"data:")?u(y):!1}),b=tn(f,y=>{const E=y.src;if(wn(o,E))return o[E].then(M=>q(M)?M:{image:y,blobInfo:M.blobInfo});{const M=HO(n,E).then(N=>(delete o[E],{image:y,blobInfo:N})).catch(N=>(delete o[E],N));return o[E]=M,M}});return Promise.all(b)}}},pB=()=>{let o={};const r=($,G)=>({status:$,resultUri:G}),c=$=>$ in o;return{hasBlobUri:c,getResultUri:$=>{const G=o[$];return G?G.resultUri:null},isPending:$=>c($)?o[$].status===1:!1,isUploaded:$=>c($)?o[$].status===2:!1,markPending:$=>{o[$]=r(1,null)},markUploaded:($,G)=>{o[$]=r(2,G)},removeFailed:$=>{delete o[$]},destroy:()=>{o={}}}};let uH=0;const dH=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},bB=e=>e+uH+++dH(),Wp=()=>{let e=[];const n=N=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[N.toLowerCase()]||"dat",o=(N,$,G,ee,Y)=>{if(q(N))return r({id:N,name:ee,filename:Y,blob:$,base64:G});if(Fe(N))return r(N);throw new Error("Unknown input type")},r=N=>{if(!N.blob||!N.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const $=N.id||bB("blobid"),G=N.name||$,ee=N.blob;return{id:rt($),name:rt(G),filename:rt(N.filename||G+"."+n(ee.type)),blob:rt(ee),base64:rt(N.base64),blobUri:rt(N.blobUri||URL.createObjectURL(ee)),uri:rt(N.uri)}},c=N=>{f(N.id())||e.push(N)},u=N=>bs(e,N).getOrUndefined(),f=N=>u($=>$.id()===N);return{create:o,add:c,get:f,getByUri:N=>u($=>$.blobUri()===N),getByData:(N,$)=>u(G=>G.base64()===N&&G.blob().type===$),findFirst:u,removeByUri:N=>{e=It(e,$=>$.blobUri()===N?(URL.revokeObjectURL($.blobUri()),!1):!0)},destroy:()=>{we(e,N=>{URL.revokeObjectURL(N.blobUri())}),e=[]}}},Ou=(e,n)=>{const o={},r=(Y,te)=>Y?Y.replace(/\/$/,"")+"/"+te.replace(/^\//,""):te,c=(Y,te)=>new Promise((be,ye)=>{const ve=new XMLHttpRequest;ve.open("POST",n.url),ve.withCredentials=n.credentials,ve.upload.onprogress=et=>{te(et.loaded/et.total*100)},ve.onerror=()=>{ye("Image upload failed due to a XHR Transport error. Code: "+ve.status)},ve.onload=()=>{if(ve.status<200||ve.status>=300){ye("HTTP Error: "+ve.status);return}const et=JSON.parse(ve.responseText);if(!et||!q(et.location)){ye("Invalid JSON: "+ve.responseText);return}be(r(n.basePath,et.location))};const Te=new FormData;Te.append("file",Y.blob(),Y.filename()),ve.send(Te)}),u=le(n.handler)?n.handler:c,f=()=>new Promise(Y=>{Y([])}),b=(Y,te)=>({url:te,blobInfo:Y,status:!0}),y=(Y,te)=>({url:"",blobInfo:Y,status:!1,error:te}),E=(Y,te)=>{at.each(o[Y],be=>{be(te)}),delete o[Y]},M=(Y,te,be)=>(e.markPending(Y.blobUri()),new Promise(ye=>{let ve,Te;try{const et=()=>{ve&&(ve.close(),Te=Wt)},xt=it=>{et(),e.markUploaded(Y.blobUri(),it),E(Y.blobUri(),b(Y,it)),ye(b(Y,it))},Vt=it=>{et(),e.removeFailed(Y.blobUri()),E(Y.blobUri(),y(Y,it)),ye(y(Y,it))};Te=it=>{it<0||it>100||L.from(ve).orThunk(()=>L.from(be).map(mo)).each(Le=>{ve=Le,Le.progressBar.value(it)})},te(Y,Te).then(xt,it=>{Vt(q(it)?{message:it}:it)})}catch(et){ye(y(Y,et))}})),N=Y=>Y===c,$=Y=>{const te=Y.blobUri();return new Promise(be=>{o[te]=o[te]||[],o[te].push(be)})},G=(Y,te)=>(Y=at.grep(Y,be=>!e.isUploaded(be.blobUri())),Promise.all(at.map(Y,be=>e.isPending(be.blobUri())?$(be):M(be,u,te))));return{upload:(Y,te)=>!n.url&&N(u)?f():G(Y,te)}},j0=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Dh=(e,n)=>Ou(n,{url:mC(e),basePath:Ov(e),credentials:fC(e),handler:Y2(e)}),mg=e=>{const n=pB(),o=Dh(e,n);return{upload:(r,c=!0)=>o.upload(r,c?j0(e):void 0)}},sS=(e,n)=>e.dom.isEmpty(n.dom)&&Ae(e.schema.getTextBlockElements()[Ao(n)]),M4=e=>n=>{sS(e,n)&&ea(n,ie.fromHtml('<br data-mce-bogus="1" />'))},N4=e=>{const n=Wp();let o,r;const c=pB(),u=[],f=ve=>Te=>e.selection?ve(Te):[],b=ve=>ve+(ve.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(ve,Te,et)=>{let xt=0;do xt=ve.indexOf(Te,xt),xt!==-1&&(ve=ve.substring(0,xt)+et+ve.substr(xt+Te.length),xt+=et.length-Te.length+1);while(xt!==-1);return ve},E=(ve,Te,et)=>{const xt=`src="${et}"${et===Ot.transparentSrc?' data-mce-placeholder="1"':""}`;return ve=y(ve,`src="${Te}"`,xt),ve=y(ve,'data-mce-src="'+Te+'"','data-mce-src="'+et+'"'),ve},M=(ve,Te)=>{we(e.undoManager.data,et=>{et.type==="fragmented"?et.fragments=tn(et.fragments,xt=>E(xt,ve,Te)):et.content=E(et.content,ve,Te)})},N=(ve,Te)=>{const et=e.convertURL(Te,"src");M(ve.src,Te),Jr(ie.fromDom(ve),{src:ja(e)?b(Te):Te,"data-mce-src":et})},$=()=>(o||(o=Dh(e,c)),te().then(f(ve=>{const Te=tn(ve,et=>et.blobInfo);return o.upload(Te,j0(e)).then(f(et=>{const xt=[];let Vt=!1;const it=tn(et,(Le,Ge)=>{const{blobInfo:Ht,image:bn}=ve[Ge];let uo=!1;return Le.status&&Os(e)?(Le.url&&!$o(bn.src,Le.url)&&(Vt=!0),n.removeByUri(bn.src),dg(e)||N(bn,Le.url)):Le.error&&(Le.error.remove&&(M(bn.src,Ot.transparentSrc),xt.push(bn),uo=!0),fB(e,Le.error.message)),{element:bn,status:Le.status,uploadUri:Le.url,blobInfo:Ht,removed:uo}});return xt.length>0&&!dg(e)?e.undoManager.transact(()=>{we($s(xt),Le=>{const Ge=mc(Le);Bs(Le),Ge.each(M4(e)),n.removeByUri(Le.dom.src)})}):Vt&&e.undoManager.dispatchChange(),it}))}))),G=()=>Na(e)?$():Promise.resolve([]),ee=ve=>gs(u,Te=>Te(ve)),Y=ve=>{u.push(ve)},te=()=>(r||(r=oS(c,n)),r.findAll(e.getBody(),ee).then(f(ve=>{const Te=It(ve,et=>q(et)?(Qw(e,et),!1):et.uriType!=="blob");return dg(e)||we(Te,et=>{M(et.image.src,et.blobInfo.blobUri()),et.image.src=et.blobInfo.blobUri(),et.image.removeAttribute("data-mce-src")}),Te}))),be=()=>{n.destroy(),c.destroy(),r=o=null},ye=ve=>ve.replace(/src="(blob:[^"]+)"/g,(Te,et)=>{const xt=c.getResultUri(et);if(xt)return'src="'+xt+'"';let Vt=n.getByUri(et);return Vt||(Vt=zo(e.editorManager.get(),(it,Le)=>it||Le.editorUpload&&Le.editorUpload.blobCache.getByUri(et),void 0)),Vt?'src="data:'+Vt.blob().type+";base64,"+Vt.base64()+'"':Te});return e.on("SetContent",()=>{Na(e)?G():te()}),e.on("RawSaveContent",ve=>{ve.content=ye(ve.content)}),e.on("GetContent",ve=>{ve.source_view||ve.format==="raw"||ve.format==="tree"||(ve.content=ye(ve.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ve=>{we(ve,Te=>{const et=Te.attr("src");if(!et||n.getByUri(et))return;const xt=c.getResultUri(et);xt&&Te.attr("src",xt)})})}),{blobCache:n,addFilter:Y,uploadImages:$,uploadImagesAuto:G,scanForImages:te,destroy:be}},vB=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>nn(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{at.each(f,(b,y)=>{n.setAttrib(c,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return at.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},P4={remove_similar:!0,inherit:!1},G0={selector:"td,th",...P4},mH={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...G0},tablecellverticalalign:{styles:{"vertical-align":"%value"},...G0},tablecellbordercolor:{styles:{borderColor:"%value"},...G0},tablecellclass:{classes:["%value"],...G0},tableclass:{selector:"table",classes:["%value"],...P4},tablecellborderstyle:{styles:{borderStyle:"%value"},...G0},tablecellborderwidth:{styles:{borderWidth:"%value"},...G0}},yB=rt(mH),CB=e=>{const n={},o=f=>Ae(f)?n[f]:n,r=f=>wn(n,f),c=(f,b)=>{f&&(q(f)?(nt(b)||(b=[b]),we(b,y=>{Gt(y.deep)&&(y.deep=!Su(y)),Gt(y.split)&&(y.split=!Su(y)||Cc(y)),Gt(y.remove)&&Su(y)&&!Cc(y)&&(y.remove="none"),Su(y)&&Cc(y)&&(y.mixed=!0,y.block_expand=!0),q(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):mt(f,(y,E)=>{c(E,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(vB(e)),c(yB()),c(pC(e)),{get:o,has:r,register:c,unregister:u}},rS=at.each,nd=hr.DOM,aS=e=>Ae(e)&&Fe(e),fH=(e,n)=>{const o=n&&n.schema||ys({}),r=(y,E)=>{E.classes.length>0&&nd.addClass(y,E.classes.join(" ")),nd.setAttribs(y,E.attrs)},c=y=>{const E=q(y)?{name:y,classes:[],attrs:{}}:y,M=nd.create(E.name);return r(M,E),M},u=(y,E)=>{const M=o.getElementRule(y.nodeName.toLowerCase()),N=M==null?void 0:M.parentsRequired;return N&&N.length?E&&An(N,E)?E:N[0]:!1},f=(y,E,M)=>{let N;const $=E[0],G=aS($)?$.name:void 0,ee=u(y,G);if(ee)G===ee?(N=$,E=E.slice(1)):N=ee;else if($)N=$,E=E.slice(1);else if(!M)return y;const Y=N?c(N):nd.create("div");Y.appendChild(y),M&&at.each(M,be=>{const ye=c(be);Y.insertBefore(ye,y)});const te=aS(N)?N.siblings:void 0;return f(Y,E,te)},b=nd.create("div");if(e.length>0){const y=e[0],E=c(y),M=aS(y)?y.siblings:void 0;b.appendChild(f(E,e.slice(1),M))}return b},gH=e=>{e=at.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":at.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},tG=e=>q(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),at.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=at.map(n.split(/(?:~\+|~|\+)/),gH),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],hH=(e,n)=>{let o="",r=bC(e);if(r==="")return"";const c=$=>q($)?$.replace(/%(\w+)/g,""):"",u=($,G)=>nd.getStyle(G??e.getBody(),$,!0);if(q(n)){const $=e.formatter.get(n);if(!$)return"";n=$[0]}if("preview"in n){const $=n.preview;if($===!1)return"";r=$||r}let f=n.block||n.inline||"span",b;const y=tG(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=fH(y,e)):b=fH([f],e);const E=nd.select(f,b)[0]||b.firstChild;rS(n.styles,($,G)=>{const ee=c($);ee&&nd.setStyle(E,G,ee)}),rS(n.attributes,($,G)=>{const ee=c($);ee&&nd.setAttrib(E,G,ee)}),rS(n.classes,$=>{const G=c($);nd.hasClass(E,G)||nd.addClass(E,G)}),e.dispatch("PreviewFormats"),nd.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const M=u("fontSize"),N=/px$/.test(M)?parseInt(M,10):0;return rS(r.split(" "),$=>{let G=u($,E);if(!($==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(G)&&(G=u($),Sd(G).toLowerCase()==="#ffffff"))&&!($==="color"&&Sd(G).toLowerCase()==="#000000")){if($==="font-size"&&/em|%$/.test(G)){if(N===0)return;G=parseFloat(G)/(/%$/.test(G)?100:1)*N+"px"}$==="border"&&G&&(o+="padding:0 2px;"),o+=$+":"+G+";"}}),e.dispatch("AfterPreviewFormats"),nd.remove(b),o},pH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},ff=e=>{const n=CB(e),o=rr({});return pH(e),EN(e),dg(e)||b8(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{g7(e,r,c,u)},remove:(r,c,u,f)=>{h7(e,r,c,u,f)},toggle:(r,c,u)=>{YP(e,r,c,u)},match:(r,c,u,f)=>d7(e,r,c,u,f),closest:r=>f7(e,r),matchAll:(r,c)=>S4(e,r,c),matchNode:(r,c,u,f)=>m7(e,r,c,u,f),canApply:r=>fE(e,r),formatChanged:(r,c,u,f)=>XP(e,o,r,c,u,f),getCssText:Ke(hH,e)}},bH=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},nG=(e,n,o)=>{const r=rr(!1),c=y=>{Xw(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const E=y.command;bH(E)||(IP(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const E=y.command;bH(E)||c(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",y=>{const E=y.keyCode;if(y.isDefaultPrevented())return;const M=Ot.os.isMacOS()&&y.key==="Meta";(E>=33&&E<=36||E>=37&&E<=40||E===45||y.ctrlKey||M)&&(c(),e.nodeChanged()),(E===46||E===8)&&e.nodeChanged(),r.get()&&n.typing&&!Yw(qw(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",y=>{const E=y.keyCode;if(y.isDefaultPrevented())return;if(E>=33&&E<=36||E>=37&&E<=40||E===45){n.typing&&c(y);return}const M=y.ctrlKey&&!y.altKey||y.metaKey;if((E<16||E>20)&&E!==224&&E!==91&&!n.typing&&!M){n.beforeChange(),Xw(n,!0,o),n.add({},y),r.set(!0);return}(Ot.os.isMacOS()?y.metaKey:y.ctrlKey&&!y.altKey)&&n.beforeChange()}),e.on("mousedown",y=>{n.typing&&c(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&c(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},vH=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},q0=e=>{const n=Mc(),o=rr(0),r=rr(0),c={data:[],typing:!1,beforeChange:()=>{UP(e,o,n)},add:(u,f)=>v4(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=qw(e);u.bookmark=nC(e.selection),e.dispatch("change",{level:u,lastLevel:rn(c.data,r.get()).getOrUndefined()})},undo:()=>y4(e,c,o,r),redo:()=>WP(e,r,c.data),clear:()=>{C4(e,c,r)},reset:()=>{ZP(e,c)},hasUndo:()=>jP(e,c,r),hasRedo:()=>w4(e,c,r),transact:u=>GP(e,c,o,u),ignore:u=>{qP(e,o,u)},extra:(u,f)=>{KP(e,c,r,u,f)}};return dg(e)||nG(e,c,o),vH(e),c},yH=[9,27,ht.HOME,ht.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ht.DOWN,ht.UP,ht.LEFT,ht.RIGHT].concat(Ot.browser.isFirefox()?[224]:[]),B4="data-mce-placeholder",$4=e=>e.type==="keydown"||e.type==="keyup",I4=e=>{const n=e.keyCode;return n===ht.BACKSPACE||n===ht.DELETE},CH=e=>{if($4(e)){const n=e.keyCode;return!I4(e)&&(ht.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||An(yH,n))}else return!1},wH=e=>$4(e)&&!(I4(e)||e.type==="keyup"&&e.keyCode===229),Zp=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},SH=e=>{var n;const o=e.dom,r=ol(e),c=(n=Z1(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(CH(f))return;const y=e.getBody(),E=wH(f)?!1:Zp(o,y,r);(o.getAttrib(y,B4)!==""!==E||b)&&(o.setAttrib(y,B4,E?c:null),h0(e,E),e.on(E?"keydown":"keyup",u),e.off(E?"keyup":"keydown",u))};Uo(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Ju.setEditorTimeout(e,()=>u(b)))})},xH=(e,n)=>({block:e,position:n}),TH=(e,n)=>({from:e,to:n}),L4=(e,n)=>{const o=ie.fromDom(e),r=ie.fromDom(n.container());return hT(o,r).map(c=>xH(c,n))},EH=e=>!(ri(e.to.block,e.from.block)||ri(e.from.block,e.to.block)),kH=e=>!ns(e.from.block,e.to.block),wB=(e,n)=>Da(n,c=>cp(c)||ta(c.dom),c=>ns(c,e)).filter(xe).getOr(e),_H=(e,n)=>{const o=ie.fromDom(e);return ns(wB(o,n.from.block),wB(o,n.to.block))},AH=e=>fr(e.from.block.dom)===!1&&fr(e.to.block.dom)===!1,yE=e=>{const n=o=>E2(o)||Wu(o.dom)||mi(o);return n(e.from.block)&&n(e.to.block)},OH=(e,n,o,r)=>Pr(r.position.getNode())&&!Wa(e,r.block)?dh(!1,r.block.dom).bind(c=>c.isEqual(r.position)?Xi(o,n,c).bind(u=>L4(n,u)):L.some(r)).getOr(r):r,DH=(e,n,o,r)=>{const c=L4(n,Pe.fromRangeStart(r)),u=c.bind(f=>Xi(o,n,f.position).bind(b=>L4(n,b).map(y=>OH(e,n,o,y))));return Vr(c,u,TH).filter(f=>kH(f)&&_H(n,f)&&AH(f)&&yE(f)&&EH(f))},oG=(e,n,o,r)=>r.collapsed?DH(e,n,o,r):L.none(),cS=(e,n)=>{const o=Oa(e);return Qs(o,r=>n.isBlock(Ao(r))).fold(rt(o),r=>o.slice(0,r))},SB=(e,n)=>{const o=cS(e,n);return we(o,Bs),o},CE=(e,n,o)=>{const r=Sh(o,n);return bs(r.reverse(),c=>Wa(e,c)).each(Bs)},RH=(e,n)=>It(Pg(n),o=>!Wa(e,o)).length===0,MH=(e,n,o,r,c)=>{if(Wa(r,o))return Ri(o),kl(o.dom);RH(r,c)&&Wa(r,n)&&oc(c,ie.fromTag("br"));const u=Pi(o.dom,Pe.before(c.dom));return we(SB(n,r),f=>{oc(c,f)}),CE(r,e,n),u},NH=(e,n)=>e.isInline(Ao(n)),PH=(e,n,o,r)=>{if(Wa(r,o)){if(Wa(r,n)){const f=Ks((b=>{const y=(E,M)=>Kd(E).fold(()=>M,N=>NH(r,N)?y(N,M.concat(Td(N))):M);return y(b,[])})(o),(b,y)=>(Ur(b,y),y),lp());ki(n),ea(n,f)}return Bs(o),kl(n.dom)}const c=Ji(o.dom);return we(SB(n,r),u=>{ea(o,u)}),CE(r,e,n),c},Mb=(e,n)=>{const o=Sh(n,e);return L.from(o[o.length-1])},Nb=(e,n)=>ri(n,e)?Mb(n,e):L.none(),lS=(e,n)=>{dh(e,n.dom).bind(o=>L.from(o.getNode())).map(ie.fromDom).filter(rp).each(Bs)},iS=(e,n,o,r)=>(lS(!0,n),lS(!1,o),Nb(n,o).fold(Ke(PH,e,n,o,r),Ke(MH,e,n,o,r))),jp=(e,n,o,r,c)=>n?iS(e,r,o,c):iS(e,o,r,c),Rh=(e,n)=>{const o=ie.fromDom(e.getBody());return oG(e.schema,o.dom,n,e.selection.getRng()).map(c=>()=>{jp(o,n,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},wE=(e,n,o)=>{const r=n.getRng();return Vr(hT(e,ie.fromDom(r.startContainer)),hT(e,ie.fromDom(r.endContainer)),(c,u)=>ns(c,u)?L.none():L.some(()=>{r.deleteContents(),jp(e,!0,c,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(L.none())},uS=(e,n)=>{const o=ie.fromDom(n),r=Ke(ns,e);return mr(o,cp,r).isSome()},xB=(e,n)=>uS(e,n.startContainer)||uS(e,n.endContainer),F4=(e,n)=>{const o=Pi(e.dom,Pe.fromRangeStart(n)).isNone(),r=El(e.dom,Pe.fromRangeEnd(n)).isNone();return!xB(e,n)&&o&&r},H4=e=>L.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),TB=e=>{const n=ie.fromDom(e.getBody()),o=e.selection.getRng();return F4(n,o)?H4(e):wE(n,e.selection,e.schema)},SE=(e,n)=>e.selection.isCollapsed()?L.none():TB(e),od=(e,n,o,r,c)=>L.from(n._selectionOverrides.showCaret(e,o,r,c)),EB=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},K0=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?L.none():L.some(EB(n)),kB=(e,n,o)=>{const r=sl(1,e.getBody(),n),c=Pe.fromRangeStart(r),u=c.getNode();if(jv(u))return od(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(jv(f))return od(1,e,f,!1,!1);const b=Fp(e.dom.getRoot(),c.getNode());return jv(b)?od(1,e,b,!1,o):L.none()},Y0=(e,n,o)=>n.collapsed?kB(e,n,o).getOr(n):n,_B=e=>mn(e)||vw(e),AB=e=>wh(e)||yw(e),OB=(e,n)=>{st(n)&&n.data.length===0&&e.remove(n)},V4=(e,n,o,r,c,u)=>{od(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),OB(e.dom,o)},Mh=(e,n)=>{const o=e.selection.getRng();if(!st(o.commonAncestorContainer))return L.none();const r=n?yc.Forwards:yc.Backwards,c=Kc(e.getBody()),u=Ke(NC,n?c.next:c.prev),f=n?_B:AB,b=ih(r,e.getBody(),o),y=u(b),E=y&&Md(n,y);if(!E||!Xv(b,E))return L.none();if(f(E))return L.some(()=>V4(e,o,b.getNode(),r,n,E));const M=u(E);return M&&f(M)&&Xv(E,M)?L.some(()=>V4(e,o,b.getNode(),r,n,M)):L.none()},fg=(e,n)=>Mh(e,n),sd=(e,n)=>{const o=e.getBody();return n?kl(o).filter(mn):Ji(o).filter(wh)},z4=e=>{const n=e.selection.getRng();return!n.collapsed&&(sd(e,!0).exists(o=>o.isEqual(Pe.fromRangeStart(n)))||sd(e,!1).exists(o=>o.isEqual(Pe.fromRangeEnd(n))))},BH=e=>Ae(e)&&(cp(ie.fromDom(e))||mi(ie.fromDom(e))),rd=Cs.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),$H=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return nn(o)&&o.getAttribute("data-mce-caret")===r},IH=(e,n,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!Yi(o,r,e);return Kv(!n,o).fold(()=>Kv(n,r).fold(Ze,u),u)},DB=(e,n,o,r,c)=>{const u=c.getNode(!o);return hT(ie.fromDom(n),ie.fromDom(r.getNode())).map(f=>Wa(e,f)?rd.remove(f.dom):rd.moveToElement(u)).orThunk(()=>L.some(rd.moveToElement(u)))},RB=(e,n,o,r)=>Xi(n,e,o).bind(c=>BH(c.getNode())||IH(e,n,o,c,r)?L.none():n&&fr(c.getNode())||!n&&fr(c.getNode(!0))?DB(r,e,n,o,c):n&&wh(o)||!n&&mn(o)?L.some(rd.moveToPosition(c)):L.none()),LH=(e,n)=>cn(n)?L.none():e&&fr(n.nextSibling)?L.some(rd.moveToElement(n.nextSibling)):!e&&fr(n.previousSibling)?L.some(rd.moveToElement(n.previousSibling)):L.none(),FH=(e,n,o)=>o.fold(r=>L.some(rd.remove(r)),r=>L.some(rd.moveToElement(r)),r=>Yi(n,r,e)?L.none():L.some(rd.moveToPosition(r))),HH=(e,n,o,r)=>$H(n,o)?LH(n,o.getNode(!n)).orThunk(()=>RB(e,n,o,r)):RB(e,n,o,r).bind(c=>FH(e,o,c)),VH=(e,n,o,r)=>{const c=sl(n?1:-1,e,o),u=Pe.fromRangeStart(c),f=ie.fromDom(e);return!n&&wh(u)?L.some(rd.remove(u.getNode(!0))):n&&mn(u)?L.some(rd.remove(u.getNode())):!n&&mn(u)&&xM(f,u,r)?Fj(f,u,r).map(b=>rd.remove(b.getNode())):n&&wh(u)&&uT(f,u,r)?u6(f,u,r).map(b=>rd.remove(b.getNode())):HH(e,n,u,r)},zH=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),hb(e,n,ie.fromDom(o)),!0),U4=(e,n)=>o=>{const r=n?Pe.before(o):Pe.after(o);return e.selection.setRng(r.toRange()),!0},W4=e=>n=>(e.selection.setRng(n.toRange()),!0),Z4=(e,n)=>L.from(Fp(e.getBody(),n)),UH=(e,n)=>{const o=e.selection.getNode();return Z4(e,o).filter(fr).fold(()=>VH(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(zH(e,n),U4(e,n),W4(e))),()=>L.some(Wt))},WH=e=>{we(fc(e,".mce-offscreen-selection"),Bs)},MB=(e,n)=>{const o=e.selection.getNode();return fr(o)&&!Gr(o)?Z4(e,o.parentNode).filter(fr).fold(()=>L.some(()=>{WH(ie.fromDom(e.getBody())),hb(e,n,ie.fromDom(e.selection.getNode())),aO(e)}),()=>L.some(Wt)):z4(e)?L.some(()=>{zM(e,e.selection.getRng(),ie.fromDom(e.getBody()))}):L.none()},j4=e=>{const n=e.dom,o=e.selection,r=Fp(e.getBody(),o.getNode());if(ta(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(Pe.before(c).toRange())}return!0},dS=(e,n)=>e.selection.isCollapsed()?UH(e,n):MB(e,n),NB=(e,n)=>{const o=Pe.fromRangeStart(e.selection.getRng());return Xi(n,e.getBody(),o).filter(r=>n?o6(r):s6(r)).bind(r=>qv(n?0:-1,r)).map(r=>()=>e.selection.select(r))},xE=(e,n)=>e.selection.isCollapsed()?NB(e,n):L.none(),Gp=st,PB=e=>Gp(e)&&e.data[0]===ia,BB=e=>Gp(e)&&e.data[e.data.length-1]===ia,gf=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(ia)},Tm=e=>{var n;if(Gp(e.previousSibling))return BB(e.previousSibling)||e.previousSibling.appendData(ia),e.previousSibling;if(Gp(e))return PB(e)||e.insertData(0,ia),e;{const o=gf(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},TE=e=>{var n,o;if(Gp(e.nextSibling))return PB(e.nextSibling)||e.nextSibling.insertData(0,ia),e.nextSibling;if(Gp(e))return BB(e)||e.appendData(ia),e;{const r=gf(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},mS=(e,n)=>e?Tm(n):TE(n),EE=Ke(mS,!0),$B=Ke(mS,!1),G4=(e,n)=>st(e.container())?mS(n,e.container()):mS(n,e.getNode()),q4=(e,n)=>{const o=n.get();return o&&e.container()===o&&kd(o)},kE=(e,n)=>n.fold(o=>{Xf(e.get());const r=EE(o);return e.set(r),L.some(Pe(r,r.length-1))},o=>kl(o).map(r=>{if(q4(r,e)){const c=e.get();return Pe(c,1)}else{Xf(e.get());const c=G4(r,!0);return e.set(c),Pe(c,1)}}),o=>Ji(o).map(r=>{if(q4(r,e)){const c=e.get();return Pe(c,c.length-1)}else{Xf(e.get());const c=G4(r,!1);return e.set(c),Pe(c,c.length-1)}}),o=>{Xf(e.get());const r=$B(o);return e.set(r),L.some(Pe(r,1))}),K4=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return L.none()},pi=Cs.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),fS=(e,n)=>{const o=Dd(n,e);return o||e},Y4=(e,n,o)=>{const r=oO(o),c=fS(n,r.container());return Ip(e,c,r).fold(()=>El(c,r).bind(Ke(Ip,e,c)).map(u=>pi.before(u)),L.none)},ZH=(e,n)=>mh(e,n)===null,IB=(e,n,o)=>Ip(e,n,o).filter(Ke(ZH,n)),jH=(e,n,o)=>{const r=sO(o);return IB(e,n,r).bind(c=>Pi(c,r).isNone()?L.some(pi.start(c)):L.none())},GH=(e,n,o)=>{const r=oO(o);return IB(e,n,r).bind(c=>El(c,r).isNone()?L.some(pi.end(c)):L.none())},LB=(e,n,o)=>{const r=sO(o),c=fS(n,r.container());return Ip(e,c,r).fold(()=>Pi(c,r).bind(Ke(Ip,e,c)).map(u=>pi.after(u)),L.none)},FB=e=>!LM(gS(e)),gg=(e,n,o)=>K4([Y4,jH,GH,LB],[e,n,o]).filter(FB),gS=e=>e.fold(Ho,Ho,Ho,Ho),HB=e=>e.fold(rt("before"),rt("start"),rt("end"),rt("after")),_E=e=>e.fold(pi.before,pi.before,pi.after,pi.after),X4=e=>e.fold(pi.start,pi.start,pi.end,pi.end),qH=(e,n)=>HB(e)===HB(n)&&gS(e)===gS(n),KH=(e,n,o,r,c,u)=>Vr(Ip(n,o,r),Ip(n,o,c),(f,b)=>f!==b&&FM(o,f,b)?pi.after(e?f:b):u).getOr(u),YH=(e,n)=>e.fold(ut,o=>!qH(o,n)),XH=(e,n,o,r,c)=>{const u=Md(e,c);return Xi(e,o,u).map(Ke(Md,e)).fold(()=>r.map(_E),y=>gg(n,o,y).map(Ke(KH,e,n,o,u,y)).filter(Ke(YH,r))).filter(FB)},AE=(e,n)=>e?n.fold(A(L.some,pi.start),L.none,A(L.some,pi.after),L.none):n.fold(L.none,A(L.some,pi.before),L.none,A(L.some,pi.end)),J4=(e,n,o,r)=>{const c=Md(e,r),u=gg(n,o,c);return gg(n,o,c).bind(Ke(AE,e)).orThunk(()=>XH(e,n,o,u,r))},JH=e=>le(e.selection.getSel().modify),VB=(e,n,o)=>{const r=e?1:-1;return n.setRng(Pe(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},QH=(e,n)=>{const o=n.selection.getRng(),r=e?Pe.fromRangeEnd(o):Pe.fromRangeStart(o);return JH(n)?e&&Wy(r)?VB(!0,n.selection,r):!e&&Jg(r)?VB(!1,n.selection,r):!1:!1};var hg;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(hg||(hg={}));const hS=(e,n)=>e===yc.Backwards?es(n):n,eV=(e,n,o)=>e===yc.Forwards?n.next(o):n.prev(o),tV=(e,n,o,r)=>Pr(r.getNode(n===yc.Forwards))?hg.Br:Yi(o,r)===!1?hg.Block:hg.Wrap,OE=(e,n,o,r)=>{const c=Kc(o);let u=r;const f=[];for(;u;){const b=eV(n,c,u);if(!b)break;if(Pr(b.getNode(!1)))return n===yc.Forwards?{positions:hS(n,f).concat([b]),breakType:hg.Br,breakAt:L.some(b)}:{positions:hS(n,f),breakType:hg.Br,breakAt:L.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=tV(o,n,u,b);return{positions:hS(n,f),breakType:y,breakAt:L.some(b)}}f.push(b),u=b}return{positions:hS(n,f),breakType:hg.Eol,breakAt:L.none()}},zB=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===yc.Backwards?u.concat(c):[c].concat(u)}).getOr([]),Q4=(e,n)=>zo(e,(o,r)=>o.fold(()=>L.some(r),c=>Vr($t(c.getClientRects()),$t(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),L.none()),DE=(e,n)=>$t(n.getClientRects()).bind(o=>Q4(e,o.left)),pS=Ke(OE,Pe.isAbove,-1),bS=Ke(OE,Pe.isBelow,1),UB=Ke(zB,-1,pS),WB=Ke(zB,1,bS),vS=(e,n)=>pS(e,n).breakAt.isNone(),yS=(e,n)=>bS(e,n).breakAt.isNone(),nV=e=>kl(e).map(n=>[n].concat(bS(e,n).positions)).getOr([]),oV=e=>Ji(e).map(n=>pS(e,n).positions.concat(n)).getOr([]),RE=(e,n)=>DE(UB(e,n),n),sV=(e,n)=>DE(WB(e,n),n),rV=fr,ZB=(e,n)=>Math.abs(e.left-n),jB=(e,n)=>Math.abs(e.right-n),aV=e=>wr(e,"node"),GB=(e,n)=>ce(e,(o,r)=>{const c=Math.min(ZB(o,n),jB(o,n)),u=Math.min(ZB(r,n),jB(r,n));return u===c&&aV(r)&&rV(r.node)||u<c?r:o}),cV=e=>{const n=o=>tn(o,r=>{const c=Gm(r);return c.node=e,c});if(nn(e))return n(e.getClientRects());if(st(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},qB=e=>er(e,cV);var CS;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(CS||(CS={}));const lV=(e,n,o,r)=>{let c=r;for(;c=wp(c,e,Gy,n);)if(o(c))return},KB=(e,n,o,r,c,u)=>{let f=0;const b=[],y=N=>{let $=qB([N]);e===-1&&($=$.reverse());for(let G=0;G<$.length;G++){const ee=$[G];if(!o(ee,E)){if(b.length>0&&n(ee,Oe(b))&&f++,ee.line=f,c(ee))return!0;b.push(ee)}}return!1},E=Oe(u.getClientRects());if(!E)return b;const M=u.getNode();return M&&(y(M),lV(e,r,y,M)),b},sG=(e,n)=>n.line>e,Em=(e,n)=>n.line===e,eD=Ke(KB,CS.Up,$1,bv),YB=Ke(KB,CS.Down,bv,$1),tD=e=>Oe(e.getClientRects()),iV=(e,n,o,r)=>{const c=Kc(n);let u,f,b,y;const E=[];let M=0;e===1?(u=c.next,f=bv,b=$1,y=Pe.after(r)):(u=c.prev,f=$1,b=bv,y=Pe.before(r));const N=tD(y);do{if(!y.isVisible())continue;const $=tD(y);if(b($,N))continue;E.length>0&&f($,Oe(E))&&M++;const G=Gm($);if(G.position=y,G.line=M,o(G))return E;E.push(G)}while(y=u(y));return E},nD=e=>n=>sG(e,n),oD=e=>n=>Em(e,n),pg=(e,n)=>{e.selection.setRng(n),gw(e,e.selection.getRng())},sD=(e,n,o)=>L.some(Y0(e,n,o)),XB=(e,n,o,r,c,u)=>{const f=n===yc.Forwards,b=Kc(e.getBody()),y=Ke(NC,f?b.next:b.prev),E=f?r:c;if(!o.collapsed){const ee=up(o);if(u(ee))return od(n,e,ee,n===yc.Backwards,!1);if(z4(e)){const Y=o.cloneRange();return Y.collapse(n===yc.Backwards),L.from(Y)}}const M=ih(n,e.getBody(),o);if(E(M))return K0(e,M.getNode(!f));let N=y(M);const $=zl(o);if(N)N=Md(f,N);else return $?L.some(o):L.none();if(E(N))return od(n,e,N.getNode(!f),f,!1);const G=y(N);return G&&E(G)&&Xv(N,G)?od(n,e,G.getNode(!f),f,!1):$?sD(e,N.toRange(),!1):L.none()},JB=(e,n,o,r,c,u)=>{const f=ih(n,e.getBody(),o),b=Oe(f.getClientRects()),y=n===CS.Down,E=e.getBody();if(!b)return L.none();if(z4(e)){const te=y?Pe.fromRangeEnd(o):Pe.fromRangeStart(o);return(y?sV:RE)(E,te).orThunk(()=>L.from(te)).map(ye=>ye.toRange())}const N=(y?YB:eD)(E,nD(1),f),$=It(N,oD(1)),G=b.left,ee=GB($,G);if(ee&&u(ee.node)){const te=Math.abs(G-ee.left),be=Math.abs(G-ee.right);return od(n,e,ee.node,te<be,!1)}let Y;if(r(f)?Y=f.getNode():c(f)?Y=f.getNode(!0):Y=up(o),Y){const te=iV(n,E,nD(1),Y);let be=GB(It(te,oD(1)),G);if(be||(be=Oe(It(te,oD(0))),be))return sD(e,be.position.toRange(),!1)}return $.length===0?qp(e,y).filter(y?c:r).map(te=>Y0(e,te.toRange(),!1)):L.none()},qp=(e,n)=>{const o=e.selection.getRng(),r=n?Pe.fromRangeEnd(o):Pe.fromRangeStart(o),c=X_(r.container(),e.getBody());if(n){const u=bS(c,r);return to(u.positions)}else{const u=pS(c,r);return $t(u.positions)}},rD=(e,n,o)=>qp(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),wS=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},aD=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},ME=(e,n,o)=>kE(n,o).map(r=>(wS(e,r),o)),uV=(e,n,o)=>{const r=Pe.fromRangeStart(e);if(e.collapsed)return r;{const c=Pe.fromRangeEnd(e);return o?Pi(n,c).getOr(c):El(n,r).getOr(r)}},dV=(e,n,o)=>{const r=e.getBody(),c=uV(e.selection.getRng(),r,o),u=Ke(pb,e);return J4(o,u,r,c).bind(b=>ME(e,n,b))},mV=(e,n,o)=>{const r=tn(fc(ie.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=It(r,e),u=It(o,e);we(ma(c,u),Ke(aD,!1)),we(ma(u,c),Ke(aD,!0))},rG=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Pe.fromRangeStart(e.selection.getRng());Pe.isTextPosition(r)&&!R6(r)&&(wS(e,G_(o,r)),n.set(null))}},aG=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=It(r,e);we(c,u=>{const f=Pe.fromRangeStart(n.selection.getRng());gg(e,n.getBody(),f).bind(b=>ME(n,o,b))})}},fV=(e,n,o)=>sh(e)?dV(e,n,o).isSome():!1,Id=(e,n,o)=>sh(n)?QH(e,n):!1,gV=e=>{const n=rr(null),o=Ke(pb,e);return e.on("NodeChange",r=>{sh(e)&&(mV(o,e.dom,r.parents),rG(e,n),aG(o,e,n,r.parents))}),n},hV=Ke(Id,!0),Pb=Ke(Id,!1),SS=(e,n,o)=>{if(sh(e)){const r=qp(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?Pe.fromRangeEnd(c):Pe.fromRangeStart(c)});return gg(Ke(pb,e),e.getBody(),r).exists(c=>{const u=_E(c);return kE(o,u).exists(f=>(wS(e,f),!0))})}else return!1},pV=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},NE=e=>Vr(kl(e),Ji(e),(n,o)=>{const r=Md(!0,n),c=Md(!1,o);return El(e,r).forall(u=>u.isEqual(c))}).getOr(!0),QB=(e,n)=>o=>kE(n,o).map(r=>()=>wS(e,r)),e$=(e,n,o,r)=>{const c=e.getBody(),u=Ke(pb,e);e.undoManager.ignore(()=>{e.selection.setRng(pV(o,r)),Yl(e),gg(u,c,Pe.fromRangeStart(e.selection.getRng())).map(X4).bind(QB(e,n)).each(qs)}),e.nodeChanged()},bV=(e,n)=>{const o=Dd(n,e);return o||e},vV=(e,n,o,r)=>{const c=bV(e.getBody(),r.container()),u=Ke(pb,e),f=gg(u,c,r);return f.bind(y=>o?y.fold(rt(L.some(X4(y))),L.none,rt(L.some(_E(y))),L.none):y.fold(L.none,rt(L.some(_E(y))),L.none,rt(L.some(X4(y))))).map(QB(e,n)).getOrThunk(()=>{const y=Qm(o,c,r),E=y.bind(M=>gg(u,c,M));return Vr(f,E,()=>Ip(u,c,r).bind(M=>NE(M)?L.some(()=>{hb(e,o,ie.fromDom(M))}):L.none())).getOrThunk(()=>E.bind(()=>y.map(M=>()=>{o?e$(e,n,r,M):e$(e,n,M,r)})))})},PE=(e,n,o)=>{if(e.selection.isCollapsed()&&sh(e)){const r=Pe.fromRangeStart(e.selection.getRng());return vV(e,n,o,r)}return L.none()},yV=e=>nc(e)>1,bg=(e,n)=>{const o=ie.fromDom(e.getBody()),r=ie.fromDom(e.selection.getStart()),c=Sh(r,o);return Qs(c,n).fold(rt(c),u=>c.slice(0,u))},CV=e=>nc(e)===1,wV=e=>bg(e,n=>e.schema.isBlock(Ao(n))||yV(n)),SV=e=>bg(e,n=>e.schema.isBlock(Ao(n))),t$=(e,n)=>{const o=Ke(kO,e);return er(n,r=>o(r)?[r.dom]:[])},n$=e=>{const n=SV(e);return t$(e,n)},cD=(e,n,o,r)=>{const c=t$(n,r);if(c.length===0)hb(n,e,o);else{const u=$T(o.dom,c);n.selection.setRng(u.toRange())}},lD=(e,n)=>{const o=It(wV(e),CV);return to(o).bind(r=>{const c=Pe.fromRangeStart(e.selection.getRng());return Lp(n,c,r.dom)&&!nb(r)?L.some(()=>cD(n,e,r,o)):L.none()})},iD=(e,n)=>{const o=n.parentElement;return Pr(n)&&!W(o)&&e.dom.isEmpty(o)},o$=e=>nb(ie.fromDom(e)),uD=(e,n)=>{const o=e.selection.getStart(),r=iD(e,o)||o$(o)?$T(o,n):kN(e.selection.getRng(),n);e.selection.setRng(r.toRange())},s$=(e,n)=>{const o=ma(n,n$(e));o.length>0&&uD(e,o)},r$=e=>st(e.startContainer),xS=e=>e.startOffset===0&&r$(e),BE=(e,n)=>{const o=n.startContainer.parentElement;return!W(o)&&kO(e,ie.fromDom(o))},a$=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!W(n)&&!W(o)&&n.isEqualNode(o)},c$=e=>{const n=e.endContainer;return e.endOffset===(st(n)?n.length:n.childNodes.length)},l$=e=>a$(e)&&c$(e),i$=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),$E=e=>l$(e)||i$(e),dD=e=>{const n=e.selection.getRng();return xS(n)&&BE(e,n)&&$E(n)},TS=e=>{if(dD(e)){const n=n$(e);return L.some(()=>{Yl(e),s$(e,n)})}else return L.none()},mD=(e,n)=>e.selection.isCollapsed()?lD(e,n):TS(e),u$=(e,n)=>f1(e,o=>Qi(o.dom),o=>n.isBlock(Ao(o))),xV=e=>u$(ie.fromDom(e.selection.getStart()),e.schema),TV=e=>{const n=e.selection.getRng();return n.collapsed&&(r$(n)||e.dom.isEmpty(n.startContainer))&&!xV(e)},X0=e=>(TV(e)&&uD(e,[]),!0),fD=(e,n,o)=>Ae(o)?L.some(()=>{e._selectionOverrides.hideFakeCaret(),hb(e,n,ie.fromDom(o))}):L.none(),d$=(e,n)=>{const o=n?vw:yw,r=n?yc.Forwards:yc.Backwards,c=ih(r,e.getBody(),e.selection.getRng());return o(c)?fD(e,n,c.getNode(!n)):L.from(Md(n,c)).filter(u=>o(u)&&Xv(c,u)).bind(u=>fD(e,n,u.getNode(!n)))},cG=(e,n)=>{const o=e.selection.getNode();return Vu(o)?fD(e,n,o):L.none()},gD=(e,n)=>e.selection.isCollapsed()?d$(e,n):cG(e,n),EV=e=>Da(e,n=>ta(n.dom)||fr(n.dom)).exists(n=>ta(n.dom)),hD=e=>Rl(e??"").getOr(0),m$=(e,n)=>{const o=e||Vy(n)?"margin":"padding",r=yl(n,"direction")==="rtl"?"-right":"-left";return o+r},kV=(e,n,o,r,c,u)=>{const f=m$(o,ie.fromDom(u)),b=hD(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+c:"")}else{const y=b+r+c;e.setStyle(u,f,y)}},_V=(e,n)=>gs(n,o=>{const r=m$(gC(e),o),c=Dc(o,r).map(hD).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),f$=e=>{const n=p$(e);return!e.mode.isReadOnly()&&(n.length>1||_V(e,n))},g$=e=>Ed(e)||mi(e),h$=e=>mc(e).exists(g$),p$=e=>It($s(e.selection.getSelectedBlocks()),n=>!g$(n)&&!h$(n)&&EV(n)),Kp=(e,n)=>{var o,r;const{dom:c}=e,u=kF(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=hD(u),y=gC(e);we(p$(e),E=>{kV(c,n,y,b,f,E.dom)})},b$=e=>Kp(e,"indent"),IE=e=>Kp(e,"outdent"),pD=e=>{if(e.selection.isCollapsed()&&f$(e)){const n=e.dom,o=e.selection.getRng(),r=Pe.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&iT(ie.fromDom(c),r,e.schema))return L.some(()=>IE(e))}return L.none()},LE=(e,n,o)=>ir([pD,dS,fg,(r,c)=>PE(r,n,c),Rh,O0,xE,gD,SE,mD],r=>r(e,o)).filter(r=>e.selection.isEditable()),Yp=(e,n)=>{LE(e,n,!1).fold(()=>{e.selection.isEditable()&&(Yl(e),aO(e))},qs)},v$=(e,n)=>{LE(e,n,!0).fold(()=>{e.selection.isEditable()&&M6(e)},qs)},Ld=(e,n)=>{e.addCommand("delete",()=>{Yp(e,n)}),e.addCommand("forwardDelete",()=>{v$(e,n)})},Xp=5,bD=400,y$=e=>e.touches===void 0||e.touches.length!==1?L.none():L.some(e.touches[0]),C$=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>Xp||r>Xp},AV=e=>{const n=Mc(),o=rr(!1),r=If(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},bD);e.on("touchstart",c=>{y$(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),y$(c).each(u=>{n.on(f=>{C$(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},vD=(e,n)=>wn(e,n.nodeName),OV=(e,n)=>st(n)?!0:nn(n)?!vD(e.getBlockElements(),n)&&!eu(n)&&!Gi(e,n)&&!S(n):!1,DV=(e,n,o)=>Xo(lT(ie.fromDom(o),ie.fromDom(n)),r=>vD(e,r.dom)),RV=(e,n)=>{if(st(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||vD(e,n.nextSibling)||S(n.nextSibling)}return!1},yD=e=>e.dom.create(ol(e),Zf(e)),MV=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,E=!1;const M=ol(e);if(!u||!nn(u))return;const N=f.nodeName.toLowerCase();if(!r.isValidChild(N,M.toLowerCase())||DV(c,f,u))return;const $=o.getRng(),{startContainer:G,startOffset:ee,endContainer:Y,endOffset:te}=$,be=Bp(e);let ye=f.firstChild;for(;ye;)if(nn(ye)&&Uu(r,ye),OV(r,ye)){if(RV(c,ye)){y=ye,ye=ye.nextSibling,n.remove(y);continue}b||(b=yD(e),f.insertBefore(b,ye),E=!0),y=ye,ye=ye.nextSibling,b.appendChild(y)}else b=null,ye=ye.nextSibling;E&&be&&($.setStart(G,ee),$.setEnd(Y,te),o.setRng($),e.nodeChanged())},w$=(e,n,o)=>{const r=ie.fromDom(yD(e)),c=lp();ea(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},J0=e=>{e.on("NodeChange",Ke(MV,e))},FE=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,S$=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},x$=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],S$(e,c,Iv(e)));o.content=c}},CD=e=>{const n="contenteditable",o=" "+at.trim(H_(e))+" ",r=" "+at.trim(Iv(e))+" ",c=FE(o),u=FE(r),f=Yu(e);f.length>0&&e.on("BeforeSetContent",b=>{x$(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const E=b[y];c(E)?E.attr(n,"true"):u(E)&&E.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const E=b[y];!c(E)&&!u(E)||(f.length>0&&E.attr("data-mce-content")?(E.name="#text",E.type=3,E.raw=!0,E.value=E.attr("data-mce-content")):E.attr(n,null))}})},NV=e=>Lu(ie.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),T$=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Zo(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},PV=(e,n)=>{const o=NV(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),T$(e,o);return}zy(o)&&(T$(e,o),e.undoManager.add())}},BV=e=>{e.on("keyup compositionstart",Ke(PV,e))},E$=fr,$V=(e,n,o)=>XB(n,e,o,mn,wh,E$),IV=(e,n,o)=>JB(n,e,o,u=>mn(u)||vM(u),u=>wh(u)||yM(u),E$),k$=e=>{const n=e.dom.create(ol(e));return n.innerHTML='<br data-mce-bogus="1">',n},_$=(e,n,o)=>{const r=Kc(e.getBody()),c=Ke(NC,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(Pe.fromRangeStart(o))){const b=ie.fromDom(k$(e));n===1?Vi(ie.fromDom(u),b):oc(ie.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},LV=(e,n)=>{const o=n?yc.Forwards:yc.Backwards,r=e.selection.getRng();return $V(o,e,r).orThunk(()=>(_$(e,o,r),L.none()))},ad=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return IV(o,e,r).orThunk(()=>(_$(e,o,r),L.none()))},FV=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return LM(o)?!n:n},HE=(e,n)=>LV(e,FV(e.selection,n)).exists(o=>(pg(e,o),!0)),wD=(e,n)=>ad(e,n).exists(o=>(pg(e,o),!0)),VE=(e,n)=>rD(e,n,n?wh:mn),zE=(e,n)=>sd(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(pg(e,o),!0)),HV=e=>An(["figcaption"],Ao(e)),VV=(e,n,o)=>{const r=Ke(ns,n);return Da(ie.fromDom(e.container()),c=>o.isBlock(Ao(c)),r).filter(HV)},zV=(e,n,o)=>n?yS(e.dom,o):vS(e.dom,o),UV=(e,n)=>{const o=ie.fromDom(e.getBody()),r=Pe.fromRangeStart(e.selection.getRng());return VV(r,o,e.schema).exists(()=>{if(zV(o,n,r)){const u=w$(e,o,n?ea:zi);return e.selection.setRng(u),!0}else return!1})},SD=(e,n)=>e.selection.isCollapsed()?UV(e,n):!1,WV=(e,n,o)=>{const r=e.selection.getRng(),c=Pe.fromRangeStart(r);return e.getBody().firstChild===n&&vS(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},ZV=(e,n)=>{const o=e.selection.getRng(),r=Pe.fromRangeStart(o);return e.getBody().lastChild===n&&yS(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},ES=(e,n)=>n?L.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>ZV(e,o)).getOr(!1):L.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>L.from(e.dom.getParent(o,"details")).map(r=>WV(e,r,o))).getOr(!1),vg=(e,n)=>ES(e,n),Jp={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},UE=e=>tn(e,n=>({...Jp,...n})),xD=e=>tn(e,n=>({...Jp,...n})),WE=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,A$=(e,n)=>er(UE(e),o=>WE(o,n)?[o]:[]),jV=(e,n)=>er(xD(e),o=>WE(o,n)?[o]:[]),Yn=(e,...n)=>()=>e.apply(null,n),Q0=(e,n)=>bs(A$(e,n),o=>o.action()),O$=(e,n)=>ir(jV(e,n),o=>o.action()),D$=(e,n)=>{const o=n?yc.Forwards:yc.Backwards,r=e.selection.getRng();return XB(e,o,r,vw,yw,Vu).exists(c=>(pg(e,c),!0))},R$=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return JB(e,o,r,vw,yw,Vu).exists(c=>(pg(e,c),!0))},M$=(e,n)=>rD(e,n,n?yw:vw),N$=Cs.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ey={...N$,none:e=>N$.none(e)},P$=(e,n)=>GV(e,n,ut),GV=(e,n,o)=>er(Oa(e),r=>Jc(r,n)?o(r)?[r]:[]:GV(r,n,o)),iG=(e,n,o=Ze)=>{if(o(n))return L.none();if(An(e,Ao(n)))return L.some(n);const r=c=>Jc(c,"table")||o(c);return gn(n,e.join(","),r)},uG=(e,n)=>iG(["td","th"],e,n),qV=e=>P$(e,"th,td"),KV=(e,n)=>pd(e,"table",n),B$=(e,n,o,r,c=ut)=>{const u=r===1;if(!u&&o<=0)return ey.first(e[0]);if(u&&o>=e.length-1)return ey.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?ey.middle(n,b):B$(e,n,f,r,c)}},$$=(e,n)=>KV(e,n).bind(o=>{const r=qV(o);return Qs(r,u=>ns(e,u)).map(u=>({index:u,all:r}))}),YV=(e,n,o)=>$$(e,o).fold(()=>ey.none(e),c=>B$(c.all,e,c.index,1,n)),dG=(e,n,o)=>$$(e,o).fold(()=>ey.none(),c=>B$(c.all,e,c.index,-1,n)),XV=e=>r_(e).filter(n=>n.trim().length!==0||n.indexOf(sc)>-1).isSome(),ou=e=>ne(e)&&js(e,"contenteditable")==="false",I$=["img","br"],kS=e=>XV(e)||An(I$,Ao(e))||ou(e),JV=e=>za(e,kS),L$=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),F$=(e,n)=>er(n,o=>{const r=L$(Gm(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),TD=(e,n,o)=>zo(e,(r,c)=>r.fold(()=>L.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return L.some(b<f?c:u)}),L.none()),H$=(e,n,o,r,c)=>{const u=fc(ie.fromDom(o),"td,th,caption").map(b=>b.dom),f=It(F$(e,u),b=>n(b,c));return TD(f,r,c).map(b=>b.cell)},QV=e=>e.bottom,V$=e=>e.top,ez=(e,n)=>e.y<n,tz=(e,n)=>e.y>n,nz=Ke(H$,QV,ez),ED=Ke(H$,V$,tz),oz=(e,n)=>$t(n.getClientRects()).bind(o=>nz(e,o.left,o.top)).bind(o=>DE(oV(o),n)),sz=(e,n)=>to(n.getClientRects()).bind(o=>ED(e,o.left,o.top)).bind(o=>DE(nV(o),n)),mG=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),rz=e=>e.breakType===hg.Wrap&&e.positions.length===0,z$=e=>e.breakType===hg.Br&&e.positions.length===1,az=(e,n,o)=>{const r=e(n,o);return rz(r)||!Pr(o.getNode())&&z$(r)?!mG(e,n,r):r.breakAt.isNone()},cz=Ke(az,pS),lz=Ke(az,bS),iz=(e,n,o)=>{const r=Pe.fromRangeStart(n);return dh(!e,o).exists(c=>c.isEqual(r))},kD=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return K_()&&iz(n,c,o)?(od(u,e,o,!n,!1).each(f=>{pg(e,f)}),!0):!1},ZE=(e,n,o)=>oz(n,o).orThunk(()=>$t(o.getClientRects()).bind(r=>Q4(UB(e,Pe.before(n)),r.left))).getOr(Pe.before(n)),U$=(e,n,o)=>sz(n,o).orThunk(()=>$t(o.getClientRects()).bind(r=>Q4(WB(e,Pe.after(n)),r.left))).getOr(Pe.after(n)),_D=(e,n)=>{const o=n.getNode(e);return Fu(o)?L.some(o):L.none()},uz=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Vi:oc,c=w$(n,ie.fromDom(o),r);pg(n,c)})},W$=(e,n,o)=>{const r=_D(!!n,o),c=n===!1;r.fold(()=>pg(e,o.toRange()),u=>dh(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>pg(e,o.toRange()),f=>uz(n,e,u)))},AD=(e,n,o,r)=>{const c=e.selection.getRng(),u=Pe.fromRangeStart(c),f=e.getBody();if(!n&&cz(r,u)){const b=ZE(f,o,u);return W$(e,n,b),!0}else if(n&&lz(r,u)){const b=U$(f,o,u);return W$(e,n,b),!0}else return!1},Z$=(e,n,o)=>L.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>L.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),j$=(e,n)=>Z$(e,n,kD),OD=(e,n)=>Z$(e,n,AD),dz=e=>{const n=Pp.exact(e,0,e,0);return i(n)},Fd=(e,n,o)=>o.fold(L.none,L.none,(r,c)=>JV(c).map(u=>dz(u)),r=>(e.execCommand("mceTableInsertRowAfter"),DD(e,n,r))),DD=(e,n,o)=>Fd(e,n,YV(o,os)),G$=(e,n,o)=>Fd(e,n,dG(o,os)),mz=(e,n)=>{const o=["table","li","dl"],r=ie.fromDom(e.getBody()),c=b=>{const y=Ao(b);return ns(b,r)||An(o,y)},u=e.selection.getRng(),f=ie.fromDom(n?u.endContainer:u.startContainer);return uG(f,c).map(b=>(KV(b,c).each(M=>{e.model.table.clearSelectedCells(M.dom)}),e.selection.collapse(!n),(n?DD:G$)(e,c,b).each(M=>{e.selection.setRng(M)}),!0)).getOr(!1)},fG=(e,n,o)=>{const r=Ot.os.isMacOS()||Ot.os.isiOS();Q0([{keyCode:ht.RIGHT,action:Yn(HE,e,!0)},{keyCode:ht.LEFT,action:Yn(HE,e,!1)},{keyCode:ht.UP,action:Yn(wD,e,!1)},{keyCode:ht.DOWN,action:Yn(wD,e,!0)},...r?[{keyCode:ht.UP,action:Yn(zE,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ht.DOWN,action:Yn(zE,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ht.RIGHT,action:Yn(j$,e,!0)},{keyCode:ht.LEFT,action:Yn(j$,e,!1)},{keyCode:ht.UP,action:Yn(OD,e,!1)},{keyCode:ht.DOWN,action:Yn(OD,e,!0)},{keyCode:ht.UP,action:Yn(OD,e,!1)},{keyCode:ht.UP,action:Yn(vg,e,!1)},{keyCode:ht.DOWN,action:Yn(vg,e,!0)},{keyCode:ht.RIGHT,action:Yn(D$,e,!0)},{keyCode:ht.LEFT,action:Yn(D$,e,!1)},{keyCode:ht.UP,action:Yn(R$,e,!1)},{keyCode:ht.DOWN,action:Yn(R$,e,!0)},{keyCode:ht.RIGHT,action:Yn(fV,e,n,!0)},{keyCode:ht.LEFT,action:Yn(fV,e,n,!1)},{keyCode:ht.RIGHT,ctrlKey:!r,altKey:r,action:Yn(hV,e,n)},{keyCode:ht.LEFT,ctrlKey:!r,altKey:r,action:Yn(Pb,e,n)},{keyCode:ht.UP,action:Yn(SD,e,!1)},{keyCode:ht.DOWN,action:Yn(SD,e,!0)}],o).each(c=>{o.preventDefault()})},gG=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||fG(e,n,o)})},yg=(e,n)=>({container:e,offset:n}),jE=hr.DOM,Bb=e=>n=>e===n?-1:0,fz=e=>n=>e.isBlock(n)||An(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",_S=(e,n,o)=>{if(st(e)&&n>=0)return L.some(yg(e,n));{const r=Ff(jE);return L.from(r.backwards(e,n,Bb(e),o)).map(c=>yg(c.container,c.container.data.length))}},q$=(e,n,o)=>{if(st(e)&&n>=e.length)return L.some(yg(e,n));{const r=Ff(jE);return L.from(r.forwards(e,n,Bb(e),o)).map(c=>yg(c.container,0))}},GE=(e,n,o)=>{if(!st(e))return L.none();const r=e.data;if(n>=0&&n<=r.length)return L.some(yg(e,n));{const c=Ff(jE);return L.from(c.backwards(e,n,Bb(e),o)).bind(u=>{const f=u.container.data;return GE(u.container,n+f.length,o)})}},RD=(e,n,o)=>{if(!st(e))return L.none();const r=e.data;if(n<=r.length)return L.some(yg(e,n));{const c=Ff(jE);return L.from(c.forwards(e,n,Bb(e),o)).bind(u=>RD(u.container,n-r.length,o))}},MD=(e,n,o,r,c)=>{const u=Ff(e,fz(e));return L.from(u.backwards(n,o,r,c))},gz=e=>e.collapsed&&st(e.startContainer),hz=e=>Mi(e.toString().replace(/\u00A0/g," ")),K$=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,qE=(e,n)=>e.substring(n.length),pz=(e,n,o,r=!1)=>{let c;const u=o.charAt(0);for(c=n-1;c>=0;c--){const f=e.charAt(c);if(!r&&K$(f))return L.none();if(u===f&&$o(e,o,c,n))break}return L.some(c)},ND=(e,n,o,r=!1)=>{if(!gz(n))return L.none();const c={text:"",offset:0},u=(b,y,E)=>(c.text=E+c.text,c.offset+=y,pz(c.text,c.offset,o,r).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return MD(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return L.none();const E=hz(y);return E.lastIndexOf(o)!==0?L.none():L.some({text:qE(E,o),range:y,trigger:o})})},bz=e=>e.nodeType===jd,PD=e=>e.nodeType===tc,Y$=e=>{if(bz(e))return yg(e,e.data.length);{const n=e.childNodes;return n.length>0?Y$(n[n.length-1]):yg(e,n.length)}},X$=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?X$(o[n],0):o.length>0&&PD(e)&&o.length===n?Y$(o[o.length-1]):yg(e,n)},J$=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return MD(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!K$(u)}).isSome()},vz=e=>n=>{const o=X$(n.startContainer,n.startOffset);return!J$(e,o)},yz=(e,n,o)=>ir(o.triggers,r=>ND(e,n,r)),Cz=(e,n)=>{const o=n(),r=e.selection.getRng();return yz(e.dom,r,o).bind(c=>Q$(e,n,c))},Q$=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",y=It(u.lookupByTrigger(o.trigger),M=>o.text.length>=M.minChars&&M.matches.getOrThunk(()=>vz(e.dom))(o.range,b,o.text));if(y.length===0)return L.none();const E=Promise.all(tn(y,M=>M.fetch(o.text,M.maxResults,r).then($=>({matchText:o.text,items:$,columns:M.columns,onAction:M.onAction,highlightOn:M.highlightOn}))));return L.some({lookupData:E,context:o})};var hf;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(hf||(hf={}));const BD=(e,n,o)=>e.stype===hf.Error?n(e.serror):o(e.svalue),$D=e=>{const n=[],o=[];return we(e,r=>{BD(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},wz=(e,n)=>e.stype===hf.Error?{stype:hf.Error,serror:n(e.serror)}:e,eI=(e,n)=>e.stype===hf.Value?{stype:hf.Value,svalue:n(e.svalue)}:e,Sz=(e,n)=>e.stype===hf.Value?n(e.svalue):e,xz=(e,n)=>e.stype===hf.Error?n(e.serror):e,tI=e=>({stype:hf.Value,svalue:e}),nI=e=>({stype:hf.Error,serror:e}),ks={fromResult:e=>e.fold(nI,tI),toResult:e=>BD(e,Ul.error,Ul.value),svalue:tI,partition:$D,serror:nI,bind:Sz,bindError:xz,map:eI,mapError:wz,fold:BD},ID=e=>Fe(e)&&cs(e).length>100?" removed due to size":JSON.stringify(e,null,2),Tz=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:rt("... (only showing first ten failures)")}]):e;return tn(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},KE=(e,n)=>ks.serror([{path:e,getErrorInfo:n}]),oI=(e,n,o)=>KE(e,()=>'Could not find valid *required* value for "'+n+'" in '+ID(o)),LD=(e,n)=>KE(e,()=>'Choice schema did not contain choice key: "'+n+'"'),sI=(e,n,o)=>KE(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+ID(n)),Qp=(e,n)=>KE(e,rt(n)),FD=(e,n,o,r)=>is(o,r).fold(()=>sI(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),rI=(e,n)=>({extract:(c,u)=>is(u,e).fold(()=>LD(c,e),b=>FD(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+cs(n)}),HD=(e,n)=>n,VD=(e,n)=>En(e)&&En(n)?AS(e,n):n,YE=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)wn(c,u)&&(o[u]=e(o[u],c[u]))}return o},AS=YE(VD),XE=YE(HD),OS=()=>({tag:"required",process:{}}),DS=e=>({tag:"defaultedThunk",process:e}),ty=e=>DS(rt(e)),km=()=>({tag:"option",process:{}}),RS=(e,n)=>e.length>0?ks.svalue(AS(n,XE.apply(void 0,e))):ks.svalue(n),zD=e=>A(ks.serror,lc)(e),aI={consolidateObj:(e,n)=>{const o=ks.partition(e);return o.errors.length>0?zD(o.errors):RS(o.values,n)},consolidateArr:e=>{const n=ks.partition(e);return n.errors.length>0?zD(n.errors):ks.svalue(n.values)}},kz=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),_z=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),ny=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},UD=e=>{const n=(r,c)=>ks.bindError(e(c),u=>Qp(r,u)),o=rt("val");return{extract:n,toString:o}},Az=UD(ks.svalue),Oz=(e,n,o,r)=>is(n,o).fold(()=>oI(e,o,n),r),cI=(e,n,o,r)=>{const c=is(e,n).getOrThunk(()=>o(e));return r(c)},Dz=(e,n,o)=>o(is(e,n)),Rz=(e,n,o,r)=>{const c=is(e,n).map(u=>u===!0?o(e):u);return r(c)},Mz=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>ks.svalue(L.none()),y=>{const E=c.extract(n.concat([r]),y);return ks.map(E,L.some)});switch(e.tag){case"required":return Oz(n,o,r,u);case"defaultedThunk":return cI(o,r,e.process,u);case"option":return Dz(o,r,f);case"defaultedOptionThunk":return Rz(o,r,e.process,f);case"mergeWithThunk":return cI(o,r,rt({}),b=>{const y=AS(e.process(o),b);return u(y)})}},Nz=(e,n,o)=>{const r={},c=[];for(const u of o)ny(u,(f,b,y,E)=>{const M=Mz(y,e,n,f,E);ks.fold(M,N=>{c.push(...N)},N=>{r[b]=N})},(f,b)=>{r[f]=b(n)});return c.length>0?ks.serror(c):ks.svalue(r)},WD=e=>({extract:(r,c)=>Nz(r,c,e),toString:()=>`obj{
`+tn(e,c=>ny(c,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),lI=e=>({extract:(r,c)=>{const u=tn(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return aI.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),Pz=e=>UD(n=>e(n).fold(ks.serror,ks.svalue)),Bz=(e,n,o)=>{const r=n.extract([e],o);return ks.mapError(r,c=>({input:o,errors:c}))},$z=(e,n,o)=>ks.toResult(Bz(e,n,o)),Iz=e=>`Errors: 
`+Tz(e.errors).join(`
`)+`

Input object: `+ID(e.input),ZD=(e,n)=>rI(e,po(n,WD)),iI=rt(Az),MS=(e,n)=>UD(o=>{const r=typeof o;return e(o)?ks.svalue(o):ks.serror(`Expected type: ${n} but got: ${r}`)}),Lz=MS(Bo,"number"),JE=MS(q,"string"),Fz=MS(St,"boolean"),jD=MS(le,"function"),oy=kz,uI=_z,dI=e=>Pz(n=>An(e,n)?Ul.value(n):Ul.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),mI=(e,n)=>oy(e,e,OS(),n),GD=e=>mI(e,JE),qD=e=>mI(e,jD),Hz=(e,n)=>oy(e,e,OS(),lI(n)),KD=(e,n)=>oy(e,e,km(),n),QE=e=>KD(e,JE),Vz=e=>KD(e,jD),fI=(e,n)=>oy(e,e,ty(n),iI()),sy=(e,n,o)=>oy(e,e,ty(n),o),gI=(e,n)=>sy(e,n,Lz),hI=(e,n)=>sy(e,n,JE),pI=(e,n,o)=>sy(e,n,dI(o)),YD=(e,n)=>sy(e,n,Fz),ek=(e,n)=>sy(e,n,jD),zz=(e,n,o)=>sy(e,n,lI(o)),Uz=GD("type"),Wz=qD("fetch"),tk=qD("onAction"),bI=ek("onSetup",()=>Wt),Zz=QE("text"),jz=QE("icon"),Gz=QE("tooltip"),qz=QE("label"),Kz=YD("active",!1),Yz=YD("enabled",!0),vI=YD("primary",!1),Xz=e=>fI("columns",e),nk=e=>hI("type",e),Jz=WD([Uz,GD("trigger"),gI("minChars",1),Xz(1),gI("maxResults",10),Vz("matches"),Wz,tk,zz("highlightOn",[],JE)]),ok=e=>$z("Autocompleter",Jz,e),sk=[Yz,Gz,jz,Zz,bI],XD=[Kz].concat(sk),Qz=[ek("predicate",Ze),pI("scope","node",["node","editor"]),pI("position","selection",["node","selection","line"])],yI=sk.concat([nk("contextformbutton"),vI,tk,uI("original",Ho)]),CI=XD.concat([nk("contextformbutton"),vI,tk,uI("original",Ho)]),e9=sk.concat([nk("contextformbutton")]),t9=XD.concat([nk("contextformtogglebutton")]),n9=ZD("type",{contextformbutton:yI,contextformtogglebutton:CI});WD([nk("contextform"),ek("initValue",rt("")),qz,Hz("commands",n9),KD("launch",ZD("type",{contextformbutton:e9,contextformtogglebutton:t9}))].concat(Qz));const wI=e=>{const n=e.ui.registry.getAll().popups,o=po(n,f=>ok(f).fold(b=>{throw new Error(Iz(b))},Ho)),r=Uc(Ta(o,f=>f.trigger)),c=Ya(o);return{dataset:o,triggers:r,lookupByTrigger:f=>It(c,b=>b.trigger===f)}},o9=(e,n)=>{const o=If(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),n.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},JD=e=>{const n=Mc(),o=rr(!1),r=n.isSet,c=()=>{r()&&(jx(e),o.set(!1),n.clear())},u=N=>{r()||n.set({trigger:N.trigger,matchLength:N.text.length})},f=He(()=>wI(e)),b=N=>n.get().map($=>ND(e.dom,e.selection.getRng(),$.trigger,!0).bind(G=>Q$(e,f,G,N))).getOrThunk(()=>Cz(e,f)),y=N=>{b(N).fold(c,$=>{u($.context),$.lookupData.then(G=>{n.get().map(ee=>{const Y=$.context;ee.trigger===Y.trigger&&(n.set({...ee,matchLength:Y.text.length}),o.get()?(Zx(e,{range:Y.range}),sw(e,{lookupData:G})):(o.set(!0),Zx(e,{range:Y.range}),Wx(e,{lookupData:G})))})})})},E=(N,$)=>{const G=N.compareBoundaryPoints(window.Range.START_TO_START,$),ee=N.compareBoundaryPoints(window.Range.END_TO_END,$);return G>=0&&ee<=0},M=()=>n.get().bind(({trigger:N})=>{const $=e.selection.getRng();return ND(e.dom,$,N,o.get()).filter(({range:G})=>E($,G)).map(({range:G})=>G)});e.addCommand("mceAutocompleterReload",(N,$)=>{const G=Fe($)?$.fetchOptions:{};y(G)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{M().each(N=>{Zx(e,{range:N})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>M().isSome()),o9(e,{cancelIfNecessary:c,load:y})},s9=ko().browser.isSafari(),SI=e=>Ri(ie.fromDom(e)),QD=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},rk=(e,n)=>L.from(e.getParent(n.container(),"details")),xI=(e,n)=>rk(e,n).isSome(),r9=(e,n)=>{const o=L.from(e.getParent(n.startContainer,"details")),r=L.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>L.from(e.select("summary",u)[0]));return L.some({startSummary:c,startDetails:o,endDetails:r})}else return L.none()},a9=(e,n)=>kl(n).exists(o=>o.isEqual(e)),c9=(e,n)=>Ji(n).exists(o=>Pr(o.getNode())&&Pi(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),Vc=(e,n)=>n.startSummary.exists(o=>a9(e,o)),Cg=(e,n)=>n.startSummary.exists(o=>c9(e,o)),l9=(e,n)=>n.startDetails.exists(o=>Pi(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),yG=(e,n,o)=>o.startDetails.exists(r=>El(e,n).forall(c=>!r.contains(c.container()))),TI=(e,n)=>{const o=n.getNode();Gt(o)||e.selection.setCursorLocation(o,n.offset())},EI=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?kl(c):Ji(c)).each(f=>TI(e,f))}else TI(e,n)},i9=(e,n)=>{const o=y=>y.contains(e.startContainer),r=y=>y.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(y=>n.endDetails.forall(E=>y!==E));return(c||u)&&!(c&&u)||f},kI=(e,n,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=Pe.fromRangeStart(c.getRng()),b=r.getParent(f.container(),r.isBlock),y=rk(r,f),E=b&&r.isEmpty(b),M=W(b==null?void 0:b.previousSibling),N=W(b==null?void 0:b.nextSibling);return E&&(n?N:M)&&Qm(!n,u,f).exists(ee=>xI(r,ee)&&!Qa(y,rk(r,ee)))?!0:Qm(n,u,f).fold(Ze,$=>{const G=rk(r,$);if(xI(r,$)&&!Qa(y,G)){if(n||EI(e,$,!1),b&&E){if(n&&M)return!0;if(!n&&N)return!0;EI(e,$,n),e.dom.remove(b)}return!0}else return!1})}else return!1},_I=(e,n,o,r)=>{const u=e.selection.getRng(),f=Pe.fromRangeStart(u),b=e.getBody();return r==="selection"?i9(u,n):o?Cg(f,n)||yG(b,f,n):Vc(f,n)||l9(f,n)},ry=(e,n,o)=>r9(e.dom,e.selection.getRng()).fold(()=>kI(e,n,o),r=>_I(e,r,n,o)||kI(e,n,o)),CG=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=Pe.fromRangeStart(u);return nm(c)?(o==="selection"&&QD(u,c)||Lp(n,f,c)?SI(c):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:y,anchorOffset:E,focusNode:M,focusOffset:N}=b??{};const $=()=>{Ae(y)&&Ae(E)&&Ae(M)&&Ae(N)&&(b==null||b.setBaseAndExtent(y,E,M,N))},G=()=>{y=b==null?void 0:b.anchorNode,E=b==null?void 0:b.anchorOffset,M=b==null?void 0:b.focusNode,N=b==null?void 0:b.focusOffset},ee=(te,be)=>{we(te.childNodes,ye=>{Dp(ye)&&be.appendChild(ye)})},Y=e.dom.create("span",{"data-mce-bogus":"1"});ee(c,Y),c.appendChild(Y),$(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&QD(r.getRng(),Y)?SI(c):(e.execCommand(n?"ForwardDelete":"Delete"),G(),ee(Y,c),$()),e.dom.remove(Y)}),!0):!1},$b=(e,n,o)=>ry(e,n,o)||s9&&CG(e,n,o)?L.some(Wt):L.none(),AI=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Wt,inputType:o},f=qu(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},Du=AI("input"),ak=AI("beforeinput"),OI=ko(),e3=OI.os,DI=e3.isMacOS()||e3.isiOS(),wg=OI.browser.isFirefox(),MI=(e,n,o)=>{const r=o.keyCode===ht.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=b=>c?b?"word":"line":"selection";O$([{keyCode:ht.BACKSPACE,action:Yn(pD,e)},{keyCode:ht.BACKSPACE,action:Yn(dS,e,!1)},{keyCode:ht.DELETE,action:Yn(dS,e,!0)},{keyCode:ht.BACKSPACE,action:Yn(fg,e,!1)},{keyCode:ht.DELETE,action:Yn(fg,e,!0)},{keyCode:ht.BACKSPACE,action:Yn(PE,e,n,!1)},{keyCode:ht.DELETE,action:Yn(PE,e,n,!0)},{keyCode:ht.BACKSPACE,action:Yn(O0,e,!1)},{keyCode:ht.DELETE,action:Yn(O0,e,!0)},{keyCode:ht.BACKSPACE,action:Yn($b,e,!1,u)},{keyCode:ht.DELETE,action:Yn($b,e,!0,u)},...DI?[{keyCode:ht.BACKSPACE,altKey:!0,action:Yn($b,e,!1,f(!0))},{keyCode:ht.DELETE,altKey:!0,action:Yn($b,e,!0,f(!0))},{keyCode:ht.BACKSPACE,metaKey:!0,action:Yn($b,e,!1,f(!1))}]:[{keyCode:ht.BACKSPACE,ctrlKey:!0,action:Yn($b,e,!1,f(!0))},{keyCode:ht.DELETE,ctrlKey:!0,action:Yn($b,e,!0,f(!0))}],{keyCode:ht.BACKSPACE,action:Yn(xE,e,!1)},{keyCode:ht.DELETE,action:Yn(xE,e,!0)},{keyCode:ht.BACKSPACE,action:Yn(gD,e,!1)},{keyCode:ht.DELETE,action:Yn(gD,e,!0)},{keyCode:ht.BACKSPACE,action:Yn(SE,e,!1)},{keyCode:ht.DELETE,action:Yn(SE,e,!0)},{keyCode:ht.BACKSPACE,action:Yn(Rh,e,!1)},{keyCode:ht.DELETE,action:Yn(Rh,e,!0)},{keyCode:ht.BACKSPACE,action:Yn(mD,e,!1)},{keyCode:ht.DELETE,action:Yn(mD,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),ak(e,r).isDefaultPrevented()||(b(),Du(e,r))})},NI=(e,n,o)=>Q0([{keyCode:ht.BACKSPACE,action:Yn(j4,e)},{keyCode:ht.DELETE,action:Yn(j4,e)},...DI?[{keyCode:ht.BACKSPACE,altKey:!0,action:Yn(X0,e)},{keyCode:ht.DELETE,altKey:!0,action:Yn(X0,e)},...o?[{keyCode:wg?224:91,action:Yn(X0,e)}]:[]]:[{keyCode:ht.BACKSPACE,ctrlKey:!0,action:Yn(X0,e)},{keyCode:ht.DELETE,ctrlKey:!0,action:Yn(X0,e)}]],n),u9=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===ht.BACKSPACE,r.isDefaultPrevented()||MI(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||NI(e,r,o),o=!1})},ck=e=>{for(;e;){if(nn(e)||st(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},e1=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=ck(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(sc),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new gc(n,n);let f=n,b;for(;b=u.current();){if(st(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else Pr(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),gw(e,c)},ay=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},lk=e=>L.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),d9=e=>lk(e).fold(rt(""),n=>n.nodeName.toUpperCase()),m9=e=>lk(e).filter(n=>mi(ie.fromDom(n))).isSome(),t3=e=>{e.innerHTML='<br data-mce-bogus="1">'},f9=(e,n,o)=>{const r=e.dom;L.from(o.style).map(r.parseStyle).each(y=>{const M={...Rc(ie.fromDom(n)),...y};r.setStyles(n,M)});const c=L.from(o.class).map(y=>y.split(/\s+/)),u=L.from(n.className).map(y=>It(y.split(/\s+/),E=>E!==""));Vr(c,u,(y,E)=>{const M=It(E,$=>!An(y,$)),N=[...y,...M];r.setAttrib(n,"class",N.join(" "))});const f=["style","class"],b=ls(o,(y,E)=>!An(f,E));r.setAttribs(n,b)},NS=(e,n)=>{if(ol(e).toLowerCase()===n.tagName.toLowerCase()){const r=Zf(e);f9(e,n,r)}},n3=(e,n,o,r,c=!0,u,f)=>{const b=e.dom,y=e.schema,E=ol(e),M=o?o.nodeName.toUpperCase():"";let N=n;const $=y.getTextInlineElements();let G;u||M==="TABLE"||M==="HR"?G=b.create(u||E,f||{}):G=o.cloneNode(!1);let ee=G;if(!c)b.setAttrib(G,"style",null),b.setAttrib(G,"class",null);else do if($[N.nodeName]){if(Qi(N)||eu(N))continue;const Y=N.cloneNode(!1);b.setAttrib(Y,"id",""),G.hasChildNodes()?(Y.appendChild(G.firstChild),G.appendChild(Y)):(ee=Y,G.appendChild(Y))}while((N=N.parentNode)&&N!==r);return NS(e,G),t3(ee),G},g9=(e,n)=>e.dom.getParent(n,h1),h9=(e,n,o)=>{let r=n;for(;r&&r!==e&&W(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return h1(c);r=c}return!1},p9=(e,n,o)=>!n&&o.nodeName.toLowerCase()===ol(e)&&e.dom.isEmpty(o)&&h9(e.getBody(),o,r=>wn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),b9=(e,n,o)=>{var r,c,u;const f=n(ol(e)),b=g9(e,o);b&&(e.dom.insertAfter(f,b),e1(e,f),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},v9=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,PI=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},o3=(e,n)=>{const o=e==null?void 0:e.parentNode;return Ae(o)&&o.nodeName===n},BI=e=>Ae(e)&&/^(OL|UL|LI)$/.test(e.nodeName),s3=e=>Ae(e)&&/^(LI|DT|DD)$/.test(e.nodeName),wG=e=>BI(e)&&BI(e.parentNode),cy=e=>{const n=e.parentNode;return s3(n)?n:e},ik=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!nn(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},$I=e=>zo(Ta(Rc(ie.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),y9=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;wG(o)&&(c="LI");const y=s3(r)?$I(r):void 0;let E=s3(r)&&y?n(c,{style:$I(r)}):n(c);if(ik(o,r,!0)&&ik(o,r,!1))if(o3(o,"LI")){const M=cy(o);u.insertAfter(E,M),PI(o)?u.remove(M):u.remove(o)}else u.replace(E,o);else if(ik(o,r,!0))o3(o,"LI")?(u.insertAfter(E,cy(o)),E.appendChild(u.doc.createTextNode(" ")),E.appendChild(o)):b.insertBefore(E,o),u.remove(r);else if(ik(o,r,!1))u.insertAfter(E,cy(o)),u.remove(r);else{o=cy(o);const M=f.cloneRange();M.setStartAfter(r),M.setEndAfter(o);const N=M.extractContents();if(c==="LI"&&v9(N,"LI")){const $=It(tn(E.children,ie.fromDom),vo(Ps("br")));E=N.firstChild,u.insertAfter(N,o),we($,G=>zi(ie.fromDom(E),G)),y&&E.setAttribute("style",y)}else u.insertAfter(N,o),u.insertAfter(E,o);u.remove(r)}e1(e,E)},II=e=>{we(Ui(ie.fromDom(e),Re),n=>{const o=n.dom;o.nodeValue=Mi(o.data)})},C9=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},LI=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),r3=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,a3=(e,n)=>Ae(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",SG=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;nn(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||LI(e,u))&&e.remove(u)},ll=(e,n,o)=>st(n)?e?o===1&&n.data.charAt(o-1)===ia?0:o:o===n.data.length-1&&n.data.charAt(o)===ia?n.data.length:o:o,w9=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,ll(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,ll(!1,e.endContainer,e.endOffset)),n},S9=e=>{let n=e;do st(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},x9=(e,n,o,r,c)=>{var u,f;const b=e.dom,y=(u=ay(b,r))!==null&&u!==void 0?u:b.getRoot();let E=b.getParent(r,b.isBlock);if(!E||!a3(b,E)){if(E=E||y,!E.hasChildNodes()){const G=b.create(n);return NS(e,G),E.appendChild(G),o.setStart(G,0),o.setEnd(G,0),G}let M=r;for(;M&&M.parentNode!==E;)M=M.parentNode;let N;for(;M&&!b.isBlock(M);)N=M,M=M.previousSibling;const $=(f=N==null?void 0:N.parentElement)===null||f===void 0?void 0:f.nodeName;if(N&&$&&e.schema.isValidChild($,n.toLowerCase())){const G=N.parentNode,ee=b.create(n);for(NS(e,ee),G.insertBefore(ee,N),M=N;M&&!b.isBlock(M);){const Y=M.nextSibling;ee.appendChild(M),M=Y}o.setStart(r,c),o.setEnd(r,c)}}return r},T9=(e,n)=>{n.normalize();const o=n.lastChild;(!o||nn(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},E9=(e,n)=>{const o=Za(e);return cn(n)?!1:q(o)?An(at.explode(o),n.nodeName.toLowerCase()):o},PS={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,y=e.schema,E=y.getNonEmptyElements(),M=e.selection.getRng(),N=ol(e),$=ie.fromDom(M.startContainer),G=Iu($,M.startOffset),ee=G.exists(Ge=>ne(Ge)&&!os(Ge)),Y=M.collapsed&&ee,te=(Ge,Ht)=>n3(e,o,xt,et,D_(e),Ge,Ht),be=Ge=>{const Ht=ll(Ge,o,r);if(st(o)&&(Ge?Ht>0:Ht<o.data.length))return!1;if((o.parentNode===xt||o===xt)&&f&&!Ge||Ge&&nn(o)&&o===xt.firstChild)return!0;if(r3(o,"TABLE")||r3(o,"HR"))return f&&!Ge||!f&&Ge;const bn=new gc(o,xt);st(o)&&(Ge&&Ht===0?bn.prev():!Ge&&Ht===o.data.length&&bn.next());let uo;for(;uo=bn.current();){if(nn(uo)){if(!uo.getAttribute("data-mce-bogus")){const Lo=uo.nodeName.toLowerCase();if(E[Lo]&&Lo!=="br")return!1}}else if(st(uo)&&!mu(uo.data))return!1;Ge?bn.prev():bn.next()}return!0},ye=()=>{let Ge;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&Vt!=="HGROUP"?Ge=te(N):Ge=te(),E9(e,u)&&a3(b,u)&&b.isEmpty(xt,void 0,{includeZwsp:!0})?Ge=b.split(u,xt):b.insertAfter(Ge,xt),e1(e,Ge),Ge};Dt(b,M).each(Ge=>{M.setStart(Ge.startContainer,Ge.startOffset),M.setEnd(Ge.endContainer,Ge.endOffset)}),o=M.startContainer,r=M.startOffset;const ve=!!(n&&n.shiftKey),Te=!!(n&&n.ctrlKey);nn(o)&&o.hasChildNodes()&&!Y&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&st(o)?r=o.data.length:r=0);const et=ay(b,o);if(!et||C9(e,o))return;ve||(o=x9(e,N,M,o,r));let xt=b.getParent(o,b.isBlock)||b.getRoot();u=Ae(xt==null?void 0:xt.parentNode)?b.getParent(xt.parentNode,b.isBlock):null,c=xt?xt.nodeName.toUpperCase():"";const Vt=u?u.nodeName.toUpperCase():"";if(Vt==="LI"&&!Te){const Ge=u;xt=Ge,u=Ge.parentNode,c=Vt}if(nn(u)&&p9(e,ve,xt))return b9(e,te,xt);if(/^(LI|DT|DD)$/.test(c)&&nn(u)&&b.isEmpty(xt)){y9(e,te,u,xt,N);return}if(!Y&&(xt===e.getBody()||!a3(b,xt)))return;const it=xt.parentNode;let Le;if(Y)Le=te(N),G.fold(()=>{ea($,ie.fromDom(Le))},Ge=>{oc(Ge,ie.fromDom(Le))}),e.selection.setCursorLocation(Le,0);else if(Xg(xt))Le=Zo(xt),b.isEmpty(xt)&&t3(xt),NS(e,Le),e1(e,Le);else if(be(!1))Le=ye();else if(be(!0)&&it){Le=it.insertBefore(te(),xt);const Ge=wf(ie.fromDom(M.startContainer))&&M.collapsed;e1(e,r3(xt,"HR")||Ge?Le:xt)}else{const Ge=w9(M).cloneRange();Ge.setEndAfter(xt);const Ht=Ge.extractContents();II(Ht),S9(Ht),Le=Ht.firstChild,b.insertAfter(Ht,xt),SG(b,E,Le),T9(b,xt),b.isEmpty(xt)&&t3(xt),Le.normalize(),b.isEmpty(Le)?(b.remove(Le),ye()):(NS(e,Le),e1(e,Le))}b.setAttrib(Le,"id",""),e.dispatch("NewBlock",{newBlock:Le})},fakeEventName:"insertParagraph"},k9=(e,n,o)=>{const r=new gc(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||st(c)&&c.length>0)return!0;return!1},FI=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),gw(e,r)},c3=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;Dt(r,c).each(G=>{c.setStart(G.startContainer,G.startOffset),c.setEnd(G.endContainer,G.endOffset)});let b=c.startOffset,y=c.startContainer;if(nn(y)&&y.hasChildNodes()){const G=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,G&&st(y)?b=y.data.length:b=0}let E=r.getParent(y,r.isBlock);const M=E&&E.parentNode?r.getParent(E.parentNode,r.isBlock):null,N=M?M.nodeName.toUpperCase():"",$=!!(n&&n.ctrlKey);N==="LI"&&!$&&(E=M),st(y)&&b>=y.data.length&&(k9(e.schema,y,E||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),H1(r,c,u),FI(e,u,f),e.undoManager.add()},l3=(e,n)=>{const o=ie.fromTag("br");oc(ie.fromDom(n),o),e.undoManager.add()},_9=(e,n)=>{kG(e.getBody(),n)||Vi(ie.fromDom(n),ie.fromTag("br"));const o=ie.fromTag("br");Vi(ie.fromDom(n),o),FI(e,o.dom,!1),e.undoManager.add()},EG=e=>Pr(e.getNode()),kG=(e,n)=>EG(Pe.after(n))?!0:El(e,Pe.after(n)).map(o=>Pr(o.getNode())).getOr(!1),A9=e=>e&&e.nodeName==="A"&&"href"in e,O9=e=>e.fold(Ze,A9,A9,Ze),D9=e=>{const n=Ke(pb,e),o=Pe.fromRangeStart(e.selection.getRng());return gg(n,e.getBody(),o).filter(O9)},_G=(e,n)=>{n.fold(Wt,Ke(l3,e),Ke(_9,e),Wt)},HI={insert:(e,n)=>{const o=D9(e);o.isSome()?o.each(Ke(_G,e)):c3(e,n)},fakeEventName:"insertLineBreak"},i3=(e,n)=>lk(e).filter(o=>n.length>0&&Jc(ie.fromDom(o),n)).isSome(),R9=e=>i3(e,jf(e)),M9=e=>i3(e,O_(e)),cd=Cs.generate([{br:[]},{block:[]},{none:[]}]),N9=(e,n)=>M9(e),VI=e=>(n,o)=>m9(n)===e,zI=(e,n)=>(o,r)=>d9(o)===e.toUpperCase()===n,P9=e=>{const n=ay(e.dom,e.selection.getStart());return cn(n)},Ib=e=>zI("pre",e),UI=()=>zI("summary",!0),Lb=e=>(n,o)=>K2(n)===e,B9=(e,n)=>R9(e),uk=(e,n)=>n,$9=e=>{const n=ol(e),o=ay(e.dom,e.selection.getStart());return Ae(o)&&e.schema.isValidChild(o.nodeName,n)},I9=e=>{const n=e.selection.getRng(),o=ie.fromDom(n.startContainer),c=Iu(o,n.startOffset).map(u=>ne(u)&&!os(u));return n.collapsed&&c.getOr(!0)},Hd=(e,n)=>(o,r)=>zo(e,(u,f)=>u&&f(o,r),!0)?L.some(n):L.none(),WI=(e,n)=>K4([Hd([N9],cd.none()),Hd([Ib(!0),P9],cd.none()),Hd([UI()],cd.br()),Hd([Ib(!0),Lb(!1),uk],cd.br()),Hd([Ib(!0),Lb(!1)],cd.block()),Hd([Ib(!0),Lb(!0),uk],cd.block()),Hd([Ib(!0),Lb(!0)],cd.br()),Hd([VI(!0),uk],cd.br()),Hd([VI(!0)],cd.block()),Hd([B9],cd.br()),Hd([uk],cd.br()),Hd([$9],cd.block()),Hd([I9],cd.block())],[e,!!(n&&n.shiftKey)]).getOr(cd.none()),dk=(e,n,o)=>{n.selection.isCollapsed()||HM(n),!(Ae(o)&&ak(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Ae(o)&&Du(n,e.fakeEventName))},u3=(e,n)=>{const o=()=>dk(HI,e,n),r=()=>dk(PS,e,n),c=WI(e,n);switch(Av(e)){case"linebreak":c.fold(o,o,Wt);break;case"block":c.fold(r,r,Wt);break;case"invert":c.fold(r,o,Wt);break;default:c.fold(o,r,Wt);break}},d3=ko(),L9=d3.os.isiOS()&&d3.browser.isSafari(),ZI=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),f4(e.undoManager),e.undoManager.transact(()=>{u3(e,n)}))},m3=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(st(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},F9=e=>{let n=L.none();const o=c=>{n=L.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(Wt,f=>c.selection.moveToBookmark(f)),ZI(c,u),n=L.none()};e.on("keydown",c=>{c.keyCode===ht.ENTER&&(L9&&m3(e.selection.getRng())?o(e):ZI(e,c))}),e.on("keyup",c=>{c.keyCode===ht.ENTER&&n.each(()=>r(e,c))})},H9=(e,n,o)=>{const r=Ot.os.isMacOS()||Ot.os.isiOS();Q0([{keyCode:ht.END,action:Yn(VE,e,!0)},{keyCode:ht.HOME,action:Yn(VE,e,!1)},...r?[]:[{keyCode:ht.HOME,action:Yn(zE,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ht.END,action:Yn(zE,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ht.END,action:Yn(M$,e,!0)},{keyCode:ht.HOME,action:Yn(M$,e,!1)},{keyCode:ht.END,action:Yn(SS,e,!0,n)},{keyCode:ht.HOME,action:Yn(SS,e,!1,n)}],o).each(c=>{o.preventDefault()})},mk=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||H9(e,n,o)})},V9=e=>{e.on("input",n=>{n.isComposing||MM(e)})},f3=ko(),g3=(e,n,o)=>{Q0([{keyCode:ht.PAGE_UP,action:Yn(SS,e,!1,n)},{keyCode:ht.PAGE_DOWN,action:Yn(SS,e,!0,n)}],o)},h3=e=>e.stopImmediatePropagation(),jI=e=>e.keyCode===ht.PAGE_UP||e.keyCode===ht.PAGE_DOWN,z9=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",h3,!0):!o&&e.get()&&n.off("NodeChange",h3),e.set(o)},t1=(e,n)=>{if(f3.os.isMacOS())return;const o=rr(!1);e.on("keydown",r=>{jI(r)&&z9(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||g3(e,n,r),jI(r)&&o.get()&&(z9(o,e,!1),e.nodeChanged())})},U9=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Xo(n.getTargetRanges(),o=>!tM(e.dom,o)))&&n.preventDefault()})},GI=(e,n)=>{const o=n.container(),r=n.offset();return st(o)?(o.insertData(r,e),L.some(Pe(o,r+e.length))):Yv(n).map(c=>{const u=ie.fromText(e);return n.isAtEnd()?Vi(c,u):oc(c,u),Pe(u.dom,e.length)})},qI=Ke(GI,sc),BS=Ke(GI," "),KI=(e,n,o)=>XA(e,n,o)?qI(n):BS(n),YI=e=>n=>n.fold(o=>Pi(e.dom,Pe.before(o)),o=>kl(o),o=>Ji(o),o=>El(e.dom,Pe.after(o))),W9=(e,n,o)=>r=>XA(e,r,o)?qI(n):BS(n),p3=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},Z9=(e,n)=>e.isEditable(e.getParent(n,"summary")),j9=e=>{const n=Pe.fromRangeStart(e.selection.getRng()),o=ie.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ke(pb,e),c=Pe.fromRangeStart(e.selection.getRng());return gg(r,e.getBody(),c).bind(YI(o)).map(u=>()=>W9(o,n,e.schema)(u).each(p3(e)))}else return L.none()},G9=e=>{const n=()=>{const o=ie.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Pe.fromRangeStart(e.selection.getRng());KI(o,r,e.schema).each(p3(e))};return _o(Ot.browser.isFirefox()&&e.selection.isEditable()&&Z9(e.dom,e.selection.getRng().startContainer),n)},b3=(e,n)=>{O$([{keyCode:ht.SPACEBAR,action:Yn(j9,e)},{keyCode:ht.SPACEBAR,action:Yn(G9,e)}],n).each(o=>{n.preventDefault(),ak(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Du(e,"insertText",{data:" "}))})},v3=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||b3(e,n)})},q9=e=>z_(e)?[{keyCode:ht.TAB,action:Yn(mz,e,!0)},{keyCode:ht.TAB,shiftKey:!0,action:Yn(mz,e,!1)}]:[],y3=(e,n)=>{Q0([...q9(e)],n).each(o=>{n.preventDefault()})},XI=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||y3(e,n)})},fk=e=>{if(e.addShortcut("Meta+P","","mcePrint"),JD(e),dg(e))return rr(null);{const n=gV(e);return U9(e),BV(e),gG(e,n),u9(e,n),F9(e),v3(e),V9(e),XI(e),mk(e,n),t1(e,n),n}};class JI{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!v(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{hw(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&KC(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&KC(n)&&(n.selection.getNode().nodeName==="IMG"?Ju.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!Nv(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=es(r.dom.getParents(n,ut,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const C3=np("image"),K9=e=>{const n=e;return L.from(n[C3])},Y9=(e,n)=>{const o=e;o[C3]=n},ly=np("event"),QI=e=>{const n=e;return L.from(n[ly])},gk=e=>n=>{const o=n;o[ly]=e},X9=(e,n)=>gk(n)(e),w3=gk(0),J9=gk(2),Q9=gk(1),eU=(e=>n=>{const o=n;return L.from(o[ly]).exists(r=>r===e)})(0),tU=()=>Object.freeze({length:0,item:e=>null}),hk=np("mode"),nU=e=>{const n=e;return L.from(n[hk])},$S=e=>n=>{const o=n;o[hk]=e},e5=(e,n)=>$S(n)(e),t5=$S(0),S3=$S(2),oU=$S(1),n5=e=>n=>{const o=n;return L.from(o[hk]).exists(r=>r===e)},pf=n5(0),o5=n5(1),sU=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(pf(e))if(q(o)){if(!Gt(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{pf(e)&&n.remove(o)},clear:()=>{pf(e)&&n.clear()}}),s5=["none","copy","link","move"],rU=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],x3=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){An(s5,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){eU(r)&&An(rU,c)&&(o=c)},get items(){return sU(r,e.items)},get files(){return o5(r)?tU():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{pf(r)&&(Y9(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>o5(r)?"":e.getData(c),setData:(c,u)=>{pf(r)&&e.setData(c,u)},clearData:c=>{pf(r)&&e.clearData(c)}};return t5(r),r},aU=e=>{const n=x3(),o=nU(e);return S3(e),w3(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,K9(e).each(r=>n.setDragImage(r.image,r.x,r.y)),we(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),we(e.files,r=>n.items.add(r)),QI(e).each(r=>{X9(n,r)}),o.each(r=>{e5(e,r),e5(n,r)}),n},r5=e=>{const n=e.getData("text/html");return n===""?L.none():L.some(n)},a5=(e,n)=>e.setData("text/html",n),c5="x-tinymce/html",T3=rt(c5),iy="<!-- "+c5+" -->",cU=e=>iy+e,lU=e=>e.replace(iy,""),l5=e=>e.indexOf(iy)!==-1,iU=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),uU=(e,n)=>{let o="<"+e;const r=Ta(n,(c,u)=>u+'="'+Nf.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},dU=(e,n,o)=>{const r=e.split(/\n\n/),c=uU(n,o),u="</"+n+">",f=tn(r,y=>y.split(/\n/).join("<br />")),b=y=>c+y+u;return f.length===1?f[0]:tn(f,b).join("")},i5="%MCEPASTEBIN%",mU=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},i5);Ot.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},fU=(e,n)=>{const o=e.dom;if(E3(e)){let r;const c=n.get();for(;r=E3(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},E3=e=>e.dom.get("mcepastebin"),gU=e=>Ae(e)&&e.id==="mcepastebin",hU=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=It(e.getBody().childNodes,gU);we(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},u5=e=>e===i5,lr=e=>{const n=rr(null);return{create:()=>mU(e,n),remove:()=>fU(e,n),getEl:()=>E3(e),getHtml:()=>hU(e),getLastRng:n.get}},d5=(e,n)=>(at.each(n,o=>{Ct(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),m5=e=>{const n=ys(),o=F0({},n);let r="";const c=n.getVoidElements(),u=at.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const E=y.name,M=y;if(E==="br"){r+=`
`;return}if(E!=="wbr"){if(c[E]&&(r+=" "),u[E]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let N=y.firstChild;if(N)do b(N);while(N=N.next)}f[E]&&M.next&&(r+=`
`,E==="p"&&(r+=`
`))}};return e=d5(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},f5=e=>(e=d5(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":sc],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),k3=e=>{let n=0;return()=>e+n++},g5=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return at.hasOwn(o,n)?"image/"+o[n]:"image/"+n},pU=(e,n)=>{const o=F0({sanitize:Hv(e),sandbox_iframes:Vv(e),sandbox_iframes_exclusions:zv(e),convert_unsafe_embeds:W_(e)},e.schema);o.addNodeFilter("meta",c=>{at.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Ch({validate:!0},e.schema).serialize(r)},h5=(e,n)=>({content:e,cancelled:n}),p5=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=yA(e,r,o);return h5(c.node.innerHTML,c.isDefaultPrevented())},_3=(e,n,o)=>{const r=vA(e,n,o),c=pU(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?p5(e,c,o):h5(c,r.isDefaultPrevented())},bU=(e,n,o)=>_3(e,n,o),A3=(e,n)=>(e.insertContent(n,{merge:ux(e),paste:!0}),!0),O3=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),b5=(e,n)=>O3(n)&&Xo(K1(e),o=>vr(n.toLowerCase(),`.${o.toLowerCase()}`)),vU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),yU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),uy=(e,n,o)=>!e.selection.isCollapsed()&&O3(n)?yU(e,n,o):!1,CU=(e,n,o)=>b5(e,n)?vU(e,n,o):!1,dy=(e,n)=>{at.each([uy,CU,A3],o=>!o(e,n,A3))},IS=(e,n,o)=>{o||!dx(e)?A3(e,n):dy(e,n)},wU=k3("mceclip"),SU=e=>{const n=x3();return a5(n,e),S3(n),n},Fb=(e,n,o,r,c)=>{const u=bU(e,n,o);if(!u.cancelled){const f=u.content,b=()=>IS(e,f,r);c?ak(e,"insertFromPaste",{dataTransfer:SU(f)}).isDefaultPrevented()||(b(),Du(e,"insertFromPaste")):b()}},pk=(e,n,o,r)=>{const c=o||l5(n);Fb(e,lU(n),c,!1,r)},LS=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=Hg(r,$v(e)),u=dU(c,ol(e),Zf(e));Fb(e,u,!1,!0,o)},v5=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Nh=(e,n)=>n in e&&e[n].length>0,D3=e=>Nh(e,"text/html")||Nh(e,"text/plain"),R3=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ae(o)?e.dom.encode(o[1]):void 0},y5=(e,n,o,r)=>{const c=wU(),u=ja(e)&&Ae(o.name),f=u?R3(e,o.name):c,b=u?o.name:void 0,y=n.create(c,o,r,f,b);return n.add(y),y},xU=(e,n)=>{Tb(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),E=y??y5(e,b,f,u);pk(e,`<img src="${E.blobUri()}">`,!1,!0)})},TU=e=>e.type==="paste",C5=e=>Promise.all(tn(e,n=>QN(n).then(o=>({file:n,uri:o})))),EU=e=>{const n=K1(e);return o=>qo(o.type,"image/")&&Xo(n,r=>g5(r)===o.type)},w5=(e,n)=>{const o=n.items?er(Jo(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Jo(n.files):[];return It(o.length>0?o:r,EU(e))},bk=(e,n,o)=>{const r=TU(n)?n.clipboardData:n.dataTransfer;if(q1(e)&&r){const c=w5(e,r);if(c.length>0)return n.preventDefault(),C5(c).then(u=>{o&&e.selection.setRng(o),we(u,f=>{xU(e,f)})}),!0}return!1},S5=e=>{var n,o;return Ot.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},kU=e=>ht.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,M3=(e,n,o,r,c)=>{let u=f5(o);const f=Nh(n,T3())||l5(o),b=!f&&iU(u),y=O3(u);(u5(u)||!u.length||b&&!y)&&(r=!0),(r||y)&&(Nh(n,"text/plain")&&b?u=n["text/plain"]:u=m5(u)),!u5(u)&&(r?LS(e,u,c):pk(e,u,f,c))},_U=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{kU(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||S5(u))return;const f=o.get()==="text"||r;r=!1;const b=v5(u.clipboardData);!D3(b)&&bk(e,u,c())||(Nh(b,"text/html")?(u.preventDefault(),M3(e,b,b["text/html"],f,!0)):Nh(b,"text/plain")&&Nh(b,"text/uri-list")?(u.preventDefault(),M3(e,b,b["text/plain"],f,!0)):(n.create(),Ju.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),M3(e,b,y,f,!1)},0)))})},x5=e=>{const n=c=>qo(c,"webkit-fake-url"),o=c=>qo(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!q1(e)&&r(f))for(const b of c){const y=b.attr("src");q(y)&&!b.attr("data-mce-object")&&y!==Ot.transparentSrc&&(n(y)||!pp(e)&&o(y))&&b.remove()}})},N3=(e,n,o)=>{_U(e,n,o),x5(e)},AU=(e,n)=>{n.get()==="text"?(n.set("html"),v0(e,!1)):(n.set("text"),v0(e,!0)),e.focus()},T5=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{AU(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&pk(e,r.html,r.internal,!1),r.text&&LS(e,r.text,!1)})},E5=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(T3(),n),!0}catch{return!1}else return!1},k5=(e,n,o,r)=>{E5(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},P3=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),c.setRng(y),Ju.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},_5=e=>({html:cU(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),OU=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),A5=e=>!e.selection.isCollapsed()||OU(e),DU=e=>n=>{!n.isDefaultPrevented()&&A5(e)&&e.selection.isEditable()&&k5(n,_5(e),P3(e),()=>{if(Ot.browser.isChromium()||Ot.browser.isFirefox()){const o=e.selection.getRng();Ju.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},RU=e=>n=>{!n.isDefaultPrevented()&&A5(e)&&k5(n,_5(e),P3(e),Wt)},vk=e=>{e.on("cut",DU(e)),e.on("copy",RU(e))},O5=(e,n)=>{var o,r;return ot.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},D5=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},R5=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},MU=e=>Xo(e.files,n=>/^image\//.test(n.type)),M5=(e,n,o,r)=>{const c=e.getParent(o,f=>Gi(n,f));if(!W(e.getParent(o,"summary")))return!0;if(c&&wn(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!W(f.querySelector(c.nodeName.toLowerCase()))}else return!1},N5=e=>{e.on("input",n=>{const o=r=>W(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=It(e.dom.select("details"),o);we(r,c=>{Pr(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(lp().dom),c.prepend(u)})}})},NU=(e,n)=>{TC(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),q1(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&MU(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=O5(e,o);if(cn(r))return;const c=v5(o.dataTransfer),u=Nh(c,T3());if((!D3(c)||D5(c))&&bk(e,o,r))return;const f=c[T3()],b=f||c["text/html"]||c["text/plain"],y=M5(e.dom,e.schema,r.startContainer,c),E=n.get();E&&!y||b&&(o.preventDefault(),Ju.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||E&&y)&&e.execCommand("Delete"),R5(e,r);const M=f5(b);c["text/html"]?pk(e,M,u,!0):LS(e,M,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{q1(e)&&!n.get()&&(o.preventDefault(),R5(e,O5(e,o))),o.type==="dragend"&&n.set(!1)}),N5(e)},PU=e=>{const n=c=>u=>{c(e,u)},o=EC(e);le(o)&&e.on("PastePreProcess",n(o));const r=cx(e);le(r)&&e.on("PastePostProcess",n(r))},BU=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},$U=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,P5=e=>at.trim(e).replace($U,Sd).toLowerCase(),B5=(e,n,o)=>{const r=ix(e);if(o||r==="all"||!L_(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,E,M)=>{const N=u.parseStyle(u.decode(E)),$={};for(let ee=0;ee<c.length;ee++){const Y=N[c[ee]];let te=Y,be=u.getStyle(f,c[ee],!0);/color/.test(c[ee])&&(te=P5(te),be=P5(be)),be!==te&&($[c[ee]]=Y)}const G=u.serializeStyle($,"span");return G?y+' style="'+G+'"'+M:y+M})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},IU=e=>{(Ot.browser.isChromium()||Ot.browser.isSafari())&&BU(e,B5)},LU=e=>{const n=rr(!1),o=rr(mx(e)?"text":"html"),r=lr(e);IU(e),T5(e,o),PU(e),e.on("PreInit",()=>{vk(e),NU(e,n),N3(e,r,o)})},FU=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},HU=e=>{e.parser.addNodeFilter("details",n=>{const o=U_(e);we(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=gx(e);we(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},VU=e=>{FU(e),HU(e)},zU=Pr,$5=st,UU=e=>fr(e.dom),I5=e=>ta(e.dom),B3=e=>n=>ns(ie.fromDom(e),n),WU=(e,n,o)=>Da(ie.fromDom(e),r=>I5(r)||o.isBlock(Ao(r)),B3(n)).getOr(ie.fromDom(n)).dom,L5=(e,n)=>Da(ie.fromDom(e),UU,B3(n)),F5=(e,n,o)=>{const r=new gc(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!zU(f);f=c())_d(f)&&(u=f);return u},ZU=(e,n,o)=>{const c=Pe.fromRangeStart(e).getNode(),u=WU(c,n,o),f=F5(c,u,!1),b=F5(c,u,!0),y=document.createRange();return L5(f,u).fold(()=>{$5(f)?y.setStart(f,0):y.setStartBefore(f)},E=>y.setStartBefore(E.dom)),L5(b,u).fold(()=>{$5(b)?y.setEnd(b,b.data.length):y.setEndAfter(b)},E=>y.setEndAfter(E.dom)),y},jU=e=>{const n=ZU(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(ps(n))},GU=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),jU(e))})};var my;(function(e){e.Before="before",e.After="after"})(my||(my={}));const yk=(e,n)=>Math.abs(e.left-n),H5=(e,n)=>Math.abs(e.right-n),qU=(e,n)=>e>=n.top&&e<=n.bottom,V5=(e,n)=>e.top<n.bottom&&e.bottom>n.top,z5=(e,n)=>{const o=u_(e,n)/Math.min(e.height,n.height);return V5(e,n)&&o>.5},$3=(e,n)=>{const o=It(e,r=>qU(n,r));return Br(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=So(e,f=>z5(f,r));return[c,u]})},KU=(e,n)=>({node:e.node,position:yk(e,n)<H5(e,n)?my.Before:my.After}),U5=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),I3=(e,n,o,r)=>{const c=N=>_d(N.node)?L.some(N):nn(N.node)?I3(Jo(N.node.childNodes),n,o,!1):L.none(),u=(N,$,G)=>c($).filter(ee=>Math.abs(G(N,n,o)-G(ee,n,o))<2&&st(ee.node)),f=(N,$)=>{const G=Xe(N,(ee,Y)=>$(ee,n,o)-$(Y,n,o));return ir(G,c).map(ee=>r&&!st(ee.node)&&G.length>1?u(ee,G[1],$).getOr(ee):ee)},[b,y]=$3(qB(e),o),{pass:E,fail:M}=So(y,N=>N.top<o);return f(b,U5).orThunk(()=>f(M,Zy)).orThunk(()=>f(E,Zy))},W5=(e,n,o,r)=>{const c=(u,f)=>{const b=E=>nn(E)&&E.classList.contains("mce-drag-container"),y=It(u.dom.childNodes,vo(b));return f.fold(()=>I3(y,o,r,!0),E=>{const M=It(y,N=>N!==E.dom);return I3(M,o,r,!0)}).orThunk(()=>(ns(u,e)?L.none():Ti(u)).bind(M=>c(M,L.some(u))))};return c(n,L.none())},YU=(e,n,o)=>{const r=ie.fromDom(e),c=Aa(r),f=ie.fromPoint(c,n,o).filter(b=>ri(r,b)).getOr(r);return W5(r,f,n,o)},L3=(e,n,o)=>YU(e,n,o).filter(r=>Ym(r.node)).map(r=>KU(r,n)),Z5=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},XU=e=>e.inline?Z5(e.getBody()):{left:0,top:0},JU=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},FS=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},QU=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=Z5(e.getContentAreaContainer()),r=FS(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},eW=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),j5=(e,n)=>eW(XU(e),JU(e),QU(e,n)),G5=e=>({target:e,srcElement:e}),tW=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...G5(o)}),nW=(e,n,o)=>{const r=Gs("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Wt,stopImmediatePropagation:Wt,stopPropagation:Wt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...G5(n)}},oW=(e,n)=>{const o=aU(e);return n==="dragstart"?(w3(o),t5(o)):n==="drop"?(J9(o),S3(o)):(Q9(o),oU(o)),o},sW=(e,n,o,r)=>{const c=oW(o,e);return Gt(r)?nW(e,n,c):tW(e,r,n,c)},Hb=32,q5=100,HS=8,Ck=16,K5=fr,rW=jy(K5,ta),DG=(e,n,o)=>K5(o)&&o!==n&&e.isEditable(o.parentElement),aW=(e,n,o)=>cn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),Y5=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},F3=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},Vb=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},X5=Vb("left",-Hb),J5=Vb("left",Hb),H3=Vb("top",-Hb),Q5=Vb("top",Hb),V3=(e,n,o,r,c,u,f,b,y,E,M,N)=>{let $=0,G=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&($=n.pageX+o-c),n.pageY+r>u&&(G=n.pageY+r-u),e.style.width=o-$+"px",e.style.height=r-G+"px";const ee=y.clientHeight,Y=y.clientWidth,te=f+y.getBoundingClientRect().top,be=b+y.getBoundingClientRect().left;M.on(ye=>{ye.intervalId.clear(),ye.dragging&&N&&(f+HS>=ee?ye.intervalId.set(Q5(E)):f-HS<=0?ye.intervalId.set(H3(E)):b+HS>=Y?ye.intervalId.set(J5(E)):b-HS<=0?ye.intervalId.set(X5(E)):te+Ck>=window.innerHeight?ye.intervalId.set(Q5(window)):te-Ck<=0?ye.intervalId.set(H3(window)):be+Ck>=window.innerWidth?ye.intervalId.set(J5(window)):be-Ck<=0&&ye.intervalId.set(X5(window)))})},z3=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},cW=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);z3(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&Ri(ie.fromDom(o))},lW=e=>e.button===0,eL=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),iW=(e,n)=>o=>{if(lW(o)){const r=bs(n.dom.getParents(o.target),rW).getOr(null);if(Ae(r)&&DG(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:x3(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:Y5(n,r,r.offsetWidth,r.offsetHeight),intervalId:ji(q5)})}}},RG=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),L3(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===my.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},VS=(e,n,o,r,c)=>{n==="dragstart"&&a5(r,e.dom.getOuterHTML(o));const u=sW(n,o,r,c);return e.dispatch(n,u)},uW=(e,n)=>{const o=R1((c,u)=>RG(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=VS(n,"dragstart",u.element,u.dataTransfer,c);if(Ae(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,y=eL(u,j5(n,c));F3(u.ghost,n.getBody()),V3(u.ghost,y,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},dW=e=>{const n=e.getSel();if(Ae(n)){const r=n.getRangeAt(0).startContainer;return st(r)?r.parentNode:r}else return null},tL=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(aW(n,dW(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();VS(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{cW(n.dom,r.element),r5(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}VS(n,"dragend",n.getBody(),r.dataTransfer,o)}}),sL(e)},nL=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>VS(n,"dragend",r.element,r.dataTransfer),c=>VS(n,"dragend",r.element,r.dataTransfer,c))}),sL(e)},oL=(e,n)=>o=>nL(e,n,L.some(o)),sL=e=>{e.on(n=>{n.intervalId.clear(),z3(n.ghost)}),e.clear()},mW=e=>{const n=Mc(),o=hr.DOM,r=document,c=iW(n,e),u=uW(n,e),f=tL(n,e),b=oL(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===ht.ESC&&nL(n,e,L.none())})},fW=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(An(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&Qw(e,"Dropped file type is not supported"))}},o=c=>{rT(e,c.target)&&n(c)},r=()=>{const c=hr.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];we(y,E=>{c.bind(f,E,o),u.bind(b,E,n)}),e.on("remove",()=>{we(y,E=>{c.unbind(f,E,o),u.unbind(b,E,n)})})};e.on("init",()=>{Ju.setEditorTimeout(e,r,0)})},gW=e=>{mW(e),rx(e)&&fW(e)},hW=e=>{const n=R1(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=Y0(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},rL=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Vu(o)){const r=Fp(e.getBody(),o),c=fr(r)?r:o;e.selection.getNode()!==c&&K0(e,c).each(u=>e.selection.setRng(u))}})})},wk=fr,aL=(e,n)=>Fp(e.getBody(),n),cL=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=bx(e,r,o.isBlock,()=>Bp(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=Vt=>Ae(Vt)&&o.hasClass(Vt,"mce-offscreen-selection"),E=Vt=>Vt!==r&&(wk(Vt)||Vu(Vt))&&o.isChildOf(Vt,r)&&o.isEditable(Vt.parentNode),M=Vt=>{Vt&&n.setRng(Vt)},N=(Vt,it,Le,Ge=!0)=>e.dispatch("ShowCaret",{target:it,direction:Vt,before:Le}).isDefaultPrevented()?null:(Ge&&n.scrollIntoView(it,Vt===-1),c.show(Le,it)),$=Vt=>{Vt.hasAttribute("data-mce-caret")&&(Zo(Vt),n.scrollIntoView(Vt))},G=()=>{e.on("click",it=>{o.isEditable(it.target)||(it.preventDefault(),e.focus())}),e.on("blur NewBlock",Te),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",it=>{const Le=it.target,Ge=aL(e,Le);wk(Ge)?(it.preventDefault(),K0(e,Ge).each(ve)):E(Le)&&K0(e,Le).each(ve)},!0),e.on("mousedown",it=>{const Le=it.target;if(Le!==r&&Le.nodeName!=="HTML"&&!o.isChildOf(Le,r)||!X7(e,it.clientX,it.clientY))return;Te(),xt();const Ge=aL(e,Le);wk(Ge)?(it.preventDefault(),K0(e,Ge).each(ve)):L3(r,it.clientX,it.clientY).each(Ht=>{it.preventDefault();const bn=N(1,Ht.node,Ht.position===my.Before,!1);M(bn),hu(Ge)?Ge.focus():e.getBody().focus()})}),e.on("keypress",it=>{ht.modifierPressed(it)||wk(n.getNode())&&it.preventDefault()}),e.on("GetSelectionRange",it=>{let Le=it.range;if(b){if(!b.parentNode){b=null;return}Le=Le.cloneRange(),Le.selectNode(b),it.range=Le}}),e.on("SetSelectionRange",it=>{it.range=te(it.range);const Le=ve(it.range,it.forward);Le&&(it.range=Le)});const Vt=it=>nn(it)&&it.id==="mcepastebin";e.on("AfterSetSelectionRange",it=>{const Le=it.range,Ge=Le.startContainer.parentElement;!Y(Le)&&!Vt(Ge)&&xt(),y(Ge)||Te()}),gW(e),hW(e),rL(e)},ee=Vt=>Ni(Vt)||Qg(Vt)||mm(Vt),Y=Vt=>ee(Vt.startContainer)||ee(Vt.endContainer),te=Vt=>{const it=e.schema.getVoidElements(),Le=o.createRng(),Ge=Vt.startContainer,Ht=Vt.startOffset,bn=Vt.endContainer,uo=Vt.endOffset;return wn(it,Ge.nodeName.toLowerCase())?Ht===0?Le.setStartBefore(Ge):Le.setStartAfter(Ge):Le.setStart(Ge,Ht),wn(it,bn.nodeName.toLowerCase())?uo===0?Le.setEndBefore(bn):Le.setEndAfter(bn):Le.setEnd(bn,uo),Le},be=(Vt,it)=>{const Le=ie.fromDom(e.getBody()),Ge=e.getDoc(),Ht=Lu(Le,"#"+u).getOrThunk(()=>{const Lo=ie.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ge);return Co(Lo,"id",u),ea(Le,Lo),Lo}),bn=o.createRng();ki(Ht),ci(Ht,[ie.fromText(sc,Ge),ie.fromDom(it),ie.fromText(sc,Ge)]),bn.setStart(Ht.dom.firstChild,1),bn.setEnd(Ht.dom.lastChild,0),Ra(Ht,{top:o.getPos(Vt,e.getBody()).y+"px"}),S0(Ht);const uo=n.getSel();return uo&&(uo.removeAllRanges(),uo.addRange(bn)),bn},ye=Vt=>{const it=Vt.cloneNode(!0),Le=e.dispatch("ObjectSelected",{target:Vt,targetClone:it});if(Le.isDefaultPrevented())return null;const Ge=be(Vt,Le.targetClone),Ht=ie.fromDom(Vt);return we(fc(ie.fromDom(e.getBody()),`*[${f}]`),bn=>{ns(Ht,bn)||yr(bn,f)}),o.getAttrib(Vt,f)||Vt.setAttribute(f,"1"),b=Vt,xt(),Ge},ve=(Vt,it)=>{if(!Vt)return null;if(Vt.collapsed){if(!Y(Vt)){const bn=it?1:-1,uo=ih(bn,r,Vt),Lo=uo.getNode(!it);if(Ae(Lo)){if(Ym(Lo))return N(bn,Lo,it?!uo.isAtEnd():!1,!1);if(kd(Lo)&&fr(Lo.nextSibling)){const Fs=o.createRng();return Fs.setStart(Lo,0),Fs.setEnd(Lo,0),Fs}}const _s=uo.getNode(it);if(Ae(_s)){if(Ym(_s))return N(bn,_s,it?!1:!uo.isAtEnd(),!1);if(kd(_s)&&fr(_s.previousSibling)){const Fs=o.createRng();return Fs.setStart(_s,1),Fs.setEnd(_s,1),Fs}}}return null}let Le=Vt.startContainer,Ge=Vt.startOffset;const Ht=Vt.endOffset;if(st(Le)&&Ge===0&&wk(Le.parentNode)&&(Le=Le.parentNode,Ge=o.nodeIndex(Le),Le=Le.parentNode),!nn(Le))return null;if(Ht===Ge+1&&Le===Vt.endContainer){const bn=Le.childNodes[Ge];if(E(bn))return ye(bn)}return null},Te=()=>{b&&b.removeAttribute(f),Lu(ie.fromDom(e.getBody()),"#"+u).each(Bs),b=null},et=()=>{c.destroy(),b=null},xt=()=>{c.hide()};return dg(e)||G(),{showCaret:N,showBlockCaretContainer:$,hideFakeCaret:xt,destroy:et}},pW=(e,n)=>{let o=n;for(let r=e.previousSibling;st(r);r=r.previousSibling)o+=r.data.length;return o},Sk=(e,n,o,r,c)=>{if(st(o)&&(r<0||r>o.data.length))return[];const u=c&&st(o)?[pW(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},U3=(e,n,o,r,c,u,f=!1)=>{const b=Sk(e,n,o,r,f),y=Sk(e,n,c,u,f);return{start:b,end:y}},lL=(e,n)=>{const o=n.slice(),r=o.pop();return Bo(r)?zo(o,(u,f)=>u.bind(b=>L.from(b.childNodes[f])),L.some(e)).bind(u=>st(u)&&(r<0||r>u.data.length)?L.none():L.some({node:u,offset:r})):L.none()},iL=(e,n)=>lL(e,n.start).bind(({node:o,offset:r})=>lL(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),uL=(e,n,o,r=!1)=>U3(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Ph=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,st(n.firstChild)&&mu(n.firstChild.data)),Ph(e,r,o)}},zS=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(st(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),st(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Ph(e,c,o),c!==u&&Ph(e,u,o))},US=(e,n)=>L.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),W3=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:zf(r).concat(e.blockPatterns),inlinePatterns:Bc(r).concat(e.inlinePatterns)}},Z3=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},j3=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),xk=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},dL=(e,n,o)=>{const r=iL(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),y=b.parentNode,E=f.parentNode;return{prefix:n,end:E.insertBefore(j3(e,n+"-end"),f),start:y.insertBefore(j3(e,n+"-start"),b)}},mL=(e,n,o)=>{Ph(e,e.get(n.prefix+"-end"),o),Ph(e,e.get(n.prefix+"-start"),o)},WS=e=>e.start.length===0,bW=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},fL=(e,n,o,r)=>{const c=n.start;return MD(e,r.container,r.offset,bW(c),o).bind(f=>{var b,y;const E=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&y!==void 0?y:-1;if(E!==-1&&f.offset>=E+c.length){const N=e.createRng();return N.setStart(f.container,f.offset-c.length),N.setEnd(f.container,f.offset),L.some(N)}else{const N=f.offset-c.length;return GE(f.container,N,o).map($=>{const G=e.createRng();return G.setStart($.container,$.offset),G.setEnd(f.container,f.offset),G}).filter($=>$.toString()===c).orThunk(()=>fL(e,n,o,yg(f.container,0)))}})},vW=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),L.some(f)}return _S(o,r,c).bind(f=>fL(e,n,c,f).bind(y=>{var E;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return L.none();if(f.offset===0&&((E=y.endContainer.textContent)===null||E===void 0?void 0:E.length)===y.endOffset)return L.none()}return L.some(y)}))},yW=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return GE(b,y-o.pattern.end.length,n).bind(E=>{const M=U3(c,u,E.container,E.offset,b,y,r);if(WS(f))return L.some({matches:[{pattern:f,startRng:M,endRng:M}],position:E});{const N=Tk(e,o.remainingPatterns,E.container,E.offset,n,r),$=N.getOr({matches:[],position:E}),G=$.position;return vW(c,f,G.container,G.offset,n,N.isNone()).map(Y=>{const te=uL(c,u,Y,r);return{matches:$.matches.concat([{pattern:f,startRng:te,endRng:M}]),position:yg(Y.startContainer,Y.startOffset)}})}})},Tk=(e,n,o,r,c,u)=>{const f=e.dom;return _S(o,r,f.getRoot()).bind(b=>{const y=Z3(f,c,o,r);for(let E=0;E<n.length;E++){const M=n[E];if(!vr(y,M.end))continue;const N=n.slice();N.splice(E,1);const $=yW(e,c,{pattern:M,remainingPatterns:N,position:b},u);if($.isNone()&&r>0)return Tk(e,n,o,r-1,c,u);if($.isSome())return $}return L.none()})},gL=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?we(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},hL=(e,n,o,r)=>{const c=xk(e.dom,o);zS(e.dom,c,r),gL(e,n,c)},pL=(e,n,o,r,c)=>{const u=e.dom,f=xk(u,r),b=xk(u,o);zS(u,b,c),zS(u,f,c);const y={prefix:o.prefix,start:o.end,end:r.start},E=xk(u,y);gL(e,n,E)},G3=(e,n)=>{const o=np("mce_textpattern"),r=Ks(n,(c,u)=>{const f=dL(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Ks(r,(c,u)=>{const f=r.length-c.length-1,b=WS(u.pattern)?u.endMarker:dL(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},q3=e=>Xe(e,(n,o)=>o.end.length-n.end.length),CW=(e,n)=>{const o=gs(e,r=>Xo(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},Ek=(e,n,o,r,c,u)=>{const f=Tk(e,c.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=Tk(e,q3(c.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return CW(f,b)},bL=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=G3(o,n);we(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;WS(u.pattern)?hL(e,u.pattern,u.endMarker,b):pL(e,u.pattern,u.startMarker,u.endMarker,b),mL(o,u.endMarker,b),mL(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},vL=(e,n,o)=>q$(n,0,n).map(r=>{const c=r.container;return RD(c,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),zS(e,f,b=>b===n)}),c}),K3=e=>(n,o)=>{const r=n.dom,c=o.pattern,u=iL(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,y)=>{const E=y.get(b);return nt(E)&&$t(E).exists(M=>wn(M,"block"))};return US(n,u).each(b=>{c.type==="block-format"?f(c.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,c),n.formatter.apply(c.format)}):c.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,c),n.execCommand(c.cmd,!1,c.value)})}),!0},wW=e=>Xe(e,(n,o)=>o.start.length-n.start.length),yL=e=>(n,o)=>{const r=wW(n),c=o.replace(sc," ");return bs(r,u=>e(u,o,c))},CL=(e,n)=>(o,r,c,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const y=o.dom,E=ol(o);return y.is(r,E)?e(c.blockPatterns,f).map(M=>n&&at.trim(f).length===M.start.length?[]:[{pattern:M,range:U3(y,y.getRoot(),r,0,r,0,u)}]).getOr([]):[]},SW=e=>/^\s[^\s]/.test(e),xW=K3((e,n,o)=>{vL(e,n,o).each(r=>{const c=ie.fromDom(r),u=M1(c);SW(u)&&fv(c,u.slice(1))})}),TW=yL((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),wL=CL(TW,!0),EW=(e,n)=>{const o=e.selection.getRng();return US(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=W3(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=Ek(e,r,o.startContainer,u,f,!0),y=wL(e,r,f,!0);return{inlineMatches:b,blockMatches:y}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},Y3=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();we(n,r=>xW(e,r)),e.selection.moveToBookmark(o)},kW=K3(vL),_W=yL((e,n,o)=>n===e.start||o===e.start),AW=CL(_W,!1),OW=(e,n)=>{const o=e.selection.getRng();return US(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=Z3(e.dom,r,o.startContainer,c),f=W3(n,r,u);return AW(e,r,f,!1,u)}).filter(r=>r.length>0)},DW=(e,n)=>{we(n,o=>kW(e,o))},RW=(e,n)=>EW(e,n).fold(Ze,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{_R(e),bL(e,o),Y3(e,r);const c=e.selection.getRng(),u=_S(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Fm&&(b.deleteData(f.offset-1,1),Ph(e.dom,b.parentNode,y=>y===e.dom.getRoot()))})}),!0)),kk=(e,n)=>{const o=e.selection.getRng();US(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=Z3(e.dom,r,o.startContainer,c),f=W3(n,r,u),b=Ek(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{bL(e,b)})})},MW=(e,n)=>OW(e,n).fold(Ze,o=>(e.undoManager.transact(()=>{DW(e,o)}),!0)),SL=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},NW=(e,n)=>SL(e,n,(o,r)=>o===r.keyCode&&!ht.modifierPressed(r)),PW=(e,n)=>SL(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),BW=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Uf(fx(e),F_(e)),c=()=>qf(e);e.on("keydown",f=>{if(f.keyCode===13&&!ht.modifierPressed(f)&&e.selection.isCollapsed()){const b=rC(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&RW(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()){const b=rC(r(),"space");(b.blockPatterns.length>0||c())&&MW(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=rC(r(),"space");(f.inlinePatterns.length>0||c())&&kk(e,f)}};e.on("keyup",f=>{NW(o,f)&&u()}),e.on("keypress",f=>{PW(n,f)&&Ju.setEditorTimeout(e,u)})},$W=e=>{BW(e)},IW=e=>{const n=at.each,o=ht.BACKSPACE,r=ht.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Ot.browser,y=b.isFirefox(),E=b.isChromium()||b.isSafari(),M=Ot.deviceType.isiPhone()||Ot.deviceType.isiPad(),N=Ot.os.isMacOS()||Ot.os.isiOS(),$=(Ft,Rn)=>{try{e.getDoc().execCommand(Ft,!1,String(Rn))}catch{}},G=Ft=>Ft.isDefaultPrevented(),ee=()=>{const Ft=xo=>{const zt=c.create("body"),ho=xo.cloneContents();return zt.appendChild(ho),u.serializer.serialize(zt,{format:"html"})},Rn=xo=>{const zt=Ft(xo),ho=c.createRng();ho.selectNode(e.getBody());const To=Ft(ho);return zt===To};e.on("keydown",xo=>{const zt=xo.keyCode;if(!G(xo)&&(zt===r||zt===o)&&e.selection.isEditable()){const ho=e.selection.isCollapsed(),To=e.getBody();if(ho&&!qr(e.schema,To)||!ho&&!Rn(e.selection.getRng()))return;xo.preventDefault(),e.setContent(""),To.firstChild&&c.isBlock(To.firstChild)?e.selection.setCursorLocation(To.firstChild,0):e.selection.setCursorLocation(To,0),e.nodeChanged()}})},Y=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},te=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",Ft=>{let Rn;if(Ft.target===e.getDoc().documentElement)if(Rn=u.getRng(),e.getBody().focus(),Ft.type==="mousedown"){if(Ni(Rn.startContainer))return;u.placeCaretAt(Ft.clientX,Ft.clientY)}else u.setRng(Rn)})},be=()=>{e.on("keydown",Ft=>{if(!G(Ft)&&Ft.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Rn=u.getNode(),xo=Rn.previousSibling;if(Rn.nodeName==="HR"){c.remove(Rn),Ft.preventDefault();return}xo&&xo.nodeName&&xo.nodeName.toLowerCase()==="hr"&&(c.remove(xo),Ft.preventDefault())}}})},ye=()=>{Range.prototype.getClientRects||e.on("mousedown",Ft=>{if(!G(Ft)&&Ft.target.nodeName==="HTML"){const Rn=e.getBody();Rn.blur(),Ju.setEditorTimeout(e,()=>{Rn.focus()})}})},ve=()=>{const Ft=wC(e);e.on("click",Rn=>{const xo=Rn.target;/^(IMG|HR)$/.test(xo.nodeName)&&c.isEditable(xo)&&(Rn.preventDefault(),e.selection.select(xo),e.nodeChanged()),xo.nodeName==="A"&&c.hasClass(xo,Ft)&&xo.childNodes.length===0&&c.isEditable(xo.parentNode)&&(Rn.preventDefault(),u.select(xo))})},Te=()=>{const Ft=()=>{const xo=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const zt=u.getStart();zt!==e.getBody()&&(c.setAttrib(zt,"style",null),n(xo,ho=>{zt.setAttributeNode(ho.cloneNode(!0))}))}},Rn=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",xo=>{let zt;return!G(xo)&&(xo.keyCode===8||xo.keyCode===46)&&Rn()?(zt=Ft(),e.getDoc().execCommand("delete",!1),zt(),xo.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",xo=>{if(!G(xo)&&Rn()){const zt=Ft();Ju.setEditorTimeout(e,()=>{zt()})}})},et=()=>{e.on("keydown",Ft=>{if(!G(Ft)&&Ft.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Rn=u.getNode().previousSibling;if(Rn&&Rn.nodeName&&Rn.nodeName.toLowerCase()==="table")return Ft.preventDefault(),!1}return!0})},xt=()=>{e.on("keydown",Ft=>{if(G(Ft)||Ft.keyCode!==ht.BACKSPACE)return;let Rn=u.getRng();const xo=Rn.startContainer,zt=Rn.startOffset,ho=c.getRoot();let To=xo;if(!(!Rn.collapsed||zt!==0)){for(;To.parentNode&&To.parentNode.firstChild===To&&To.parentNode!==ho;)To=To.parentNode;To.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,To),Rn=c.createRng(),Rn.setStart(xo,0),Rn.setEnd(xo,0),u.setRng(Rn))}})},Vt=()=>{const Ft=()=>{$("StyleWithCSS",!1),$("enableInlineTableEditing",!1),Ki(e)||$("enableObjectResizing",!1)};ox(e)||e.on("BeforeExecCommand mousedown",Ft)},it=()=>{const Ft=()=>{n(c.select("a:not([data-mce-block])"),Rn=>{var xo;let zt=Rn.parentNode;const ho=c.getRoot();if((zt==null?void 0:zt.lastChild)===Rn){for(;zt&&!c.isBlock(zt);){if(((xo=zt.parentNode)===null||xo===void 0?void 0:xo.lastChild)!==zt||zt===ho)return;zt=zt.parentNode}c.add(zt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Rn=>{(Rn.type==="setcontent"||Rn.command==="mceInsertLink")&&Ft()})},Le=()=>{e.on("init",()=>{$("DefaultParagraphSeparator",ol(e))})},Ge=Ft=>{const Rn=Ft.getBody(),xo=Ft.selection.getRng();return xo.startContainer===xo.endContainer&&xo.startContainer===Rn&&xo.startOffset===0&&xo.endOffset===Rn.childNodes.length},Ht=()=>{e.on("keyup focusin mouseup",Ft=>{!ht.modifierPressed(Ft)&&!Ge(e)&&u.normalize()},!0)},bn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},uo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Lo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Ft=>{let Rn;Ft.target.nodeName==="HTML"&&(Rn=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Rn),e.selection.normalize(),e.nodeChanged())}))},_s=()=>{N&&e.on("keydown",Ft=>{ht.metaKeyPressed(Ft)&&!Ft.shiftKey&&(Ft.keyCode===37||Ft.keyCode===39)&&(Ft.preventDefault(),e.selection.getSel().modify("move",Ft.keyCode===37?"backward":"forward","lineboundary"))})},Fs=()=>{e.on("click",Ft=>{let Rn=Ft.target;do if(Rn.tagName==="A"){Ft.preventDefault();return}while(Rn=Rn.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},pr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Ft=>{Ft.preventDefault()})})},il=()=>{f.addNodeFilter("br",Ft=>{let Rn=Ft.length;for(;Rn--;)Ft[Rn].attr("class")==="Apple-interchange-newline"&&Ft[Rn].remove()})},Hs=Wt,Rt=()=>{if(!y||e.removed)return!1;const Ft=e.selection.getSel();return!Ft||!Ft.rangeCount||Ft.rangeCount===0},un=()=>{E&&(te(),ve(),pr(),Y(),M&&(uo(),Lo(),Fs())),y&&(ye(),Vt(),bn(),_s())},rs=()=>{xt(),ee(),Ot.windowsPhone||Ht(),E&&(te(),ve(),Le(),pr(),et(),il(),M?(uo(),Lo(),Fs()):Y()),y&&(be(),ye(),Te(),Vt(),it(),bn(),_s(),et())};return dg(e)?un():rs(),{refreshContentEditable:Hs,isHidden:Rt}},LW=e=>e.toLowerCase()==="gpl",FW=e=>e.length>=64&&e.length<=255,xL=e=>LW(e)||FW(e)?"VALID":"INVALID",HW=e=>{const n=Y1(e);!q(kC(e))&&(Gt(n)||xL(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},_k=hr.DOM,VW=(e,n)=>{const o=ie.fromDom(e.getBody()),r=Sf(du(o)),c=ie.fromTag("style");Co(c,"type","text/css"),ea(c,ie.fromText(n)),ea(r,c),e.on("remove",()=>{Bs(c)})},zW=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Ak=e=>ls(e,n=>Gt(n)===!1),fy=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return Ak({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:zW(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:zv(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},TL=e=>{const n=e.options.get;return Ak({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},EL=e=>{const n=e.options.get;return{...fy(e),...TL(e),...Ak({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},UW=e=>{const n=F0(fy(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=c.serializeStyle(c.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),Lv(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Ii("br",1))}}),n},WW=e=>{const n=Bv(e);n&&Ju.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},ZW=e=>{const n=e.dom.getRoot();!e.inline&&(!KC(e)||e.selection.getStart(!0)===n)&&kl(n).each(o=>{const r=o.getNode(),c=Fu(r)?kl(r).getOr(o):o;e.selection.setRng(c.toRange())})},jW=e=>{e.bindPendingEventDelegates(),e.initialized=!0,bA(e),e.focus(!0),ZW(e),e.nodeChanged({initial:!0});const n=$_(e);le(n)&&n.call(e,e),WW(e)},Ok=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,GW=(e,n,o)=>{const{pass:r,fail:c}=So(n,b=>tinymce.Resource.has(nS(b))),f=[...r.map(b=>{const y=tinymce.Resource.get(nS(b));return q(y)?Promise.resolve(Ok(e).loadRawCss(b,y)):Promise.resolve()}),Ok(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},X3=e=>{const n=Ok(e),o=fi(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let y="";at.each(e.contentStyles,E=>{y+=E+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(GW(e,r,o)).then(u).catch(u),b=R_(e);return b&&VW(e,b),f},qW=e=>{const n=e.getDoc(),o=e.getBody();zx(e),ax(e)||(n.body.spellcheck=!1,_k.setAttrib(o,"spellcheck","false")),e.quirks=IW(e),g0(e);const r=OR(e);r!==void 0&&(o.dir=r);const c=xC(e);c&&e.on("BeforeSetContent",u=>{at.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},KW=e=>{dg(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},J3=e=>{e.removed!==!0&&(KW(e),jW(e))},YW=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},kL=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(_k.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=ox(e),e._editableRoot=P_(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&_k.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=N4(e),e.schema=ys(TL(e)),e.dom=hr(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:X2(e),referrerPolicy:Dv(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=UW(e),e.serializer=cl(EL(e),e),e.selection=O7(e.dom,e.getWin(),e.serializer,e),e.annotator=vm(e),e.formatter=ff(e),e.undoManager=q0(e),e._nodeChangeDispatcher=new JI(e),e._selectionOverrides=cL(e),AV(e),VU(e),CD(e),dg(e)||(GU(e),$W(e));const c=fk(e);Ld(e,c),J0(e),SH(e),LU(e);const u=u7(e);qW(e),HW(e),u.fold(()=>{const f=YW(e);X3(e).then(()=>{J3(e),f()})},f=>{e.setProgressState(!0),X3(e).then(()=>{f().then(b=>{e.setProgressState(!1),J3(e),x4(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),J3(e),x4(e)})})})},XW=ut,JW=(e,n,o)=>Ef(e,n,XW,o),Q3=hr.DOM,QW=(e,n,o,r)=>{const c=ie.fromTag("iframe");return r.each(u=>Co(c,"tabindex",u)),Jr(c,o),Jr(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),$u(c,"tox-edit-area__iframe"),c},_L=e=>{let n=__(e)+"<html><head>";$c(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=A_(e),r=Wf(e),c=e.translate(SC(e));return dC(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+dC(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},eR=(e,n)=>{const o=Ot.browser.isFirefox()?SC(e):"Rich Text Area",r=e.translate(o),c=Mr(ie.fromDom(e.getElement()),"tabindex").bind(Rl),u=QW(e.id,r,Ku(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=_L(e),Q3.add(n.iframeContainer,u)},AL=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,kL(e)};if(jl(e)||Ot.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=JW(ie.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},OL=(e,n)=>{eR(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=Q3.isHidden(n.editorContainer)),e.getElement().style.display="none",Q3.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,AL(e)},DL=hr.DOM,eZ=(e,n,o)=>{const r=W0.get(o),c=W0.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=at.trim(o),r&&at.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,le(u.init)&&(u.init(e,c),n.push(o))}catch(u){rH(e,o,u)}}},tZ=e=>e.replace(/^\-/,""),RL=e=>{const n=[];we(G1(e),o=>{eZ(e,n,tZ(o))})},ML=e=>{const n=at.trim(cc(e)),o=e.ui.registry.getAll().icons,r={...bE.get("default").icons,...bE.get(n).icons};mt(r,(c,u)=>{wn(o,u)||e.ui.registry.addIcon(u,c)})},nZ=e=>{const n=Gf(e);if(q(n)){const o=Up.get(n);e.theme=o(e,Up.urls[n])||{},le(e.theme.init)&&e.theme.init(e,Up.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},oZ=e=>{const n=Mv(e),o=U0.get(n);e.model=o(e,U0.urls[n])},tR=e=>{const n=e.theme.renderUI;return n?n():jS(e)},Dk=e=>{const n=e.getElement(),r=Gf(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},ZS=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),Bh=e=>{const n=DL.create("div");return DL.insertAfter(n,e),ZS(n,n)},jS=e=>{const n=e.getElement();return e.inline?ZS(null):Bh(n)},gy=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,q(Gf(e))?tR(e):le(Gf(e))?Dk(e):jS(e)},NL=(e,n)=>{const o={show:L.from(n.show).getOr(Wt),hide:L.from(n.hide).getOr(Wt),isEnabled:L.from(n.isEnabled).getOr(ut),setEnabled:r=>{e.mode.isReadOnly()||L.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},sZ=async e=>{e.dispatch("ScriptsLoaded"),ML(e),nZ(e),oZ(e),RL(e);const n=await gy(e);NL(e,L.from(n.api).getOr({})),e.editorContainer=n.editorContainer,Es(e),e.inline?kL(e):OL(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},zb=hr.DOM,nR=e=>e.charAt(0)==="-",rZ=(e,n)=>{const o=Rv(n),r=nh(n);if(!vc.hasCode(o)&&o!=="en"){const c=Uo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{nH(n,c,o)})}},oR=(e,n)=>{const o=Gf(e);if(q(o)&&!nR(o)&&!wn(Up.urls,o)){const r=hC(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Up.load(o,c).catch(()=>{oH(e,c,o)})}},Rk=(e,n)=>{const o=Mv(e);if(o!=="plugin"&&!wn(U0.urls,o)){const r=J2(e),c=q(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;U0.load(o,c).catch(()=>{sH(e,c,o)})}},n1=e=>L.from(Pa(e)).filter(Uo).map(n=>({url:n,name:L.none()})),o1=(e,n,o)=>L.from(n).filter(r=>Uo(r)&&!bE.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:L.some(r)})),PL=(e,n,o)=>{const r=o1(n,"default",o),c=n1(n).orThunk(()=>o1(n,cc(n),""));we(Ms([r,c]),u=>{e.add(u.url).catch(()=>{gB(n,u.url,u.name.getOrUndefined())})})},aZ=(e,n)=>{const o=(r,c)=>{W0.load(r,c).catch(()=>{tH(e,c,r)})};mt(B_(e),(r,c)=>{o(c,r),e.options.set("plugins",G1(e).concat(c))}),we(G1(e),r=>{r=at.trim(r),r&&!W0.urls[r]&&!nR(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},cZ=e=>{const n=Gf(e);return!q(n)||Ae(Up.get(n))},lZ=e=>{const n=Mv(e);return Ae(U0.get(n))},iZ=(e,n)=>{const o=xd.ScriptLoader,r=()=>{!e.removed&&cZ(e)&&lZ(e)&&sZ(e)};oR(e,n),Rk(e,n),rZ(o,e),PL(o,e,n),aZ(e,n),o.loadQueue().then(r,r)},uZ=(e,n)=>Hl.forElement(e,{contentCssCors:sx(n),referrerPolicy:Dv(n)}),dZ=e=>{const n=e.id;vc.setCode(Rv(e));const o=()=>{zb.unbind(window,"ready",o),e.render()};if(!$f.Event.domLoaded){zb.bind(window,"ready",o);return}if(!e.getElement())return;const r=ie.fromDom(e.getElement()),c=oi(r);e.on("remove",()=>{vt(r.dom.attributes,f=>yr(r,f.name)),Jr(r,c)}),e.ui.styleSheetLoader=uZ(r,e),rh(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||zb.getParent(n,"form");u&&(e.formElement=u,vC(e)&&!li(e.getElement())&&(zb.insertAfter(zb.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},zb.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),yC(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=mB(e),e.notificationManager=dB(e),Yf(e)&&e.on("GetContent",f=>{f.save&&(f.content=zb.encode(f.content))}),tx(e)&&e.on("submit",()=>{e.initialized&&e.save()}),nx(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),iZ(e,e.suffix)},BL=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),rw(e,n))},mZ=e=>e._editableRoot,fZ=(e,n)=>({sections:rt(e),options:rt(n)}),$L=ko().deviceType,gZ=$L.isPhone(),hZ=$L.isTablet(),Ub=e=>{if(cn(e))return[];{const n=nt(e)?e:e.split(/[ ,]/),o=tn(n,_c);return It(o,Uo)}},pZ=(e,n)=>{const o=ha(n,(r,c)=>An(e,c));return fZ(o.t,o.f)},bZ=(e,n,o={})=>{const r=e.sections(),c=is(r,n).getOr({});return at.extend({},o,c)},Mk=(e,n)=>wn(e.sections(),n),vZ=(e,n)=>Mk(e,n)?e.sections()[n]:{},IL=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:is(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),yZ=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?at.extend({},e.external_plugins,r):r},sR=(e,n)=>[...Ub(e),...Ub(n)],CZ=(e,n,o,r)=>e&&Mk(n,"mobile")?r:o,wZ=(e,n,o,r)=>{const c=Ub(o.forced_plugins),u=Ub(r.plugins),f=vZ(n,"mobile"),b=f.plugins?Ub(f.plugins):u,y=CZ(e,n,u,b),E=sR(c,y);return at.extend(r,{forced_plugins:c,plugins:E})},SZ=(e,n)=>e&&Mk(n,"mobile"),xZ=(e,n,o,r,c)=>{var u;const f=e?{mobile:IL((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=pZ(["mobile"],AS(f,c)),y=at.extend(o,r,b.options(),SZ(e,b)?bZ(b,"mobile"):{},{external_plugins:yZ(r,b.options())});return wZ(e,b,r,y)},LL=(e,n)=>xZ(gZ||hZ,gZ,n,e,n),rR=(e,n)=>C7(e,n),FL=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{we("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},aR=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Xo(c,u=>Ae(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},TZ=e=>{FL(e),aR(e)},NG=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ot.os.isMacOS()||Ot.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},PG=(e,n,o,r)=>{const c=ie.fromDom(e.getRoot());return Sw(c,Pe.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),dT(c,Pe.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},EZ=e=>{if(typeof e!="string"){const n=at.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},HL=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?PG(r,o.getRng(),n,e.schema):n},Nk=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=EZ(n);rE(e,{...r,content:HL(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=v7(e,c.content,r);t4(e,u,c),e.addVisual()})}},kZ=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Nk(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Nk(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Nk(e,r)},mceInsertContent:(n,o,r)=>{Nk(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(lx(e))}})},_Z={"font-size":"size","font-family":"face"},BG=Ps("font"),$G=(e,n,o)=>{const r=u=>Dc(u,e).orThunk(()=>BG(u)?is(_Z,e).bind(f=>Mr(u,f)):L.none()),c=u=>ns(ie.fromDom(n),u);return Mw(ie.fromDom(o),u=>r(u),c)},VL=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),zL=(e,n)=>L.from(hr.DOM.getStyle(n,e,!0)),UL=e=>(n,o)=>L.from(o).map(ie.fromDom).filter(xe).bind(r=>$G(e,n,r.dom).or(zL(e,r.dom))).getOr(""),AZ=UL("font-size"),OZ=A(VL,UL("font-family")),IG=e=>kl(e.getBody()).bind(n=>{const o=n.container();return L.from(st(o)?o.parentNode:o)}),LG=e=>L.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?L.none():L.from(e.selection.getStart(!0))}),FG=(e,n)=>LG(e).orThunk(Ke(IG,e)).map(ie.fromDom).filter(xe).bind(n),cR=(e,n)=>FG(e,lo(L.some,n)),DZ=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Kf(e),c=V_(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},RZ=e=>{const n=e.split(/\s*,\s*/);return tn(n,o=>o.indexOf(" ")!==-1&&!(qo(o,'"')||qo(o,"'"))?`'${o}'`:o).join(",")},Wb=(e,n)=>{const o=DZ(e,n);e.formatter.toggle("fontname",{value:RZ(o)}),e.nodeChanged()},lR=e=>cR(e,n=>OZ(e.getBody(),n.dom)).getOr(""),Pk=(e,n)=>{e.formatter.toggle("fontsize",{value:DZ(e,n)}),e.nodeChanged()},WL=e=>cR(e,n=>AZ(e.getBody(),n.dom)).getOr(""),ZL=e=>cR(e,n=>{const o=ie.fromDom(e.getBody()),r=Mw(n,u=>Dc(u,"line-height"),Ke(ns,o)),c=()=>{const u=parseFloat(yl(n,"line-height")),f=parseFloat(yl(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),jL=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},MZ=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{Wb(e,c)},FontSize:(o,r,c)=>{Pk(e,c)},LineHeight:(o,r,c)=>{jL(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(q(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},NZ=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>lR(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>WL(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>ZL(e))},PZ=e=>{MZ(e),NZ(e)},BZ=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},s1=e=>{e.editorCommands.addCommands({Indent:()=>{b$(e)},Outdent:()=>{IE(e)}}),e.editorCommands.addCommands({Outdent:()=>f$(e)},"state")},$Z=e=>{const n=(o,r,c)=>{const u=q(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Fe(u)&&q(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},GL=(e,n,o,r)=>{const c=e.dom,u=b=>c.isBlock(b)&&b.parentElement===o,f=u(n)?n:c.getParent(r,u,o);return L.from(f).map(ie.fromDom)},qL=(e,n)=>{const o=e.dom,r=e.selection.getRng(),c=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=ay(o,u);if(!f||!f.isContentEditable)return;const b=n?oc:Vi,y=ol(e);GL(e,c,f,u).each(E=>{const M=n3(e,u,E.dom,f,!1,y);b(E,ie.fromDom(M)),e.selection.setCursorLocation(M,0),e.dispatch("NewBlock",{newBlock:M}),Du(e,"insertParagraph")})},Bk=e=>qL(e,!0),IZ=e=>qL(e,!1),LZ=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{Bk(e)},InsertNewBlockAfter:()=>{IZ(e)}})},FZ=e=>{e.editorCommands.addCommands({insertParagraph:()=>{dk(PS,e)},mceInsertNewLine:(n,o,r)=>{u3(e,r)},InsertLineBreak:(n,o,r)=>{dk(HI,e)}})},KL=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>nn(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),ta);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},HZ=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{LA(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},VZ=e=>{TZ(e),NG(e),BZ(e),KL(e),kZ(e),$Z(e),s1(e),LZ(e),FZ(e),PZ(e),HZ(e)},zZ=["toggleview"],YL=e=>An(zZ,e.toLowerCase());class $k{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():UR(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const E=this.commands.exec[f];return le(E)?(E(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!YL(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return le(r)?r(o):!1}queryCommandValue(n){if(!YL(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return le(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;mt(n,(c,u)=>{we(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const Zb="data-mce-contenteditable",UZ=(e,n,o)=>{qd(e,n)&&!o?Hi(e,n):o&&$u(e,n)},Ga=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},Ik=(e,n)=>{e.dom.contentEditable=n?"true":"false"},WZ=e=>{we(fc(e,'*[contenteditable="true"]'),n=>{Co(n,Zb,"true"),Ik(n,!1)})},iR=e=>{we(fc(e,`*[${Zb}="true"]`),n=>{yr(n,Zb),Ik(n,!0)})},XL=e=>{L.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},uR=e=>{e.selection.setRng(e.selection.getRng())},ZZ=(e,n)=>{const o=ie.fromDom(e.getBody());UZ(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),XL(e),e.readonly=!0,Ik(o,!1),WZ(o)):(e.readonly=!1,e.hasEditableRoot()&&Ik(o,!0),iR(o),Ga(e,"StyleWithCSS",!1),Ga(e,"enableInlineTableEditing",!1),Ga(e,"enableObjectResizing",!1),pw(e)&&e.focus(),uR(e),e.nodeChanged())},jb=e=>e.readonly,JL=e=>{e.parser.addAttributeFilter("contenteditable",n=>{jb(e)&&we(n,o=>{o.attr(Zb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Zb,n=>{jb(e)&&we(n,o=>{o.attr("contenteditable",o.attr(Zb))})}),e.serializer.addTempAttr(Zb)},jZ=e=>{e.serializer?JL(e):e.on("PreInit",()=>{JL(e)})},GZ=e=>e.type==="click",qZ=["copy"],KZ=e=>An(qZ,e.type),YZ=(e,n)=>pd(n,"a",r=>ns(r,ie.fromDom(e.getBody()))).bind(r=>Mr(r,"href")),hy=(e,n)=>{if(GZ(n)&&!ht.metaKeyPressed(n)){const o=ie.fromDom(n.target);YZ(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Rr(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else KZ(n)&&e.dispatch(n.type,n)},bf=e=>{e.on("ShowCaret",n=>{jb(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{jb(e)&&n.preventDefault()})},XZ=at.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class dR{static isNative(n){return!!XZ[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ze}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=Dy(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),c.isImmediatePropagationStopped())return c;if(y.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=Ze),o){const u={func:o,removed:!1};c&&at.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let E=this.bindings[y];E||(E=[],this.toggleEvent(y,!0)),r?E=[u,...E]:E=[...E,u],this.bindings[y]=E}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return mt(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=So(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,we(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else mt(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const GS=e=>(e._eventDispatcher||(e._eventDispatcher=new dR({scope:e,toggleEvent:(n,o)=>{dR.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),mR={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Dy(e.toLowerCase(),n??{},r);const c=GS(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return GS(this).on(e,n,o)},off(e,n){return GS(this).off(e,n)},once(e,n){return GS(this).once(e,n)},hasEventListeners(e){return GS(this).has(e)}},Lk=hr.DOM;let Gb;const Fk=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Od(e);return o?(e.eventRoot||(e.eventRoot=Lk.select(o)[0]),e.eventRoot):e.getBody()},JZ=e=>!e.hidden&&!jb(e),QL=(e,n,o)=>{JZ(e)?e.dispatch(n,o):jb(e)&&hy(e,o)},QZ=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=Fk(e,n);if(Od(e)){if(Gb||(Gb={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Gb&&(mt(Gb,(c,u)=>{e.dom.unbind(Fk(e,u))}),Gb=null)})),Gb[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||Lk.isChildOf(u,y))&&QL(f[b],n,c)}};Gb[n]=r,Lk.bind(o,n,r)}else{const r=c=>{QL(e,n,c)};Lk.bind(o,n,r),e.delegates[n]=r}},eF={...mR,bindPendingEventDelegates(){const e=this;at.each(e._pendingNativeEvents,n=>{QZ(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?QZ(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(Fk(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(mt(e.delegates,(r,c)=>{e.dom.unbind(Fk(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},ej=e=>q(e)?{value:e.split(/[ ,]/),valid:!0}:ro(e,q)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},tj=e=>{const n=(()=>{switch(e){case"array":return nt;case"boolean":return St;case"function":return le;case"number":return Bo;case"object":return Fe;case"string":return q;case"string[]":return ej;case"object[]":return o=>ro(o,Fe);case"regexp":return o=>Ct(o,RegExp);default:return ut}})();return o=>oF(o,n,`The value must be a ${e}.`)},nj=e=>q(e.processor),tF=(e,n)=>{const o=dr(n.message)?"":`. ${n.message}`;return e+o},nF=e=>e.valid,oF=(e,n,o="")=>{const r=n(e);return St(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},oj=(e,n,o)=>{if(!Gt(n)){const r=oF(n,o);if(nF(r))return r.value;console.error(tF(`Invalid default value passed for the "${e}" option`,r))}},sj=(e,n)=>{const o={},r={},c=(N,$,G)=>{const ee=oF($,G);return nF(ee)?(r[N]=ee.value,!0):(console.warn(tF(`Invalid value passed for the ${N} option`,ee)),!1)},u=(N,$)=>{const G=nj($)?tj($.processor):$.processor,ee=oj(N,$.default,G);o[N]={...$,default:ee,processor:G},is(r,N).orThunk(()=>is(n,N)).each(te=>c(N,te,G))},f=N=>wn(o,N);return{register:u,isRegistered:f,get:N=>is(r,N).orThunk(()=>is(o,N).map($=>$.default)).getOrUndefined(),set:(N,$)=>{if(f(N)){const G=o[N];return G.immutable?(console.error(`"${N}" is an immutable option and cannot be updated`),!1):c(N,$,G.processor)}else return console.warn(`"${N}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:N=>{const $=f(N);return $&&delete r[N],$},isSet:N=>wn(r,N)}},rj=["design","readonly"],sF=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&ZZ(e,u.editorReadOnly),n.set(r),gA(e,r)},aj=(e,n,o,r)=>{if(r!==o.get()){if(!wn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?sF(e,o,n,r):e.on("init",()=>sF(e,o,n,r))}},cj=(e,n,o)=>{if(An(rj,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},lj=e=>{const n=rr("design"),o=rr({design:{activate:Wt,deactivate:Wt,editorReadOnly:!1},readonly:{activate:Wt,deactivate:Wt,editorReadOnly:!0}});return jZ(e),bf(e),{isReadOnly:()=>jb(e),set:r=>aj(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(cj(o.get(),r,c))}}},fR=at.each,gR=at.explode,ij={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},rF=at.makeMap("alt,ctrl,shift,meta,access"),uj=e=>e in rF,dj=e=>{const n={},o=Ot.os.isMacOS()||Ot.os.isiOS();fR(gR(e.toLowerCase(),"+"),u=>{uj(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=ij[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in rF)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class aF{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(fR(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return fR(gR(at.trim(n)),b=>{const y=u.createShortcut(b,o,f,c);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:at.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=at.map(gR(n,">"),dj);return u[u.length-1]=at.extend(u[u.length-1],{func:r,scope:c||this.editor}),at.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const mj=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},y=(M,N)=>($,G)=>{M[$.toLowerCase()]={...G,type:N}},E=(M,N)=>r[M.toLowerCase()]=N;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:E,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},fj=()=>{const e=mj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},r1=hr.DOM,cF=at.extend,gj=at.each;class Hk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,cF(this,eF);const c=this;this.id=n,this.hidden=!1;const u=LL(r.defaultOptions,o);this.options=sj(c,u),hp(c);const f=this.options.get;f("deprecation_warnings")&&U7(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const E=Dv(c);E&&(xd.ScriptLoader._setReferrerPolicy(E),hr.DOM.styleSheetLoader._setReferrerPolicy(E));const M=sx(c);Ae(M)&&hr.DOM.styleSheetLoader._setContentCssCors(M),Vl.languageLoad=f("language_load"),Vl.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Fc($c(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=rh(c),this.hasVisual=Zl(c),this.shortcuts=new aF(this),this.editorCommands=new $k(this),VZ(this);const N=f("cache_suffix");N&&(Ot.cacheSuffix=N.replace(/^[\?\&]+/,"")),this.ui={registry:fj(),styleSheetLoader:void 0,show:Wt,hide:Wt,setEnabled:Wt,isEnabled:ut},this.mode=lj(c),r.dispatch("SetupEditor",{editor:this});const $=Pv(c);le($)&&$.call(c,c)}render(){dZ(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Bp(this)}translate(n){return vc.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(Ae(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:ut,default:o})),!c.isSet(n)&&!Gt(o)?o:c.get(n)}hasPlugin(n,o){return An(G1(this),n)?o?W0.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(r1.show(n.getContainer()),r1.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(r1.hide(n.getContainer()),r1.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=li(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,li(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=r1.getParent(o.id,"form");b&&gj(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return z0(this,n,o)}getContent(n){return rB(this,n)}insertContent(n,o){o&&(n=cF({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?z0(this,this.startContent,{format:"raw"}):z0(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||r1.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=r1.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=I_(c);if(le(f))return f.call(c,n,r,!0,o);if(!u("convert_urls")||r==="link"||Fe(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new Fc(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){rR(this,n)}setEditableRoot(n){BL(this,n)}hasEditableRoot(){return mZ(this)}remove(){j7(this)}destroy(n){G7(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const py=hr.DOM,Vk=at.each;let lF=!1,zk,su=[];const qS=e=>{const n=e.type;Vk(a1.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},iF=e=>{if(e!==lF){const n=hr.DOM;e?(n.bind(window,"resize",qS),n.bind(window,"scroll",qS)):(n.unbind(window,"resize",qS),n.unbind(window,"scroll",qS)),lF=e}},uF=e=>{const n=su;return su=It(su,o=>e!==o),a1.activeEditor===e&&(a1.activeEditor=su.length>0?su[0]:null),a1.focusedEditor===e&&(a1.focusedEditor=null),n.length!==su.length},hj=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(uF(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},pj=document.compatMode!=="CSS1Compat",a1={...mR,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"1.1",releaseDate:"2024-05-22",i18n:vc,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Fc.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Fc(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Fc(e.baseURL),e.suffix=o,YR(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&mt(r,(c,u)=>{Vl.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=at.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(M,N)=>M.inline&&N.tagName.toLowerCase()in r,u=M=>{let N=M.id;return N||(N=is(M,"name").filter($=>!py.get($)).getOrThunk(py.uniqueId),M.setAttribute("id",N)),N},f=M=>{const N=e[M];if(N)return N.apply(n,[])},b=M=>Ot.browser.isIE()||Ot.browser.isEdge()?(R4("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):pj?(R4("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):q(M.selector)?py.select(M.selector):Ae(M.target)?[M.target]:[];let y=M=>{o=M};const E=()=>{let M=0;const N=[];let $;const G=(ee,Y,te)=>{const be=new Hk(ee,Y,n);N.push(be),be.on("init",()=>{++M===$.length&&y(N)}),be.targetElm=be.targetElm||te,be.render()};py.unbind(window,"ready",E),f("onpageload"),$=Hn(b(e)),at.each($,ee=>{hj(n.get(ee.id))}),$=at.grep($,ee=>!n.get(ee.id)),$.length===0?y([]):Vk($,ee=>{c(e,ee)?R4("Could not initialize inline editor on invalid inline target element",ee):G(u(ee),e,ee)})};return py.bind(window,"ready",E),new Promise(M=>{o?M(o):y=N=>{M(N)}})},get(e){return arguments.length===0?su.slice(0):q(e)?bs(su,n=>n.id===e).getOr(null):Bo(e)&&su[e]?su[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&su.push(e),iF(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),zk||(zk=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",zk))),e},createEditor(e,n){return this.add(new Hk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=su.length-1;r>=0;r--)n.remove(su[r]);return}if(q(e)){Vk(py.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,W(n.get(o.id))?null:(uF(o)&&n.dispatch("RemoveEditor",{editor:o}),su.length===0&&window.removeEventListener("beforeunload",zk),o.remove(),iF(su.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Fe(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new Hk(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Vk(su,e=>{e.save()})},addI18n:(e,n)=>{vc.add(e,n)},translate:e=>vc.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Fc(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Fc(this.baseURL)}};a1.setup();const bj=(()=>{const e=Mc(),n=u=>({items:u,types:cs(u),getType:f=>is(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),dF=Math.min,qb=Math.max,hR=Math.round,pR=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,E=(o||"").split("");return E[0]==="b"&&(c+=y),E[1]==="r"&&(r+=b),E[0]==="c"&&(c+=hR(y/2)),E[1]==="c"&&(r+=hR(b/2)),E[3]==="b"&&(c-=f),E[4]==="r"&&(r-=u),E[3]==="c"&&(c-=hR(f/2)),E[4]==="c"&&(r-=hR(u/2)),by(r,c,u,f)},vj=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=pR(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},mF=(e,n,o)=>by(e.x-n,e.y-o,e.w+n*2,e.h+o*2),yj=(e,n)=>{const o=qb(e.x,n.x),r=qb(e.y,n.y),c=dF(e.x+e.w,n.x+n.w),u=dF(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:by(o,r,c-o,u-r)},Cj=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,E=qb(0,n.x-r),M=qb(0,n.y-c),N=qb(0,u-b),$=qb(0,f-y);return r+=E,c+=M,o&&(u+=E,f+=M,r-=N,c-=$),u-=N,f-=$,by(r,c,u-r,f-c)},by=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),wj={inflate:mF,relativePosition:pR,findBestRelativePosition:vj,intersect:yj,clamp:Cj,create:by,fromClientRect:e=>by(e.left,e.top,e.width,e.height)},Sj=(e,n,o=1e3)=>{let r=!1,c=null;const u=E=>(...M)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),E.apply(null,M))},f=u(e),b=u(n);return{start:(...E)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,E),o))},resolve:f,reject:b}},bR=(()=>{const e={},n={},o={};return{load:(y,E)=>{const M=`Script at URL "${E}" failed to load`,N=`Script at URL "${E}" did not call \`tinymce.Resource.add('${y}', data)\` within 1 second`;if(e[y]!==void 0)return e[y];{const $=new Promise((G,ee)=>{const Y=Sj(G,ee);n[y]=Y.resolve,xd.ScriptLoader.loadScript(E).then(()=>Y.start(N),()=>Y.reject(M))});return e[y]=$,$}},add:(y,E)=>{n[y]!==void 0&&(n[y](E),delete n[y]),e[y]=Promise.resolve(E),o[y]=E},has:y=>y in o,get:y=>o[y],unload:y=>{delete e[y],delete o[y]}}})(),xj=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let vy;try{const e="__storage_test__";vy=window.localStorage,vy.setItem(e,e),vy.removeItem(e)}catch{vy=xj()}var Tj=vy;const Ej={geom:{Rect:wj},util:{Delay:Ju,Tools:at,VK:ht,URI:Fc,EventDispatcher:dR,Observable:mR,I18n:vc,LocalStorage:Tj,ImageUploader:mg},dom:{EventUtils:$f,TreeWalker:gc,TextSeeker:Ff,DOMUtils:hr,ScriptLoader:xd,RangeUtils:ot,Serializer:cl,StyleSheetLoader:Xs,ControlSelection:ib,BookmarkManager:og,Selection:O7,Event:$f.Event},html:{Styles:Oy,Entities:Nf,Node:Ii,Schema:ys,DomParser:F0,Writer:fM,Serializer:Ch},Env:Ot,AddOnManager:Vl,Annotator:vm,Formatter:ff,UndoManager:q0,EditorCommands:$k,WindowManager:mB,NotificationManager:dB,EditorObservable:eF,Shortcuts:aF,Editor:Hk,FocusManager:WR,EditorManager:a1,DOM:hr.DOM,ScriptLoader:xd.ScriptLoader,PluginManager:W0,ThemeManager:Up,ModelManager:U0,IconManager:bE,Resource:bR,FakeClipboard:bj,trim:at.trim,isArray:at.isArray,is:at.is,toArray:at.toArray,makeMap:at.makeMap,each:at.each,map:at.map,grep:at.grep,inArray:at.inArray,extend:at.extend,walk:at.walk,resolve:at.resolve,explode:at.explode,_addCacheSuffix:at._addCacheSuffix},gF=at.extend(a1,Ej),kj=e=>{try{lt.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(gF),kj(gF)})()})(rK);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>'}});(function(){var lt=tinymce.util.Tools.resolve("tinymce.ModelManager");const $n=(i,m,p)=>{var v;return p(i,m.prototype)?!0:((v=i.constructor)===null||v===void 0?void 0:v.name)===m.name},an=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&$n(i,String,(p,v)=>v.isPrototypeOf(p))?"string":m},Xt=i=>m=>an(m)===i,yt=i=>m=>typeof m===i,Ut=i=>m=>i===m,Zn=Xt("string"),Mt=Xt("object"),qt=Xt("array"),eo=Ut(null),Cn=yt("boolean"),Qt=Ut(void 0),Sn=i=>i==null,Nt=i=>!Sn(i),_t=yt("function"),qe=yt("number"),tt=()=>{},jn=(i,m)=>(...p)=>i(m.apply(null,p)),Ct=(i,m)=>p=>i(m(p)),q=i=>()=>i,Fe=i=>i,En=(i,m)=>i===m;function nt(i,...m){return(...p)=>{const v=m.concat(p);return i.apply(null,v)}}const W=i=>m=>!i(m),St=i=>()=>{throw new Error(i)},Gt=i=>i(),cn=q(!1),Ae=q(!0);class le{constructor(m,p){this.tag=m,this.value=p}static some(m){return new le(!0,m)}static none(){return le.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?le.some(m(this.value)):le.none()}bind(m){return this.tag?m(this.value):le.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:le.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Nt(m)?le.some(m):le.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}le.singletonNone=new le(!1);const Bo=Array.prototype.slice,ro=Array.prototype.indexOf,Wt=Array.prototype.push,A=(i,m)=>ro.call(i,m),lo=(i,m)=>A(i,m)>-1,rt=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];if(m(T,p))return!0}return!1},Ho=(i,m)=>{const p=[];for(let v=0;v<i;v++)p.push(m(v));return p},ln=(i,m)=>{const p=i.length,v=new Array(p);for(let T=0;T<p;T++){const O=i[T];v[T]=m(O,T)}return v},Ke=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];m(T,p)}},vo=(i,m)=>{for(let p=i.length-1;p>=0;p--){const v=i[p];m(v,p)}},Gs=(i,m)=>{const p=[],v=[];for(let T=0,O=i.length;T<O;T++){const I=i[T];(m(I,T)?p:v).push(I)}return{pass:p,fail:v}},mo=(i,m)=>{const p=[];for(let v=0,T=i.length;v<T;v++){const O=i[v];m(O,v)&&p.push(O)}return p},qs=(i,m,p)=>(vo(i,(v,T)=>{p=m(p,v,T)}),p),Ze=(i,m,p)=>(Ke(i,(v,T)=>{p=m(p,v,T)}),p),ut=(i,m,p)=>{for(let v=0,T=i.length;v<T;v++){const O=i[v];if(m(O,v))return le.some(O);if(p(O,v))break}return le.none()},L=(i,m)=>ut(i,m,cn),Lr=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const T=i[p];if(m(T,p))return le.some(p)}return le.none()},io=i=>{const m=[];for(let p=0,v=i.length;p<v;++p){if(!qt(i[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+i);Wt.apply(m,i[p])}return m},as=(i,m)=>io(ln(i,m)),Vo=(i,m)=>{for(let p=0,v=i.length;p<v;++p){const T=i[p];if(m(T,p)!==!0)return!1}return!0},kc=i=>{const m=Bo.call(i,0);return m.reverse(),m},An=(i,m)=>{const p={};for(let v=0,T=i.length;v<T;v++){const O=i[v];p[String(O)]=m(O,v)}return p},Xo=(i,m)=>{const p=Bo.call(i,0);return p.sort(m),p},tn=(i,m)=>m>=0&&m<i.length?le.some(i[m]):le.none(),we=i=>tn(i,0),vt=i=>tn(i,i.length-1),So=(i,m)=>{for(let p=0;p<i.length;p++){const v=m(i[p],p);if(v.isSome())return v}return le.none()},It=Object.keys,Ks=Object.hasOwnProperty,zo=(i,m)=>{const p=It(i);for(let v=0,T=p.length;v<T;v++){const O=p[v],I=i[O];m(I,O)}},jr=(i,m)=>bs(i,(p,v)=>({k:v,v:m(p,v)})),bs=(i,m)=>{const p={};return zo(i,(v,T)=>{const O=m(v,T);p[O.k]=O.v}),p},Qs=i=>(m,p)=>{i[p]=m},lc=(i,m,p,v)=>{zo(i,(T,O)=>{(m(T,O)?p:v)(T,O)})},er=(i,m)=>{const p={};return lc(i,m,Qs(p),tt),p},gs=(i,m)=>{const p=[];return zo(i,(v,T)=>{p.push(m(v,T))}),p},es=i=>gs(i,Fe),ma=(i,m)=>Ne(i,m)?le.from(i[m]):le.none(),Ne=(i,m)=>Ks.call(i,m),Xe=(i,m)=>Ne(i,m)&&i[m]!==void 0&&i[m]!==null,rn=i=>{for(const m in i)if(Ks.call(i,m))return!1;return!0},$t=typeof window<"u"?window:Function("return this;")(),to=(i,m)=>{let p=m??$t;for(let v=0;v<i.length&&p!==void 0&&p!==null;++v)p=p[i[v]];return p},Jo=(i,m)=>{const p=i.split(".");return to(p,m)},ir=(i,m)=>Jo(i,m),Hn=(i,m)=>{const p=ir(i,m);if(p==null)throw new Error(i+" not available on this browser");return p},cs=Object.getPrototypeOf,ur=i=>Hn("HTMLElement",i),mt=i=>{const m=Jo("ownerDocument.defaultView",i);return Mt(i)&&(ur(m).prototype.isPrototypeOf(i)||/^HTML\w*Element$/.test(cs(i).constructor.name))},po=8,Dr=9,fa=11,ga=1,ha=3,ls=i=>i.dom.nodeName.toLowerCase(),Ta=i=>i.dom.nodeType,Ya=i=>m=>Ta(m)===i,is=i=>Ta(i)===po||ls(i)==="#comment",wn=i=>wr(i)&&mt(i.dom),wr=Ya(ga),Xa=Ya(ha),Uc=Ya(Dr),fl=Ya(fa),tr=i=>m=>wr(m)&&ls(m)===i,nr=(i,m,p)=>{if(Zn(p)||Cn(p)||qe(p))i.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",i),new Error("Attribute value was not simple")},zs=(i,m,p)=>{nr(i.dom,m,p)},La=(i,m)=>{const p=i.dom;zo(m,(v,T)=>{nr(p,T,v)})},gl=(i,m)=>{zo(m,(p,v)=>{p.fold(()=>{se(i,v)},T=>{nr(i.dom,v,T)})})},Fr=(i,m)=>{const p=i.dom.getAttribute(m);return p===null?void 0:p},ce=(i,m)=>le.from(Fr(i,m)),se=(i,m)=>{i.dom.removeAttribute(m)},Oe=i=>Ze(i.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),He=(i,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=i,!v.hasChildNodes()||v.childNodes.length>1){const T="HTML does not have a single root node";throw console.error(T,i),new Error(T)}return no(v.childNodes[0])},fn=(i,m)=>{const v=(m||document).createElement(i);return no(v)},Tn=(i,m)=>{const v=(m||document).createTextNode(i);return no(v)},no=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},he={fromHtml:He,fromTag:fn,fromText:Tn,fromDom:no,fromPoint:(i,m,p)=>le.from(i.dom.elementFromPoint(m,p)).map(no)},Un=(i,m)=>{const p=i.dom;if(p.nodeType!==ga)return!1;{const v=p;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Us=i=>i.nodeType!==ga&&i.nodeType!==Dr&&i.nodeType!==fa||i.childElementCount===0,br=(i,m)=>{const p=m===void 0?document:m.dom;return Us(p)?[]:ln(p.querySelectorAll(i),he.fromDom)},Kr=(i,m)=>{const p=m===void 0?document:m.dom;return Us(p)?le.none():le.from(p.querySelector(i)).map(he.fromDom)},ts=(i,m)=>i.dom===m.dom,Dl=(i,m)=>{const p=i.dom,v=m.dom;return p===v?!1:p.contains(v)},ic=Un,ra=i=>he.fromDom(i.dom.ownerDocument),Rr=i=>Uc(i)?i:ra(i),$o=i=>he.fromDom(Rr(i).dom.documentElement),qo=i=>he.fromDom(Rr(i).dom.defaultView),vr=i=>le.from(i.dom.parentNode).map(he.fromDom),aa=i=>le.from(i.dom.parentElement).map(he.fromDom),_c=(i,m)=>{const p=_t(m)?m:cn;let v=i.dom;const T=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const O=v.parentNode,I=he.fromDom(O);if(T.push(I),p(I)===!0)break;v=O}return T},ei=i=>le.from(i.dom.previousSibling).map(he.fromDom),Xc=i=>le.from(i.dom.nextSibling).map(he.fromDom),Uo=i=>ln(i.dom.childNodes,he.fromDom),dr=(i,m)=>{const p=i.dom.childNodes;return le.from(p[m]).map(he.fromDom)},Ea=i=>dr(i,0),Rl=(i,m)=>{vr(i).each(v=>{v.dom.insertBefore(m.dom,i.dom)})},pa=(i,m)=>{Xc(i).fold(()=>{vr(i).each(T=>{hs(T,m)})},v=>{Rl(v,m)})},As=(i,m)=>{Ea(i).fold(()=>{hs(i,m)},v=>{i.dom.insertBefore(m.dom,v.dom)})},hs=(i,m)=>{i.dom.appendChild(m.dom)},Fa=(i,m,p)=>{dr(i,p).fold(()=>{hs(i,m)},v=>{Rl(v,m)})},Ml=(i,m)=>{Rl(i,m),hs(m,i)},Ko=(i,m)=>{Ke(m,(p,v)=>{const T=v===0?i:m[v-1];pa(T,p)})},Yr=(i,m)=>{Ke(m,p=>{hs(i,p)})},ba=i=>{i.dom.textContent="",Ke(Uo(i),m=>{Sr(m)})},Sr=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Ha=i=>{const m=Uo(i);m.length>0&&Ko(i,m),Sr(i)},hl=(i,m)=>he.fromDom(i.dom.cloneNode(m)),Xr=i=>hl(i,!1),Ja=i=>hl(i,!0),Ac=(i,m)=>{const p=he.fromTag(m),v=Oe(i);return La(p,v),p},iu=(i,m)=>{const p=Ac(i,m),v=Uo(Ja(i));return Yr(p,v),p},uc=(i,m)=>{const p=Ac(i,m);pa(i,p);const v=Uo(i);return Yr(p,v),Sr(i),p},Nl=["tfoot","thead","tbody","colgroup"],va=i=>lo(Nl,i),pl=(i,m)=>({rows:i,columns:m}),Pl=(i,m)=>({row:i,column:m}),ti=(i,m,p)=>({element:i,rowspan:m,colspan:p}),Nu=(i,m,p,v)=>({element:i,rowspan:m,colspan:p,isNew:v}),Fi=(i,m,p,v,T,O)=>({element:i,rowspan:m,colspan:p,row:v,column:T,isLocked:O}),j=(i,m,p)=>({element:i,cells:m,section:p}),de=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),pe=(i,m,p)=>({element:i,isNew:m,isLocked:p}),ze=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),wt=(i,m,p,v)=>({startRow:i,startCol:m,finishRow:p,finishCol:v}),kn=(i,m,p)=>({element:i,colspan:m,column:p}),ko=(i,m)=>({element:i,columns:m}),xr=i=>fl(i)&&Nt(i.dom.host),Io=_t(Element.prototype.attachShadow)&&_t(Node.prototype.getRootNode),No=q(Io),Wo=Io?i=>he.fromDom(i.dom.getRootNode()):Rr,Hr=i=>{const m=Wo(i);return xr(m)?le.some(m):le.none()},Ci=i=>he.fromDom(i.dom.host),Ot=i=>{if(No()&&Nt(i.target)){const m=he.fromDom(i.target);if(wr(m)&&Zd(m)&&i.composed&&i.composedPath){const p=i.composedPath();if(p)return we(p)}}return le.from(i.target)},Zd=i=>Nt(i.dom.shadowRoot),Ns=i=>{const m=Xa(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return Hr(he.fromDom(m)).fold(()=>p.body.contains(m),Ct(Ns,Ci))},B=()=>X(he.fromDom(document)),X=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return he.fromDom(m)},oe=(i,m,p)=>mo(_c(i,p),m),De=(i,m)=>mo(Uo(i),m),Bt=(i,m)=>{let p=[];return Ke(Uo(i),v=>{m(v)&&(p=p.concat([v])),p=p.concat(Bt(v,m))}),p},fo=(i,m,p)=>oe(i,v=>Un(v,m),p),Yt=(i,m)=>De(i,p=>Un(p,m)),Ws=(i,m)=>br(m,i);var at=(i,m,p,v,T)=>i(p,v)?le.some(p):_t(T)&&T(p)?le.none():m(p,v,T);const xs=(i,m,p)=>{let v=i.dom;const T=_t(p)?p:cn;for(;v.parentNode;){v=v.parentNode;const O=he.fromDom(v);if(m(O))return le.some(O);if(T(O))break}return le.none()},Qa=(i,m,p)=>at((T,O)=>O(T),xs,i,m,p),Ms=(i,m)=>{const p=T=>m(he.fromDom(T));return L(i.dom.childNodes,p).map(he.fromDom)},Vr=(i,m)=>{const p=v=>{for(let T=0;T<v.childNodes.length;T++){const O=he.fromDom(v.childNodes[T]);if(m(O))return le.some(O);const I=p(v.childNodes[T]);if(I.isSome())return I}return le.none()};return p(i.dom)},bl=(i,m,p)=>xs(i,v=>Un(v,m),p),_o=(i,m)=>Ms(i,p=>Un(p,m)),ec=(i,m)=>Kr(m,i),Zs=(i,m,p)=>at((T,O)=>Un(T,O),bl,i,m,p),ni=(i,m,p=En)=>i.exists(v=>p(v,m)),Ys=i=>{const m=[],p=v=>{m.push(v)};for(let v=0;v<i.length;v++)i[v].each(p);return m},Pu=(i,m)=>i!=null?m(i):le.none(),Pm=(i,m)=>i?le.some(m):le.none(),Ag=(i,m)=>i.substring(m),or=(i,m,p)=>m===""||i.length>=m.length&&i.substr(p,p+m.length)===m,Bl=(i,m)=>ka(i,m)?Ag(i,m.length):i,ya=(i,m,p=0,v)=>{const T=i.indexOf(m,p);return T!==-1?Qt(v)?!0:T+m.length<=v:!1},ka=(i,m)=>or(i,m,0),tc=(i,m)=>or(i,m,i.length-m.length),Ao=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),dc=i=>i.length>0,Va=i=>{const m=parseFloat(i);return isNaN(m)?le.none():le.some(m)},K=i=>i.style!==void 0&&_t(i.style.getPropertyValue),ne=(i,m,p)=>{if(!Zn(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",i),new Error("CSS value must be a string: "+p);K(i)&&i.style.setProperty(m,p)},xe=(i,m)=>{K(i)&&i.style.removeProperty(m)},Re=(i,m,p)=>{const v=i.dom;ne(v,m,p)},hn=(i,m)=>{const p=i.dom;zo(m,(v,T)=>{ne(p,T,v)})},bo=(i,m)=>{const p=i.dom,T=window.getComputedStyle(p).getPropertyValue(m);return T===""&&!Ns(i)?Ps(p,m):T},Ps=(i,m)=>K(i)?i.style.getPropertyValue(m):"",Ca=(i,m)=>{const p=i.dom,v=Ps(p,m);return le.from(v).filter(T=>T.length>0)},Co=(i,m)=>{const p=i.dom;xe(p,m),ni(ce(i,"style").map(Ao),"")&&se(i,"style")},Jr=(i,m)=>{const p=i.dom,v=m.dom;K(p)&&K(v)&&(v.style.cssText=p.style.cssText)},js=(i,m,p=0)=>ce(i,m).map(v=>parseInt(v,10)).getOr(p),Mr=(i,m)=>js(i,m,1),Tr=i=>tr("col")(i)?js(i,"span",1)>1:Mr(i,"colspan")>1,yr=i=>Mr(i,"rowspan")>1,Wc=(i,m)=>parseInt(bo(i,m),10),oi=q(10),_a=q(10),Zc=(i,m)=>wi(i,m,Ae),wi=(i,m,p)=>as(Uo(i),v=>Un(v,m)?p(v)?[v]:[]:wi(v,m,p)),Si=(i,m,p=cn)=>{if(p(m))return le.none();if(lo(i,ls(m)))return le.some(m);const v=T=>Un(T,"table")||p(T);return bl(m,i.join(","),v)},Cf=(i,m)=>Si(["td","th"],i,m),Bu=i=>Zc(i,"th,td"),si=i=>Un(i,"colgroup")?Yt(i,"col"):as(Gd(i),m=>Yt(m,"col")),Oc=(i,m)=>Zs(i,"table",m),$u=i=>Zc(i,"tr"),Gd=i=>Oc(i).fold(q([]),m=>Yt(m,"colgroup")),Hi=(i,m)=>ln(i,p=>{if(ls(p)==="colgroup"){const v=ln(si(p),T=>{const O=js(T,"span",1);return ti(T,1,O)});return j(p,v,"colgroup")}else{const v=ln(Bu(p),T=>{const O=js(T,"rowspan",1),I=js(T,"colspan",1);return ti(T,O,I)});return j(p,v,m(p))}}),Og=i=>vr(i).map(m=>{const p=ls(m);return va(p)?p:"tbody"}).getOr("tbody"),qd=i=>{const m=$u(i),v=[...Gd(i),...m];return Hi(v,Og)},Dg=(i,m)=>Hi(i,()=>m),md=i=>{let m=!1,p;return(...v)=>(m||(m=!0,p=i.apply(null,v)),p)},Rg=(i,m,p,v)=>{const T=i.isiOS()&&/ipad/i.test(p)===!0,O=i.isiOS()&&!T,I=i.isiOS()||i.isAndroid(),Z=I||v("(pointer:coarse)"),Q=T||!O&&I&&v("(min-device-width:768px)"),ue=O||I&&!Q,_e=m.isSafari()&&i.isiOS()&&/safari/i.test(p)===!1,ct=!ue&&!Q&&!_e;return{isiPad:q(T),isiPhone:q(O),isTablet:q(Q),isPhone:q(ue),isTouch:q(Z),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:q(_e),isDesktop:q(ct)}},fd=(i,m)=>{for(let p=0;p<i.length;p++){const v=i[p];if(v.test(m))return v}},u1=(i,m)=>{const p=fd(i,m);if(!p)return{major:0,minor:0};const v=T=>Number(m.replace(p,"$"+T));return Jc(v(1),v(2))},ie=(i,m)=>{const p=String(m).toLowerCase();return i.length===0?Bm():u1(i,p)},Bm=()=>Jc(0,0),Jc=(i,m)=>({major:i,minor:m}),uu={nu:Jc,detect:ie,unknown:Bm},Mg=(i,m)=>So(m.brands,p=>{const v=p.brand.toLowerCase();return L(i,T=>{var O;return v===((O=T.brand)===null||O===void 0?void 0:O.toLowerCase())}).map(T=>({current:T.name,version:uu.nu(parseInt(p.version,10),0)}))}),Lh=(i,m)=>{const p=String(m).toLowerCase();return L(i,v=>v.search(p))},ns=(i,m)=>Lh(i,m).map(p=>{const v=uu.detect(p.versionRegexes,m);return{current:p.name,version:v}}),ri=(i,m)=>Lh(i,m).map(p=>{const v=uu.detect(p.versionRegexes,m);return{current:p.name,version:v}}),vl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Aa=i=>m=>ya(m,i),gd=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>ya(i,"edge/")&&ya(i,"chrome")&&ya(i,"safari")&&ya(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,vl],search:i=>ya(i,"chrome")&&!ya(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>ya(i,"msie")||ya(i,"trident")},{name:"Opera",versionRegexes:[vl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Aa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Aa("firefox")},{name:"Safari",versionRegexes:[vl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(ya(i,"safari")||ya(i,"mobile/"))&&ya(i,"applewebkit")}],xi=[{name:"Windows",search:Aa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>ya(i,"iphone")||ya(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Aa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Aa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Aa("linux"),versionRegexes:[]},{name:"Solaris",search:Aa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Aa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Aa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],mc={browsers:q(gd),oses:q(xi)},Ti="Edge",Ng="Chromium",Fh="IE",$l="Opera",Ei="Firefox",Pg="Safari",jc=()=>Oa({current:void 0,version:uu.unknown()}),Oa=i=>{const m=i.current,p=i.version,v=T=>()=>m===T;return{current:m,version:p,isEdge:v(Ti),isChromium:v(Ng),isIE:v(Fh),isOpera:v($l),isFirefox:v(Ei),isSafari:v(Pg)}},Iu={unknown:jc,nu:Oa,edge:q(Ti),chromium:q(Ng),ie:q(Fh),opera:q($l),firefox:q(Ei),safari:q(Pg)},Kd="Windows",ai="iOS",nc="Android",wf="Linux",Hh="macOS",$m="Solaris",Yd="FreeBSD",Xd="ChromeOS",du=()=>Sf({current:void 0,version:uu.unknown()}),Sf=i=>{const m=i.current,p=i.version,v=T=>()=>m===T;return{current:m,version:p,isWindows:v(Kd),isiOS:v(ai),isAndroid:v(nc),isMacOS:v(Hh),isLinux:v(wf),isSolaris:v($m),isFreeBSD:v(Yd),isChromeOS:v(Xd)}},d1={unknown:du,nu:Sf,windows:q(Kd),ios:q(ai),android:q(nc),linux:q(wf),macos:q(Hh),solaris:q($m),freebsd:q(Yd),chromeos:q(Xd)},Bg={detect:(i,m,p)=>{const v=mc.browsers(),T=mc.oses(),O=m.bind(Q=>Mg(v,Q)).orThunk(()=>ns(v,i)).fold(Iu.unknown,Iu.nu),I=ri(T,i).fold(d1.unknown,d1.nu),Z=Rg(I,O,i,p);return{browser:O,os:I,deviceType:Z}}},Jd=i=>window.matchMedia(i).matches;let xf=md(()=>Bg.detect(navigator.userAgent,le.from(navigator.userAgentData),Jd));const hd=()=>xf(),zr=(i,m)=>{const p=(Z,Q)=>{if(!qe(Q)&&!Q.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+Q);const ue=Z.dom;K(ue)&&(ue.style[i]=Q+"px")},v=Z=>{const Q=m(Z);if(Q<=0||Q===null){const ue=bo(Z,i);return parseFloat(ue)||0}return Q},T=v,O=(Z,Q)=>Ze(Q,(ue,_e)=>{const ct=bo(Z,_e),Lt=ct===void 0?0:parseInt(ct,10);return isNaN(Lt)?ue:ue+Lt},0);return{set:p,get:v,getOuter:T,aggregate:O,max:(Z,Q,ue)=>{const _e=O(Z,ue);return Q>_e?Q-_e:0}}},mr=(i,m)=>Va(i).getOr(m),Da=(i,m,p)=>mr(bo(i,m),p),$g=(i,m,p,v)=>{const T=Da(i,`padding-${p}`,0),O=Da(i,`padding-${v}`,0),I=Da(i,`border-${p}-width`,0),Z=Da(i,`border-${v}-width`,0);return m-T-O-I-Z},zh=(i,m)=>{const p=i.dom,v=p.getBoundingClientRect().width||p.offsetWidth;return m==="border-box"?v:$g(i,v,"left","right")},za=i=>Da(i,"height",i.dom.offsetHeight),gn=i=>Da(i,"width",i.dom.offsetWidth),Lu=i=>zh(i,"content-box"),pd=zr("width",i=>i.dom.offsetWidth),Gc=i=>pd.get(i),os=i=>pd.getOuter(i),Ig=Lu,Qd=gn,Im=(i,m,p)=>{const v=i.cells,T=v.slice(0,m),O=v.slice(m),I=T.concat(p).concat(O);return Ra(i,I)},Lg=(i,m,p)=>Im(i,m,[p]),ao=(i,m,p)=>{const v=i.cells;v[m]=p},Ra=(i,m)=>ze(i.element,m,i.section,i.isNew),yl=(i,m)=>{const p=i.cells,v=ln(p,m);return ze(i.element,v,i.section,i.isNew)},Il=(i,m)=>i.cells[m],Dc=(i,m)=>Il(i,m).element,Rc=i=>i.cells.length,Qr=i=>{const m=Gs(i,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},Fg=(i,m,p)=>{const v=ln(i.cells,p);return ze(m(i.element),v,i.section,!0)},oc="data-snooker-locked-cols",Vi=i=>ce(i,oc).bind(m=>le.from(m.match(/\d+/g))).map(m=>An(m,Ae)),zi=i=>{const m=Ze(Qr(i).rows,(v,T)=>(Ke(T.cells,(O,I)=>{O.isLocked&&(v[I]=!0)}),v),{}),p=gs(m,(v,T)=>parseInt(T,10));return Xo(p)},ea=(i,m)=>i+","+m,Ur=(i,m,p)=>le.from(i.access[ea(m,p)]),Uh=(i,m,p)=>{const v=ci(i,T=>p(m,T.element));return v.length>0?le.some(v[0]):le.none()},ci=(i,m)=>{const p=as(i.all,v=>v.cells);return mo(p,m)},ki=i=>{const m={};let p=0;return Ke(i.cells,v=>{const T=v.colspan;Ho(T,O=>{const I=p+O;m[I]=kn(v.element,T,I)}),p+=T}),m},Bs=i=>{const m={},p=[],T=we(i).map(Dt=>Dt.element).bind(Oc).bind(Vi).getOr({});let O=0,I=0,Z=0;const{pass:Q,fail:ue}=Gs(i,Dt=>Dt.section==="colgroup");Ke(ue,Dt=>{const Tt=[];Ke(Dt.cells,on=>{let ot=0;for(;m[ea(Z,ot)]!==void 0;)ot++;const kt=Xe(T,ot.toString()),Pn=Fi(on.element,on.rowspan,on.colspan,Z,ot,kt);for(let Pt=0;Pt<on.colspan;Pt++)for(let us=0;us<on.rowspan;us++){const Ds=Z+us,Ts=ot+Pt,Lc=ea(Ds,Ts);m[Lc]=Pn,I=Math.max(I,Ts+1)}Tt.push(Pn)}),O++,p.push(j(Dt.element,Tt,Dt.section)),Z++});const{columns:_e,colgroups:ct}=vt(Q).map(Dt=>{const Tt=ki(Dt);return{colgroups:[ko(Dt.element,es(Tt))],columns:Tt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:pl(O,I),access:m,all:p,columns:_e,colgroups:ct}},wo={fromTable:i=>{const m=qd(i);return Bs(m)},generate:Bs,getAt:Ur,findItem:Uh,filterItems:ci,justCells:i=>as(i.all,m=>m.cells),justColumns:i=>es(i.columns),hasColumns:i=>It(i.columns).length>0,getColumnAt:(i,m)=>le.from(i.columns[m])},vd=(i,m=Ae)=>{const p=i.grid,v=Ho(p.columns,Fe),T=Ho(p.rows,Fe);return ln(v,O=>Lm(()=>as(T,ue=>wo.getAt(i,ue,O).filter(_e=>_e.column===O).toArray()),ue=>ue.colspan===1&&m(ue.element),()=>wo.getAt(i,0,O)))},Lm=(i,m,p)=>{const v=i();return L(v,m).orThunk(()=>le.from(v[0]).orThunk(p)).map(I=>I.element)},Tf=i=>{const m=i.grid,p=Ho(m.rows,Fe),v=Ho(m.columns,Fe);return ln(p,T=>Lm(()=>as(v,Q=>wo.getAt(i,T,Q).filter(ue=>ue.row===T).fold(q([]),ue=>[ue])),Q=>Q.rowspan===1,()=>wo.getAt(i,T,0)))},Wh=(i,m)=>{if(m<0||m>=i.length-1)return le.none();const p=i[m].fold(()=>{const T=kc(i.slice(0,m));return So(T,(O,I)=>O.map(Z=>({value:Z,delta:I+1})))},T=>le.some({value:T,delta:0})),v=i[m+1].fold(()=>{const T=i.slice(m+1);return So(T,(O,I)=>O.map(Z=>({value:Z,delta:I+1})))},T=>le.some({value:T,delta:1}));return p.bind(T=>v.map(O=>{const I=O.delta+T.delta;return Math.abs(O.value-T.value)/I}))},Ef=(i,m)=>p=>m1(p)==="rtl"?m:i,m1=i=>bo(i,"direction")==="rtl"?"rtl":"ltr",x=zr("height",i=>{const m=i.dom;return Ns(i)?m.getBoundingClientRect().height:m.offsetHeight}),R=i=>x.get(i),V=i=>x.getOuter(i),re=za,ge=(i,m)=>({left:i,top:m,translate:(v,T)=>ge(i+v,m+T)}),Je=ge,On=i=>{const m=i.getBoundingClientRect();return Je(m.left,m.top)},Jn=(i,m)=>i!==void 0?i:m!==void 0?m:0,Gn=i=>{const m=i.dom.ownerDocument,p=m.body,v=m.defaultView,T=m.documentElement;if(p===i.dom)return Je(p.offsetLeft,p.offsetTop);const O=Jn(v==null?void 0:v.pageYOffset,T.scrollTop),I=Jn(v==null?void 0:v.pageXOffset,T.scrollLeft),Z=Jn(T.clientTop,p.clientTop),Q=Jn(T.clientLeft,p.clientLeft);return Dn(i).translate(I-Q,O-Z)},Dn=i=>{const m=i.dom,v=m.ownerDocument.body;return v===m?Je(v.offsetLeft,v.offsetTop):Ns(i)?On(m):Je(0,0)},sr=(i,m)=>({row:i,y:m}),Er=(i,m)=>({col:i,x:m}),Cl=i=>Gn(i).left+os(i),Ui=i=>Gn(i).left,fc=(i,m)=>Er(i,Ui(m)),f1=(i,m)=>Er(i,Cl(m)),Qb=i=>Gn(i).top,Sy=(i,m)=>sr(i,Qb(m)),gc=(i,m)=>sr(i,Qb(m)+V(m)),Fm=(i,m,p)=>{if(p.length===0)return[];const v=ln(p.slice(1),(O,I)=>O.map(Z=>i(I,Z))),T=p[p.length-1].map(O=>m(p.length-1,O));return v.concat([T])},sc=i=>-i,Ua={delta:Fe,positions:i=>Fm(Sy,gc,i),edge:Qb},mu=Ef({delta:Fe,edge:Ui,positions:i=>Fm(fc,f1,i)},{delta:sc,edge:Cl,positions:i=>Fm(f1,fc,i)}),kf={delta:(i,m)=>mu(m).delta(i,m),positions:(i,m)=>mu(m).positions(i,m),edge:i=>mu(i).edge(i)},xy={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Zh=(()=>{const i="[0-9]+",p="[eE]"+("[+-]?"+i),v="\\.",T=Z=>`(?:${Z})?`,I=`[+-]?(?:${["Infinity",i+v+T(i)+T(p),v+i+T(p),i+T(p)].join("|")})`;return new RegExp(`^(${I})(.*)$`)})(),fu=(i,m)=>rt(m,p=>rt(xy[p],v=>i===v)),Hg=(i,m)=>le.from(Zh.exec(i)).bind(v=>{const T=Number(v[1]),O=v[2];return fu(O,m)?le.some({value:T,unit:O}):le.none()}),gu=/(\d+(\.\d+)?)%/,wa=/(\d+(\.\d+)?)px|em/,nn=tr("col"),hu=tr("tr"),g1=(i,m,p)=>{const v=aa(i).getOrThunk(()=>X(ra(i)));return m(i)/p(v)*100},_f=(i,m)=>{Re(i,"width",m+"px")},Wi=(i,m)=>{Re(i,"width",m+"%")},pu=(i,m)=>{Re(i,"height",m+"px")},Ty=i=>{Co(i,"height")},bu=i=>re(i)+"px",ev=(i,m,p,v)=>{const T=Oc(i).map(O=>{const I=p(O);return Math.floor(m/100*I)}).getOr(m);return v(i,T),T},Fu=(i,m,p,v)=>{const T=parseFloat(i);return tc(i,"%")&&ls(m)!=="table"?ev(m,T,p,v):T},Nr=i=>{const m=bu(i);return m?Fu(m,i,R,pu):R(i)},li=(i,m,p)=>{const v=p(i),T=Mr(i,m);return v/T},st=(i,m)=>Ca(i,m).orThunk(()=>ce(i,m).map(p=>p+"px")),vu=i=>st(i,"width"),Fl=i=>st(i,"height"),yd=i=>g1(i,Gc,Ig),ca=i=>nn(i)?Gc(i):Qd(i),hc=i=>hu(i)?R(i):li(i,"rowspan",Nr),Pr=i=>vu(i).bind(p=>Hg(p,["fixed","relative","empty"])),Qe=(i,m,p)=>{Re(i,"width",m+p)},ta=i=>Gc(i)+"px",fr=i=>R(i)+"px",Gr=i=>g1(i,Gc,Ig)+"%",Hu=i=>vu(i).exists(m=>gu.test(m)),Vu=i=>vu(i).exists(m=>wa.test(m)),Zi=i=>vu(i).isNone(),h1=q(gu),nm=tr("col"),p1=i=>vu(i).getOrThunk(()=>ca(i)+"px"),ii=i=>Fl(i).getOrThunk(()=>hc(i)+"px"),ms=i=>ln(wo.justColumns(i),m=>le.from(m.element)),zu=i=>{const m=hd().browser,p=m.isChromium()||m.isFirefox();return nm(i)?p:!0},Hm=(i,m,p,v,T,O)=>i.filter(v).fold(()=>O(Wh(p,m)),I=>T(I)),rc=(i,m,p,v)=>{const T=vd(i),O=wo.hasColumns(i)?ms(i):T,I=[le.some(kf.edge(m))].concat(ln(kf.positions(T,m),Q=>Q.map(ue=>ue.x))),Z=W(Tr);return ln(O,(Q,ue)=>Hm(Q,ue,I,Z,_e=>{if(zu(_e))return p(_e);{const ct=Pu(T[ue],Fe);return Hm(ct,ue,I,Z,Lt=>v(le.some(Gc(Lt))),v)}},v))},b1=i=>i.map(m=>m+"px").getOr(""),om=(i,m)=>rc(i,m,p1,b1),Vg=(i,m,p)=>rc(i,m,yd,v=>v.fold(()=>p.minCellWidth(),T=>T/p.pixelWidth()*100)),qr=(i,m,p)=>rc(i,m,ca,v=>v.getOrThunk(p.minCellWidth)),Wa=(i,m,p,v)=>{const T=Tf(i),O=ln(i.all,Z=>le.some(Z.element)),I=[le.some(Ua.edge(m))].concat(ln(Ua.positions(T,m),Z=>Z.map(Q=>Q.y)));return ln(O,(Z,Q)=>Hm(Z,Q,I,Ae,p,v))},ke=(i,m)=>Wa(i,m,hc,p=>p.getOrThunk(_a)),rr=(i,m)=>Wa(i,m,ii,b1),Af=(i,m)=>()=>Ns(i)?m(i):parseFloat(Ca(i,"width").getOr("0")),ji=i=>{const m=Af(i,Gc),p=q(0);return{width:m,pixelWidth:m,getWidths:(T,O)=>qr(T,i,O),getCellDelta:p,singleColumnWidth:q([0]),minCellWidth:p,setElementWidth:tt,adjustTableWidth:tt,isRelative:!0,label:"none"}},Mc=i=>{const m=Af(i,Q=>parseFloat(Gr(Q))),p=Af(i,Gc);return{width:m,pixelWidth:p,getWidths:(Q,ue)=>Vg(Q,i,ue),getCellDelta:Q=>Q/p()*100,singleColumnWidth:(Q,ue)=>[100-Q],minCellWidth:()=>oi()/p()*100,setElementWidth:Wi,adjustTableWidth:Q=>{const ue=m(),_e=Q/100*ue,ct=ue+_e;Wi(i,ct)},isRelative:!0,label:"percent"}},pc=i=>{const m=Af(i,Gc);return{width:m,pixelWidth:m,getWidths:(I,Z)=>qr(I,i,Z),getCellDelta:Fe,singleColumnWidth:(I,Z)=>[Math.max(oi(),I+Z)-I],minCellWidth:oi,setElementWidth:_f,adjustTableWidth:I=>{const Z=m()+I;_f(i,Z)},isRelative:!1,label:"pixel"}},kr=(i,m)=>h1().exec(m)!==null?Mc(i):pc(i),k={getTableSize:i=>vu(i).fold(()=>ji(i),p=>kr(i,p)),pixelSize:pc,percentageSize:Mc,noneSize:ji},F=(i,m,p,v,T,O)=>({minRow:i,minCol:m,maxRow:p,maxCol:v,allCells:T,selectedCells:O}),J=(i,m)=>{const p=i.grid.columns;let T=i.grid.rows,O=p,I=0,Z=0;const Q=[],ue=[];return zo(i.access,_e=>{if(Q.push(_e),m(_e)){ue.push(_e);const ct=_e.row,Lt=ct+_e.rowspan-1,Dt=_e.column,Tt=Dt+_e.colspan-1;ct<T?T=ct:Lt>I&&(I=Lt),Dt<O?O=Dt:Tt>Z&&(Z=Tt)}}),F(T,O,I,Z,Q,ue)},me=(i,m,p)=>{const v=i[p].element,T=he.fromTag("td");hs(T,he.fromTag("br")),(m?hs:As)(v,T)},je=(i,m,p,v)=>{const T=mo(i,Z=>Z.section!=="colgroup"),O=m.grid.columns,I=m.grid.rows;for(let Z=0;Z<I;Z++){let Q=!1;for(let ue=0;ue<O;ue++)Z<p.minRow||Z>p.maxRow||ue<p.minCol||ue>p.maxCol||(wo.getAt(m,Z,ue).filter(v).isNone()?me(T,Q,Z):Q=!0)}},pt=(i,m,p,v)=>{zo(p.columns,I=>{(I.column<m.minCol||I.column>m.maxCol)&&Sr(I.element)});const T=mo(Zc(i,"tr"),I=>I.dom.childElementCount===0);Ke(T,Sr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ke(Zc(i,"th,td"),I=>{se(I,"rowspan"),se(I,"colspan")}),se(i,oc),se(i,"data-snooker-col-series"),k.getTableSize(i).adjustTableWidth(v)},Jt=(i,m,p,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const T=qr(m,i,p),O=Ze(T,(ue,_e)=>ue+_e,0),Q=Ze(T.slice(v.minCol,v.maxCol+1),(ue,_e)=>ue+_e,0)/O*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(Q)},qn=(i,m)=>{const p=Lt=>Un(Lt.element,m),v=Ja(i),T=qd(v),O=k.getTableSize(i),I=wo.generate(T),Z=J(I,p),Q="th:not("+m+"),td:not("+m+")",ue=wi(v,"th,td",Lt=>Un(Lt,Q));Ke(ue,Sr),je(T,I,Z,p);const _e=wo.fromTable(i),ct=Jt(i,_e,O,Z);return pt(v,Z,I,ct),v},go=" ",ss=((i,m)=>{const p=O=>{if(!i(O))throw new Error("Can only get "+m+" value of a "+m+" node");return v(O).getOr("")},v=O=>i(O)?le.from(O.dom.nodeValue):le.none();return{get:p,getOption:v,set:(O,I)=>{if(!i(O))throw new Error("Can only set raw "+m+" value of a "+m+" node");O.dom.nodeValue=I}}})(Xa,"text"),gr=i=>ss.get(i),Qc=i=>ss.getOption(i),Uu=(i,m)=>ss.set(i,m),wl=i=>ls(i)==="img"?1:Qc(i).fold(()=>Uo(i).length,m=>m.length),Wu=i=>Qc(i).filter(m=>m.trim().length!==0||m.indexOf(go)>-1).isSome(),sm=i=>wn(i)&&Fr(i,"contenteditable")==="false",Vm=["img","br"],Gi=i=>Wu(i)||lo(Vm,ls(i))||sm(i),yu=i=>Vr(i,Gi),Of=i=>jh(i,Gi),jh=(i,m)=>{const p=v=>{const T=Uo(v);for(let O=T.length-1;O>=0;O--){const I=T[O];if(m(I))return le.some(I);const Z=p(I);if(Z.isSome())return Z}return le.none()};return p(i)},zg={scope:["row","col"]},v1=i=>()=>{const m=he.fromTag("td",i.dom);return hs(m,he.fromTag("br",i.dom)),m},Ma=i=>()=>he.fromTag("col",i.dom),Do=i=>()=>he.fromTag("colgroup",i.dom),Xs=i=>()=>he.fromTag("tr",i.dom),ac=(i,m,p)=>{const v=iu(i,m);return zo(p,(T,O)=>{T===null?se(v,O):zs(v,O,T)}),v},Hl=i=>i,ui=(i,m,p)=>yu(i).map(T=>{const O=p.join(","),I=fo(T,O,Z=>ts(Z,i));return qs(I,(Z,Q)=>{const ue=Xr(Q);return hs(Z,ue),ue},m)}).getOr(m),Ug=(i,m)=>{zo(zg,(p,v)=>ce(i,v).filter(T=>lo(p,T)).each(T=>zs(m,v,T)))},Cd=(i,m,p)=>{const v=(I,Z)=>{Jr(I.element,Z),Co(Z,"height"),I.colspan!==1&&Co(Z,"width")},T=I=>{const Z=he.fromTag(ls(I.element),m.dom),Q=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ue=Q.length>0?ui(I.element,Z,Q):Z;return hs(ue,he.fromTag("br")),v(I,Z),Ug(I.element,Z),i(I.element,Z),Z};return{col:I=>{const Z=he.fromTag(ls(I.element),m.dom);return v(I,Z),i(I.element,Z),Z},colgroup:Do(m),row:Xs(m),cell:T,replace:ac,colGap:Ma(m),gap:v1(m)}},rm=i=>({col:Ma(i),colgroup:Do(i),row:Xs(i),cell:v1(i),replace:Hl,colGap:Ma(i),gap:v1(i)}),am=(i,m)=>{const v=document.createElement("div");return v.innerHTML=i,Uo(he.fromDom(v))},wd=i=>ln(i,he.fromDom),Df=i=>m=>m.options.get(i),qi="100%",s2=i=>{var m;const p=i.dom,v=(m=p.getParent(i.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:i.getBody();return Ig(he.fromDom(v))+"px"},cm=(i,m)=>ju(i)||!C1(i)?m:Mf(i)?{...m,width:s2(i)}:{...m,width:qi},zm=(i,m)=>ju(i)||C1(i)?m:Mf(i)?{...m,width:s2(i)}:{...m,width:qi},Wg=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const v=lo(["section","cells","sectionCells","auto"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const v=lo(["preservetable","resizetable"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},r2=i=>le.from(i.options.get("table_clone_elements")),y1=i=>{const m=i.options.get("object_resizing");return lo(m.split(","),"table")},Rf=Df("table_header_type"),Ey=Df("table_column_resizing"),la=i=>Ey(i)==="preservetable",ky=i=>Ey(i)==="resizetable",Zu=Df("table_sizing_mode"),Um=i=>Zu(i)==="relative",Mf=i=>Zu(i)==="fixed",ju=i=>Zu(i)==="responsive",di=Df("table_resize_bars"),C1=Df("table_style_by_css"),tv=Df("table_merge_content_on_paste"),Nf=i=>{const m=i.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:zm(i,p)},bc=i=>{const m=i.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:cm(i,p)},nv=Df("table_use_colgroups"),w1=i=>Zs(i,"[contenteditable]"),S1=(i,m=!1)=>Ns(i)?i.dom.isContentEditable:w1(i).fold(q(m),p=>a2(p)==="true"),a2=i=>i.dom.contentEditable,Zg=i=>he.fromDom(i.getBody()),lm=i=>m=>ts(m,Zg(i)),el=i=>{se(i,"data-mce-style");const m=p=>se(p,"data-mce-style");Ke(Bu(i),m),Ke(si(i),m),Ke($u(i),m)},Gu=i=>he.fromDom(i.selection.getStart()),Wm=i=>i.getBoundingClientRect().width,_y=i=>i.getBoundingClientRect().height,x1=i=>(m,p)=>{const v=m.dom.getStyle(p,i)||m.dom.getAttrib(p,i);return le.from(v).filter(dc)},T1=x1("width"),c2=x1("height"),l2=i=>/^(\d+(\.\d+)?)%$/.test(i),i2=i=>/^(\d+(\.\d+)?)px$/.test(i),E1=i=>Qa(i,tr("table")).exists(S1),Gh=(i,m)=>{const p=m.column,v=m.column+m.colspan-1,T=m.row,O=m.row+m.rowspan-1;return p<=i.finishCol&&v>=i.startCol&&T<=i.finishRow&&O>=i.startRow},Ro=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,dn=(i,m)=>{let p=!0;const v=nt(Ro,m);for(let T=m.startRow;T<=m.finishRow;T++)for(let O=m.startCol;O<=m.finishCol;O++)p=p&&wo.getAt(i,T,O).exists(v);return p?le.some(m):le.none()},Pf=(i,m)=>wt(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),k1=(i,m,p)=>{const v=wo.findItem(i,m,ts),T=wo.findItem(i,p,ts);return v.bind(O=>T.map(I=>Pf(O,I)))},ov=(i,m,p)=>k1(i,m,p).bind(v=>dn(i,v)),u2=(i,m,p,v)=>wo.findItem(i,m,ts).bind(T=>{const O=p>0?T.row+T.rowspan-1:T.row,I=v>0?T.column+T.colspan-1:T.column;return wo.getAt(i,O+p,I+v).map(Q=>Q.element)}),_1=(i,m,p)=>k1(i,m,p).map(v=>{const T=wo.filterItems(i,nt(Gh,v));return ln(T,O=>O.element)}),ys=(i,m)=>{const p=(v,T)=>Dl(T,v);return wo.findItem(i,m,p).map(v=>v.element)},d2=(i,m,p)=>Oc(i).bind(v=>{const T=Kh(v);return u2(T,i,m,p)}),Kk=(i,m,p)=>{const v=Kh(i);return _1(v,m,p)},qh=(i,m,p,v,T)=>{const O=Kh(i),I=ts(i,p)?le.some(m):ys(O,m),Z=ts(i,T)?le.some(v):ys(O,v);return I.bind(Q=>Z.bind(ue=>_1(O,Q,ue)))},Ye=(i,m,p)=>{const v=Kh(i);return ov(v,m,p)},Kh=wo.fromTable;var Yk=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Bf=()=>{const i=ue=>he.fromDom(ue.dom.cloneNode(!1)),m=ue=>Rr(ue).dom,p=ue=>wr(ue)?ls(ue)==="body"?!0:lo(Yk,ls(ue)):!1,v=ue=>wr(ue)?lo(["br","img","hr","input"],ls(ue)):!1,T=ue=>wr(ue)&&Fr(ue,"contenteditable")==="false",O=(ue,_e)=>ue.dom.compareDocumentPosition(_e.dom),I=(ue,_e)=>{const ct=Oe(ue);La(_e,ct)},Z=ue=>{const _e=ls(ue);return lo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],_e)},Q=ue=>wr(ue)?ce(ue,"lang"):le.none();return{up:q({selector:bl,closest:Zs,predicate:xs,all:_c}),down:q({selector:Ws,predicate:Bt}),styles:q({get:bo,getRaw:Ca,set:Re,remove:Co}),attrs:q({get:Fr,set:zs,remove:se,copyTo:I}),insert:q({before:Rl,after:pa,afterAll:Ko,append:hs,appendAll:Yr,prepend:As,wrap:Ml}),remove:q({unwrap:Ha,remove:Sr}),create:q({nu:he.fromTag,clone:i,text:he.fromText}),query:q({comparePosition:O,prevSibling:ei,nextSibling:Xc}),property:q({children:Uo,name:ls,parent:vr,document:m,isText:Xa,isComment:is,isElement:wr,isSpecial:Z,getLanguage:Q,getText:gr,setText:Uu,isBoundary:p,isEmptyTag:v,isNonEditable:T}),eq:ts,is:ic}};const m2=(i,m,p,v)=>{const T=p[0],O=p.slice(1);return v(i,m,T,O)},jg=(i,m,p)=>p.length>0?m2(i,m,p,Ay):le.none(),Ay=(i,m,p,v)=>{const T=m(i,p);return qs(v,(O,I)=>{const Z=m(i,I);return Sd(i,O,Z)},T)},Sd=(i,m,p)=>m.bind(v=>p.filter(nt(i.eq,v))),Oy=(i,m)=>nt(i.eq,m),Yh=(i,m,p,v=cn)=>{const T=[m].concat(i.up().all(m)),O=[p].concat(i.up().all(p)),I=_e=>Lr(_e,v).fold(()=>_e,Lt=>_e.slice(0,Lt+1)),Z=I(T),Q=I(O),ue=L(Z,_e=>rt(Q,Oy(i,_e)));return{firstpath:Z,secondpath:Q,shared:ue}},_r=jg,im=Yh,f2=Bf(),qu=(i,m)=>_r(f2,(p,v)=>i(v),m),Dy=(i,m,p)=>im(f2,i,m,p),A1=i=>bl(i,"table"),Xh=(i,m,p)=>{const v=T=>O=>p!==void 0&&p(O)||ts(O,T);return ts(i,m)?le.some({boxes:le.some([i]),start:i,finish:m}):A1(i).bind(T=>A1(m).bind(O=>{if(ts(T,O))return le.some({boxes:Kk(T,i,m),start:i,finish:m});if(Dl(T,O)){const I=fo(m,"td,th",v(T)),Z=I.length>0?I[I.length-1]:m;return le.some({boxes:qh(T,i,T,m,O),start:i,finish:Z})}else if(Dl(O,T)){const I=fo(i,"td,th",v(O)),Z=I.length>0?I[I.length-1]:i;return le.some({boxes:qh(O,i,T,m,O),start:i,finish:Z})}else return Dy(i,m).shared.bind(I=>Zs(I,"table",p).bind(Z=>{const Q=fo(m,"td,th",v(Z)),ue=Q.length>0?Q[Q.length-1]:m,_e=fo(i,"td,th",v(Z)),ct=_e.length>0?_e[_e.length-1]:i;return le.some({boxes:qh(Z,i,T,m,O),start:ct,finish:ue})}))}))},O1=(i,m)=>{const p=Ws(i,m);return p.length>0?le.some(p):le.none()},_i=(i,m)=>L(i,p=>Un(p,m)),g2=(i,m,p)=>ec(i,m).bind(v=>ec(i,p).bind(T=>qu(A1,[v,T]).map(O=>({first:v,last:T,table:O})))),D1=(i,m)=>bl(i,"table").bind(p=>ec(p,m).bind(v=>Xh(v,i).bind(T=>T.boxes.map(O=>({boxes:O,start:T.start,finish:T.finish}))))),Ry=(i,m,p,v,T)=>_i(i,T).bind(O=>d2(O,m,p).bind(I=>D1(I,v))),$f=(i,m)=>O1(i,m),My=(i,m,p)=>g2(i,m,p).bind(v=>{const T=Q=>ts(i,Q),O="thead,tfoot,tbody,table",I=bl(v.first,O,T),Z=bl(v.last,O,T);return I.bind(Q=>Z.bind(ue=>ts(Q,ue)?Ye(v.table,v.first,v.last):le.none()))}),h2=Fe,Ny=i=>{const m=(v,T)=>ce(v,T).exists(O=>parseInt(O,10)>1),p=v=>m(v,"rowspan")||m(v,"colspan");return i.length>0&&Vo(i,p)?le.some(i):le.none()},p2=(i,m,p)=>m.length<=1?le.none():My(i,p.firstSelectedSelector,p.lastSelectedSelector).map(v=>({bounds:v,cells:m})),Sl="data-mce-selected",Ai="td["+Sl+"],th["+Sl+"]",ft="["+Sl+"]",sv="data-mce-first-selected",Nc="td["+sv+"],th["+sv+"]",rv="data-mce-last-selected",b2="td["+rv+"],th["+rv+"]",hr=ft,Zm={selected:Sl,selectedSelector:Ai,firstSelected:sv,firstSelectedSelector:Nc,lastSelected:rv,lastSelectedSelector:b2},av=(i,m,p)=>({element:p,mergable:p2(m,i,Zm),unmergable:Ny(i),selection:h2(i)}),Xk=(i,m,p)=>({element:i,clipboard:m,generators:p}),jm=(i,m,p,v)=>({selection:h2(i),clipboard:p,generators:v}),cv=i=>Oc(i).bind(m=>$f(m,Zm.firstSelectedSelector)).fold(q(i),m=>m[0]),xd=i=>(m,p)=>{const v=ls(m),T=v==="col"||v==="colgroup"?cv(m):m;return Zs(T,i,p)},v2=xd("th,td,caption"),Py=xd("th,td"),ar=i=>wd(i.model.table.getSelectedCells()),Jh=i=>mo(ar(i),m=>Un(m,Zm.selectedSelector)),Wr=i=>Oc(i[0]).map(m=>{const p=qn(m,hr);return el(p),[p]}),y2=(i,m)=>ln(m,p=>i.selection.serializer.serialize(p.dom,{})).join(""),Oi=i=>ln(i,m=>m.dom.innerText).join(""),Qh=(i,m)=>{i.on("BeforeGetContent",p=>{const v=T=>{p.preventDefault(),Wr(T).each(O=>{p.content=p.format==="text"?Oi(O):y2(i,O)})};if(p.selection===!0){const T=Jh(i);T.length>=1&&v(T)}}),i.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const v=ar(i);we(v).each(T=>{Oc(T).each(O=>{const I=mo(am(p.content),Q=>ls(Q)!=="meta"),Z=tr("table");if(tv(i)&&I.length===1&&Z(I[0])){p.preventDefault();const Q=he.fromDom(i.getDoc()),ue=rm(Q),_e=Xk(T,I[0],ue);m.pasteCells(O,_e).each(()=>{i.focus()})}})})}})},Di=(i,m)=>({element:i,offset:m}),Jk=(i,m,p)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?p(m).bind(v=>Jk(i,v,p).orThunk(()=>le.some(v))):le.none(),Qk=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,e_=(i,m)=>{const p=Jk(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(p))return Di(p,Qk(i,p));const v=i.property().children(p);return v.length>0?e_(i,v[v.length-1]):Di(p,Qk(i,p))},t_=e_,vc=Bf(),Vl=i=>t_(vc,i),R1=(i,m)=>{Tr(i)||Pr(i).each(v=>{const T=v.value/2;Qe(i,T,v.unit),Qe(m,T,v.unit)})},If=i=>ln(i,q(0)),By=(i,m,p,v,T)=>T(i.slice(0,m)).concat(v).concat(T(i.slice(p))),ep=i=>(m,p,v,T)=>{if(i(v)){const O=Math.max(T,m[p]-Math.abs(v)),I=Math.abs(O-m[p]);return v>=0?I:-I}else return v},um=ep(i=>i<0),tp=ep(Ae),Gg=()=>{const i=(Z,Q,ue,_e,ct)=>{const Lt=um(Z,Q,_e,ct);return By(Z,Q,ue+1,[Lt,0],If)},m=(Z,Q,ue,_e)=>{const ct=(100+ue)/100,Lt=Math.max(_e,(Z[Q]+ue)/ct);return ln(Z,(Dt,Tt)=>(Tt===Q?Lt:Dt/ct)-Dt)},p=(Z,Q,ue,_e,ct,Lt)=>Lt?m(Z,Q,_e,ct):i(Z,Q,ue,_e,ct);return{resizeTable:(Z,Q)=>Z(Q),clampTableDelta:um,calcLeftEdgeDeltas:p,calcMiddleDeltas:(Z,Q,ue,_e,ct,Lt,Dt)=>p(Z,ue,_e,ct,Lt,Dt),calcRightEdgeDeltas:(Z,Q,ue,_e,ct,Lt)=>{if(Lt)return m(Z,ue,_e,ct);{const Dt=um(Z,ue,_e,ct);return If(Z.slice(0,ue)).concat([Dt])}},calcRedestributedWidths:(Z,Q,ue,_e)=>{if(_e){const Lt=(Q+ue)/Q,Dt=ln(Z,Tt=>Tt/Lt);return{delta:Lt*100-100,newSizes:Dt}}else return{delta:ue,newSizes:Z}}}},Lf=()=>{const i=(I,Z,Q,ue,_e)=>{const ct=ue>=0?Q:Z,Lt=tp(I,ct,ue,_e);return By(I,Z,Q+1,[Lt,-Lt],If)};return{resizeTable:(I,Z,Q)=>{Q&&I(Z)},clampTableDelta:(I,Z,Q,ue,_e)=>{if(_e){if(Q>=0)return Q;{const ct=Ze(I,(Lt,Dt)=>Lt+Dt-ue,0);return Math.max(-ct,Q)}}else return um(I,Z,Q,ue)},calcLeftEdgeDeltas:i,calcMiddleDeltas:(I,Z,Q,ue,_e,ct)=>i(I,Q,ue,_e,ct),calcRightEdgeDeltas:(I,Z,Q,ue,_e,ct)=>{if(ct)return If(I);{const Lt=ue/I.length;return ln(I,q(Lt))}},calcRedestributedWidths:(I,Z,Q,ue)=>({delta:0,newSizes:I})}},dm=i=>wo.fromTable(i).grid,qg=tr("th"),Kg=i=>Vo(i,m=>qg(m.element)),n_=(i,m)=>i&&m?"sectionCells":i?"section":"cells",$y=i=>{const m=i.section==="thead",p=ni(lv(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:n_(m,p)}:{type:"body"}},lv=i=>{const m=mo(i,p=>qg(p.element));return m.length===0?le.some("td"):m.length===i.length?le.some("th"):le.none()},C2=i=>{const m=ln(i,T=>$y(T).type),p=lo(m,"header"),v=lo(m,"footer");if(!p&&!v)return le.some("body");{const T=lo(m,"body");return p&&!T&&!v?le.some("header"):!p&&!T&&v?le.some("footer"):le.none()}},Iy=i=>So(i.all,m=>{const p=$y(m);return p.type==="header"?le.from(p.subType):le.none()}),iv=(i,m,p)=>pe(p(i.element,m),!0,i.isLocked),Ly=(i,m)=>i.section!==m?ze(i.element,i.cells,m,i.isNew):i,uv=()=>({transformRow:Ly,transformCell:(i,m,p)=>{const v=p(i.element,m),T=ls(v)!=="td"?uc(v,"td"):v;return pe(T,i.isNew,i.isLocked)}}),np=()=>({transformRow:Ly,transformCell:iv}),dv=()=>({transformRow:(i,m)=>Ly(i,m==="thead"?"tbody":m),transformCell:iv}),Td={getTableSectionType:(i,m)=>{const p=wo.fromTable(i);switch(Iy(p).getOr(m)){case"section":return uv();case"sectionCells":return np();case"cells":return dv()}},section:uv,sectionCells:np,cells:dv,fallback:()=>({transformRow:Fe,transformCell:iv})},op=(i,m,p,v)=>{p===v?se(i,m):zs(i,m,p)},w2=(i,m,p)=>{vt(Yt(i,m)).fold(()=>As(i,p),v=>pa(v,p))},S2=(i,m)=>{const p=_o(i,m).getOrThunk(()=>{const v=he.fromTag(m,ra(i).dom);return m==="thead"?w2(i,"caption,colgroup",v):m==="colgroup"?w2(i,"caption",v):hs(i,v),v});return ba(p),p},mv=(i,m)=>{const p=[],v=[],T=Dt=>ln(Dt,Tt=>{Tt.isNew&&p.push(Tt.element);const on=Tt.element;return ba(on),Ke(Tt.cells,ot=>{ot.isNew&&v.push(ot.element),op(ot.element,"colspan",ot.colspan,1),op(ot.element,"rowspan",ot.rowspan,1),hs(on,ot.element)}),on}),O=Dt=>as(Dt,Tt=>ln(Tt.cells,on=>(op(on.element,"span",on.colspan,1),on.element))),I=(Dt,Tt)=>{const on=S2(i,Tt),kt=(Tt==="colgroup"?O:T)(Dt);Yr(on,kt)},Z=Dt=>{_o(i,Dt).each(Sr)},Q=(Dt,Tt)=>{Dt.length>0?I(Dt,Tt):Z(Tt)},ue=[],_e=[],ct=[],Lt=[];return Ke(m,Dt=>{switch(Dt.section){case"thead":ue.push(Dt);break;case"tbody":_e.push(Dt);break;case"tfoot":ct.push(Dt);break;case"colgroup":Lt.push(Dt);break}}),Q(Lt,"colgroup"),Q(ue,"thead"),Q(_e,"tbody"),Q(ct,"tfoot"),{newRows:p,newCells:v}},Ff=i=>ln(i,m=>{const p=Xr(m.element);return Ke(m.cells,v=>{const T=Ja(v.element);op(T,"colspan",v.colspan,1),op(T,"rowspan",v.rowspan,1),hs(p,T)}),p}),s_=(i,m)=>ln(i,p=>Il(p,m)),Fy=(i,m)=>i[m],M1=(i,m)=>{if(i.length===0)return 0;const p=i[0];return Lr(i,T=>!m(p.element,T.element)).getOr(i.length)},r_=(i,m,p,v)=>{const T=Fy(i,m),O=T.section==="colgroup",I=M1(T.cells.slice(p),v),Z=O?1:M1(s_(i.slice(m),p),v);return{colspan:I,rowspan:Z}},fv=(i,m)=>{const p=ln(i,T=>ln(T.cells,cn)),v=(T,O,I,Z)=>{for(let Q=T;Q<T+I;Q++)for(let ue=O;ue<O+Z;ue++)p[Q][ue]=!0};return ln(i,(T,O)=>{const I=as(T.cells,(Z,Q)=>{if(p[O][Q]===!1){const ue=r_(i,O,Q,m);return v(O,Q,ue.rowspan,ue.colspan),[Nu(Z.element,ue.rowspan,ue.colspan,Z.isNew)]}else return[]});return de(T.element,I,T.section,T.isNew)})},sp=(i,m,p)=>{const v=[];Ke(i.colgroups,T=>{const O=[];for(let I=0;I<i.grid.columns;I++){const Z=wo.getColumnAt(i,I).map(Q=>pe(Q.element,p,!1)).getOrThunk(()=>pe(m.colGap(),!0,!1));O.push(Z)}v.push(ze(T.element,O,"colgroup",p))});for(let T=0;T<i.grid.rows;T++){const O=[];for(let Q=0;Q<i.grid.columns;Q++){const ue=wo.getAt(i,T,Q).map(_e=>pe(_e.element,p,_e.isLocked)).getOrThunk(()=>pe(m.gap(),!0,!1));O.push(ue)}const I=i.all[T],Z=ze(I.element,O,I.section,p);v.push(Z)}return v},x2=(i,m)=>sp(i,m,!1),gv=i=>fv(i,ts),Hy=(i,m)=>So(i.all,p=>L(p.cells,v=>ts(m,v.element))),T2=(i,m,p)=>{const v=ln(m.selection,O=>Cf(O).bind(I=>Hy(i,I)).filter(p)),T=Ys(v);return Pm(T.length>0,T)},tl=(i,m,p,v,T)=>(O,I,Z,Q)=>{const ue=wo.fromTable(O),_e=le.from(Q==null?void 0:Q.section).getOrThunk(Td.fallback);return m(ue,I).map(Lt=>{const Dt=x2(ue,Z),Tt=i(Dt,Lt,ts,T(Z),_e),on=zi(Tt.grid),ot=gv(Tt.grid);return{info:Lt,grid:ot,cursor:Tt.cursor,lockedColumns:on}}).bind(Lt=>{const Dt=mv(O,Lt.grid),Tt=le.from(Q==null?void 0:Q.sizing).getOrThunk(()=>k.getTableSize(O)),on=le.from(Q==null?void 0:Q.resize).getOrThunk(Lf);return p(O,Lt.grid,Lt.info,{sizing:Tt,resize:on,section:_e}),v(O),se(O,oc),Lt.lockedColumns.length>0&&zs(O,oc,Lt.lockedColumns.join(",")),le.some({cursor:Lt.cursor,newRows:Dt.newRows,newCells:Dt.newCells})})},N1=(i,m)=>Cf(m.element).bind(p=>Hy(i,p).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Vy=(i,m)=>T2(i,m,Ae).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),rp=(i,m)=>m.mergable,E2=(i,m)=>m.unmergable,Ed=(i,m)=>T2(i,m,Ae),mi=(i,m)=>T2(i,m,p=>!p.isLocked),ap=(i,m)=>Hy(i,m).exists(p=>!p.isLocked),cp=(i,m)=>Vo(m,p=>ap(i,p)),P1=(i,m)=>rp(i,m).filter(p=>cp(i,p.cells)),a_=(i,m)=>E2(i,m).filter(p=>cp(i,p)),c_=(i,m,p,v)=>{const T=Qr(i).rows;if(T.length===0)return i;for(let O=m.startRow;O<=m.finishRow;O++)for(let I=m.startCol;I<=m.finishCol;I++){const Z=T[O],Q=Il(Z,I).isLocked;ao(Z,I,pe(v(),!1,Q))}return i},lp=(i,m,p,v)=>{const T=Qr(i).rows;let O=!0;for(let I=0;I<T.length;I++)for(let Z=0;Z<Rc(T[0]);Z++){const Q=T[I],ue=Il(Q,Z),_e=ue.element,ct=p(_e,m);ct&&!O?ao(Q,Z,pe(v(),!0,ue.isLocked)):ct&&(O=!1)}return i},Ri=(i,m)=>Ze(i,(p,v)=>rt(p,T=>m(T.element,v.element))?p:p.concat([v]),[]),k2=(i,m,p,v)=>(m>0&&m<i[0].cells.length&&Ke(i,T=>{const O=T.cells[m-1];let I=0;const Z=v();for(;T.cells.length>m+I&&p(O.element,T.cells[m+I].element);)ao(T,m+I,pe(Z,!0,T.cells[m+I].isLocked)),I++}),i),ia=(i,m,p,v)=>{const T=Qr(i).rows;if(m>0&&m<T.length){const O=T[m-1].cells,I=Ri(O,p);Ke(I,Z=>{let Q=le.none();for(let ue=m;ue<T.length;ue++)for(let _e=0;_e<Rc(T[0]);_e++){const ct=T[ue],Lt=Il(ct,_e);p(Lt.element,Z.element)&&(Q.isNone()&&(Q=le.some(v())),Q.each(Tt=>{ao(ct,_e,pe(Tt,!0,Lt.isLocked))}))}})}return i},Yg=i=>{const m=O=>O(i),p=q(i),v=()=>T,T={tag:!0,inner:i,fold:(O,I)=>I(i),isValue:Ae,isError:cn,map:O=>hv.value(O(i)),mapError:v,bind:m,exists:m,forall:m,getOr:p,or:v,getOrThunk:p,orThunk:v,getOrDie:p,each:O=>{O(i)},toOptional:()=>le.some(i)};return T},Mi=i=>{const m=()=>p,p={tag:!1,inner:i,fold:(v,T)=>v(i),isValue:cn,isError:Ae,map:m,mapError:v=>hv.error(v(i)),bind:m,exists:cn,forall:Ae,getOr:Fe,or:Fe,getOrThunk:Gt,orThunk:Gt,getOrDie:St(String(i)),each:tt,toOptional:le.none};return p},hv={value:Yg,error:Mi,fromOption:(i,m)=>i.fold(()=>Mi(m),Yg)},ip=(i,m,p)=>{if(i.row>=m.length||i.column>Rc(m[0]))return hv.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const v=m.slice(i.row),T=v[0].cells.slice(i.column),O=Rc(p[0]),I=p.length;return hv.value({rowDelta:v.length-I,colDelta:T.length-O})},Xg=(i,m)=>{const p=Rc(i[0]),v=Rc(m[0]);return{rowDelta:0,colDelta:p-v}},kd=(i,m)=>{const p=i.length,v=m.length;return{rowDelta:p-v,colDelta:0}},Ni=(i,m,p,v)=>{const T=m.section==="colgroup"?p.col:p.cell;return Ho(i,O=>pe(T(),!0,v(O)))},zy=(i,m,p,v)=>{const T=i[i.length-1];return i.concat(Ho(m,()=>{const O=T.section==="colgroup"?p.colgroup:p.row,I=Fg(T,O,Fe),Z=Ni(I.cells.length,I,p,Q=>Ne(v,Q.toString()));return Ra(I,Z)}))},Uy=(i,m,p,v)=>ln(i,T=>{const O=Ni(m,T,p,cn);return Im(T,v,O)}),Wy=(i,m,p)=>ln(i,v=>Ze(p,(T,O)=>{const I=Ni(1,v,m,Ae)[0];return Lg(T,O,I)},v)),Jg=(i,m,p)=>{const v=m.colDelta<0?Uy:Fe,T=m.rowDelta<0?zy:Fe,O=zi(i),I=Rc(i[0]),Z=rt(O,_e=>_e===I-1),Q=v(i,Math.abs(m.colDelta),p,Z?I-1:I),ue=zi(Q);return T(Q,Math.abs(m.rowDelta),p,An(ue,Ae))},l_=(i,m,p,v)=>{const T=Il(i[m],p),O=nt(v,T.element),I=i[m];return i.length>1&&Rc(I)>1&&(p>0&&O(Dc(I,p-1))||p<I.cells.length-1&&O(Dc(I,p+1))||m>0&&O(Dc(i[m-1],p))||m<i.length-1&&O(Dc(i[m+1],p)))},Qg=(i,m,p,v,T,O)=>{const I=i.row,Z=i.column,Q=p.length,ue=Rc(p[0]),_e=I+Q,ct=Z+ue+O.length,Lt=An(O,Ae);for(let Dt=I;Dt<_e;Dt++){let Tt=0;for(let on=Z;on<ct;on++){if(Lt[on]){Tt++;continue}l_(m,Dt,on,T)&&lp(m,Dc(m[Dt],on),T,v.cell);const ot=on-Z-Tt,kt=Il(p[Dt-I],ot),Pn=kt.element,Pt=v.replace(Pn);ao(m[Dt],on,pe(Pt,!0,kt.isLocked))}}return m},mm=(i,m,p)=>{const v=Rc(m[0]),T=Qr(m).cols.length+i.row,O=Ho(v-i.column,Z=>Z+i.column),I=L(O,Z=>Vo(p,Q=>Q!==Z)).getOr(v-1);return{row:T,column:I}},B1=(i,m,p)=>mo(p,v=>v>=i.column&&v<=Rc(m[0])+i.column),Zo=(i,m,p,v,T)=>{const O=zi(m),I=mm(i,m,O),Z=Qr(p).rows,Q=B1(I,Z,O);return ip(I,m,Z).map(_e=>{const ct={..._e,colDelta:_e.colDelta-Q.length},Lt=Jg(m,ct,v),Dt=zi(Lt),Tt=B1(I,Z,Dt);return Qg(I,Lt,Z,v,T,Tt)})},zl=(i,m,p,v,T)=>{k2(m,i,T,v.cell);const O=kd(p,m),I=Jg(p,O,v),Z=kd(m,I),Q=Jg(m,Z,v);return ln(Q,(ue,_e)=>Im(ue,i,I[_e].cells))},Cu=(i,m,p,v,T)=>{ia(m,i,T,v.cell);const O=zi(m),I=Xg(m,p),Z={...I,colDelta:I.colDelta-O.length},Q=Jg(m,Z,v),{cols:ue,rows:_e}=Qr(Q),ct=zi(Q),Lt=Xg(p,m),Dt={...Lt,colDelta:Lt.colDelta+ct.length},Tt=Wy(p,v,ct),on=Jg(Tt,Dt,v);return[...ue,..._e.slice(0,i),...on,..._e.slice(i,_e.length)]},Gm=(i,m,p,v)=>Fg(i,T=>v(T,p),m),cr=(i,m,p,v,T)=>{const{rows:O,cols:I}=Qr(i),Z=O.slice(0,m),Q=O.slice(m),ue=Gm(O[p],(_e,ct)=>m>0&&m<O.length&&v(Dc(O[m-1],ct),Dc(O[m],ct))?Il(O[m],ct):pe(T(_e.element,v),!0,_e.isLocked),v,T);return[...I,...Z,ue,...Q]},_2=(i,m,p,v,T,O,I)=>{if(p==="colgroup"||!v){const Z=Il(i,T);return pe(I(Z.element,O),!0,!1)}else return Il(i,m)},pv=(i,m,p,v,T)=>ln(i,O=>{const I=m>0&&m<Rc(O)&&v(Dc(O,m-1),Dc(O,m)),Z=_2(O,m,O.section,I,p,v,T);return Lg(O,m,Z)}),$1=(i,m)=>as(i,p=>{const v=p.cells,T=qs(m,(O,I)=>I>=0&&I<O.length?O.slice(0,I).concat(O.slice(I+1)):O,v);return T.length>0?[ze(p.element,T,p.section,p.isNew)]:[]}),bv=(i,m,p)=>{const{rows:v,cols:T}=Qr(i);return[...T,...v.slice(0,m),...v.slice(p+1)]},i_=(i,m,p,v)=>Dc(i[m],p)!==void 0&&m>0&&v(Dc(i[m-1],p),Dc(i[m],p)),Br=(i,m,p)=>m>0&&p(Dc(i,m-1),Dc(i,m)),Zy=(i,m,p,v)=>i_(i,m,p,v)||Br(i[m],p,v),u_=(i,m)=>Vo(m,Fe)&&Kg(i.cells)?Ae:(v,T,O)=>!(ls(v.element)==="th"&&m[O]),d_=(i,m)=>Vo(m,Fe)&&Kg(i)?Ae:(v,T,O)=>!(ls(v.element)==="th"&&m[T]),up=(i,m,p,v)=>{const T=I=>I==="row"?yr(m):Tr(m),O=I=>T(I)?`${I}group`:I;return i?qg(m)?O(p):null:v&&qg(m)?O(p==="row"?"col":"row"):null},jt=(i,m)=>(p,v,T)=>le.some(up(i,p.element,"col",m[T])),m_=(i,m)=>(p,v)=>le.some(up(i,p.element,"row",m[v])),A2=(i,m,p)=>pe(p(i.element,m),!0,i.isLocked),vv=(i,m,p,v,T,O,I)=>{const Z=Q=>rt(m,ue=>p(Q.element,ue.element));return ln(i,(Q,ue)=>yl(Q,(_e,ct)=>{if(Z(_e)){const Lt=I(_e,ue,ct)?T(_e,p,v):_e;return O(Lt,ue,ct).each(Dt=>{gl(Lt.element,{scope:le.from(Dt)})}),Lt}else return _e}))},jy=(i,m,p)=>as(i,(v,T)=>Zy(i,T,m,p)?[]:[Il(v,m)]),f_=(i,m,p)=>{const v=i[m];return as(v.cells,(T,O)=>Zy(i,m,O,p)?[]:[T])},I1=(i,m,p,v,T)=>{const O=Qr(i).rows,I=as(m,_e=>jy(O,_e,v)),Z=ln(O,_e=>Kg(_e.cells)),Q=d_(I,Z),ue=m_(p,Z);return vv(i,I,v,T,A2,ue,Q)},L1=(i,m,p,v,T,O,I)=>{const{cols:Z,rows:Q}=Qr(i),ue=Q[m[0]],_e=as(m,ot=>f_(Q,ot,T)),ct=ln(ue.cells,(ot,kt)=>Kg(jy(Q,kt,T))),Lt=[...Q];Ke(m,ot=>{Lt[ot]=I.transformRow(Q[ot],p)});const Dt=[...Z,...Lt],Tt=u_(ue,ct),on=jt(v,ct);return vv(Dt,_e,T,O,I.transformCell,on,Tt)},eh=(i,m,p,v)=>{const T=Qr(i).rows,O=ln(m,I=>Il(T[I.row],I.column));return vv(i,O,p,v,A2,le.none,Ae)},fm={generate:i=>{if(!qt(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],p={};return Ke(i,(v,T)=>{const O=It(v);if(O.length!==1)throw new Error("one and only one name per case");const I=O[0],Z=v[I];if(p[I]!==void 0)throw new Error("duplicate key detected:"+I);if(I==="cata")throw new Error("cannot have a case named cata (sorry)");if(!qt(Z))throw new Error("case arguments must be an array");m.push(I),p[I]=(...Q)=>{const ue=Q.length;if(ue!==Z.length)throw new Error("Wrong number of arguments to case "+I+". Expected "+Z.length+" ("+Z+"), got "+ue);return{fold:(...ct)=>{if(ct.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+ct.length);return ct[T].apply(null,Q)},match:ct=>{const Lt=It(ct);if(m.length!==Lt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Lt.join(","));if(!Vo(m,Tt=>lo(Lt,Tt)))throw new Error("Not all branches were specified when using match. Specified: "+Lt.join(", ")+`
Required: `+m.join(", "));return ct[I].apply(null,Q)},log:ct=>{console.log(ct,{constructors:m,constructor:I,params:Q})}}}}),p}},qm={...fm.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},O2=(i,m)=>i.length===0?qm.none():i.length===1?qm.only(0):m===0?qm.left(0,1):m===i.length-1?qm.right(m-1,m):m>0&&m<i.length-1?qm.middle(m-1,m,m+1):qm.none(),_d=(i,m,p,v,T)=>{const O=i.slice(0),I=O2(i,m),Z=q(ln(O,q(0))),Q=Lt=>v.singleColumnWidth(O[Lt],p),ue=(Lt,Dt)=>T.calcLeftEdgeDeltas(O,Lt,Dt,p,v.minCellWidth(),v.isRelative),_e=(Lt,Dt,Tt)=>T.calcMiddleDeltas(O,Lt,Dt,Tt,p,v.minCellWidth(),v.isRelative),ct=(Lt,Dt)=>T.calcRightEdgeDeltas(O,Lt,Dt,p,v.minCellWidth(),v.isRelative);return I.fold(Z,Q,ue,_e,ct)},D2=(i,m,p)=>{let v=0;for(let T=i;T<m;T++)v+=p[T]!==void 0?p[T]:0;return v},dp=(i,m)=>{const p=wo.justCells(i);return ln(p,v=>{const T=D2(v.column,v.column+v.colspan,m);return{element:v.element,width:T,colspan:v.colspan}})},h_=(i,m)=>{const p=wo.justColumns(i);return ln(p,(v,T)=>({element:v.element,width:m[T],colspan:v.colspan}))},p_=(i,m)=>ln(i.all,(p,v)=>({element:p.element,height:m[v]})),b_=i=>qs(i,(m,p)=>m+p,0),Gy=(i,m)=>wo.hasColumns(i)?h_(i,m):dp(i,m),yv=(i,m,p)=>{const v=Gy(i,m);Ke(v,T=>{p.setElementWidth(T.element,T.width)})},R2=(i,m,p,v,T)=>{const O=wo.fromTable(i),I=T.getCellDelta(m),Z=T.getWidths(O,T),Q=p===O.grid.columns-1,ue=v.clampTableDelta(Z,p,I,T.minCellWidth(),Q),_e=_d(Z,p,ue,T,v),ct=ln(_e,(Lt,Dt)=>Lt+Z[Dt]);yv(O,ct,T),v.resizeTable(T.adjustTableWidth,ue,Q)},qy=(i,m,p)=>{const v=wo.fromTable(i),T=ke(v,i),O=ln(T,(Q,ue)=>p===ue?Math.max(m+Q,_a()):Q),I=p_(v,O);Ke(I,Q=>{pu(Q.element,Q.height)}),Ke(wo.justCells(v),Q=>{Ty(Q.element)});const Z=b_(O);pu(i,Z)},v_=(i,m,p,v,T)=>{const O=wo.generate(m),I=v.getWidths(O,v),Z=v.pixelWidth(),{newSizes:Q,delta:ue}=T.calcRedestributedWidths(I,Z,p.pixelDelta,v.isRelative);yv(O,Q,v),v.adjustTableWidth(ue)},F1=(i,m,p,v)=>{const T=wo.generate(m),O=v.getWidths(T,v);yv(T,O,v)},Hf=i=>Ze(i,(p,v)=>rt(p,O=>O.column===v.column)?p:p.concat([v]),[]).sort((p,v)=>p.column-v.column),mp=tr("col"),Cv=tr("colgroup"),Ky=i=>ls(i)==="tr"||Cv(i),wv=i=>{const m=js(i,"colspan",1),p=js(i,"rowspan",1);return{element:i,colspan:m,rowspan:p}},Yy=(i,m=wv)=>{const p=Z=>mp(Z.element)?i.col(Z):i.cell(Z),v=Z=>Cv(Z.element)?i.colgroup(Z):i.row(Z),T=Z=>{if(Ky(Z))return v({element:Z});{const Q=Z,ue=p(m(Q));return O=le.some({item:Q,replacement:ue}),ue}};let O=le.none();return{getOrInit:(Z,Q)=>O.fold(()=>T(Z),ue=>Q(Z,ue.item)?ue.replacement:T(Z))}},Xy=i=>m=>{const p=[],v=(I,Z)=>L(p,Q=>Z(Q.item,I)),T=I=>{const Z=i==="td"?{scope:null}:{},Q=m.replace(I,i,Z);return p.push({item:I,sub:Q}),Q};return{replaceOrInit:(I,Z)=>{if(Ky(I)||mp(I))return I;{const Q=I;return v(Q,Z).fold(()=>T(Q),ue=>Z(I,ue.item)?ue.sub:T(Q))}}}},Jy=i=>ce(i,"scope").map(m=>m.substr(0,3)),Pc={modification:Yy,transform:Xy,merging:i=>({unmerge:v=>{const T=Jy(v);return T.each(O=>zs(v,"scope",O)),()=>{const O=i.cell({element:v,colspan:1,rowspan:1});return Co(O,"width"),Co(v,"width"),T.each(I=>zs(O,"scope",I)),O}},merge:v=>{const T=()=>{const O=Ys(ln(v,Jy));if(O.length===0)return le.none();{const I=O[0],Z=["row","col"];return rt(O,ue=>ue!==I&&lo(Z,ue))?le.none():le.from(I)}};return Co(v[0],"width"),T().fold(()=>se(v[0],"scope"),O=>zs(v[0],"scope",O+"group")),q(v[0])}})},y_=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],N2=(i,m)=>{const p=i.property().name(m);return lo(["ol","ul"],p)},Vf=(i,m)=>{const p=i.property().name(m);return lo(y_,p)},th=(i,m)=>lo(["br","img","hr","input"],i.property().name(m)),Qy=Bf(),Pe=i=>Vf(Qy,i),gm=i=>N2(Qy,i),C_=i=>th(Qy,i),P2=i=>{const m=tr("br"),p=Q=>Vo(Q,ue=>m(ue)||Xa(ue)&&gr(ue).trim().length===0),v=Q=>ls(Q)==="li"||xs(Q,gm).isSome(),T=Q=>Xc(Q).map(ue=>Pe(ue)?!0:C_(ue)?ls(ue)!=="img":!1).getOr(!1),O=Q=>Of(Q).bind(ue=>{const _e=T(ue);return vr(ue).map(ct=>_e===!0||v(ct)||m(ue)||Pe(ct)&&!ts(Q,ct)?[]:[he.fromTag("br")])}).getOr([]),Z=(()=>{const Q=as(i,ue=>{const _e=Uo(ue);return p(_e)?[]:_e.concat(O(ue))});return Q.length===0?[he.fromTag("br")]:Q})();ba(i[0]),Yr(i[0],Z)},H1=i=>S1(i,!0),wu=i=>{Bu(i).length===0&&Sr(i)},V1=(i,m)=>({grid:i,cursor:m}),B2=i=>So(i,m=>So(m.cells,p=>{const v=p.element;return Pm(H1(v),v)})),eC=(i,m,p)=>{var v,T;const O=Qr(i).rows;return le.from((T=(v=O[m])===null||v===void 0?void 0:v.cells[p])===null||T===void 0?void 0:T.element).filter(H1).orThunk(()=>B2(O))},xl=(i,m,p)=>{const v=eC(i,m,p);return V1(i,v)},Sv=i=>Ze(i,(p,v)=>rt(p,O=>O.row===v.row)?p:p.concat([v]),[]).sort((p,v)=>p.row-v.row),$2=(i,m,p,v)=>{const T=m[0].row,O=Sv(m),I=qs(O,(Z,Q)=>({grid:cr(Z.grid,T,Q.row+Z.delta,p,v.getOrInit),delta:Z.delta+1}),{grid:i,delta:0}).grid;return xl(I,T,m[0].column)},w_=(i,m,p,v)=>{const T=Sv(m),O=T[T.length-1],I=O.row+O.rowspan,Z=qs(T,(Q,ue)=>cr(Q,I,ue.row,p,v.getOrInit),i);return xl(Z,I,m[0].column)},I2=(i,m,p,v)=>{const T=m.details,O=Hf(T),I=O[0].column,Z=qs(O,(Q,ue)=>({grid:pv(Q.grid,I,ue.column+Q.delta,p,v.getOrInit),delta:Q.delta+1}),{grid:i,delta:0}).grid;return xl(Z,T[0].row,I)},S_=(i,m,p,v)=>{const T=m.details,O=T[T.length-1],I=O.column+O.colspan,Z=Hf(T),Q=qs(Z,(ue,_e)=>pv(ue,I,_e.column,p,v.getOrInit),i);return xl(Q,T[0].row,I)},L2=(i,m,p,v)=>{const T=Hf(m),O=ln(T,Z=>Z.column),I=I1(i,O,!0,p,v.replaceOrInit);return xl(I,m[0].row,m[0].column)},x_=(i,m,p,v)=>{const T=eh(i,m,p,v.replaceOrInit);return xl(T,m[0].row,m[0].column)},T_=(i,m,p,v)=>{const T=Hf(m),O=ln(T,Z=>Z.column),I=I1(i,O,!1,p,v.replaceOrInit);return xl(I,m[0].row,m[0].column)},F2=(i,m,p,v)=>{const T=eh(i,m,p,v.replaceOrInit);return xl(T,m[0].row,m[0].column)},fp=(i,m)=>(p,v,T,O,I)=>{const Z=Sv(v),Q=ln(Z,_e=>_e.row),ue=L1(p,Q,i,m,T,O.replaceOrInit,I);return xl(ue,v[0].row,v[0].column)},E_=fp("thead",!0),H2=fp("tbody",!1),na=fp("tfoot",!1),xv=(i,m,p,v)=>{const T=Hf(m.details),O=$1(i,ln(T,Z=>Z.column)),I=O.length>0?O[0].cells.length-1:0;return xl(O,T[0].row,Math.min(T[0].column,I))},V2=(i,m,p,v)=>{const T=Sv(m),O=bv(i,T[0].row,T[T.length-1].row),I=Math.max(Qr(O).rows.length-1,0);return xl(O,Math.min(m[0].row,I),m[0].column)},z2=(i,m,p,v)=>{const T=m.cells;P2(T);const O=c_(i,m.bounds,p,v.merge(T));return V1(O,le.from(T[0]))},Tv=(i,m,p,v)=>{const O=qs(m,(I,Z)=>lp(I,Z,p,v.unmerge(Z)),i);return V1(O,le.from(m[0]))},nl=(i,m,p,v)=>{const O=((Q,ue)=>{const _e=wo.fromTable(Q);return sp(_e,ue,!0)})(m.clipboard,m.generators),I=Pl(m.row,m.column);return Zo(I,i,O,m.generators,p).fold(()=>V1(i,le.some(m.element)),Q=>xl(Q,m.row,m.column))},Tl=(i,m,p)=>{const v=Dg(i,p.section),T=wo.generate(v);return sp(T,m,!0)},U2=(i,m,p,v)=>{const T=Qr(i).rows,O=m.cells[0].column,I=T[m.cells[0].row],Z=Tl(m.clipboard,m.generators,I),Q=zl(O,i,Z,m.generators,p);return xl(Q,m.cells[0].row,m.cells[0].column)},W2=(i,m,p,v)=>{const T=Qr(i).rows,O=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,I=T[m.cells[0].row],Z=Tl(m.clipboard,m.generators,I),Q=zl(O,i,Z,m.generators,p);return xl(Q,m.cells[0].row,O)},tC=(i,m,p,v)=>{const T=Qr(i).rows,O=m.cells[0].row,I=T[O],Z=Tl(m.clipboard,m.generators,I),Q=Cu(O,i,Z,m.generators,p);return xl(Q,m.cells[0].row,m.cells[0].column)},Z2=(i,m,p,v)=>{const T=Qr(i).rows,O=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,I=T[m.cells[0].row],Z=Tl(m.clipboard,m.generators,I),Q=Cu(O,i,Z,m.generators,p);return xl(Q,O,m.cells[0].column)},j2=(i,m)=>{const p=wo.fromTable(i);return Ed(p,m).bind(T=>{const O=T[T.length-1],I=T[0].column,Z=O.column+O.colspan,Q=io(ln(p.all,ue=>mo(ue.cells,_e=>_e.column>=I&&_e.column<Z)));return lv(Q)}).getOr("")},nC=(i,m)=>{const p=wo.fromTable(i);return Ed(p,m).bind(lv).getOr("")},oC=(i,m)=>{const p=wo.fromTable(i);return Ed(p,m).bind(T=>{const O=T[T.length-1],I=T[0].row,Z=O.row+O.rowspan,Q=p.all.slice(I,Z);return C2(Q)}).getOr("")},Ev=(i,m,p,v)=>F1(i,m,p,v.sizing),Km=(i,m,p,v)=>v_(i,m,p,v.sizing,v.resize),Ul=(i,m)=>rt(m,p=>p.column===0&&p.isLocked),sC=(i,m)=>rt(m,p=>p.column+p.colspan>=i.grid.columns&&p.isLocked),Cs=(i,m)=>{const p=vd(i),v=Hf(m);return Ze(v,(T,O)=>{const Z=p[O.column].map(os).getOr(0);return T+Z},0)},Ad=i=>(m,p)=>Ed(m,p).filter(v=>!(i?Ul:sC)(m,v)).map(v=>({details:v,pixelDelta:Cs(m,v)})),z1=(i,m)=>mi(i,m).map(p=>({details:p,pixelDelta:-Cs(i,p)})),G2=i=>(m,p)=>Vy(m,p).filter(v=>!(i?Ul:sC)(m,v.cells)),kv=Pc.transform("th"),_v=Pc.transform("td"),zf=tl($2,Ed,tt,tt,Pc.modification),Bc=tl(w_,Ed,tt,tt,Pc.modification),Uf=tl(I2,Ad(!0),Km,tt,Pc.modification),rC=tl(S_,Ad(!1),Km,tt,Pc.modification),q2=tl(xv,z1,Km,wu,Pc.modification),k_=tl(V2,Ed,tt,wu,Pc.modification),gp=tl(L2,mi,tt,tt,kv),aC=tl(T_,mi,tt,tt,_v),cC=tl(E_,mi,tt,tt,kv),lC=tl(H2,mi,tt,tt,_v),iC=tl(na,mi,tt,tt,_v),Kt=tl(x_,mi,tt,tt,kv),U1=tl(F2,mi,tt,tt,_v),uC=tl(z2,P1,Ev,tt,Pc.merging),hp=tl(Tv,a_,Ev,tt,Pc.merging),Ku=tl(nl,N1,Ev,tt,Pc.modification),__=tl(U2,G2(!0),tt,tt,Pc.modification),$c=tl(W2,G2(!1),tt,tt,Pc.modification),A_=tl(tC,Vy,tt,tt,Pc.modification),Wf=tl(Z2,Vy,tt,tt,Pc.modification),dC=j2,K2=nC,ol=oC,Zf=(i,m)=>i.dispatch("NewRow",{node:m}),Av=(i,m)=>i.dispatch("NewCell",{node:m}),jf=(i,m,p)=>{i.dispatch("TableModified",{...p,table:m})},O_=(i,m,p,v,T)=>{i.dispatch("TableSelectionChange",{cells:m,start:p,finish:v,otherCells:T})},D_=i=>{i.dispatch("TableSelectionClear")},Za=(i,m,p,v,T)=>{i.dispatch("ObjectResizeStart",{target:m,width:p,height:v,origin:T})},Na=(i,m,p,v,T)=>{i.dispatch("ObjectResized",{target:m,width:p,height:v,origin:T})},ja={structure:!1,style:!0},Os={structure:!0,style:!1},cc={structure:!0,style:!0},Pa=(i,m)=>Um(i)?k.percentageSize(m):Mf(i)?k.pixelSize(m):k.getTableSize(m),mC=(i,m,p)=>{const v=oa=>ls(Zg(oa))==="table",T=oa=>!v(i)||dm(oa).rows>1,O=oa=>!v(i)||dm(oa).columns>1,I=r2(i),Z=ky(i)?tt:R1,Q=oa=>{switch(Rf(i)){case"section":return Td.section();case"sectionCells":return Td.sectionCells();case"cells":return Td.cells();default:return Td.getTableSectionType(oa,"section")}},ue=(oa,Cm)=>Cm.cursor.fold(()=>{const mb=Bu(oa);return we(mb).filter(Ns).map($i=>{p.clearSelectedCells(oa.dom);const oo=i.dom.createRng();return oo.selectNode($i.dom),i.selection.setRng(oo),zs($i,"data-mce-selected","1"),oo})},mb=>{const $i=Vl(mb),oo=i.dom.createRng();return oo.setStart($i.element.dom,$i.offset),oo.setEnd($i.element.dom,$i.offset),i.selection.setRng(oo),p.clearSelectedCells(oa.dom),le.some(oo)}),_e=(oa,Cm,mb,$i)=>(oo,mw,fw=!1)=>{el(oo);const w0=he.fromDom(i.getDoc()),nT=Cd(mb,w0,I),yh={sizing:Pa(i,oo),resize:ky(i)?Gg():Lf(),section:Q(oo)};return Cm(oo)?oa(oo,mw,nT,yh).bind(sf=>{m.refresh(oo.dom),Ke(sf.newRows,fb=>{Zf(i,fb.dom)}),Ke(sf.newCells,fb=>{Av(i,fb.dom)});const oT=ue(oo,sf);return Ns(oo)&&(el(oo),fw||jf(i,oo.dom,$i)),oT.map(fb=>({rng:fb,effect:$i}))}):le.none()},ct=_e(k_,T,tt,Os),Lt=_e(q2,O,tt,Os),Dt=_e(zf,Ae,tt,Os),Tt=_e(Bc,Ae,tt,Os),on=_e(Uf,Ae,Z,Os),ot=_e(rC,Ae,Z,Os),kt=_e(uC,Ae,tt,Os),Pn=_e(hp,Ae,tt,Os),Pt=_e(__,Ae,tt,Os),us=_e($c,Ae,tt,Os),Ds=_e(A_,Ae,tt,Os),Ts=_e(Wf,Ae,tt,Os),Lc=_e(Ku,Ae,tt,cc),Ba=_e(Kt,Ae,tt,Os),ym=_e(U1,Ae,tt,Os),ag=_e(gp,Ae,tt,Os),cg=_e(aC,Ae,tt,Os),ws=_e(cC,Ae,tt,Os),ql=_e(lC,Ae,tt,Os),Kl=_e(iC,Ae,tt,Os);return{deleteRow:ct,deleteColumn:Lt,insertRowsBefore:Dt,insertRowsAfter:Tt,insertColumnsBefore:on,insertColumnsAfter:ot,mergeCells:kt,unmergeCells:Pn,pasteColsBefore:Pt,pasteColsAfter:us,pasteRowsBefore:Ds,pasteRowsAfter:Ts,pasteCells:Lc,makeCellsHeader:Ba,unmakeCellsHeader:ym,makeColumnsHeader:ag,unmakeColumnsHeader:cg,makeRowsHeader:ws,makeRowsBody:ql,makeRowsFooter:Kl,getTableRowType:ol,getTableCellType:K2,getTableColType:dC}},Ov=(i,m,p)=>{const v=js(i,m,1);p===1||v<=1?se(i,m):zs(i,m,Math.min(p,v))},fC=(i,m)=>p=>{const v=p.column+p.colspan-1,T=p.column;return v>=i&&T<m},Y2=(i,m,p)=>{if(wo.hasColumns(i)){const v=mo(wo.justColumns(i),fC(m,p)),T=ln(v,I=>{const Z=Ja(I.element);return Ov(Z,"span",p-m),Z}),O=he.fromTag("colgroup");return Yr(O,T),[O]}else return[]},X2=(i,m,p)=>ln(i.all,v=>{const T=mo(v.cells,fC(m,p)),O=ln(T,Z=>{const Q=Ja(Z.element);return Ov(Q,"colspan",p-m),Q}),I=he.fromTag("tr");return Yr(I,O),I}),Dv=(i,m)=>{const p=wo.fromTable(i);return mi(p,m).map(T=>{const O=T[T.length-1],I=T[0].column,Z=O.column+O.colspan,Q=Y2(p,I,Z),ue=X2(p,I,Z);return[...Q,...ue]})},Rv=(i,m,p)=>{const v=wo.fromTable(i);return Ed(v,m).bind(O=>{const I=sp(v,p,!1),Q=Qr(I).rows.slice(O[0].row,O[O.length-1].row+O[O.length-1].rowspan),ue=as(Q,ct=>{const Lt=mo(ct.cells,Dt=>!Dt.isLocked);return Lt.length>0?[{...ct,cells:Lt}]:[]}),_e=gv(ue);return Pm(_e.length>0,_e)}).map(O=>Ff(O))},nh=fm.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),gC=(i,m,p)=>{const v=p.substring(0,p.length-i.length),T=parseFloat(v);return v===T.toString()?m(T):nh.invalid(p)},oh={...nh,from:i=>tc(i,"%")?gC("%",nh.percent,i):tc(i,"px")?gC("px",nh.pixels,i):nh.invalid(i)},R_=(i,m)=>ln(i,p=>oh.from(p).fold(()=>p,T=>T/m*100+"%",T=>T+"%")),fi=(i,m,p)=>{const v=p/m;return ln(i,T=>oh.from(T).fold(()=>T,I=>I*v+"px",I=>I/100*p+"px"))},OR=(i,m)=>{const p=i.fold(()=>q(""),v=>{const T=v/m;return q(T+"px")},()=>{const v=100/m;return q(v+"%")});return Ho(m,p)},M_=(i,m,p)=>i.fold(()=>m,v=>fi(m,p,v),v=>R_(m,p)),Ki=(i,m,p)=>{const v=oh.from(p),T=Vo(i,O=>O==="0px")?OR(v,i.length):M_(v,i,m);return Wl(T)},W1=(i,m)=>i.length===0?m:qs(i,(p,v)=>oh.from(v).fold(q(0),Fe,Fe)+p,0),Z1=(i,m)=>{const p=Math.floor(i);return{value:p+m,remainder:i-p}},Od=(i,m)=>oh.from(i).fold(q(i),p=>p+m+"px",p=>p+m+"%"),Wl=i=>{if(i.length===0)return i;const m=qs(i,(v,T)=>{const O=oh.from(T).fold(()=>({value:T,remainder:0}),I=>Z1(I,"px"),I=>({value:I+"%",remainder:0}));return{output:[O.value].concat(v.output),remainder:v.remainder+O.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([Od(p[p.length-1],Math.round(m.remainder))])},Gf=oh.from,hC=(i,m,p)=>{Ke(m,v=>{const T=i.slice(v.column,v.colspan+v.column),O=W1(T,oi());Re(v.element,"width",O+p)})},Mv=(i,m,p)=>{Ke(m,(v,T)=>{const O=W1([i[T]],oi());Re(v.element,"width",O+p)})},J2=(i,m,p)=>{Ke(p,v=>{Co(v.element,"height")}),Ke(m,(v,T)=>{Re(v.element,"height",i[T])})},sh=i=>Gf(i).fold(q("px"),q("px"),q("%")),pC=(i,m,p)=>{const v=wo.fromTable(i),T=v.all,O=wo.justCells(v),I=wo.justColumns(v);m.each(Z=>{const Q=sh(Z),ue=Gc(i),_e=om(v,i),ct=Ki(_e,ue,Z);wo.hasColumns(v)?Mv(ct,I,Q):hC(ct,O,Q),Re(i,"width",Z)}),p.each(Z=>{const Q=R(i),ue=rr(v,i),_e=Ki(ue,Q,Z);J2(_e,T,O),Re(i,"height",Z)})},bC=Hu,Q2=Vu,ex=Zi,j1=i=>{se(i,"width"),se(i,"height")},rh=i=>{const m=Gr(i);pC(i,le.some(m),le.none()),j1(i)},vC=i=>{const m=ta(i);pC(i,le.some(m),le.none()),j1(i)},yC=i=>{const m=fr(i);pC(i,le.none(),le.some(m)),j1(i)},tx=i=>{Co(i,"width");const m=si(i),p=m.length>0?m:Bu(i);Ke(p,v=>{Co(v,"width"),j1(v)}),j1(i)},nx={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},N_=()=>he.fromTag("th"),Nv=()=>he.fromTag("td"),ox=()=>he.fromTag("col"),P_=(i,m,p,v)=>{const T=he.fromTag("tr");for(let O=0;O<i;O++){const I=v<m||O<p?N_():Nv();O<p&&zs(I,"scope","row"),v<m&&zs(I,"scope","col"),hs(I,he.fromTag("br")),hs(T,I)}return T},sx=i=>{const m=he.fromTag("colgroup");return Ho(i,()=>hs(m,ox())),m},G1=(i,m,p,v)=>Ho(i,T=>P_(m,p,v,T)),B_=(i,m,p,v,T,O=nx)=>{const I=he.fromTag("table"),Z=T!=="cells";hn(I,O.styles),La(I,O.attributes),O.colGroups&&hs(I,sx(m));const Q=Math.min(i,p);if(Z&&p>0){const Dt=he.fromTag("thead");hs(I,Dt);const on=G1(p,m,T==="sectionCells"?Q:0,v);Yr(Dt,on)}const ue=he.fromTag("tbody");hs(I,ue);const _e=Z?i-Q:i,Lt=G1(_e,m,Z?0:p,v);return Yr(ue,Lt),I},rx=i=>i.dom.innerHTML,Zl=i=>{const m=he.fromTag("div"),p=he.fromDom(i.dom.cloneNode(!0));return hs(m,p),rx(m)},CC=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},wC=(i,m)=>{ec(m,"td,th").each(nt(CC,i))},SC=(i,m)=>{Ke(Ws(m,"tr"),p=>{Zf(i,p.dom),Ke(Ws(p,"th,td"),v=>{Av(i,v.dom)})})},Pv=i=>Zn(i)&&i.indexOf("%")!==-1,$_=(i,m,p,v,T)=>{const O=bc(i),I={styles:O,attributes:Nf(i),colGroups:nv(i)};return i.undoManager.ignore(()=>{const Z=B_(p,m,T,v,Rf(i),I);zs(Z,"data-mce-id","__mce");const Q=Zl(Z);i.insertContent(Q),i.addVisual()}),ec(Zg(i),'table[data-mce-id="__mce"]').map(Z=>(Mf(i)?vC(Z):ju(i)?tx(Z):(Um(i)||Pv(O.width))&&rh(Z),el(Z),se(Z,"data-mce-id"),SC(i,Z),wC(i,Z),Z.dom)).getOrNull()},I_=(i,m,p,v={})=>{const T=O=>qe(O)&&O>0;if(T(m)&&T(p)){const O=v.headerRows||0,I=v.headerColumns||0;return $_(i,p,m,I,O)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Bv=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const ax="x-tinymce/dom-table-",xC=ax+"rows",TC=ax+"columns",q1=i=>{const m=Bv.FakeClipboardItem(i);Bv.write([m])},EC=i=>{var m;const p=(m=Bv.read())!==null&&m!==void 0?m:[];return So(p,v=>le.from(v.getType(i)))},cx=i=>{EC(i).isSome()&&Bv.clear()},lx=i=>{i.fold(L_,m=>q1({[xC]:m}))},ix=()=>EC(xC),L_=()=>cx(xC),ux=i=>{i.fold(mx,m=>q1({[TC]:m}))},dx=()=>EC(TC),mx=()=>cx(TC),$v=i=>v2(Gu(i),lm(i)).filter(E1),pp=i=>Py(Gu(i),lm(i)).filter(E1),fx=(i,m)=>{const p=lm(i),v=()=>$v(i).each(ot=>{Oc(ot,p).filter(W(p)).each(kt=>{const Pn=he.fromText("");if(pa(kt,Pn),Sr(kt),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const Pt=i.dom.createRng();Pt.setStart(Pn.dom,0),Pt.setEnd(Pn.dom,0),i.selection.setRng(Pt),i.nodeChanged()}})}),T=ot=>$v(i).each(kt=>{ju(i)||Mf(i)||Um(i)||Oc(kt,p).each(Pt=>{ot==="relative"&&!bC(Pt)?rh(Pt):ot==="fixed"&&!Q2(Pt)?vC(Pt):ot==="responsive"&&!ex(Pt)&&tx(Pt),el(Pt),jf(i,Pt.dom,Os)})}),O=ot=>Oc(ot,p),I=ot=>pp(i).bind(kt=>O(kt).map(Pn=>ot(Pn,kt))),Z=(ot,kt)=>{I(Pn=>{i.formatter.toggle("tableclass",{value:kt},Pn.dom),jf(i,Pn.dom,ja)})},Q=(ot,kt)=>{I(Pn=>{const Pt=ar(i),Ds=Vo(Pt,Ts=>i.formatter.match("tablecellclass",{value:kt},Ts.dom))?i.formatter.remove:i.formatter.apply;Ke(Pt,Ts=>Ds("tablecellclass",{value:kt},Ts.dom)),jf(i,Pn.dom,ja)})},ue=()=>{$v(i).each(ot=>{Oc(ot,p).each(kt=>{_o(kt,"caption").fold(()=>{const Pn=he.fromTag("caption");hs(Pn,he.fromText("Caption")),Fa(kt,Pn,0),i.selection.setCursorLocation(Pn.dom,0)},Pn=>{tr("caption")(ot)&&Kr("td",kt).each(Pt=>i.selection.setCursorLocation(Pt.dom,0)),Sr(Pn)}),jf(i,kt.dom,Os)})})},_e=ot=>{i.focus()},ct=(ot,kt=!1)=>I((Pn,Pt)=>{const us=av(ar(i),Pn,Pt);ot(Pn,us,kt).each(_e)}),Lt=()=>I((ot,kt)=>{const Pn=av(ar(i),ot,kt),Pt=Cd(tt,he.fromDom(i.getDoc()),le.none());return Rv(ot,Pn,Pt)}),Dt=()=>I((ot,kt)=>{const Pn=av(ar(i),ot,kt);return Dv(ot,Pn)}),Tt=(ot,kt)=>kt().each(Pn=>{const Pt=ln(Pn,us=>Ja(us));I((us,Ds)=>{const Ts=rm(he.fromDom(i.getDoc())),Lc=jm(ar(i),Ds,Pt,Ts);ot(us,Lc).each(_e)})}),on=ot=>(kt,Pn)=>ma(Pn,"type").each(Pt=>{ct(ot(Pt),Pn.no_events)});zo({mceTableSplitCells:()=>ct(m.unmergeCells),mceTableMergeCells:()=>ct(m.mergeCells),mceTableInsertRowBefore:()=>ct(m.insertRowsBefore),mceTableInsertRowAfter:()=>ct(m.insertRowsAfter),mceTableInsertColBefore:()=>ct(m.insertColumnsBefore),mceTableInsertColAfter:()=>ct(m.insertColumnsAfter),mceTableDeleteCol:()=>ct(m.deleteColumn),mceTableDeleteRow:()=>ct(m.deleteRow),mceTableCutCol:()=>Dt().each(ot=>{ux(ot),ct(m.deleteColumn)}),mceTableCutRow:()=>Lt().each(ot=>{lx(ot),ct(m.deleteRow)}),mceTableCopyCol:()=>Dt().each(ot=>ux(ot)),mceTableCopyRow:()=>Lt().each(ot=>lx(ot)),mceTablePasteColBefore:()=>Tt(m.pasteColsBefore,dx),mceTablePasteColAfter:()=>Tt(m.pasteColsAfter,dx),mceTablePasteRowBefore:()=>Tt(m.pasteRowsBefore,ix),mceTablePasteRowAfter:()=>Tt(m.pasteRowsAfter,ix),mceTableDelete:v,mceTableCellToggleClass:Q,mceTableToggleClass:Z,mceTableToggleCaption:ue,mceTableSizingMode:(ot,kt)=>T(kt),mceTableCellType:on(ot=>ot==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:on(ot=>ot==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:on(ot=>{switch(ot){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(ot,kt)=>i.addCommand(kt,ot)),i.addCommand("mceInsertTable",(ot,kt)=>{I_(i,kt.rows,kt.columns,kt.options)}),i.addCommand("mceTableApplyCellStyle",(ot,kt)=>{const Pn=Ds=>"tablecell"+Ds.toLowerCase().replace("-","");if(!Mt(kt))return;const Pt=mo(ar(i),E1);if(Pt.length===0)return;const us=er(kt,(Ds,Ts)=>i.formatter.has(Pn(Ts))&&Zn(Ds));rn(us)||(zo(us,(Ds,Ts)=>{const Lc=Pn(Ts);Ke(Pt,Ba=>{Ds===""?i.formatter.remove(Lc,{value:null},Ba.dom,!0):i.formatter.apply(Lc,{value:Ds},Ba.dom)})}),O(Pt[0]).each(Ds=>jf(i,Ds.dom,ja)))})},F_=(i,m)=>{const p=lm(i),v=T=>Py(Gu(i)).bind(O=>Oc(O,p).map(I=>{const Z=av(ar(i),I,O);return T(I,Z)})).getOr("");zo({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(T,O)=>i.addQueryValueHandler(O,T))},Iv=fm.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),H_=(i,m,p,v)=>i.fold(m,p,v),Yu=i=>i.fold(Fe,Fe,Fe),Lv=Iv.before,Fv=Iv.on,Hv=Iv.after,jl={before:Lv,on:Fv,after:Hv,cata:H_,getStart:Yu},Kf={create:(i,m)=>({selection:i,kill:m})},V_=(i,m)=>{const p=i.document.createRange();return p.selectNode(m.dom),p},Yf=(i,m)=>{const p=i.document.createRange();return K1(p,m),p},K1=(i,m)=>i.selectNodeContents(m.dom),z_=(i,m)=>{m.fold(p=>{i.setStartBefore(p.dom)},(p,v)=>{i.setStart(p.dom,v)},p=>{i.setStartAfter(p.dom)})},U_=(i,m)=>{m.fold(p=>{i.setEndBefore(p.dom)},(p,v)=>{i.setEnd(p.dom,v)},p=>{i.setEndAfter(p.dom)})},gx=(i,m,p)=>{const v=i.document.createRange();return z_(v,m),U_(v,p),v},Vv=(i,m,p,v,T)=>{const O=i.document.createRange();return O.setStart(m.dom,p),O.setEnd(v.dom,T),O},zv=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),W_=i=>{const m=i.getClientRects(),p=m.length>0?m[0]:i.getBoundingClientRect();return p.width>0||p.height>0?le.some(p).map(zv):le.none()},Y1=fm.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),kC=(i,m,p)=>m(he.fromDom(p.startContainer),p.startOffset,he.fromDom(p.endContainer),p.endOffset),Z_=(i,m)=>m.match({domRange:p=>({ltr:q(p),rtl:le.none}),relative:(p,v)=>({ltr:md(()=>gx(i,p,v)),rtl:md(()=>le.some(gx(i,v,p)))}),exact:(p,v,T,O)=>({ltr:md(()=>Vv(i,p,v,T,O)),rtl:md(()=>le.some(Vv(i,T,O,p,v)))})}),_C=(i,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(T=>T.collapsed===!1).map(T=>Y1.rtl(he.fromDom(T.endContainer),T.endOffset,he.fromDom(T.startContainer),T.startOffset)).getOrThunk(()=>kC(i,Y1.ltr,p)):kC(i,Y1.ltr,p)},AC=(i,m)=>{const p=Z_(i,m);return _C(i,p)},Uv=(i,m)=>AC(i,m).match({ltr:(v,T,O,I)=>{const Z=i.document.createRange();return Z.setStart(v.dom,T),Z.setEnd(O.dom,I),Z},rtl:(v,T,O,I)=>{const Z=i.document.createRange();return Z.setStart(O.dom,I),Z.setEnd(v.dom,T),Z}});Y1.ltr,Y1.rtl;const ah={create:(i,m,p,v)=>({start:i,soffset:m,finish:p,foffset:v})},OC={create:(i,m,p,v)=>({start:jl.on(i,m),finish:jl.on(p,v)})},px=(i,m)=>{const p=Uv(i,m);return ah.create(he.fromDom(p.startContainer),p.startOffset,he.fromDom(p.endContainer),p.endOffset)},Wv=OC.create,G_=(i,m,p,v,T,O,I)=>ts(p,T)&&v===O?le.none():Zs(p,"td,th",m).bind(Z=>Zs(T,"td,th",m).bind(Q=>Xf(i,m,Z,Q,I))),Xf=(i,m,p,v,T)=>ts(p,v)?le.none():Xh(p,v,m).bind(O=>{const I=O.boxes.getOr([]);return I.length>1?(T(i,I,O.start,O.finish),le.some(Kf.create(le.some(Wv(p,0,p,wl(p))),!0))):le.none()}),DR=(i,m,p,v,T)=>{const O=I=>(T.clearBeforeUpdate(p),T.selectRange(p,I.boxes,I.start,I.finish),I.boxes);return Ry(v,i,m,T.firstSelectedSelector,T.lastSelectedSelector).map(O)},bp=(i,m)=>({item:i,mode:m}),Zv=(i,m,p,v=vp)=>i.property().parent(m).map(T=>bp(T,v)),vp=(i,m,p,v=yp)=>p.sibling(i,m).map(T=>bp(T,v)),yp=(i,m,p,v=yp)=>{const T=i.property().children(m);return p.first(T).map(I=>bp(I,v))},q_=[{current:Zv,next:vp,fallback:le.none()},{current:vp,next:yp,fallback:le.some(Zv)},{current:yp,next:yp,fallback:le.some(vp)}],bx=(i,m,p,v,T=q_)=>L(T,I=>I.current===p).bind(I=>I.current(i,m,v,I.next).orThunk(()=>I.fallback.bind(Z=>bx(i,m,Z,v)))),Ym={left:()=>({sibling:(p,v)=>p.query().prevSibling(v),first:p=>p.length>0?le.some(p[p.length-1]):le.none()}),right:()=>({sibling:(p,v)=>p.query().nextSibling(v),first:p=>p.length>0?le.some(p[0]):le.none()})},DC=(i,m,p,v,T,O)=>bx(i,m,v,T).bind(Z=>O(Z.item)?le.none():p(Z.item)?le.some(Z.item):DC(i,Z.item,p,Z.mode,T,O)),RC=(i,m,p,v)=>DC(i,m,p,vp,Ym.left(),v),Y_=(i,m,p,v)=>DC(i,m,p,vp,Ym.right(),v),MC=i=>m=>i.property().children(m).length===0,vx=(i,m,p)=>Cx(i,m,MC(i),p),yx=(i,m,p)=>Cp(i,m,MC(i),p),Cx=RC,Cp=Y_,Gv=Bf(),ch=(i,m)=>vx(Gv,i,m),Xm=(i,m)=>yx(Gv,i,m),X1=(i,m,p)=>Cx(Gv,i,m,p),wp=(i,m,p)=>Cp(Gv,i,m,p),X_=(i,m,p)=>xs(i,m,p).isSome(),Dd=fm.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Yi=(i,m,p)=>{const v=i.getRect(m),T=i.getRect(p);return T.right>v.left&&T.left<v.right},qv=i=>Zs(i,"tr"),lh={...Dd,verify:(i,m,p,v,T,O,I)=>Zs(v,"td,th",I).bind(Z=>Zs(m,"td,th",I).map(Q=>ts(Z,Q)?ts(v,Z)&&wl(Z)===T?O(Q):Dd.none("in same cell"):qu(qv,[Z,Q]).fold(()=>Yi(i,Q,Z)?Dd.success():O(Q),ue=>O(Q)))).getOr(Dd.none("default")),cata:(i,m,p,v,T)=>i.fold(m,p,v,T)},Sp=(i,m,p,v)=>({parent:i,children:m,element:p,index:v}),xp=i=>vr(i).bind(m=>{const p=Uo(m);return sl(p,i).map(v=>Sp(m,p,i,v))}),sl=(i,m)=>Lr(i,nt(ts,m)),Kv=tr("br"),ih=(i,m,p)=>m(i,p).bind(v=>Xa(v)&&gr(v).trim().length===0?ih(v,m,p):le.some(v)),Yv=(i,m,p)=>p.traverse(m).orThunk(()=>ih(m,p.gather,i)).map(p.relative),wx=(i,m)=>dr(i,m).filter(Kv).orThunk(()=>dr(i,m-1).filter(Kv)),NC=(i,m,p,v)=>wx(m,p).bind(T=>v.traverse(T).fold(()=>ih(T,v.gather,i).map(v.relative),O=>xp(O).map(I=>jl.on(I.parent,I.index)))),Xv=(i,m,p,v)=>(Kv(m)?Yv(i,m,v):NC(i,m,p,v)).map(O=>({start:O,finish:O})),yc=i=>lh.cata(i,m=>le.none(),()=>le.none(),m=>le.some(Di(m,0)),m=>le.some(Di(m,wl(m)))),Jv=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),Xu=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),PC=(i,m,p)=>({left:i.left+m,top:i.top+p,right:i.right+m,bottom:i.bottom+p}),BC=i=>i.top,Jm=i=>i.bottom,Sx=(i,m,p)=>p>=0&&p<wl(m)?i.getRangedRect(m,p,m,p+1):p>0?i.getRangedRect(m,p-1,m,p):le.none(),Jf=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),Qv=(i,m)=>le.some(i.getRect(m)),e0=(i,m,p)=>wr(m)?Qv(i,m).map(Jf):Xa(m)?Sx(i,m,p).map(Jf):le.none(),$C=(i,m)=>wr(m)?Qv(i,m).map(Jf):Xa(m)?i.getRangedRect(m,0,m,wl(m)).map(Jf):le.none(),uh=5,Tp=100,Kc=fm.generate([{none:[]},{retry:["caret"]}]),xx=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,IC=(i,m,p)=>Qa(m,Pe).fold(cn,v=>$C(i,v).exists(T=>xx(p,T))),LC=(i,m,p,v,T)=>{const O=Jv(T,uh);return Math.abs(p.bottom-v.bottom)<1||p.top>T.bottom?Kc.retry(O):p.top===T.bottom?Kc.retry(Jv(T,1)):IC(i,m,T)?Kc.retry(PC(O,uh,0)):Kc.none()},FC={point:BC,adjuster:(i,m,p,v,T)=>{const O=Xu(T,uh);return Math.abs(p.top-v.top)<1||p.bottom<T.top?Kc.retry(O):p.bottom===T.top?Kc.retry(Xu(T,1)):IC(i,m,T)?Kc.retry(PC(O,uh,0)):Kc.none()},move:Xu,gather:ch},Ex={point:Jm,adjuster:LC,move:Jv,gather:Xm},kx=(i,m,p)=>i.elementFromPoint(m,p).filter(v=>ls(v)==="table").isSome(),Xi=(i,m,p,v,T)=>Qm(i,m,p,m.move(v,uh),T),Qm=(i,m,p,v,T)=>T===0?le.some(v):kx(i,v.left,m.point(v))?Xi(i,m,p,v,T-1):i.situsFromPoint(v.left,m.point(v)).bind(O=>O.start.fold(le.none,I=>$C(i,I).bind(Z=>m.adjuster(i,I,Z,p,v).fold(le.none,Q=>Qm(i,m,p,Q,T-1))).orThunk(()=>le.some(v)),le.none)),_x=(i,m,p)=>i.point(m)>p.getInnerHeight()?le.some(i.point(m)-p.getInnerHeight()):i.point(m)<0?le.some(-i.point(m)):le.none(),dh=(i,m,p)=>{const v=i.move(p,uh),T=Qm(m,i,p,v,Tp).getOr(v);return _x(i,T,m).fold(()=>m.situsFromPoint(T.left,i.point(T)),O=>(m.scrollBy(0,O),m.situsFromPoint(T.left,i.point(T)-O)))},El={tryUp:nt(dh,FC),tryDown:nt(dh,Ex),getJumpSize:q(uh)},Pi=20,kl=(i,m,p)=>i.getSelection().bind(v=>Xv(m,v.finish,v.foffset,p).fold(()=>le.some(Di(v.finish,v.foffset)),T=>{const O=i.fromSitus(T),I=lh.verify(i,v.finish,v.foffset,O.finish,O.foffset,p.failure,m);return yc(I)})),Ji=(i,m,p,v,T,O)=>O===0?le.none():mh(i,m,p,v,T).bind(I=>{const Z=i.fromSitus(I),Q=lh.verify(i,p,v,Z.finish,Z.foffset,T.failure,m);return lh.cata(Q,()=>le.none(),()=>le.some(I),ue=>ts(p,ue)&&v===0?t0(i,p,v,Xu,T):Ji(i,m,ue,0,T,O-1),ue=>ts(p,ue)&&v===wl(ue)?t0(i,p,v,Jv,T):Ji(i,m,ue,wl(ue),T,O-1))}),t0=(i,m,p,v,T)=>e0(i,m,p).bind(O=>Qi(i,T,v(O,El.getJumpSize()))),Qi=(i,m,p)=>{const v=hd().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(i,p):le.none()},mh=(i,m,p,v,T)=>e0(i,p,v).bind(O=>Qi(i,T,O)),Q_=(i,m,p)=>kl(i,m,p).bind(v=>Ji(i,m,v.element,v.offset,p,Pi).map(i.fromSitus)),Ax=(i,m)=>X_(i,p=>vr(p).exists(v=>ts(v,m))),eA=(i,m,p,v,T)=>Zs(v,"td,th",m).bind(O=>Zs(O,"table",m).bind(I=>Ax(T,I)?Q_(i,m,p).bind(Z=>Zs(Z.finish,"td,th",m).map(Q=>({start:O,finish:Q,range:Z}))):le.none())),Ox=(i,m,p,v,T,O)=>O(v,m).orThunk(()=>eA(i,m,p,v,T).map(I=>{const Z=I.range;return Kf.create(le.some(Wv(Z.start,Z.soffset,Z.finish,Z.foffset)),!0)})),Dx=(i,m)=>Zs(i,"tr",m).bind(p=>Zs(p,"table",m).bind(v=>{const T=Ws(v,"tr");return ts(p,T[0])?X1(v,O=>Of(O).isSome(),m).map(O=>{const I=wl(O);return Kf.create(le.some(Wv(O,I,O,I)),!0)}):le.none()})),HC=(i,m)=>Zs(i,"tr",m).bind(p=>Zs(p,"table",m).bind(v=>{const T=Ws(v,"tr");return ts(p,T[T.length-1])?wp(v,O=>yu(O).isSome(),m).map(O=>Kf.create(le.some(Wv(O,0,O,0)),!0)):le.none()})),VC=(i,m,p,v,T,O,I)=>eA(i,p,v,T,O).bind(Z=>Xf(m,p,Z.start,Z.finish,I)),Ic=i=>{let m=i;return{get:()=>m,set:T=>{m=T}}},zC=i=>{const m=Ic(le.none()),p=()=>m.get().each(i);return{clear:()=>{p(),m.set(le.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:Z=>{p(),m.set(le.some(Z))}}},Qf=()=>{const i=zC(tt);return{...i,on:p=>i.get().each(p)}},Ep=(i,m)=>Zs(i,"td,th",m),UC=i=>aa(i).exists(S1),n0=(i,m,p,v)=>{const T=Qf(),O=T.clear,I=_e=>{T.on(ct=>{v.clearBeforeUpdate(m),Ep(_e.target,p).each(Lt=>{Xh(ct,Lt,p).each(Dt=>{const Tt=Dt.boxes.getOr([]);if(Tt.length===1){const on=Tt[0],ot=a2(on)==="false",kt=ni(w1(_e.target),on,ts);ot&&kt&&(v.selectRange(m,Tt,on,on),i.selectContents(on))}else Tt.length>1&&(v.selectRange(m,Tt,Dt.start,Dt.finish),i.selectContents(Lt))})})})};return{clearstate:O,mousedown:_e=>{v.clear(m),Ep(_e.target,p).filter(UC).each(T.set)},mouseover:_e=>{I(_e)},mouseup:_e=>{I(_e),O()}}},J1={traverse:Xc,gather:Xm,relative:jl.before,retry:El.tryDown,failure:lh.failedDown},WC={traverse:ei,gather:ch,relative:jl.before,retry:El.tryUp,failure:lh.failedUp},kp=i=>m=>m===i,ZC=kp(38),hm=kp(40),fh=i=>i>=37&&i<=40,Rx={isBackward:kp(37),isForward:kp(39)},ef={isBackward:kp(39),isForward:kp(37)},eu=i=>{const m=i!==void 0?i.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return Je(p,v)},Mx=(i,m,p)=>{const T=(p!==void 0?p.dom:document).defaultView;T&&T.scrollBy(i,m)},pm=fm.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),gh=i=>pm.exact(i.start,i.soffset,i.finish,i.foffset),jC=i=>i.match({domRange:m=>he.fromDom(m.startContainer),relative:(m,p)=>jl.getStart(m),exact:(m,p,v,T)=>m}),o0=pm.domRange,Nx=pm.relative,tA=pm.exact,nA=i=>{const m=jC(i);return qo(m)},Px=ah.create,eg={domRange:o0,relative:Nx,exact:tA,exactFromRange:gh,getWin:nA,range:Px},_p=(i,m,p)=>{var v,T;return le.from((T=(v=i.dom).caretPositionFromPoint)===null||T===void 0?void 0:T.call(v,m,p)).bind(O=>{if(O.offsetNode===null)return le.none();const I=i.dom.createRange();return I.setStart(O.offsetNode,O.offset),I.collapse(),le.some(I)})},Q1=(i,m,p)=>{var v,T;return le.from((T=(v=i.dom).caretRangeFromPoint)===null||T===void 0?void 0:T.call(v,m,p))},oA=document.caretPositionFromPoint?_p:document.caretRangeFromPoint?Q1:le.none,sA=(i,m,p)=>{const v=he.fromDom(i.document);return oA(v,m,p).map(T=>ah.create(he.fromDom(T.startContainer),T.startOffset,he.fromDom(T.endContainer),T.endOffset))},Ap=(i,m)=>{const p=ls(i);return p==="input"?jl.after(i):lo(["br","img"],p)?m===0?jl.before(i):jl.after(i):jl.on(i,m)},GC=(i,m)=>{const p=i.fold(jl.before,Ap,jl.after),v=m.fold(jl.before,Ap,jl.after);return eg.relative(p,v)},s0=(i,m,p,v)=>{const T=Ap(i,m),O=Ap(p,v);return eg.relative(T,O)},qC=(i,m,p,v)=>{const O=ra(i).dom.createRange();return O.setStart(i.dom,m),O.setEnd(p.dom,v),O},KC=(i,m,p,v)=>{const T=qC(i,m,p,v),O=ts(i,p)&&m===v;return T.collapsed&&!O},Op=i=>le.from(i.getSelection()),YC=(i,m)=>{Op(i).each(p=>{p.removeAllRanges(),p.addRange(m)})},Dp=(i,m,p,v,T)=>{const O=Vv(i,m,p,v,T);YC(i,O)},XC=(i,m,p,v,T,O)=>{m.collapse(p.dom,v),m.extend(T.dom,O)},Yo=(i,m)=>AC(i,m).match({ltr:(p,v,T,O)=>{Dp(i,p,v,T,O)},rtl:(p,v,T,O)=>{Op(i).each(I=>{if(I.setBaseAndExtent)I.setBaseAndExtent(p.dom,v,T.dom,O);else if(I.extend)try{XC(i,I,p,v,T,O)}catch{Dp(i,T,O,p,v)}else Dp(i,T,O,p,v)})}}),bm=(i,m,p,v,T)=>{const O=s0(m,p,v,T);Yo(i,O)},hh=(i,m,p)=>{const v=GC(m,p);Yo(i,v)},eb=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),p=i.getRangeAt(i.rangeCount-1);return le.some(ah.create(he.fromDom(m.startContainer),m.startOffset,he.fromDom(p.endContainer),p.endOffset))}else return le.none()},JC=i=>{if(i.anchorNode===null||i.focusNode===null)return eb(i);{const m=he.fromDom(i.anchorNode),p=he.fromDom(i.focusNode);return KC(m,i.anchorOffset,p,i.focusOffset)?le.some(ah.create(m,i.anchorOffset,p,i.focusOffset)):eb(i)}},tf=(i,m,p=!0)=>{const T=(p?Yf:V_)(i,m);YC(i,T)},QC=i=>Op(i).filter(m=>m.rangeCount>0).bind(JC),r0=i=>QC(i).map(m=>eg.exact(m.start,m.soffset,m.finish,m.foffset)),ew=(i,m)=>{const p=Uv(i,m);return W_(p)},tw=(i,m,p)=>sA(i,m,p),ph=i=>{Op(i).each(m=>m.removeAllRanges())},a0=i=>({elementFromPoint:(ot,kt)=>he.fromPoint(he.fromDom(i.document),ot,kt),getRect:ot=>ot.dom.getBoundingClientRect(),getRangedRect:(ot,kt,Pn,Pt)=>{const us=eg.exact(ot,kt,Pn,Pt);return ew(i,us)},getSelection:()=>r0(i).map(ot=>px(i,ot)),fromSitus:ot=>{const kt=eg.relative(ot.start,ot.finish);return px(i,kt)},situsFromPoint:(ot,kt)=>tw(i,ot,kt).map(Pn=>OC.create(Pn.start,Pn.soffset,Pn.finish,Pn.foffset)),clearSelection:()=>{ph(i)},collapseSelection:(ot=!1)=>{r0(i).each(kt=>kt.fold(Pn=>Pn.collapse(ot),(Pn,Pt)=>{const us=ot?Pn:Pt;hh(i,us,us)},(Pn,Pt,us,Ds)=>{const Ts=ot?Pn:us,Lc=ot?Pt:Ds;bm(i,Ts,Lc,Ts,Lc)}))},setSelection:ot=>{bm(i,ot.start,ot.soffset,ot.finish,ot.foffset)},setRelativeSelection:(ot,kt)=>{hh(i,ot,kt)},selectNode:ot=>{tf(i,ot,!1)},selectContents:ot=>{tf(i,ot)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>eu(he.fromDom(i.document)).top,scrollBy:(ot,kt)=>{Mx(ot,kt,he.fromDom(i.document))}}),bh=(i,m)=>({rows:i,cols:m}),c0=(i,m,p,v)=>{const T=a0(i),O=n0(T,m,p,v);return{clearstate:O.clearstate,mousedown:O.mousedown,mouseover:O.mouseover,mouseup:O.mouseup}},Bx=i=>Qa(i,wn).exists(S1),Rp=(i,m)=>Bx(i)||Bx(m),l0=(i,m,p,v)=>{const T=a0(i),O=()=>(v.clear(m),le.none());return{keydown:(Q,ue,_e,ct,Lt,Dt)=>{const Tt=Q.raw,on=Tt.which,ot=Tt.shiftKey===!0;return O1(m,v.selectedSelector).fold(()=>(fh(on)&&!ot&&v.clearBeforeUpdate(m),fh(on)&&ot&&!Rp(ue,ct)?le.none:hm(on)&&ot?nt(VC,T,m,p,J1,ct,ue,v.selectRange):ZC(on)&&ot?nt(VC,T,m,p,WC,ct,ue,v.selectRange):hm(on)?nt(Ox,T,p,J1,ct,ue,HC):ZC(on)?nt(Ox,T,p,WC,ct,ue,Dx):le.none),Pn=>{const Pt=us=>()=>So(us,Ts=>DR(Ts.rows,Ts.cols,m,Pn,v)).fold(()=>g2(m,v.firstSelectedSelector,v.lastSelectedSelector).map(Ts=>{const Lc=hm(on)||Dt.isForward(on)?jl.after:jl.before;return T.setRelativeSelection(jl.on(Ts.first,0),Lc(Ts.table)),v.clear(m),Kf.create(le.none(),!0)}),Ts=>le.some(Kf.create(le.none(),!0)));return fh(on)&&ot&&!Rp(ue,ct)?le.none:hm(on)&&ot?Pt([bh(1,0)]):ZC(on)&&ot?Pt([bh(-1,0)]):Dt.isBackward(on)&&ot?Pt([bh(0,-1),bh(-1,0)]):Dt.isForward(on)&&ot?Pt([bh(0,1),bh(1,0)]):fh(on)&&!ot?O:le.none})()},keyup:(Q,ue,_e,ct,Lt)=>O1(m,v.selectedSelector).fold(()=>{const Dt=Q.raw,Tt=Dt.which;return Dt.shiftKey===!0&&fh(Tt)&&Rp(ue,ct)?G_(m,p,ue,_e,ct,Lt,v.selectRange):le.none()},le.none)}},rA=(i,m,p,v)=>{const T=a0(i);return(O,I)=>{v.clearBeforeUpdate(m),Xh(O,I,p).each(Z=>{const Q=Z.boxes.getOr([]);v.selectRange(m,Q,Z.start,Z.finish),T.selectContents(I),T.collapseSelection()})}},i0=(i,m)=>{const p=Fr(i,m);return p===void 0||p===""?[]:p.split(" ")},nf=(i,m,p)=>{const T=i0(i,m).concat([p]);return zs(i,m,T.join(" ")),!0},aA=(i,m,p)=>{const v=mo(i0(i,m),T=>T!==p);return v.length>0?zs(i,m,v.join(" ")):se(i,m),!1},tb=i=>i.dom.classList!==void 0,Su=i=>i0(i,"class"),Cc=(i,m)=>nf(i,"class",m),cA=(i,m)=>aA(i,"class",m),Rd=(i,m)=>{tb(i)?i.dom.classList.add(m):Cc(i,m)},lA=i=>{(tb(i)?i.dom.classList:Su(i)).length===0&&se(i,"class")},$x=(i,m)=>{tb(i)?i.dom.classList.remove(m):cA(i,m),lA(i)},nb=(i,m)=>tb(i)&&i.dom.classList.contains(m),Mp=(i,m)=>{Ke(m,p=>{$x(i,p)})},Ix=i=>m=>{Rd(m,i)},Lx=i=>m=>{Mp(m,i)},Fx={byClass:i=>{const m=Ix(i.selected),p=Lx([i.selected,i.lastSelected,i.firstSelected]),v=O=>{const I=Ws(O,i.selectedSelector);Ke(I,p)};return{clearBeforeUpdate:v,clear:v,selectRange:(O,I,Z,Q)=>{v(O),Ke(I,m),Rd(Z,i.firstSelected),Rd(Q,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,p)=>{const v=Q=>{se(Q,i.selected),se(Q,i.firstSelected),se(Q,i.lastSelected)},T=Q=>{zs(Q,i.selected,"1")},O=Q=>{I(Q),p()},I=Q=>{const ue=Ws(Q,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);Ke(ue,v)};return{clearBeforeUpdate:I,clear:O,selectRange:(Q,ue,_e,ct)=>{O(Q),Ke(ue,T),zs(_e,i.firstSelected,"1"),zs(ct,i.lastSelected,"1"),m(ue,_e,ct)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},Hx=(i,m,p,v)=>{switch(i.tag){case"none":return m();case"single":return v(i.element);case"multiple":return p(i.elements)}},Zt=()=>({tag:"none"}),wc=i=>({tag:"multiple",elements:i}),ob=i=>({tag:"single",element:i}),Sc=(i,m,p)=>({get:()=>$f(i(),p).fold(()=>m().fold(Zt,ob),wc)}),xu=(i,m)=>{const p=i.slice(0,m[m.length-1].row+1),v=gv(p);return as(v,T=>{const O=T.cells.slice(0,m[m.length-1].column+1);return ln(O,I=>I.element)})},nw=(i,m)=>{const p=i.slice(m[0].row+m[0].rowspan-1,i.length),v=gv(p);return as(v,T=>{const O=T.cells.slice(m[0].column+m[0].colspan-1,T.cells.length);return ln(O,I=>I.element)})},vh=(i,m,p)=>{const v=wo.fromTable(i);return Ed(v,m).map(O=>{const I=sp(v,p,!1),{rows:Z}=Qr(I),Q=xu(Z,O),ue=nw(Z,O);return{upOrLeftCells:Q,downOrRightCells:ue}})},u0=(i,m,p,v,T,O,I)=>({target:i,x:m,y:p,stop:v,prevent:T,kill:O,raw:I}),tg=i=>{const m=he.fromDom(Ot(i).getOr(i.target)),p=()=>i.stopPropagation(),v=()=>i.preventDefault(),T=jn(v,p);return u0(m,i.clientX,i.clientY,p,v,T,i)},sb=(i,m)=>p=>{i(p)&&m(tg(p))},Vx=(i,m,p,v,T)=>{const O=sb(p,v);return i.dom.addEventListener(m,O,T),{unbind:nt(uA,i,m,O,T)}},iA=(i,m,p,v)=>Vx(i,m,p,v,!1),uA=(i,m,p,v)=>{i.dom.removeEventListener(m,p,v)},dA=Ae,ng=(i,m,p)=>iA(i,m,dA,p),rb=tg,ab=i=>!nb(he.fromDom(i.target),"ephox-snooker-resizer-bar"),d0=(i,m)=>{const p=Sc(()=>he.fromDom(i.getBody()),()=>Py(Gu(i),lm(i)),Zm.selectedSelector),v=(Q,ue,_e)=>{Oc(ue).each(Lt=>{const Dt=ln(Q,Pn=>Pn.dom),Tt=r2(i),on=Cd(tt,he.fromDom(i.getDoc()),Tt),ot=ar(i),kt=vh(Lt,{selection:ot},on).map(Pn=>jr(Pn,Pt=>ln(Pt,us=>us.dom))).getOrUndefined();O_(i,Dt,ue.dom,_e.dom,kt)})},T=()=>D_(i),O=Fx.byAttr(Zm,v,T);return i.on("init",Q=>{const ue=i.getWin(),_e=Zg(i),ct=lm(i),Lt=()=>{const ws=i.selection,ql=he.fromDom(ws.getStart()),Kl=he.fromDom(ws.getEnd());qu(Oc,[ql,Kl]).fold(()=>O.clear(_e),tt)},Dt=c0(ue,_e,ct,O),Tt=l0(ue,_e,ct,O),on=rA(ue,_e,ct,O),ot=ws=>ws.raw.shiftKey===!0;i.on("TableSelectorChange",ws=>on(ws.start,ws.finish));const kt=(ws,ql)=>{ot(ws)&&(ql.kill&&ws.kill(),ql.selection.each(Kl=>{const Eu=eg.relative(Kl.start,Kl.finish),ku=Uv(ue,Eu);i.selection.setRng(ku)}))},Pn=ws=>{const ql=rb(ws);if(ql.raw.shiftKey&&fh(ql.raw.which)){const Kl=i.selection.getRng(),Eu=he.fromDom(Kl.startContainer),ku=he.fromDom(Kl.endContainer);Tt.keyup(ql,Eu,Kl.startOffset,ku,Kl.endOffset).each(Oo=>{kt(ql,Oo)})}},Pt=ws=>{const ql=rb(ws);m.hide();const Kl=i.selection.getRng(),Eu=he.fromDom(Kl.startContainer),ku=he.fromDom(Kl.endContainer),Oo=Ef(Rx,ef)(he.fromDom(i.selection.getStart()));Tt.keydown(ql,Eu,Kl.startOffset,ku,Kl.endOffset,Oo).each(oa=>{kt(ql,oa)}),m.show()},us=ws=>ws.button===0,Ds=ws=>ws.buttons===void 0?!0:(ws.buttons&1)!==0,Ts=ws=>{Dt.clearstate()},Lc=ws=>{us(ws)&&ab(ws)&&Dt.mousedown(rb(ws))},Ba=ws=>{Ds(ws)&&ab(ws)&&Dt.mouseover(rb(ws))},ym=ws=>{us(ws)&&ab(ws)&&Dt.mouseup(rb(ws))},cg=(()=>{const ws=Ic(he.fromDom(_e)),ql=Ic(0);return{touchEnd:Eu=>{const ku=he.fromDom(Eu.target);if(tr("td")(ku)||tr("th")(ku)){const Oo=ws.get(),oa=ql.get();ts(Oo,ku)&&Eu.timeStamp-oa<300&&(Eu.preventDefault(),on(ku,ku))}ws.set(ku),ql.set(Eu.timeStamp)}}})();i.on("dragstart",Ts),i.on("mousedown",Lc),i.on("mouseover",Ba),i.on("mouseup",ym),i.on("touchend",cg.touchEnd),i.on("keyup",Pn),i.on("keydown",Pt),i.on("NodeChange",Lt)}),i.on("PreInit",()=>{i.serializer.addTempAttr(Zm.firstSelected),i.serializer.addTempAttr(Zm.lastSelected)}),{getSelectedCells:()=>Hx(p.get(),q([]),Q=>ln(Q,ue=>ue.dom),Q=>[Q.dom]),clearSelectedCells:Q=>O.clear(he.fromDom(Q))}},Bi=i=>{let m=[];return{bind:O=>{if(O===void 0)throw new Error("Event bind error: undefined handler");m.push(O)},unbind:O=>{m=mo(m,I=>I!==O)},trigger:(...O)=>{const I={};Ke(i,(Z,Q)=>{I[Z]=O[Q]}),Ke(m,Z=>{Z(I)})}}},vm=i=>{const m=jr(i,v=>({bind:v.bind,unbind:v.unbind})),p=jr(i,v=>v.trigger);return{registry:m,trigger:p}},og=(i,m)=>{let p=null;const v=()=>{eo(p)||(clearTimeout(p),p=null)};return{cancel:v,throttle:(...O)=>{v(),p=setTimeout(()=>{p=null,i.apply(null,O)},m)}}},sg=i=>i.slice(0).sort(),mA=(i,m)=>{throw new Error("All required keys ("+sg(i).join(", ")+") were not specified. Specified keys were: "+sg(m).join(", ")+".")},m0=i=>{throw new Error("Unsupported keys for object: "+sg(i).join(", "))},f0=(i,m)=>{if(!qt(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");Ke(m,p=>{if(!Zn(p))throw new Error("The value "+p+" in the "+i+" fields was not a string.")})},fA=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+sg(i).join(", ")+") were not.")},gA=i=>{const m=sg(i);L(m,(v,T)=>T<m.length-1&&v===m[T+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},hA=(i,m)=>pA(i,m,{validate:_t,label:"function"}),pA=(i,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return f0("required",m),gA(m),v=>{const T=It(v);Vo(m,Z=>lo(T,Z))||mA(m,T),i(m,T);const I=mo(m,Z=>!p.validate(v[Z],Z));return I.length>0&&fA(I,p.label),v}},zx=(i,m)=>{const p=mo(m,v=>!lo(i,v));p.length>0&&m0(p)},g0=i=>hA(zx,i),bA=g0(["compare","extract","mutate","sink"]),h0=g0(["element","start","stop","destroy"]),Yc=g0(["forceDrop","drop","move","delayDrop"]),Tu=()=>{let i=le.none();const m=()=>{i=le.none()},p=(O,I)=>{const Z=i.map(Q=>O.compare(Q,I));return i=le.some(I),Z},v=(O,I)=>{I.extract(O).each(Q=>{p(I,Q).each(_e=>{T.trigger.move(_e)})})},T=vm({move:Bi(["info"])});return{onEvent:v,reset:m,events:T.registry}},tu=()=>{const i=vm({move:Bi(["info"])});return{onEvent:tt,reset:tt,events:i.registry}},p0=()=>{const i=tu(),m=Tu();let p=i;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=i},isOn:()=>p===m,onEvent:(Z,Q)=>{p.onEvent(Z,Q)},events:m.events}},b0=(i,m,p)=>{let v=!1;const T=vm({start:Bi([]),stop:Bi([])}),O=p0(),I=()=>{Tt.stop(),O.isOn()&&(O.off(),T.trigger.stop())},Z=og(I,200),Q=ot=>{Tt.start(ot),O.on(),T.trigger.start()},ue=ot=>{Z.cancel(),O.onEvent(ot,m)};O.events.move.bind(ot=>{m.mutate(i,ot.info)});const _e=()=>{v=!0},ct=()=>{v=!1},Lt=()=>v,Dt=ot=>(...kt)=>{v&&ot.apply(null,kt)},Tt=m.sink(Yc({forceDrop:I,drop:Dt(I),move:Dt(ue),delayDrop:Dt(Z.throttle)}),p),on=()=>{Tt.destroy()};return{element:Tt.element,go:Q,on:_e,off:ct,isActive:Lt,destroy:on,events:T.registry}},Ux=i=>{const m=i.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},Wx=Ux("ephox-dragster").resolve,sw=i=>{const m={layerClass:Wx("blocker"),...i},p=he.fromTag("div");return zs(p,"role","presentation"),hn(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Rd(p,Wx("blocker")),Rd(p,m.layerClass),{element:q(p),destroy:()=>{Sr(p)}}};var v0=bA({compare:(i,m)=>Je(m.left-i.left,m.top-i.top),extract:i=>le.some(Je(i.x,i.y)),sink:(i,m)=>{const p=sw(m),v=ng(p.element(),"mousedown",i.forceDrop),T=ng(p.element(),"mouseup",i.drop),O=ng(p.element(),"mousemove",i.move),I=ng(p.element(),"mouseout",i.delayDrop),Z=()=>{p.destroy(),T.unbind(),O.unbind(),I.unbind(),v.unbind()},Q=_e=>{hs(_e,p.element())},ue=()=>{Sr(p.element())};return h0({element:p.element,start:Q,stop:ue,destroy:Z})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const rw=(i,m={})=>{var p;const v=(p=m.mode)!==null&&p!==void 0?p:v0;return b0(i,v,m)},Gl=Ux("ephox-snooker").resolve,Gx=()=>{const i=vm({drag:Bi(["xDelta","yDelta"])});return{mutate:(p,v)=>{i.trigger.drag(p,v)},events:i.registry}},aw=()=>{const i=vm({drag:Bi(["xDelta","yDelta","target"])});let m=le.none();const p=Gx();return p.events.drag.bind(O=>{m.each(I=>{i.trigger.drag(O.xDelta,O.yDelta,I)})}),{assign:O=>{m=le.some(O)},get:()=>m,mutate:p.mutate,events:i.registry}},cb=(i,m,p,v,T)=>{const O=he.fromTag("div");return hn(O,{position:"absolute",left:m-v/2+"px",top:p+"px",height:T+"px",width:v+"px"}),La(O,{"data-column":i,role:"presentation"}),O},lb=(i,m,p,v,T)=>{const O=he.fromTag("div");return hn(O,{position:"absolute",left:m+"px",top:p-T/2+"px",height:T+"px",width:v+"px"}),La(O,{"data-row":i,role:"presentation"}),O},y0=Gl("resizer-bar"),ib=Gl("resizer-rows"),qx=Gl("resizer-cols"),Kx=7,cw=(i,m)=>as(i.all,(p,v)=>m(p.element)?[v]:[]),lw=(i,m)=>{const p=[];return Ho(i.grid.columns,v=>{wo.getColumnAt(i,v).map(O=>O.element).forall(m)&&p.push(v)}),mo(p,v=>{const T=wo.filterItems(i,O=>O.column===v);return Vo(T,O=>m(O.element))})},of=i=>{const m=Ws(i.parent(),"."+y0);Ke(m,Sr)},iw=(i,m,p)=>{const v=i.origin();Ke(m,T=>{T.each(O=>{const I=p(v,O);Rd(I,y0),hs(i.parent(),I)})})},Yx=(i,m,p,v)=>{iw(i,m,(T,O)=>{const I=cb(O.col,O.x-T.left,p.top-T.top,Kx,v);return Rd(I,qx),I})},CA=(i,m,p,v)=>{iw(i,m,(T,O)=>{const I=lb(O.row,p.left-T.left,O.y-T.top,v,Kx);return Rd(I,ib),I})},wA=(i,m,p,v,T)=>{const O=Gn(p),I=m.isResizable,Z=v.length>0?Ua.positions(v,p):[],Q=Z.length>0?cw(i,I):[],ue=mo(Z,(Dt,Tt)=>rt(Q,on=>Tt===on));CA(m,ue,O,os(p));const _e=T.length>0?kf.positions(T,p):[],ct=_e.length>0?lw(i,I):[],Lt=mo(_e,(Dt,Tt)=>rt(ct,on=>Tt===on));Yx(m,Lt,O,V(p))},Xx=(i,m)=>{if(of(i),i.isResizable(m)){const p=wo.fromTable(m),v=Tf(p),T=vd(p);wA(p,i,m,v,T)}},gi=(i,m)=>{const p=Ws(i.parent(),"."+y0);Ke(p,m)},_l=i=>{gi(i,m=>{Re(m,"display","none")})},Np=i=>{gi(i,m=>{Re(m,"display","block")})},PR=i=>nb(i,ib),SA=i=>nb(i,qx),uw=Gl("resizer-bar-dragging"),jo=i=>{const m=aw(),p=rw(m,{});let v=le.none();const T=(Tt,on)=>le.from(Fr(Tt,on));m.events.drag.bind(Tt=>{T(Tt.target,"data-row").each(on=>{const ot=Wc(Tt.target,"top");Re(Tt.target,"top",ot+Tt.yDelta+"px")}),T(Tt.target,"data-column").each(on=>{const ot=Wc(Tt.target,"left");Re(Tt.target,"left",ot+Tt.xDelta+"px")})});const O=(Tt,on)=>{const ot=Wc(Tt,on),kt=js(Tt,"data-initial-"+on,0);return ot-kt};p.events.stop.bind(()=>{m.get().each(Tt=>{v.each(on=>{T(Tt,"data-row").each(ot=>{const kt=O(Tt,"top");se(Tt,"data-initial-top"),Dt.trigger.adjustHeight(on,kt,parseInt(ot,10))}),T(Tt,"data-column").each(ot=>{const kt=O(Tt,"left");se(Tt,"data-initial-left"),Dt.trigger.adjustWidth(on,kt,parseInt(ot,10))}),Xx(i,on)})})});const I=(Tt,on)=>{Dt.trigger.startAdjust(),m.assign(Tt),zs(Tt,"data-initial-"+on,Wc(Tt,on)),Rd(Tt,uw),Re(Tt,"opacity","0.2"),p.go(i.parent())},Z=ng(i.parent(),"mousedown",Tt=>{PR(Tt.target)&&I(Tt.target,"top"),SA(Tt.target)&&I(Tt.target,"left")}),Q=Tt=>ts(Tt,i.view()),ue=Tt=>Zs(Tt,"table",Q).filter(S1),_e=ng(i.view(),"mouseover",Tt=>{ue(Tt.target).fold(()=>{Ns(Tt.target)&&of(i)},on=>{p.isActive()&&(v=le.some(on),Xx(i,on))})}),ct=()=>{Z.unbind(),_e.unbind(),p.destroy(),of(i)},Lt=Tt=>{Xx(i,Tt)},Dt=vm({adjustHeight:Bi(["table","delta","row"]),adjustWidth:Bi(["table","delta","column"]),startAdjust:Bi([])});return{destroy:ct,refresh:Lt,on:p.on,off:p.off,hideBars:nt(_l,i),showBars:nt(Np,i),events:Dt.registry}},Jx={create:(i,m,p)=>{const v=Ua,T=kf,O=jo(i),I=vm({beforeResize:Bi(["table","type"]),afterResize:Bi(["table","type"]),startDrag:Bi([])});return O.events.adjustHeight.bind(Z=>{const Q=Z.table;I.trigger.beforeResize(Q,"row");const ue=v.delta(Z.delta,Q);qy(Q,ue,Z.row),I.trigger.afterResize(Q,"row")}),O.events.startAdjust.bind(Z=>{I.trigger.startDrag()}),O.events.adjustWidth.bind(Z=>{const Q=Z.table;I.trigger.beforeResize(Q,"col");const ue=T.delta(Z.delta,Q),_e=p(Q);R2(Q,ue,Z.column,m,_e),I.trigger.afterResize(Q,"col")}),{on:O.on,off:O.off,refreshBars:O.refresh,hideBars:O.hideBars,showBars:O.showBars,destroy:O.destroy,events:I.registry}}},ub={only:(i,m)=>{const p=Uc(i)?$o(i):i;return{parent:q(p),view:q(i),origin:q(Je(0,0)),isResizable:m}},detached:(i,m,p)=>{const v=()=>Gn(m);return{parent:q(m),view:q(i),origin:v,isResizable:p}},body:(i,m,p)=>({parent:q(m),view:q(i),origin:q(Je(0,0)),isResizable:p})},xA=()=>{const i=he.fromTag("div");return hn(i,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),hs(B(),i),i},TA=(i,m)=>i.inline?ub.body(he.fromDom(i.getBody()),xA(),m):ub.only(he.fromDom(i.getDoc()),m),EA=(i,m)=>{i.inline&&Sr(m.parent())},C0=i=>Nt(i)&&i.nodeName==="TABLE",db="bar-",eT=i=>Fr(i,"data-mce-resize")!=="false",IR=i=>{const m=wo.fromTable(i);wo.hasColumns(m)||Ke(Bu(i),p=>{const v=bo(p,"width");Re(p,"width",v),se(p,"width")})},Pp=i=>ka(i,"corner-"),dw=i=>Bl(i,"corner-"),LR=i=>{const m=Qf(),p=Qf(),v=Qf();let T,O,I,Z;const Q=kt=>Pa(i,kt),ue=()=>la(i)?Lf():Gg(),_e=kt=>dm(kt).columns,ct=kt=>dm(kt).rows,Lt=(kt,Pn,Pt,us)=>{const Ds=dw(Pn),Ts=tc(Ds,"e"),Lc=ka(Ds,"n");if(O===""&&rh(kt),Z===""&&yC(kt),Pt!==T&&O!==""){Re(kt,"width",O);const Ba=ue(),ym=Q(kt),ag=la(i)||Ts?_e(kt)-1:0;R2(kt,Pt-T,ag,Ba,ym)}else if(l2(O)){const Ba=parseFloat(O.replace("%","")),ym=Pt*Ba/T;Re(kt,"width",ym+"%")}if(i2(O)&&IR(kt),us!==I&&Z!==""){Re(kt,"height",Z);const Ba=Lc?0:ct(kt)-1;qy(kt,us-I,Ba)}},Dt=()=>{p.on(kt=>{kt.destroy()}),v.on(kt=>{EA(i,kt)})};return i.on("init",()=>{const kt=TA(i,eT);if(v.set(kt),y1(i)&&di(i)){const Pn=ue(),Pt=Jx.create(kt,Pn,Q);Pt.on(),Pt.events.startDrag.bind(us=>{m.set(i.selection.getRng())}),Pt.events.beforeResize.bind(us=>{const Ds=us.table.dom;Za(i,Ds,Wm(Ds),_y(Ds),db+us.type)}),Pt.events.afterResize.bind(us=>{const Ds=us.table,Ts=Ds.dom;el(Ds),m.on(Lc=>{i.selection.setRng(Lc),i.focus()}),Na(i,Ts,Wm(Ts),_y(Ts),db+us.type),i.undoManager.add()}),p.set(Pt)}}),i.on("ObjectResizeStart",kt=>{const Pn=kt.target;if(C0(Pn)){const Pt=he.fromDom(Pn);Ke(i.dom.select(".mce-clonedresizable"),us=>{i.dom.addClass(us,"mce-"+Ey(i)+"-columns")}),!Q2(Pt)&&Mf(i)?vC(Pt):!bC(Pt)&&Um(i)&&rh(Pt),ex(Pt)&&ka(kt.origin,db)&&rh(Pt),T=kt.width,O=ju(i)?"":T1(i,Pn).getOr(""),I=kt.height,Z=c2(i,Pn).getOr("")}}),i.on("ObjectResized",kt=>{const Pn=kt.target;if(C0(Pn)){const Pt=he.fromDom(Pn),us=kt.origin;Pp(us)&&Lt(Pt,us,kt.width,kt.height),el(Pt),jf(i,Pt.dom,ja)}}),i.on("SwitchMode",()=>{p.on(kt=>{i.mode.isReadOnly()?kt.hideBars():kt.showBars()})}),i.on("dragstart dragend",kt=>{p.on(Pn=>{kt.type==="dragstart"?(Pn.hideBars(),Pn.off()):(Pn.on(),Pn.showBars())})}),i.on("remove",()=>{Dt()}),{refresh:kt=>{p.on(Pn=>Pn.refreshBars(he.fromDom(kt)))},hide:()=>{p.on(kt=>kt.hideBars())},show:()=>{p.on(kt=>kt.showBars())}}},tT=i=>{Wg(i);const m=LR(i),p=d0(i,m),v=mC(i,m,p);return fx(i,v),F_(i,v),Qh(i,v),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},kA=i=>({table:tT(i)});var Ln=()=>{lt.add("dom",kA)};Ln()})();(function(){const lt=q=>{let Fe=q;return{get:()=>Fe,set:W=>{Fe=W}}};var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const an=q=>()=>q;var Xt=tinymce.util.Tools.resolve("tinymce.Env");const yt=q=>q.dispatch("ResizeEditor"),Ut=q=>Fe=>Fe.options.get(q),Zn=q=>{const Fe=q.options.register;Fe("autoresize_overflow_padding",{processor:"number",default:1}),Fe("autoresize_bottom_margin",{processor:"number",default:50})},Mt=Ut("min_height"),qt=Ut("max_height"),eo=Ut("autoresize_overflow_padding"),Cn=Ut("autoresize_bottom_margin"),Qt=q=>q.plugins.fullscreen&&q.plugins.fullscreen.isFullscreen(),Sn=(q,Fe)=>{const En=q.getBody();En&&(En.style.overflowY=Fe?"":"hidden",Fe||(En.scrollTop=0))},Nt=(q,Fe,En,nt)=>{var W;const St=parseInt((W=q.getStyle(Fe,En,nt))!==null&&W!==void 0?W:"",10);return isNaN(St)?0:St},_t=q=>{if((q==null?void 0:q.type.toLowerCase())==="setcontent"){const Fe=q;return Fe.selection===!0||Fe.paste===!0}else return!1},qe=(q,Fe,En,nt)=>{var W;const St=q.dom,Gt=q.getDoc();if(!Gt)return;if(Qt(q)){Sn(q,!0);return}const cn=Gt.documentElement,Ae=nt?nt():eo(q),le=(W=Mt(q))!==null&&W!==void 0?W:q.getElement().offsetHeight;let Bo=le;const ro=Nt(St,cn,"margin-top",!0),Wt=Nt(St,cn,"margin-bottom",!0);let A=cn.offsetHeight+ro+Wt+Ae;A<0&&(A=0);const lo=q.getContainer().offsetHeight,rt=q.getContentAreaContainer().offsetHeight,Ho=lo-rt;A+Ho>le&&(Bo=A+Ho);const ln=qt(q);if(ln&&Bo>ln?(Bo=ln,Sn(q,!0)):Sn(q,!1),Bo!==Fe.get()){const Ke=Bo-Fe.get();if(St.setStyle(q.getContainer(),"height",Bo+"px"),Fe.set(Bo),yt(q),Xt.browser.isSafari()&&(Xt.os.isMacOS()||Xt.os.isiOS())){const vo=q.getWin();vo.scrollTo(vo.pageXOffset,vo.pageYOffset)}q.hasFocus()&&_t(En)&&q.selection.scrollIntoView(),(Xt.browser.isSafari()||Xt.browser.isChromium())&&Ke<0&&qe(q,Fe,En,nt)}},tt=(q,Fe)=>{let En=()=>Cn(q),nt,W;q.on("init",St=>{nt=0;const Gt=eo(q),cn=q.dom;cn.setStyles(q.getDoc().documentElement,{height:"auto"}),Xt.browser.isEdge()||Xt.browser.isIE()?cn.setStyles(q.getBody(),{paddingLeft:Gt,paddingRight:Gt,"min-height":0}):cn.setStyles(q.getBody(),{paddingLeft:Gt,paddingRight:Gt}),qe(q,Fe,St,En),nt+=1}),q.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",St=>{if(nt===1)W=q.getContainer().offsetHeight,qe(q,Fe,St,En),nt+=1;else if(nt===2){const Gt=W<q.getContainer().offsetHeight;if(Gt){const cn=q.dom,Ae=q.getDoc();cn.setStyles(Ae.documentElement,{"min-height":0}),cn.setStyles(q.getBody(),{"min-height":"inherit"})}En=Gt?an(0):En,nt+=1}else qe(q,Fe,St,En)})},jn=(q,Fe)=>{q.addCommand("mceAutoResize",()=>{qe(q,Fe)})};var Ct=()=>{$n.add("autoresize",q=>{if(Zn(q),q.options.isSet("resize")||q.options.set("resize",!1),!q.inline){const Fe=lt(0);jn(q,Fe),tt(q,Fe)}})};Ct()})();(function(){var lt=tinymce.util.Tools.resolve("tinymce.PluginManager");const $n=(Mt,qt)=>{Mt.focus(),Mt.undoManager.transact(()=>{Mt.setContent(qt)}),Mt.selection.setCursorLocation(),Mt.nodeChanged()},an=Mt=>Mt.getContent({source_view:!0}),Xt=Mt=>{const qt=an(Mt);Mt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:qt},onSubmit:eo=>{$n(Mt,eo.getData().code),eo.close()}})},yt=Mt=>{Mt.addCommand("mceCodeEditor",()=>{Xt(Mt)})},Ut=Mt=>{const qt=()=>Mt.execCommand("mceCodeEditor");Mt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:qt}),Mt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:qt})};var Zn=()=>{lt.add("code",Mt=>(yt(Mt),Ut(Mt),{}))};Zn()})();(function(){var lt=tinymce.util.Tools.resolve("tinymce.PluginManager");const $n=(Ne,Xe,rn)=>{var $t;return rn(Ne,Xe.prototype)?!0:(($t=Ne.constructor)===null||$t===void 0?void 0:$t.name)===Xe.name},an=Ne=>{const Xe=typeof Ne;return Ne===null?"null":Xe==="object"&&Array.isArray(Ne)?"array":Xe==="object"&&$n(Ne,String,(rn,$t)=>$t.isPrototypeOf(rn))?"string":Xe},Xt=Ne=>Xe=>an(Xe)===Ne,yt=Ne=>Xe=>typeof Xe===Ne,Ut=Xt("string"),Zn=yt("boolean"),Mt=Ne=>Ne==null,qt=Ne=>!Mt(Ne),eo=yt("function"),Cn=yt("number"),Qt=(Ne,Xe)=>rn=>Ne(Xe(rn)),Nt=(Ne=>()=>Ne)(!1);class _t{constructor(Xe,rn){this.tag=Xe,this.value=rn}static some(Xe){return new _t(!0,Xe)}static none(){return _t.singletonNone}fold(Xe,rn){return this.tag?rn(this.value):Xe()}isSome(){return this.tag}isNone(){return!this.tag}map(Xe){return this.tag?_t.some(Xe(this.value)):_t.none()}bind(Xe){return this.tag?Xe(this.value):_t.none()}exists(Xe){return this.tag&&Xe(this.value)}forall(Xe){return!this.tag||Xe(this.value)}filter(Xe){return!this.tag||Xe(this.value)?this:_t.none()}getOr(Xe){return this.tag?this.value:Xe}or(Xe){return this.tag?this:Xe}getOrThunk(Xe){return this.tag?this.value:Xe()}orThunk(Xe){return this.tag?this:Xe()}getOrDie(Xe){if(this.tag)return this.value;throw new Error(Xe??"Called getOrDie on None")}static from(Xe){return qt(Xe)?_t.some(Xe):_t.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Xe){this.tag&&Xe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_t.singletonNone=new _t(!1);const qe=(Ne,Xe)=>{const rn=Ne.length,$t=new Array(rn);for(let to=0;to<rn;to++){const Jo=Ne[to];$t[to]=Xe(Jo,to)}return $t},tt=(Ne,Xe)=>{for(let rn=0,$t=Ne.length;rn<$t;rn++){const to=Ne[rn];Xe(to,rn)}},jn=(Ne,Xe)=>{const rn=[];for(let $t=0,to=Ne.length;$t<to;$t++){const Jo=Ne[$t];Xe(Jo,$t)&&rn.push(Jo)}return rn},Ct=9,q=11,Fe=1,En=3,nt=(Ne,Xe)=>{const $t=(Xe||document).createElement("div");if($t.innerHTML=Ne,!$t.hasChildNodes()||$t.childNodes.length>1){const to="HTML does not have a single root node";throw console.error(to,Ne),new Error(to)}return Gt($t.childNodes[0])},W=(Ne,Xe)=>{const $t=(Xe||document).createElement(Ne);return Gt($t)},St=(Ne,Xe)=>{const $t=(Xe||document).createTextNode(Ne);return Gt($t)},Gt=Ne=>{if(Ne==null)throw new Error("Node cannot be null or undefined");return{dom:Ne}},Ae={fromHtml:nt,fromTag:W,fromText:St,fromDom:Gt,fromPoint:(Ne,Xe,rn)=>_t.from(Ne.dom.elementFromPoint(Xe,rn)).map(Gt)},le=(Ne,Xe)=>{const rn=Ne.dom;if(rn.nodeType!==Fe)return!1;{const $t=rn;if($t.matches!==void 0)return $t.matches(Xe);if($t.msMatchesSelector!==void 0)return $t.msMatchesSelector(Xe);if($t.webkitMatchesSelector!==void 0)return $t.webkitMatchesSelector(Xe);if($t.mozMatchesSelector!==void 0)return $t.mozMatchesSelector(Xe);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const Bo=Ne=>Ne.dom.nodeName.toLowerCase(),ro=Ne=>Ne.dom.nodeType,Wt=Ne=>Xe=>ro(Xe)===Ne,A=Wt(Fe),lo=Wt(En),rt=Wt(Ct),Ho=Wt(q),ln=Ne=>Xe=>A(Xe)&&Bo(Xe)===Ne,Ke=Ne=>Ae.fromDom(Ne.dom.ownerDocument),vo=Ne=>rt(Ne)?Ne:Ke(Ne),Gs=Ne=>_t.from(Ne.dom.parentNode).map(Ae.fromDom),mo=Ne=>qe(Ne.dom.childNodes,Ae.fromDom),qs=(Ne,Xe,rn)=>{if(Ut(rn)||Zn(rn)||Cn(rn))Ne.setAttribute(Xe,rn+"");else throw console.error("Invalid call to Attribute.set. Key ",Xe,":: Value ",rn,":: Element ",Ne),new Error("Attribute value was not simple")},Ze=(Ne,Xe,rn)=>{qs(Ne.dom,Xe,rn)},ut=(Ne,Xe)=>{Ne.dom.removeAttribute(Xe)},L=Ne=>Ho(Ne)&&qt(Ne.dom.host),io=eo(Element.prototype.attachShadow)&&eo(Node.prototype.getRootNode)?Ne=>Ae.fromDom(Ne.dom.getRootNode()):vo,as=Ne=>{const Xe=io(Ne);return L(Xe)?_t.some(Xe):_t.none()},Vo=Ne=>Ae.fromDom(Ne.dom.host),kc=Ne=>{const Xe=lo(Ne)?Ne.dom.parentNode:Ne.dom;if(Xe==null||Xe.ownerDocument===null)return!1;const rn=Xe.ownerDocument;return as(Ae.fromDom(Xe)).fold(()=>rn.body.contains(Xe),Qt(kc,Vo))},An=(Ne,Xe,rn)=>{let $t=Ne.dom;const to=eo(rn)?rn:Nt;for(;$t.parentNode;){$t=$t.parentNode;const Jo=Ae.fromDom($t);if(Xe(Jo))return _t.some(Jo);if(to(Jo))break}return _t.none()},Xo=(Ne,Xe,rn)=>An(Ne,$t=>le($t,Xe),rn),tn=Ne=>Ne.style!==void 0&&eo(Ne.style.getPropertyValue),we=(Ne,Xe)=>{const rn=Ne.dom,to=window.getComputedStyle(rn).getPropertyValue(Xe);return to===""&&!kc(Ne)?vt(rn,Xe):to},vt=(Ne,Xe)=>tn(Ne)?Ne.style.getPropertyValue(Xe):"",So=Ne=>we(Ne,"direction")==="rtl"?"rtl":"ltr",It=(Ne,Xe)=>jn(mo(Ne),Xe),Ks=(Ne,Xe)=>It(Ne,rn=>le(rn,Xe)),zo=Ne=>Gs(Ne).filter(A),jr=(Ne,Xe)=>(Xe?Xo(Ne,"ol,ul"):_t.some(Ne)).getOr(Ne),bs=ln("li"),Qs=(Ne,Xe,rn)=>{tt(Xe,$t=>{const to=Ae.fromDom($t),Jo=bs(to),ir=jr(to,Jo);zo(ir).each(cs=>{if(Ne.setStyle(ir.dom,"direction",null),So(cs)===rn?ut(ir,"dir"):Ze(ir,"dir",rn),So(ir)!==rn&&Ne.setStyle(ir.dom,"direction",rn),Jo){const mt=Ks(ir,"li[dir],li[style]");tt(mt,po=>{ut(po,"dir"),Ne.setStyle(po.dom,"direction",null)})}})})},lc=(Ne,Xe)=>{Ne.selection.isEditable()&&(Qs(Ne.dom,Ne.selection.getSelectedBlocks(),Xe),Ne.nodeChanged())},er=Ne=>{Ne.addCommand("mceDirectionLTR",()=>{lc(Ne,"ltr")}),Ne.addCommand("mceDirectionRTL",()=>{lc(Ne,"rtl")})},gs=(Ne,Xe)=>rn=>{const $t=to=>{const Jo=Ae.fromDom(to.element);rn.setActive(So(Jo)===Xe),rn.setEnabled(Ne.selection.isEditable())};return Ne.on("NodeChange",$t),rn.setEnabled(Ne.selection.isEditable()),()=>Ne.off("NodeChange",$t)},es=Ne=>{Ne.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>Ne.execCommand("mceDirectionLTR"),onSetup:gs(Ne,"ltr")}),Ne.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>Ne.execCommand("mceDirectionRTL"),onSetup:gs(Ne,"rtl")})};var ma=()=>{lt.add("directionality",Ne=>{er(Ne),es(Ne)})};ma()})();(function(){const lt=K=>{let ne=K;return{get:()=>ne,set:hn=>{ne=hn}}};var $n=tinymce.util.Tools.resolve("tinymce.PluginManager");const an=K=>({isFullscreen:()=>K.get()!==null}),Xt=(K,ne,xe)=>{var Re;return xe(K,ne.prototype)?!0:((Re=K.constructor)===null||Re===void 0?void 0:Re.name)===ne.name},yt=K=>{const ne=typeof K;return K===null?"null":ne==="object"&&Array.isArray(K)?"array":ne==="object"&&Xt(K,String,(xe,Re)=>Re.isPrototypeOf(xe))?"string":ne},Ut=K=>ne=>yt(ne)===K,Zn=K=>ne=>typeof ne===K,Mt=K=>ne=>K===ne,qt=Ut("string"),eo=Ut("object"),Cn=Ut("array"),Qt=Mt(null),Sn=Zn("boolean"),Nt=Mt(void 0),_t=K=>K==null,qe=K=>!_t(K),tt=Zn("function"),jn=Zn("number"),Ct=()=>{},q=(K,ne)=>(...xe)=>K(ne.apply(null,xe)),Fe=(K,ne)=>xe=>K(ne(xe)),En=K=>()=>K;function nt(K,...ne){return(...xe)=>{const Re=ne.concat(xe);return K.apply(null,Re)}}const W=En(!1),St=En(!0);class Gt{constructor(ne,xe){this.tag=ne,this.value=xe}static some(ne){return new Gt(!0,ne)}static none(){return Gt.singletonNone}fold(ne,xe){return this.tag?xe(this.value):ne()}isSome(){return this.tag}isNone(){return!this.tag}map(ne){return this.tag?Gt.some(ne(this.value)):Gt.none()}bind(ne){return this.tag?ne(this.value):Gt.none()}exists(ne){return this.tag&&ne(this.value)}forall(ne){return!this.tag||ne(this.value)}filter(ne){return!this.tag||ne(this.value)?this:Gt.none()}getOr(ne){return this.tag?this.value:ne}or(ne){return this.tag?this:ne}getOrThunk(ne){return this.tag?this.value:ne()}orThunk(ne){return this.tag?this:ne()}getOrDie(ne){if(this.tag)return this.value;throw new Error(ne??"Called getOrDie on None")}static from(ne){return qe(ne)?Gt.some(ne):Gt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ne){this.tag&&ne(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Gt.singletonNone=new Gt(!1);const cn=Array.prototype.push,Ae=(K,ne)=>{const xe=K.length,Re=new Array(xe);for(let hn=0;hn<xe;hn++){const bo=K[hn];Re[hn]=ne(bo,hn)}return Re},le=(K,ne)=>{for(let xe=0,Re=K.length;xe<Re;xe++){const hn=K[xe];ne(hn,xe)}},Bo=(K,ne)=>{const xe=[];for(let Re=0,hn=K.length;Re<hn;Re++){const bo=K[Re];ne(bo,Re)&&xe.push(bo)}return xe},ro=(K,ne,xe)=>{for(let Re=0,hn=K.length;Re<hn;Re++){const bo=K[Re];if(ne(bo,Re))return Gt.some(bo);if(xe(bo,Re))break}return Gt.none()},Wt=(K,ne)=>ro(K,ne,W),A=K=>{const ne=[];for(let xe=0,Re=K.length;xe<Re;++xe){if(!Cn(K[xe]))throw new Error("Arr.flatten item "+xe+" was not an array, input: "+K);cn.apply(ne,K[xe])}return ne},lo=(K,ne)=>A(Ae(K,ne)),rt=(K,ne)=>ne>=0&&ne<K.length?Gt.some(K[ne]):Gt.none(),Ho=K=>rt(K,0),ln=(K,ne)=>{for(let xe=0;xe<K.length;xe++){const Re=ne(K[xe],xe);if(Re.isSome())return Re}return Gt.none()},Ke=(K,ne,xe)=>K.isSome()&&ne.isSome()?Gt.some(xe(K.getOrDie(),ne.getOrDie())):Gt.none(),vo=K=>{const ne=lt(Gt.none()),xe=()=>ne.get().each(K);return{clear:()=>{xe(),ne.set(Gt.none())},isSet:()=>ne.get().isSome(),get:()=>ne.get(),set:Ca=>{xe(),ne.set(Gt.some(Ca))}}},Gs=()=>vo(K=>K.unbind()),mo=()=>{const K=vo(Ct);return{...K,on:xe=>K.get().each(xe)}},qs=(K,ne)=>{let xe=null;return{cancel:()=>{Qt(xe)||(clearTimeout(xe),xe=null)},throttle:(...bo)=>{Qt(xe)&&(xe=setTimeout(()=>{xe=null,K.apply(null,bo)},ne))}}},Ze=Object.keys,ut=(K,ne)=>{const xe=Ze(K);for(let Re=0,hn=xe.length;Re<hn;Re++){const bo=xe[Re],Ps=K[bo];ne(Ps,bo)}},L=typeof window<"u"?window:Function("return this;")(),Lr=(K,ne)=>{let xe=ne??L;for(let Re=0;Re<K.length&&xe!==void 0&&xe!==null;++Re)xe=xe[K[Re]];return xe},io=(K,ne)=>{const xe=K.split(".");return Lr(xe,ne)},as=(K,ne)=>io(K,ne),Vo=(K,ne)=>{const xe=as(K,ne);if(xe==null)throw new Error(K+" not available on this browser");return xe},kc=Object.getPrototypeOf,An=K=>Vo("HTMLElement",K),Xo=K=>{const ne=io("ownerDocument.defaultView",K);return eo(K)&&(An(ne).prototype.isPrototypeOf(K)||/^HTML\w*Element$/.test(kc(K).constructor.name))},tn=9,we=11,vt=1,So=3,It=K=>K.dom.nodeType,Ks=K=>ne=>It(ne)===K,zo=K=>jr(K)&&Xo(K.dom),jr=Ks(vt),bs=Ks(So),Qs=Ks(tn),lc=Ks(we),er=(K,ne,xe)=>{if(qt(xe)||Sn(xe)||jn(xe))K.setAttribute(ne,xe+"");else throw console.error("Invalid call to Attribute.set. Key ",ne,":: Value ",xe,":: Element ",K),new Error("Attribute value was not simple")},gs=(K,ne,xe)=>{er(K.dom,ne,xe)},es=(K,ne)=>{const xe=K.dom.getAttribute(ne);return xe===null?void 0:xe},ma=(K,ne)=>{K.dom.removeAttribute(ne)},Ne=K=>K.dom.classList!==void 0,Xe=(K,ne)=>Ne(K)&&K.dom.classList.contains(ne),rn=(K,ne,xe=0,Re)=>{const hn=K.indexOf(ne,xe);return hn!==-1?Nt(Re)?!0:hn+ne.length<=Re:!1},$t=K=>K.style!==void 0&&tt(K.style.getPropertyValue),to=(K,ne)=>{const Re=(ne||document).createElement("div");if(Re.innerHTML=K,!Re.hasChildNodes()||Re.childNodes.length>1){const hn="HTML does not have a single root node";throw console.error(hn,K),new Error(hn)}return Hn(Re.childNodes[0])},Jo=(K,ne)=>{const Re=(ne||document).createElement(K);return Hn(Re)},ir=(K,ne)=>{const Re=(ne||document).createTextNode(K);return Hn(Re)},Hn=K=>{if(K==null)throw new Error("Node cannot be null or undefined");return{dom:K}},ur={fromHtml:to,fromTag:Jo,fromText:ir,fromDom:Hn,fromPoint:(K,ne,xe)=>Gt.from(K.dom.elementFromPoint(ne,xe)).map(Hn)},mt=(K,ne)=>{const xe=K.dom;if(xe.nodeType!==vt)return!1;{const Re=xe;if(Re.matches!==void 0)return Re.matches(ne);if(Re.msMatchesSelector!==void 0)return Re.msMatchesSelector(ne);if(Re.webkitMatchesSelector!==void 0)return Re.webkitMatchesSelector(ne);if(Re.mozMatchesSelector!==void 0)return Re.mozMatchesSelector(ne);throw new Error("Browser lacks native selectors")}},po=K=>K.nodeType!==vt&&K.nodeType!==tn&&K.nodeType!==we||K.childElementCount===0,Dr=(K,ne)=>{const xe=document;return po(xe)?[]:Ae(xe.querySelectorAll(K),ur.fromDom)},fa=(K,ne)=>K.dom===ne.dom,ga=K=>ur.fromDom(K.dom.ownerDocument),ha=K=>Qs(K)?K:ga(K),ls=K=>Gt.from(K.dom.parentNode).map(ur.fromDom),Ta=(K,ne)=>{const xe=tt(ne)?ne:W;let Re=K.dom;const hn=[];for(;Re.parentNode!==null&&Re.parentNode!==void 0;){const bo=Re.parentNode,Ps=ur.fromDom(bo);if(hn.push(Ps),xe(Ps)===!0)break;Re=bo}return hn},Ya=K=>{const ne=xe=>Bo(xe,Re=>!fa(K,Re));return ls(K).map(wn).map(ne).getOr([])},is=K=>Gt.from(K.dom.nextSibling).map(ur.fromDom),wn=K=>Ae(K.dom.childNodes,ur.fromDom),wr=K=>lc(K)&&qe(K.dom.host),Xa=tt(Element.prototype.attachShadow)&&tt(Node.prototype.getRootNode),Uc=En(Xa),fl=Xa?K=>ur.fromDom(K.dom.getRootNode()):ha,tr=K=>{const ne=fl(K);return wr(ne)?Gt.some(ne):Gt.none()},nr=K=>ur.fromDom(K.dom.host),zs=K=>{if(Uc()&&qe(K.target)){const ne=ur.fromDom(K.target);if(jr(ne)&&La(ne)&&K.composed&&K.composedPath){const xe=K.composedPath();if(xe)return Ho(xe)}}return Gt.from(K.target)},La=K=>qe(K.dom.shadowRoot),gl=K=>{const ne=bs(K)?K.dom.parentNode:K.dom;if(ne==null||ne.ownerDocument===null)return!1;const xe=ne.ownerDocument;return tr(ur.fromDom(ne)).fold(()=>xe.body.contains(ne),Fe(gl,nr))},Fr=K=>{const ne=K.dom.body;if(ne==null)throw new Error("Body is not available yet");return ur.fromDom(ne)},ce=(K,ne,xe)=>{if(!qt(xe))throw console.error("Invalid call to CSS.set. Property ",ne,":: Value ",xe,":: Element ",K),new Error("CSS value must be a string: "+xe);$t(K)&&K.style.setProperty(ne,xe)},se=(K,ne,xe)=>{const Re=K.dom;ce(Re,ne,xe)},Oe=(K,ne)=>{const xe=K.dom;ut(ne,(Re,hn)=>{ce(xe,hn,Re)})},He=(K,ne)=>{const xe=K.dom,hn=window.getComputedStyle(xe).getPropertyValue(ne);return hn===""&&!gl(K)?fn(xe,ne):hn},fn=(K,ne)=>$t(K)?K.style.getPropertyValue(ne):"",Tn=(K,ne,xe,Re,hn,bo,Ps)=>({target:K,x:ne,y:xe,stop:Re,prevent:hn,kill:bo,raw:Ps}),no=K=>{const ne=ur.fromDom(zs(K).getOr(K.target)),xe=()=>K.stopPropagation(),Re=()=>K.preventDefault(),hn=q(Re,xe);return Tn(ne,K.clientX,K.clientY,xe,Re,hn,K)},Rs=(K,ne)=>xe=>{K(xe)&&ne(no(xe))},he=(K,ne,xe,Re,hn)=>{const bo=Rs(xe,Re);return K.dom.addEventListener(ne,bo,hn),{unbind:nt(Us,K,ne,bo,hn)}},Un=(K,ne,xe,Re)=>he(K,ne,xe,Re,!1),Us=(K,ne,xe,Re)=>{K.dom.removeEventListener(ne,xe,Re)},br=St,Kr=(K,ne,xe)=>Un(K,ne,br,xe),ts=K=>{let ne=!1,xe;return(...Re)=>(ne||(ne=!0,xe=K.apply(null,Re)),xe)},Dl=(K,ne,xe,Re)=>{const hn=K.isiOS()&&/ipad/i.test(xe)===!0,bo=K.isiOS()&&!hn,Ps=K.isiOS()||K.isAndroid(),Ca=Ps||Re("(pointer:coarse)"),Co=hn||!bo&&Ps&&Re("(min-device-width:768px)"),Jr=bo||Ps&&!Co,js=ne.isSafari()&&K.isiOS()&&/safari/i.test(xe)===!1,Mr=!Jr&&!Co&&!js;return{isiPad:En(hn),isiPhone:En(bo),isTablet:En(Co),isPhone:En(Jr),isTouch:En(Ca),isAndroid:K.isAndroid,isiOS:K.isiOS,isWebView:En(js),isDesktop:En(Mr)}},ic=(K,ne)=>{for(let xe=0;xe<K.length;xe++){const Re=K[xe];if(Re.test(ne))return Re}},ra=(K,ne)=>{const xe=ic(K,ne);if(!xe)return{major:0,minor:0};const Re=hn=>Number(ne.replace(xe,"$"+hn));return qo(Re(1),Re(2))},Rr=(K,ne)=>{const xe=String(ne).toLowerCase();return K.length===0?$o():ra(K,xe)},$o=()=>qo(0,0),qo=(K,ne)=>({major:K,minor:ne}),vr={nu:qo,detect:Rr,unknown:$o},aa=(K,ne)=>ln(ne.brands,xe=>{const Re=xe.brand.toLowerCase();return Wt(K,hn=>{var bo;return Re===((bo=hn.brand)===null||bo===void 0?void 0:bo.toLowerCase())}).map(hn=>({current:hn.name,version:vr.nu(parseInt(xe.version,10),0)}))}),_c=(K,ne)=>{const xe=String(ne).toLowerCase();return Wt(K,Re=>Re.search(xe))},ei=(K,ne)=>_c(K,ne).map(xe=>{const Re=vr.detect(xe.versionRegexes,ne);return{current:xe.name,version:Re}}),Xc=(K,ne)=>_c(K,ne).map(xe=>{const Re=vr.detect(xe.versionRegexes,ne);return{current:xe.name,version:Re}}),Uo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,dr=K=>ne=>rn(ne,K),Ea=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:K=>rn(K,"edge/")&&rn(K,"chrome")&&rn(K,"safari")&&rn(K,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Uo],search:K=>rn(K,"chrome")&&!rn(K,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:K=>rn(K,"msie")||rn(K,"trident")},{name:"Opera",versionRegexes:[Uo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:dr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:dr("firefox")},{name:"Safari",versionRegexes:[Uo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:K=>(rn(K,"safari")||rn(K,"mobile/"))&&rn(K,"applewebkit")}],Rl=[{name:"Windows",search:dr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:K=>rn(K,"iphone")||rn(K,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:dr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:dr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:dr("linux"),versionRegexes:[]},{name:"Solaris",search:dr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:dr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:dr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],pa={browsers:En(Ea),oses:En(Rl)},As="Edge",hs="Chromium",Fa="IE",Ml="Opera",Ko="Firefox",Yr="Safari",ba=()=>Sr({current:void 0,version:vr.unknown()}),Sr=K=>{const ne=K.current,xe=K.version,Re=hn=>()=>ne===hn;return{current:ne,version:xe,isEdge:Re(As),isChromium:Re(hs),isIE:Re(Fa),isOpera:Re(Ml),isFirefox:Re(Ko),isSafari:Re(Yr)}},Ha={unknown:ba,nu:Sr,edge:En(As),chromium:En(hs),ie:En(Fa),opera:En(Ml),firefox:En(Ko),safari:En(Yr)},hl="Windows",Xr="iOS",Ja="Android",Ac="Linux",iu="macOS",uc="Solaris",Nl="FreeBSD",va="ChromeOS",pl=()=>Pl({current:void 0,version:vr.unknown()}),Pl=K=>{const ne=K.current,xe=K.version,Re=hn=>()=>ne===hn;return{current:ne,version:xe,isWindows:Re(hl),isiOS:Re(Xr),isAndroid:Re(Ja),isMacOS:Re(iu),isLinux:Re(Ac),isSolaris:Re(uc),isFreeBSD:Re(Nl),isChromeOS:Re(va)}},ti={unknown:pl,nu:Pl,windows:En(hl),ios:En(Xr),android:En(Ja),linux:En(Ac),macos:En(iu),solaris:En(uc),freebsd:En(Nl),chromeos:En(va)},Fi={detect:(K,ne,xe)=>{const Re=pa.browsers(),hn=pa.oses(),bo=ne.bind(Co=>aa(Re,Co)).orThunk(()=>ei(Re,K)).fold(Ha.unknown,Ha.nu),Ps=Xc(hn,K).fold(ti.unknown,ti.nu),Ca=Dl(Ps,bo,K,xe);return{browser:bo,os:Ps,deviceType:Ca}}},j=K=>window.matchMedia(K).matches;let de=ts(()=>Fi.detect(navigator.userAgent,Gt.from(navigator.userAgentData),j));const pe=()=>de(),ze=(K,ne)=>({left:K,top:ne,translate:(Re,hn)=>ze(K+Re,ne+hn)}),wt=ze,kn=K=>{const ne=K!==void 0?K.dom:document,xe=ne.body.scrollLeft||ne.documentElement.scrollLeft,Re=ne.body.scrollTop||ne.documentElement.scrollTop;return wt(xe,Re)},ko=K=>{const ne=K===void 0?window:K;return pe().browser.isFirefox()?Gt.none():Gt.from(ne.visualViewport)},xr=(K,ne,xe,Re)=>({x:K,y:ne,width:xe,height:Re,right:K+xe,bottom:ne+Re}),Io=K=>{const ne=K===void 0?window:K,xe=ne.document,Re=kn(ur.fromDom(xe));return ko(ne).fold(()=>{const hn=ne.document.documentElement,bo=hn.clientWidth,Ps=hn.clientHeight;return xr(Re.left,Re.top,bo,Ps)},hn=>xr(Math.max(hn.pageLeft,Re.left),Math.max(hn.pageTop,Re.top),hn.width,hn.height))},No=(K,ne,xe)=>ko(xe).map(Re=>{const hn=bo=>ne(no(bo));return Re.addEventListener(K,hn),{unbind:()=>Re.removeEventListener(K,hn)}}).getOrThunk(()=>({unbind:Ct}));var Wo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Hr=tinymce.util.Tools.resolve("tinymce.Env");const Ci=(K,ne)=>{K.dispatch("FullscreenStateChanged",{state:ne}),K.dispatch("ResizeEditor")},Ot=K=>ne=>ne.options.get(K),Zd=K=>{const ne=K.options.register;ne("fullscreen_native",{processor:"boolean",default:!1})},Ns=Ot("fullscreen_native"),B=K=>{const ne=ur.fromDom(K.getElement());return tr(ne).map(nr).getOrThunk(()=>Fr(ga(ne)))},X=K=>K.fullscreenElement!==void 0?K.fullscreenElement:K.msFullscreenElement!==void 0?K.msFullscreenElement:K.webkitFullscreenElement!==void 0?K.webkitFullscreenElement:null,oe=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",De=K=>{const ne=K.dom;ne.requestFullscreen?ne.requestFullscreen():ne.msRequestFullscreen?ne.msRequestFullscreen():ne.webkitRequestFullScreen&&ne.webkitRequestFullScreen()},Bt=K=>{const ne=K.dom;ne.exitFullscreen?ne.exitFullscreen():ne.msExitFullscreen?ne.msExitFullscreen():ne.webkitCancelFullScreen&&ne.webkitCancelFullScreen()},fo=K=>K.dom===X(ga(K).dom),Yt=(K,ne,xe)=>Bo(Ta(K,xe),ne),Ws=(K,ne)=>Bo(Ya(K),ne),at=K=>Dr(K),xs=(K,ne,xe)=>Yt(K,Re=>mt(Re,ne),xe),Qa=(K,ne)=>Ws(K,xe=>mt(xe,ne)),Ms="data-ephox-mobile-fullscreen-style",Vr="display:none!important;",bl="position:absolute!important;",_o="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",ec="background-color:rgb(255,255,255)!important;",Zs=Hr.os.isAndroid(),ni=K=>{const ne=He(K,"background-color");return ne!==void 0&&ne!==""?"background-color:"+ne+"!important":ec},Ys=(K,ne,xe)=>{const Re=Jr=>Qa(Jr,"*:not(.tox-silver-sink)"),hn=Jr=>js=>{const Mr=es(js,"style"),Tr=Mr===void 0?"no-styles":Mr.trim();Tr!==Jr&&(gs(js,Ms,Tr),Oe(js,K.parseStyle(Jr)))},bo=xs(ne,"*"),Ps=lo(bo,Re),Ca=ni(xe);le(Ps,hn(Vr)),le(bo,hn(bl+_o+Ca)),hn((Zs===!0?"":bl)+_o+Ca)(ne)},Pu=K=>{const ne=at("["+Ms+"]");le(ne,xe=>{const Re=es(xe,Ms);Re&&Re!=="no-styles"?Oe(xe,K.parseStyle(Re)):ma(xe,"style"),ma(xe,Ms)})},Pm=Wo.DOM,Ag=()=>Io(window),or=K=>window.scrollTo(K.x,K.y),Bl=ko().fold(()=>({bind:Ct,unbind:Ct}),K=>{const ne=mo(),xe=Gs(),Re=Gs(),hn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},bo=()=>{window.requestAnimationFrame(()=>{ne.on(Jr=>Oe(Jr,{top:K.offsetTop+"px",left:K.offsetLeft+"px",height:K.height+"px",width:K.width+"px"}))})},Ps=qs(()=>{hn(),bo()},50);return{bind:Jr=>{ne.set(Jr),Ps.throttle(),xe.set(No("resize",Ps.throttle)),Re.set(No("scroll",Ps.throttle))},unbind:()=>{ne.on(()=>{xe.clear(),Re.clear()}),ne.clear()}}}),ya=(K,ne)=>{const xe=document.body,Re=document.documentElement,hn=K.getContainer(),bo=ur.fromDom(hn),Ps=is(bo).filter(_a=>zo(_a)&&Xe(_a,"tox-silver-sink")),Ca=B(K),Co=ne.get(),Jr=ur.fromDom(K.getBody()),js=Hr.deviceType.isTouch(),Mr=hn.style,Tr=K.iframeElement,yr=Tr==null?void 0:Tr.style,Wc=_a=>{_a(xe,"tox-fullscreen"),_a(Re,"tox-fullscreen"),_a(hn,"tox-fullscreen"),tr(bo).map(Zc=>nr(Zc).dom).each(Zc=>{_a(Zc,"tox-fullscreen"),_a(Zc,"tox-shadowhost")})},oi=()=>{js&&Pu(K.dom),Wc(Pm.removeClass),Bl.unbind(),Gt.from(ne.get()).each(_a=>_a.fullscreenChangeHandler.unbind())};if(Co)Co.fullscreenChangeHandler.unbind(),Ns(K)&&fo(Ca)&&Bt(ga(Ca)),yr.width=Co.iframeWidth,yr.height=Co.iframeHeight,Mr.width=Co.containerWidth,Mr.height=Co.containerHeight,Mr.top=Co.containerTop,Mr.left=Co.containerLeft,Ke(Ps,Co.sinkCssPosition,(_a,Zc)=>{se(_a,"position",Zc)}),oi(),or(Co.scrollPos),ne.set(null),Ci(K,!1),K.off("remove",oi);else{const _a=Kr(ga(Ca),oe(),wi=>{Ns(K)&&!fo(Ca)&&ne.get()!==null&&ya(K,ne)}),Zc={scrollPos:Ag(),containerWidth:Mr.width,containerHeight:Mr.height,containerTop:Mr.top,containerLeft:Mr.left,iframeWidth:yr.width,iframeHeight:yr.height,fullscreenChangeHandler:_a,sinkCssPosition:Ps.map(wi=>He(wi,"position"))};js&&Ys(K.dom,bo,Jr),yr.width=yr.height="100%",Mr.width=Mr.height="",Wc(Pm.addClass),Ps.each(wi=>{se(wi,"position","fixed")}),Bl.bind(bo),K.on("remove",oi),ne.set(Zc),Ns(K)&&De(Ca),Ci(K,!0)}},ka=(K,ne)=>{K.addCommand("mceFullScreen",()=>{ya(K,ne)})};var tc=tinymce.util.Tools.resolve("tinymce.util.VK");const jd=(K,ne)=>{K.on("init",()=>{K.on("keydown",xe=>{xe.keyCode===tc.TAB&&!(xe.metaKey||xe.ctrlKey)&&ne.get()&&xe.preventDefault()})})},Ao=(K,ne)=>xe=>{xe.setActive(ne.get()!==null);const Re=hn=>xe.setActive(hn.state);return K.on("FullscreenStateChanged",Re),()=>K.off("FullscreenStateChanged",Re)},dc=(K,ne)=>{const xe=()=>K.execCommand("mceFullScreen");K.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:xe,onSetup:Ao(K,ne)}),K.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:xe,onSetup:Ao(K,ne),shortcut:"Meta+Shift+F"})};var Va=()=>{$n.add("fullscreen",K=>{const ne=lt(null);return K.inline||(Zd(K),ka(K,ne),dc(K,ne),jd(K,ne),K.addShortcut("Meta+Shift+F","","mceFullScreen")),an(ne)})};Va()})();(function(){var lt=tinymce.util.Tools.resolve("tinymce.PluginManager");const $n=Object.getPrototypeOf,an=(B,X,oe)=>{var De;return oe(B,X.prototype)?!0:((De=B.constructor)===null||De===void 0?void 0:De.name)===X.name},Xt=B=>{const X=typeof B;return B===null?"null":X==="object"&&Array.isArray(B)?"array":X==="object"&&an(B,String,(oe,De)=>De.isPrototypeOf(oe))?"string":X},yt=B=>X=>Xt(X)===B,Ut=B=>X=>typeof X===B,Zn=B=>X=>B===X,Mt=(B,X)=>eo(B)&&an(B,X,(oe,De)=>$n(oe)===De),qt=yt("string"),eo=yt("object"),Cn=B=>Mt(B,Object),Qt=yt("array"),Sn=Zn(null),Nt=Ut("boolean"),_t=B=>B==null,qe=B=>!_t(B),tt=Ut("function"),jn=Ut("number"),Ct=(B,X)=>{if(Qt(B)){for(let oe=0,De=B.length;oe<De;++oe)if(!X(B[oe]))return!1;return!0}return!1},q=()=>{};class Fe{constructor(X,oe){this.tag=X,this.value=oe}static some(X){return new Fe(!0,X)}static none(){return Fe.singletonNone}fold(X,oe){return this.tag?oe(this.value):X()}isSome(){return this.tag}isNone(){return!this.tag}map(X){return this.tag?Fe.some(X(this.value)):Fe.none()}bind(X){return this.tag?X(this.value):Fe.none()}exists(X){return this.tag&&X(this.value)}forall(X){return!this.tag||X(this.value)}filter(X){return!this.tag||X(this.value)?this:Fe.none()}getOr(X){return this.tag?this.value:X}or(X){return this.tag?this:X}getOrThunk(X){return this.tag?this.value:X()}orThunk(X){return this.tag?this:X()}getOrDie(X){if(this.tag)return this.value;throw new Error(X??"Called getOrDie on None")}static from(X){return qe(X)?Fe.some(X):Fe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(X){this.tag&&X(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Fe.singletonNone=new Fe(!1);const En=Object.keys,nt=Object.hasOwnProperty,W=(B,X)=>{const oe=En(B);for(let De=0,Bt=oe.length;De<Bt;De++){const fo=oe[De],Yt=B[fo];X(Yt,fo)}},St=B=>(X,oe)=>{B[oe]=X},Gt=(B,X,oe,De)=>{W(B,(Bt,fo)=>{(X(Bt,fo)?oe:De)(Bt,fo)})},cn=(B,X)=>{const oe={};return Gt(B,X,St(oe),q),oe},Ae=(B,X)=>nt.call(B,X),le=(B,X)=>Ae(B,X)&&B[X]!==void 0&&B[X]!==null,Bo=Array.prototype.push,ro=B=>{const X=[];for(let oe=0,De=B.length;oe<De;++oe){if(!Qt(B[oe]))throw new Error("Arr.flatten item "+oe+" was not an array, input: "+B);Bo.apply(X,B[oe])}return X},Wt=(B,X)=>X>=0&&X<B.length?Fe.some(B[X]):Fe.none(),A=B=>Wt(B,0),lo=(B,X)=>{for(let oe=0;oe<B.length;oe++){const De=X(B[oe],oe);if(De.isSome())return De}return Fe.none()};typeof window<"u"||Function("return this;")();const rt=(B,X,oe)=>{if(qt(oe)||Nt(oe)||jn(oe))B.setAttribute(X,oe+"");else throw console.error("Invalid call to Attribute.set. Key ",X,":: Value ",oe,":: Element ",B),new Error("Attribute value was not simple")},Ho=(B,X,oe)=>{rt(B.dom,X,oe)},ln=(B,X)=>{B.dom.removeAttribute(X)},Ke=(B,X)=>{const De=(X||document).createElement("div");if(De.innerHTML=B,!De.hasChildNodes()||De.childNodes.length>1){const Bt="HTML does not have a single root node";throw console.error(Bt,B),new Error(Bt)}return mo(De.childNodes[0])},vo=(B,X)=>{const De=(X||document).createElement(B);return mo(De)},Gs=(B,X)=>{const De=(X||document).createTextNode(B);return mo(De)},mo=B=>{if(B==null)throw new Error("Node cannot be null or undefined");return{dom:B}},Ze={fromHtml:Ke,fromTag:vo,fromText:Gs,fromDom:mo,fromPoint:(B,X,oe)=>Fe.from(B.dom.elementFromPoint(X,oe)).map(mo)};var ut=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),L=tinymce.util.Tools.resolve("tinymce.util.URI");const Lr=B=>B.length>0,io=B=>X=>X.options.get(B),as=B=>{const X=B.options.register;X("image_dimensions",{processor:"boolean",default:!0}),X("image_advtab",{processor:"boolean",default:!1}),X("image_uploadtab",{processor:"boolean",default:!0}),X("image_prepend_url",{processor:"string",default:""}),X("image_class_list",{processor:"object[]"}),X("image_description",{processor:"boolean",default:!0}),X("image_title",{processor:"boolean",default:!1}),X("image_caption",{processor:"boolean",default:!1}),X("image_list",{processor:oe=>{const De=oe===!1||qt(oe)||Ct(oe,eo)||tt(oe);return De?{value:oe,valid:De}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Vo=io("image_dimensions"),kc=io("image_advtab"),An=io("image_uploadtab"),Xo=io("image_prepend_url"),tn=io("image_class_list"),we=io("image_description"),vt=io("image_title"),So=io("image_caption"),It=io("image_list"),Ks=io("a11y_advanced_options"),zo=io("automatic_uploads"),jr=B=>Lr(B.options.get("images_upload_url")),bs=B=>qe(B.options.get("images_upload_handler")),Qs=(B,X)=>Math.max(parseInt(B,10),parseInt(X,10)),lc=B=>new Promise(X=>{const oe=document.createElement("img"),De=fo=>{oe.onload=oe.onerror=null,oe.parentNode&&oe.parentNode.removeChild(oe),X(fo)};oe.onload=()=>{const fo=Qs(oe.width,oe.clientWidth),Yt=Qs(oe.height,oe.clientHeight),Ws={width:fo,height:Yt};De(Promise.resolve(Ws))},oe.onerror=()=>{De(Promise.reject(`Failed to get image dimensions for: ${B}`))};const Bt=oe.style;Bt.visibility="hidden",Bt.position="fixed",Bt.bottom=Bt.left="0px",Bt.width=Bt.height="auto",document.body.appendChild(oe),oe.src=B}),er=B=>(B&&(B=B.replace(/px$/,"")),B),gs=B=>(B.length>0&&/^[0-9]+$/.test(B)&&(B+="px"),B),es=B=>{if(B.margin){const X=String(B.margin).split(" ");switch(X.length){case 1:B["margin-top"]=B["margin-top"]||X[0],B["margin-right"]=B["margin-right"]||X[0],B["margin-bottom"]=B["margin-bottom"]||X[0],B["margin-left"]=B["margin-left"]||X[0];break;case 2:B["margin-top"]=B["margin-top"]||X[0],B["margin-right"]=B["margin-right"]||X[1],B["margin-bottom"]=B["margin-bottom"]||X[0],B["margin-left"]=B["margin-left"]||X[1];break;case 3:B["margin-top"]=B["margin-top"]||X[0],B["margin-right"]=B["margin-right"]||X[1],B["margin-bottom"]=B["margin-bottom"]||X[2],B["margin-left"]=B["margin-left"]||X[1];break;case 4:B["margin-top"]=B["margin-top"]||X[0],B["margin-right"]=B["margin-right"]||X[1],B["margin-bottom"]=B["margin-bottom"]||X[2],B["margin-left"]=B["margin-left"]||X[3]}delete B.margin}return B},ma=(B,X)=>{const oe=It(B);qt(oe)?fetch(oe).then(De=>{De.ok&&De.json().then(X)}):tt(oe)?oe(X):X(oe)},Ne=(B,X,oe)=>{const De=()=>{oe.onload=oe.onerror=null,B.selection&&(B.selection.select(oe),B.nodeChanged())};oe.onload=()=>{!X.width&&!X.height&&Vo(B)&&B.dom.setAttribs(oe,{width:String(oe.clientWidth),height:String(oe.clientHeight)}),De()},oe.onerror=De},Xe=B=>new Promise((X,oe)=>{const De=new FileReader;De.onload=()=>{X(De.result)},De.onerror=()=>{var Bt;oe((Bt=De.error)===null||Bt===void 0?void 0:Bt.message)},De.readAsDataURL(B)}),rn=B=>B.nodeName==="IMG"&&(B.hasAttribute("data-mce-object")||B.hasAttribute("data-mce-placeholder")),$t=(B,X)=>{const oe=B.options.get;return L.isDomSafe(X,"img",{allow_html_data_urls:oe("allow_html_data_urls"),allow_script_urls:oe("allow_script_urls"),allow_svg_data_urls:oe("allow_svg_data_urls")})},to=ut.DOM,Jo=B=>B.style.marginLeft&&B.style.marginRight&&B.style.marginLeft===B.style.marginRight?er(B.style.marginLeft):"",ir=B=>B.style.marginTop&&B.style.marginBottom&&B.style.marginTop===B.style.marginBottom?er(B.style.marginTop):"",Hn=B=>B.style.borderWidth?er(B.style.borderWidth):"",cs=(B,X)=>{var oe;return B.hasAttribute(X)&&(oe=B.getAttribute(X))!==null&&oe!==void 0?oe:""},ur=B=>B.parentNode!==null&&B.parentNode.nodeName==="FIGURE",mt=(B,X,oe)=>{oe===""||oe===null?B.removeAttribute(X):B.setAttribute(X,oe)},po=B=>{const X=to.create("figure",{class:"image"});to.insertAfter(X,B),X.appendChild(B),X.appendChild(to.create("figcaption",{contentEditable:"true"},"Caption")),X.contentEditable="false"},Dr=B=>{const X=B.parentNode;qe(X)&&(to.insertAfter(B,X),to.remove(X))},fa=B=>{ur(B)?Dr(B):po(B)},ga=(B,X)=>{const oe=B.getAttribute("style"),De=X(oe!==null?oe:"");De.length>0?(B.setAttribute("style",De),B.setAttribute("data-mce-style",De)):B.removeAttribute("style")},ha=(B,X)=>(oe,De,Bt)=>{const fo=oe.style;fo[De]?(fo[De]=gs(Bt),ga(oe,X)):mt(oe,De,Bt)},ls=(B,X)=>B.style[X]?er(B.style[X]):cs(B,X),Ta=(B,X)=>{const oe=gs(X);B.style.marginLeft=oe,B.style.marginRight=oe},Ya=(B,X)=>{const oe=gs(X);B.style.marginTop=oe,B.style.marginBottom=oe},is=(B,X)=>{const oe=gs(X);B.style.borderWidth=oe},wn=(B,X)=>{B.style.borderStyle=X},wr=B=>{var X;return(X=B.style.borderStyle)!==null&&X!==void 0?X:""},Xa=B=>qe(B)&&B.nodeName==="FIGURE",Uc=B=>B.nodeName==="IMG",fl=B=>to.getAttrib(B,"alt").length===0&&to.getAttrib(B,"role")==="presentation",tr=B=>fl(B)?"":cs(B,"alt"),nr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),zs=(B,X)=>{var oe;const De=document.createElement("img");return mt(De,"style",X.style),(Jo(De)||X.hspace!=="")&&Ta(De,X.hspace),(ir(De)||X.vspace!=="")&&Ya(De,X.vspace),(Hn(De)||X.border!=="")&&is(De,X.border),(wr(De)||X.borderStyle!=="")&&wn(De,X.borderStyle),B((oe=De.getAttribute("style"))!==null&&oe!==void 0?oe:"")},La=(B,X)=>{const oe=document.createElement("img");if(He(B,{...X,caption:!1},oe),ce(oe,X.alt,X.isDecorative),X.caption){const De=to.create("figure",{class:"image"});return De.appendChild(oe),De.appendChild(to.create("figcaption",{contentEditable:"true"},"Caption")),De.contentEditable="false",De}else return oe},gl=(B,X)=>({src:cs(X,"src"),alt:tr(X),title:cs(X,"title"),width:ls(X,"width"),height:ls(X,"height"),class:cs(X,"class"),style:B(cs(X,"style")),caption:ur(X),hspace:Jo(X),vspace:ir(X),border:Hn(X),borderStyle:wr(X),isDecorative:fl(X)}),Fr=(B,X,oe,De,Bt)=>{oe[De]!==X[De]&&Bt(B,De,String(oe[De]))},ce=(B,X,oe)=>{if(oe){to.setAttrib(B,"role","presentation");const De=Ze.fromDom(B);Ho(De,"alt","")}else{if(Sn(X)){const De=Ze.fromDom(B);ln(De,"alt")}else{const De=Ze.fromDom(B);Ho(De,"alt",X)}to.getAttrib(B,"role")==="presentation"&&to.setAttrib(B,"role","")}},se=(B,X,oe)=>{(oe.alt!==X.alt||oe.isDecorative!==X.isDecorative)&&ce(B,oe.alt,oe.isDecorative)},Oe=(B,X)=>(oe,De,Bt)=>{B(oe,Bt),ga(oe,X)},He=(B,X,oe)=>{const De=gl(B,oe);Fr(oe,De,X,"caption",(Bt,fo,Yt)=>fa(Bt)),Fr(oe,De,X,"src",mt),Fr(oe,De,X,"title",mt),Fr(oe,De,X,"width",ha("width",B)),Fr(oe,De,X,"height",ha("height",B)),Fr(oe,De,X,"class",mt),Fr(oe,De,X,"style",Oe((Bt,fo)=>mt(Bt,"style",fo),B)),Fr(oe,De,X,"hspace",Oe(Ta,B)),Fr(oe,De,X,"vspace",Oe(Ya,B)),Fr(oe,De,X,"border",Oe(is,B)),Fr(oe,De,X,"borderStyle",Oe(wn,B)),se(oe,De,X)},fn=(B,X)=>{const oe=B.dom.styles.parse(X),De=es(oe),Bt=B.dom.styles.parse(B.dom.styles.serialize(De));return B.dom.styles.serialize(Bt)},Tn=B=>{const X=B.selection.getNode(),oe=B.dom.getParent(X,"figure.image");return oe?B.dom.select("img",oe)[0]:X&&(X.nodeName!=="IMG"||rn(X))?null:X},no=(B,X)=>{var oe;const De=B.dom,Bt=cn(B.schema.getTextBlockElements(),(Yt,Ws)=>!B.schema.isValidChild(Ws,"figure")),fo=De.getParent(X.parentNode,Yt=>le(Bt,Yt.nodeName),B.getBody());return fo&&(oe=De.split(fo,X))!==null&&oe!==void 0?oe:X},Rs=B=>{const X=Tn(B);return X?gl(oe=>fn(B,oe),X):nr()},he=(B,X)=>{const oe=La(Bt=>fn(B,Bt),X);B.dom.setAttrib(oe,"data-mce-id","__mcenew"),B.focus(),B.selection.setContent(oe.outerHTML);const De=B.dom.select('*[data-mce-id="__mcenew"]')[0];if(B.dom.setAttrib(De,"data-mce-id",null),Xa(De)){const Bt=no(B,De);B.selection.select(Bt)}else B.selection.select(De)},Un=(B,X)=>{B.dom.setAttrib(X,"src",X.getAttribute("src"))},Us=(B,X)=>{if(X){const oe=B.dom.is(X.parentNode,"figure.image")?X.parentNode:X;B.dom.remove(oe),B.focus(),B.nodeChanged(),B.dom.isEmpty(B.getBody())&&(B.setContent(""),B.selection.setCursorLocation())}},br=(B,X)=>{const oe=Tn(B);if(oe)if(He(De=>fn(B,De),X,oe),Un(B,oe),Xa(oe.parentNode)){const De=oe.parentNode;no(B,De),B.selection.select(oe.parentNode)}else B.selection.select(oe),Ne(B,X,oe)},Kr=(B,X)=>{const oe=X.src;return{...X,src:$t(B,oe)?oe:""}},ts=(B,X)=>{const oe=Tn(B);if(oe){const Bt={...gl(Yt=>fn(B,Yt),oe),...X},fo=Kr(B,Bt);Bt.src?br(B,fo):Us(B,oe)}else X.src&&he(B,{...nr(),...X})},ra=(B=>(...X)=>{if(X.length===0)throw new Error("Can't merge zero objects");const oe={};for(let De=0;De<X.length;De++){const Bt=X[De];for(const fo in Bt)Ae(Bt,fo)&&(oe[fo]=B(oe[fo],Bt[fo]))}return oe})((B,X)=>Cn(B)&&Cn(X)?ra(B,X):X);var Rr=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),$o=tinymce.util.Tools.resolve("tinymce.util.Tools");const qo=B=>qt(B.value)?B.value:"",vr=B=>qt(B.text)?B.text:qt(B.title)?B.title:"",aa=(B,X)=>{const oe=[];return $o.each(B,De=>{const Bt=vr(De);if(De.menu!==void 0){const fo=aa(De.menu,X);oe.push({text:Bt,items:fo})}else{const fo=X(De);oe.push({text:Bt,value:fo})}}),oe},_c=(B=qo)=>X=>X?Fe.from(X).map(oe=>aa(oe,B)):Fe.none(),ei=B=>_c(qo)(B),Xc=B=>Ae(B,"items"),Uo=(B,X)=>lo(B,oe=>Xc(oe)?Uo(oe.items,X):oe.value===X?Fe.some(oe):Fe.none()),Ea={sanitizer:_c,sanitize:ei,findEntry:(B,X)=>B.bind(oe=>Uo(oe,X))},pa={makeTab:B=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},As=B=>{const X=Ea.sanitizer(Zs=>B.convertURL(Zs.value||Zs.url||"","src")),oe=new Promise(Zs=>{ma(B,ni=>{Zs(X(ni).map(Ys=>ro([[{text:"None",value:""}],Ys])))})}),De=Ea.sanitize(tn(B)),Bt=kc(B),fo=An(B),Yt=jr(B),Ws=bs(B),at=Rs(B),xs=we(B),Qa=vt(B),Ms=Vo(B),Vr=So(B),bl=Ks(B),_o=zo(B),ec=Fe.some(Xo(B)).filter(Zs=>qt(Zs)&&Zs.length>0);return oe.then(Zs=>({image:at,imageList:Zs,classList:De,hasAdvTab:Bt,hasUploadTab:fo,hasUploadUrl:Yt,hasUploadHandler:Ws,hasDescription:xs,hasImageTitle:Qa,hasDimensions:Ms,hasImageCaption:Vr,prependURL:ec,hasAccessibilityOptions:bl,automaticUploads:_o}))},hs=B=>{const X={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},oe=B.imageList.map(Qa=>({name:"images",type:"listbox",label:"Image list",items:Qa})),De={name:"alt",type:"input",label:"Alternative description",enabled:!(B.hasAccessibilityOptions&&B.image.isDecorative)},Bt={name:"title",type:"input",label:"Image title"},fo={name:"dimensions",type:"sizeinput"},Yt={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Ws=B.classList.map(Qa=>({name:"classes",type:"listbox",label:"Class",items:Qa})),at={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},xs=Qa=>Qa?{type:"grid",columns:2}:{type:"panel"};return ro([[X],oe.toArray(),B.hasAccessibilityOptions&&B.hasDescription?[Yt]:[],B.hasDescription?[De]:[],B.hasImageTitle?[Bt]:[],B.hasDimensions?[fo]:[],[{...xs(B.classList.isSome()&&B.hasImageCaption),items:ro([Ws.toArray(),B.hasImageCaption?[at]:[]])}]])},Ml={makeTab:B=>({title:"General",name:"general",items:hs(B)}),makeItems:hs},Yr={makeTab:B=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},ba=B=>({prevImage:Ea.findEntry(B.imageList,B.image.src),prevAlt:B.image.alt,open:!0}),Sr=B=>({src:{value:B.src,meta:{}},images:B.src,alt:B.alt,title:B.title,dimensions:{width:B.width,height:B.height},classes:B.class,caption:B.caption,style:B.style,vspace:B.vspace,border:B.border,hspace:B.hspace,borderstyle:B.borderStyle,fileinput:[],isDecorative:B.isDecorative}),Ha=(B,X)=>({src:B.src.value,alt:(B.alt===null||B.alt.length===0)&&X?null:B.alt,title:B.title,width:B.dimensions.width,height:B.dimensions.height,class:B.classes,style:B.style,caption:B.caption,hspace:B.hspace,vspace:B.vspace,border:B.border,borderStyle:B.borderstyle,isDecorative:B.isDecorative}),hl=(B,X)=>/^(?:[a-zA-Z]+:)?\/\//.test(X)?Fe.none():B.prependURL.bind(oe=>X.substring(0,oe.length)!==oe?Fe.some(oe+X):Fe.none()),Xr=(B,X)=>{const oe=X.getData();hl(B,oe.src.value).each(De=>{X.setData({src:{value:De,meta:oe.src.meta}})})},Ja=(B,X,oe)=>{B.hasDescription&&qt(oe.alt)&&(X.alt=oe.alt),B.hasAccessibilityOptions&&(X.isDecorative=oe.isDecorative||X.isDecorative||!1),B.hasImageTitle&&qt(oe.title)&&(X.title=oe.title),B.hasDimensions&&(qt(oe.width)&&(X.dimensions.width=oe.width),qt(oe.height)&&(X.dimensions.height=oe.height)),qt(oe.class)&&Ea.findEntry(B.classList,oe.class).each(De=>{X.classes=De.value}),B.hasImageCaption&&Nt(oe.caption)&&(X.caption=oe.caption),B.hasAdvTab&&(qt(oe.style)&&(X.style=oe.style),qt(oe.vspace)&&(X.vspace=oe.vspace),qt(oe.border)&&(X.border=oe.border),qt(oe.hspace)&&(X.hspace=oe.hspace),qt(oe.borderstyle)&&(X.borderstyle=oe.borderstyle))},Ac=(B,X)=>{const oe=X.getData(),De=oe.src.meta;if(De!==void 0){const Bt=ra({},oe);Ja(B,Bt,De),X.setData(Bt)}},iu=(B,X,oe,De)=>{const Bt=De.getData(),fo=Bt.src.value,Yt=Bt.src.meta||{};!Yt.width&&!Yt.height&&X.hasDimensions&&(Lr(fo)?B.imageSize(fo).then(Ws=>{oe.open&&De.setData({dimensions:Ws})}).catch(Ws=>console.error(Ws)):De.setData({dimensions:{width:"",height:""}}))},uc=(B,X,oe)=>{const De=oe.getData(),Bt=Ea.findEntry(B.imageList,De.src.value);X.prevImage=Bt,oe.setData({images:Bt.map(fo=>fo.value).getOr("")})},Nl=(B,X,oe,De)=>{Xr(X,De),Ac(X,De),iu(B,X,oe,De),uc(X,oe,De)},va=(B,X,oe,De)=>{const Bt=De.getData(),fo=Ea.findEntry(X.imageList,Bt.images);fo.each(Yt=>{Bt.alt===""||oe.prevImage.map(at=>at.text===Bt.alt).getOr(!1)?Yt.value===""?De.setData({src:Yt,alt:oe.prevAlt}):De.setData({src:Yt,alt:Yt.text}):De.setData({src:Yt})}),oe.prevImage=fo,Nl(B,X,oe,De)},pl=(B,X,oe,De)=>{const Bt=De.getData();De.block("Uploading image"),A(Bt.fileinput).fold(()=>{De.unblock()},fo=>{const Yt=URL.createObjectURL(fo),Ws=()=>{De.unblock(),URL.revokeObjectURL(Yt)},at=xs=>{De.setData({src:{value:xs,meta:{}}}),De.showTab("general"),Nl(B,X,oe,De),De.focus("src")};Xe(fo).then(xs=>{const Qa=B.createBlobCache(fo,Yt,xs);X.automaticUploads?B.uploadImage(Qa).then(Ms=>{at(Ms.url),Ws()}).catch(Ms=>{Ws(),B.alertErr(Ms)}):(B.addToBlobCache(Qa),at(Qa.blobUri()),De.unblock())})})},Pl=(B,X,oe)=>(De,Bt)=>{Bt.name==="src"?Nl(B,X,oe,De):Bt.name==="images"?va(B,X,oe,De):Bt.name==="alt"?oe.prevAlt=De.getData().alt:Bt.name==="fileinput"?pl(B,X,oe,De):Bt.name==="isDecorative"&&De.setEnabled("alt",!De.getData().isDecorative)},ti=B=>()=>{B.open=!1},Nu=B=>B.hasAdvTab||B.hasUploadUrl||B.hasUploadHandler?{type:"tabpanel",tabs:ro([[Ml.makeTab(B)],B.hasAdvTab?[pa.makeTab(B)]:[],B.hasUploadTab&&(B.hasUploadUrl||B.hasUploadHandler)?[Yr.makeTab(B)]:[]])}:{type:"panel",items:Ml.makeItems(B)},Fi=(B,X,oe)=>De=>{const Bt=ra(Sr(X.image),De.getData()),fo={...Bt,style:zs(oe.normalizeCss,Ha(Bt,!1))};B.execCommand("mceUpdateImage",!1,Ha(fo,X.hasAccessibilityOptions)),B.editorUpload.uploadImagesAuto(),De.close()},j=B=>X=>$t(B,X)?lc(B.documentBaseURI.toAbsolute(X)).then(oe=>({width:String(oe.width),height:String(oe.height)})):Promise.resolve({width:"",height:""}),de=B=>(X,oe,De)=>{var Bt;return B.editorUpload.blobCache.create({blob:X,blobUri:oe,name:(Bt=X.name)===null||Bt===void 0?void 0:Bt.replace(/\.[^\.]+$/,""),filename:X.name,base64:De.split(",")[1]})},pe=B=>X=>{B.editorUpload.blobCache.add(X)},ze=B=>X=>{B.windowManager.alert(X)},wt=B=>X=>fn(B,X),kn=B=>X=>B.dom.parseStyle(X),ko=B=>(X,oe)=>B.dom.serializeStyle(X,oe),xr=B=>X=>Rr(B).upload([X],!1).then(oe=>{var De;return oe.length===0?Promise.reject("Failed to upload image"):oe[0].status===!1?Promise.reject((De=oe[0].error)===null||De===void 0?void 0:De.message):oe[0]}),Io=B=>{const X={imageSize:j(B),addToBlobCache:pe(B),createBlobCache:de(B),alertErr:ze(B),normalizeCss:wt(B),parseStyle:kn(B),serializeStyle:ko(B),uploadImage:xr(B)};return{open:()=>{As(B).then(De=>{const Bt=ba(De);return{title:"Insert/Edit Image",size:"normal",body:Nu(De),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Sr(De.image),onSubmit:Fi(B,De,X),onChange:Pl(X,De,Bt),onClose:ti(Bt)}}).then(B.windowManager.open)}}},No=B=>{B.addCommand("mceImage",Io(B).open),B.addCommand("mceUpdateImage",(X,oe)=>{B.undoManager.transact(()=>ts(B,oe))})},Wo=B=>{const X=B.attr("class");return qe(X)&&/\bimage\b/.test(X)},Hr=B=>X=>{let oe=X.length;const De=Bt=>{Bt.attr("contenteditable",B?"true":null)};for(;oe--;){const Bt=X[oe];Wo(Bt)&&(Bt.attr("contenteditable",B?"false":null),$o.each(Bt.getAll("figcaption"),De))}},Ci=B=>{B.on("PreInit",()=>{B.parser.addNodeFilter("figure",Hr(!0)),B.serializer.addNodeFilter("figure",Hr(!1))})},Ot=B=>X=>{const oe=()=>{X.setEnabled(B.selection.isEditable())};return B.on("NodeChange",oe),oe(),()=>{B.off("NodeChange",oe)}},Zd=B=>{B.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Io(B).open,onSetup:X=>{X.setActive(qe(Tn(B)));const oe=B.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",X.setActive).unbind,De=Ot(B)(X);return()=>{oe(),De()}}}),B.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Io(B).open,onSetup:Ot(B)}),B.ui.registry.addContextMenu("image",{update:X=>B.selection.isEditable()&&(Xa(X)||Uc(X)&&!rn(X))?["image"]:[]})};var Ns=()=>{lt.add("image",B=>{as(B),Ci(B),Zd(B),No(B)})};Ns()})();(function(){var lt=tinymce.util.Tools.resolve("tinymce.PluginManager");const $n=nt=>W=>W.options.get(nt),an=nt=>{const W=nt.options.register;W("insertdatetime_dateformat",{processor:"string",default:nt.translate("%Y-%m-%d")}),W("insertdatetime_timeformat",{processor:"string",default:nt.translate("%H:%M:%S")}),W("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),W("insertdatetime_element",{processor:"boolean",default:!1})},Xt=$n("insertdatetime_dateformat"),yt=$n("insertdatetime_timeformat"),Ut=$n("insertdatetime_formats"),Zn=$n("insertdatetime_element"),Mt=nt=>{const W=Ut(nt);return W.length>0?W[0]:yt(nt)},qt="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),eo="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Cn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Qt="January February March April May June July August September October November December".split(" "),Sn=(nt,W)=>{if(nt=""+nt,nt.length<W)for(let St=0;St<W-nt.length;St++)nt="0"+nt;return nt},Nt=(nt,W,St=new Date)=>(W=W.replace("%D","%m/%d/%Y"),W=W.replace("%r","%I:%M:%S %p"),W=W.replace("%Y",""+St.getFullYear()),W=W.replace("%y",""+St.getYear()),W=W.replace("%m",Sn(St.getMonth()+1,2)),W=W.replace("%d",Sn(St.getDate(),2)),W=W.replace("%H",""+Sn(St.getHours(),2)),W=W.replace("%M",""+Sn(St.getMinutes(),2)),W=W.replace("%S",""+Sn(St.getSeconds(),2)),W=W.replace("%I",""+((St.getHours()+11)%12+1)),W=W.replace("%p",St.getHours()<12?"AM":"PM"),W=W.replace("%B",""+nt.translate(Qt[St.getMonth()])),W=W.replace("%b",""+nt.translate(Cn[St.getMonth()])),W=W.replace("%A",""+nt.translate(eo[St.getDay()])),W=W.replace("%a",""+nt.translate(qt[St.getDay()])),W=W.replace("%%","%"),W),_t=(nt,W,St,Gt)=>{const cn=nt.dom.create("time",{datetime:St},Gt);nt.dom.replace(cn,W),nt.selection.select(cn,!0),nt.selection.collapse(!1)},qe=(nt,W)=>{if(Zn(nt)){const St=Nt(nt,W);let Gt;/%[HMSIp]/.test(W)?Gt=Nt(nt,"%Y-%m-%dT%H:%M"):Gt=Nt(nt,"%Y-%m-%d");const cn=nt.dom.getParent(nt.selection.getStart(),"time");cn?_t(nt,cn,Gt,St):nt.insertContent('<time datetime="'+Gt+'">'+St+"</time>")}else nt.insertContent(Nt(nt,W))},tt=nt=>{nt.addCommand("mceInsertDate",(W,St)=>{qe(nt,St??Xt(nt))}),nt.addCommand("mceInsertTime",(W,St)=>{qe(nt,St??yt(nt))})},jn=nt=>{let W=nt;return{get:()=>W,set:cn=>{W=cn}}};var Ct=tinymce.util.Tools.resolve("tinymce.util.Tools");const q=nt=>W=>{const St=()=>{W.setEnabled(nt.selection.isEditable())};return nt.on("NodeChange",St),St(),()=>{nt.off("NodeChange",St)}},Fe=nt=>{const W=Ut(nt),St=jn(Mt(nt)),Gt=Ae=>nt.execCommand("mceInsertDate",!1,Ae);nt.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:Ae=>Ae===St.get(),fetch:Ae=>{Ae(Ct.map(W,le=>({type:"choiceitem",text:Nt(nt,le),value:le})))},onAction:Ae=>{Gt(St.get())},onItemAction:(Ae,le)=>{St.set(le),Gt(le)},onSetup:q(nt)});const cn=Ae=>()=>{St.set(Ae),Gt(Ae)};nt.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Ct.map(W,Ae=>({type:"menuitem",text:Nt(nt,Ae),onAction:cn(Ae)})),onSetup:q(nt)})};var En=()=>{lt.add("insertdatetime",nt=>{an(nt),tt(nt),Fe(nt)})};En()})();(function(){var lt=tinymce.util.Tools.resolve("tinymce.PluginManager");const $n=(j,de,pe)=>{var ze;return pe(j,de.prototype)?!0:((ze=j.constructor)===null||ze===void 0?void 0:ze.name)===de.name},an=j=>{const de=typeof j;return j===null?"null":de==="object"&&Array.isArray(j)?"array":de==="object"&&$n(j,String,(pe,ze)=>ze.isPrototypeOf(pe))?"string":de},Xt=j=>de=>an(de)===j,yt=j=>de=>typeof de===j,Ut=j=>de=>j===de,Zn=Xt("string"),Mt=Xt("object"),qt=Xt("array"),eo=Ut(null),Cn=yt("boolean"),Qt=j=>j==null,Sn=j=>!Qt(j),Nt=yt("function"),_t=(j,de)=>{if(qt(j)){for(let pe=0,ze=j.length;pe<ze;++pe)if(!de(j[pe]))return!1;return!0}return!1},qe=()=>{},tt=j=>()=>j,jn=(j,de)=>j===de;class Ct{constructor(de,pe){this.tag=de,this.value=pe}static some(de){return new Ct(!0,de)}static none(){return Ct.singletonNone}fold(de,pe){return this.tag?pe(this.value):de()}isSome(){return this.tag}isNone(){return!this.tag}map(de){return this.tag?Ct.some(de(this.value)):Ct.none()}bind(de){return this.tag?de(this.value):Ct.none()}exists(de){return this.tag&&de(this.value)}forall(de){return!this.tag||de(this.value)}filter(de){return!this.tag||de(this.value)?this:Ct.none()}getOr(de){return this.tag?this.value:de}or(de){return this.tag?this:de}getOrThunk(de){return this.tag?this.value:de()}orThunk(de){return this.tag?this:de()}getOrDie(de){if(this.tag)return this.value;throw new Error(de??"Called getOrDie on None")}static from(de){return Sn(de)?Ct.some(de):Ct.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(de){this.tag&&de(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ct.singletonNone=new Ct(!1);const q=Array.prototype.indexOf,Fe=Array.prototype.push,En=(j,de)=>q.call(j,de),nt=(j,de)=>En(j,de)>-1,W=(j,de)=>{const pe=j.length,ze=new Array(pe);for(let wt=0;wt<pe;wt++){const kn=j[wt];ze[wt]=de(kn,wt)}return ze},St=(j,de)=>{for(let pe=0,ze=j.length;pe<ze;pe++){const wt=j[pe];de(wt,pe)}},Gt=(j,de,pe)=>(St(j,(ze,wt)=>{pe=de(pe,ze,wt)}),pe),cn=j=>{const de=[];for(let pe=0,ze=j.length;pe<ze;++pe){if(!qt(j[pe]))throw new Error("Arr.flatten item "+pe+" was not an array, input: "+j);Fe.apply(de,j[pe])}return de},Ae=(j,de)=>cn(W(j,de)),le=(j,de)=>{for(let pe=0;pe<j.length;pe++){const ze=de(j[pe],pe);if(ze.isSome())return ze}return Ct.none()},Bo=(j,de,pe=jn)=>j.exists(ze=>pe(ze,de)),ro=j=>{const de=[],pe=ze=>{de.push(ze)};for(let ze=0;ze<j.length;ze++)j[ze].each(pe);return de},Wt=(j,de)=>j?Ct.some(de):Ct.none(),A=j=>de=>de.options.get(j),lo=j=>{const de=j.options.register;de("link_assume_external_targets",{processor:pe=>{const ze=Zn(pe)||Cn(pe);return ze?pe===!0?{value:1,valid:ze}:pe==="http"||pe==="https"?{value:pe,valid:ze}:{value:0,valid:ze}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),de("link_context_toolbar",{processor:"boolean",default:!1}),de("link_list",{processor:pe=>Zn(pe)||Nt(pe)||_t(pe,Mt)}),de("link_default_target",{processor:"string"}),de("link_default_protocol",{processor:"string",default:"https"}),de("link_target_list",{processor:pe=>Cn(pe)||_t(pe,Mt),default:!0}),de("link_rel_list",{processor:"object[]",default:[]}),de("link_class_list",{processor:"object[]",default:[]}),de("link_title",{processor:"boolean",default:!0}),de("allow_unsafe_link_target",{processor:"boolean",default:!1}),de("link_quicklink",{processor:"boolean",default:!1})},rt=A("link_assume_external_targets"),Ho=A("link_context_toolbar"),ln=A("link_list"),Ke=A("link_default_target"),vo=A("link_default_protocol"),Gs=A("link_target_list"),mo=A("link_rel_list"),qs=A("link_class_list"),Ze=A("link_title"),ut=A("allow_unsafe_link_target"),L=A("link_quicklink");var Lr=tinymce.util.Tools.resolve("tinymce.util.Tools");const io=j=>Zn(j.value)?j.value:"",as=j=>Zn(j.text)?j.text:Zn(j.title)?j.title:"",Vo=(j,de)=>{const pe=[];return Lr.each(j,ze=>{const wt=as(ze);if(ze.menu!==void 0){const kn=Vo(ze.menu,de);pe.push({text:wt,items:kn})}else{const kn=de(ze);pe.push({text:wt,value:kn})}}),pe},kc=(j=io)=>de=>Ct.from(de).map(pe=>Vo(pe,j)),tn={sanitize:j=>kc(io)(j),sanitizeWith:kc,createUi:(j,de)=>pe=>({name:j,type:"listbox",label:de,items:pe}),getValue:io},we=Object.keys,vt=Object.hasOwnProperty,So=(j,de)=>{const pe=we(j);for(let ze=0,wt=pe.length;ze<wt;ze++){const kn=pe[ze],ko=j[kn];de(ko,kn)}},It=j=>(de,pe)=>{j[pe]=de},Ks=(j,de,pe,ze)=>{So(j,(wt,kn)=>{(de(wt,kn)?pe:ze)(wt,kn)})},zo=(j,de)=>{const pe={};return Ks(j,de,It(pe),qe),pe},jr=(j,de)=>vt.call(j,de),bs=(j,de)=>jr(j,de)&&j[de]!==void 0&&j[de]!==null;var Qs=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),lc=tinymce.util.Tools.resolve("tinymce.util.URI");const er=j=>Sn(j)&&j.nodeName.toLowerCase()==="a",gs=j=>er(j)&&!!Ne(j),es=(j,de)=>{if(j.collapsed)return[];{const pe=j.cloneContents(),ze=pe.firstChild,wt=new Qs(ze,pe),kn=[];let ko=ze;do de(ko)&&kn.push(ko);while(ko=wt.next());return kn}},ma=j=>/^\w+:/i.test(j),Ne=j=>{var de,pe;return(pe=(de=j.getAttribute("data-mce-href"))!==null&&de!==void 0?de:j.getAttribute("href"))!==null&&pe!==void 0?pe:""},Xe=(j,de)=>{const pe=["noopener"],ze=j?j.split(/\s+/):[],wt=Io=>Lr.trim(Io.sort().join(" ")),kn=Io=>(Io=ko(Io),Io.length>0?Io.concat(pe):pe),ko=Io=>Io.filter(No=>Lr.inArray(pe,No)===-1),xr=de?kn(ze):ko(ze);return xr.length>0?wt(xr):""},rn=j=>j.replace(/\uFEFF/g,""),$t=(j,de)=>(de=de||ir(j.selection.getRng())[0]||j.selection.getNode(),po(de)?Ct.from(j.dom.select("a[href]",de)[0]):Ct.from(j.dom.getParent(de,"a[href]"))),to=(j,de)=>$t(j,de).isSome(),Jo=(j,de)=>{const pe=de.fold(()=>j.getContent({format:"text"}),ze=>ze.innerText||ze.textContent||"");return rn(pe)},ir=j=>es(j,gs),Hn=j=>Lr.grep(j,gs),cs=j=>Hn(j).length>0,ur=j=>ir(j).length>0,mt=j=>{const de=j.schema.getTextInlineElements(),pe=kn=>kn.nodeType===1&&!er(kn)&&!jr(de,kn.nodeName.toLowerCase());if($t(j).exists(kn=>kn.hasAttribute("data-mce-block")))return!1;const wt=j.selection.getRng();return wt.collapsed?!0:es(wt,pe).length===0},po=j=>Sn(j)&&j.nodeName==="FIGURE"&&/\bimage\b/i.test(j.className),Dr=j=>Gt(["title","rel","class","target"],(pe,ze)=>(j[ze].each(wt=>{pe[ze]=wt.length>0?wt:null}),pe),{href:j.href}),fa=(j,de)=>(de==="http"||de==="https")&&!ma(j)?de+"://"+j:j,ga=(j,de)=>{const pe={...de};if(mo(j).length===0&&!ut(j)){const ze=Xe(pe.rel,pe.target==="_blank");pe.rel=ze||null}return Ct.from(pe.target).isNone()&&Gs(j)===!1&&(pe.target=Ke(j)),pe.href=fa(pe.href,rt(j)),pe},ha=(j,de,pe,ze)=>{pe.each(wt=>{jr(de,"innerText")?de.innerText=wt:de.textContent=wt}),j.dom.setAttribs(de,ze),j.selection.select(de)},ls=(j,de,pe,ze)=>{const wt=j.dom;po(de)?tr(wt,de,ze):pe.fold(()=>{j.execCommand("mceInsertLink",!1,ze)},kn=>{j.insertContent(wt.createHTML("a",ze,wt.encode(kn)))})},Ta=(j,de,pe)=>{const ze=j.selection.getNode(),wt=$t(j,ze),kn=ga(j,Dr(pe));j.undoManager.transact(()=>{pe.href===de.href&&de.attach(),wt.fold(()=>{ls(j,ze,pe.text,kn)},ko=>{j.focus(),ha(j,ko,pe.text,kn)})})},Ya=j=>{const de=j.dom,pe=j.selection,ze=pe.getBookmark(),wt=pe.getRng().cloneRange(),kn=de.getParent(wt.startContainer,"a[href]",j.getBody()),ko=de.getParent(wt.endContainer,"a[href]",j.getBody());kn&&wt.setStartBefore(kn),ko&&wt.setEndAfter(ko),pe.setRng(wt),j.execCommand("unlink"),pe.moveToBookmark(ze)},is=j=>{j.undoManager.transact(()=>{const de=j.selection.getNode();po(de)?fl(j,de):Ya(j),j.focus()})},wn=j=>{const{class:de,href:pe,rel:ze,target:wt,text:kn,title:ko}=j;return zo({class:de.getOrNull(),href:pe,rel:ze.getOrNull(),target:wt.getOrNull(),text:kn.getOrNull(),title:ko.getOrNull()},(xr,Io)=>eo(xr)===!1)},wr=(j,de)=>{const pe=j.options.get,ze={allow_html_data_urls:pe("allow_html_data_urls"),allow_script_urls:pe("allow_script_urls"),allow_svg_data_urls:pe("allow_svg_data_urls")},wt=de.href;return{...de,href:lc.isDomSafe(wt,"a",ze)?wt:""}},Xa=(j,de,pe)=>{const ze=wr(j,pe);j.hasPlugin("rtc",!0)?j.execCommand("createlink",!1,wn(ze)):Ta(j,de,ze)},Uc=j=>{j.hasPlugin("rtc",!0)?j.execCommand("unlink"):is(j)},fl=(j,de)=>{var pe;const ze=j.dom.select("img",de)[0];if(ze){const wt=j.dom.getParents(ze,"a[href]",de)[0];wt&&((pe=wt.parentNode)===null||pe===void 0||pe.insertBefore(ze,wt),j.dom.remove(wt))}},tr=(j,de,pe)=>{var ze;const wt=j.select("img",de)[0];if(wt){const kn=j.create("a",pe);(ze=wt.parentNode)===null||ze===void 0||ze.insertBefore(kn,wt),kn.appendChild(wt)}},nr=j=>bs(j,"items"),zs=(j,de)=>le(de,pe=>nr(pe)?zs(j,pe.items):Wt(pe.value===j,pe)),La=(j,de,pe,ze)=>{const wt=ze[de],kn=j.length>0;return wt!==void 0?zs(wt,pe).map(ko=>({url:{value:ko.value,meta:{text:kn?j:ko.text,attach:qe}},text:kn?j:ko.text})):Ct.none()},gl=(j,de)=>de==="link"?j.link:de==="anchor"?j.anchor:Ct.none(),ce={init:(j,de)=>{const pe={text:j.text,title:j.title},ze=Io=>{var No;return Wt(pe.title.length<=0,Ct.from((No=Io.meta)===null||No===void 0?void 0:No.title).getOr(""))},wt=Io=>{var No;return Wt(pe.text.length<=0,Ct.from((No=Io.meta)===null||No===void 0?void 0:No.text).getOr(Io.value))},kn=Io=>{const No=wt(Io.url),Wo=ze(Io.url);return No.isSome()||Wo.isSome()?Ct.some({...No.map(Hr=>({text:Hr})).getOr({}),...Wo.map(Hr=>({title:Hr})).getOr({})}):Ct.none()},ko=(Io,No)=>{const Wo=gl(de,No).getOr([]);return La(pe.text,No,Wo,Io)};return{onChange:(Io,No)=>{const Wo=No.name;return Wo==="url"?kn(Io()):nt(["anchor","link"],Wo)?ko(Io(),Wo):((Wo==="text"||Wo==="title")&&(pe[Wo]=Io()[Wo]),Ct.none())}}},getDelta:La};var se=tinymce.util.Tools.resolve("tinymce.util.Delay");const Oe=(j,de,pe)=>{const ze=j.selection.getRng();se.setEditorTimeout(j,()=>{j.windowManager.confirm(de,wt=>{j.selection.setRng(ze),pe(wt)})})},He=j=>{const de=j.href;return de.indexOf("@")>0&&de.indexOf("/")===-1&&de.indexOf("mailto:")===-1?Ct.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:ze=>({...ze,href:"mailto:"+de})}):Ct.none()},fn=(j,de)=>pe=>{const ze=pe.href;return j===1&&!ma(ze)||j===0&&/^\s*www(\.|\d\.)/i.test(ze)?Ct.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${de}:// prefix?`,preprocess:kn=>({...kn,href:de+"://"+ze})}):Ct.none()},no={preprocess:(j,de)=>le([He,fn(rt(j),vo(j))],pe=>pe(de)).fold(()=>Promise.resolve(de),pe=>new Promise(ze=>{Oe(j,pe.message,wt=>{ze(wt?pe.preprocess(de):de)})}))},he={getAnchors:j=>{const de=j.dom.select("a:not([href])"),pe=Ae(de,ze=>{const wt=ze.name||ze.id;return wt?[{text:wt,value:"#"+wt}]:[]});return pe.length>0?Ct.some([{text:"None",value:""}].concat(pe)):Ct.none()}},Us={getClasses:j=>{const de=qs(j);return de.length>0?tn.sanitize(de):Ct.none()}},br=j=>{try{return Ct.some(JSON.parse(j))}catch{return Ct.none()}},ts={getLinks:j=>{const de=ze=>j.convertURL(ze.value||ze.url||"","href"),pe=ln(j);return new Promise(ze=>{Zn(pe)?fetch(pe).then(wt=>wt.ok?wt.text().then(br):Promise.reject()).then(ze,()=>ze(Ct.none())):Nt(pe)?pe(wt=>ze(Ct.some(wt))):ze(Ct.from(pe))}).then(ze=>ze.bind(tn.sanitizeWith(de)).map(wt=>wt.length>0?[{text:"None",value:""}].concat(wt):wt))}},ic={getRels:(j,de)=>{const pe=mo(j);if(pe.length>0){const ze=Bo(de,"_blank"),wt=ut(j)===!1,kn=xr=>Xe(tn.getValue(xr),ze);return(wt?tn.sanitizeWith(kn):tn.sanitize)(pe)}return Ct.none()}},ra=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],$o={getTargets:j=>{const de=Gs(j);return qt(de)?tn.sanitize(de).orThunk(()=>Ct.some(ra)):de===!1?Ct.none():Ct.some(ra)}},qo=(j,de,pe)=>{const ze=j.getAttrib(de,pe);return ze!==null&&ze.length>0?Ct.some(ze):Ct.none()},vr=(j,de)=>{const pe=j.dom,wt=mt(j)?Ct.some(Jo(j.selection,de)):Ct.none(),kn=de.bind(Wo=>Ct.from(pe.getAttrib(Wo,"href"))),ko=de.bind(Wo=>Ct.from(pe.getAttrib(Wo,"target"))),xr=de.bind(Wo=>qo(pe,Wo,"rel")),Io=de.bind(Wo=>qo(pe,Wo,"class")),No=de.bind(Wo=>qo(pe,Wo,"title"));return{url:kn,text:wt,title:No,target:ko,rel:xr,linkClass:Io}},_c={collect:(j,de)=>ts.getLinks(j).then(pe=>{const ze=vr(j,de);return{anchor:ze,catalogs:{targets:$o.getTargets(j),rels:ic.getRels(j,ze.target),classes:Us.getClasses(j),anchor:he.getAnchors(j),link:pe},optNode:de,flags:{titleEnabled:Ze(j)}}})},ei=(j,de)=>pe=>{const ze=pe.getData();if(!ze.url.value){Uc(j),pe.close();return}const wt=xr=>Ct.from(ze[xr]).filter(Io=>!Bo(de.anchor[xr],Io)),kn={href:ze.url.value,text:wt("text"),target:wt("target"),rel:wt("rel"),class:wt("linkClass"),title:wt("title")},ko={href:ze.url.value,attach:ze.url.meta!==void 0&&ze.url.meta.attach?ze.url.meta.attach:qe};no.preprocess(j,kn).then(xr=>{Xa(j,ko,xr)}),pe.close()},Xc=j=>{const de=$t(j);return _c.collect(j,de)},Uo=(j,de)=>{const pe=j.anchor,ze=pe.url.getOr("");return{url:{value:ze,meta:{original:{value:ze}}},text:pe.text.getOr(""),title:pe.title.getOr(""),anchor:ze,link:ze,rel:pe.rel.getOr(""),target:pe.target.or(de).getOr(""),linkClass:pe.linkClass.getOr("")}},dr=(j,de,pe)=>{const ze=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],wt=j.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),kn=j.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],ko=Ct.from(Ke(pe)),xr=Uo(j,ko),Io=j.catalogs,No=ce.init(xr,Io);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:cn([ze,wt,kn,ro([Io.anchor.map(tn.createUi("anchor","Anchors")),Io.rels.map(tn.createUi("rel","Rel")),Io.targets.map(tn.createUi("target","Open link in...")),Io.link.map(tn.createUi("link","Link list")),Io.classes.map(tn.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:xr,onChange:(Hr,{name:Ci})=>{No.onChange(Hr.getData,{name:Ci}).each(Ot=>{Hr.setData(Ot)})},onSubmit:de}},Ea=j=>{Xc(j).then(pe=>{const ze=ei(j,pe);return dr(pe,ze,j)}).then(pe=>{j.windowManager.open(pe)})},Rl=j=>{j.addCommand("mceLink",(de,pe)=>{(pe==null?void 0:pe.dialog)===!0||!L(j)?Ea(j):j.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var pa=tinymce.util.Tools.resolve("tinymce.util.VK");const As=(j,de)=>{document.body.appendChild(j),j.dispatchEvent(de),document.body.removeChild(j)},hs=j=>{const de=document.createElement("a");de.target="_blank",de.href=j,de.rel="noreferrer noopener";const pe=document.createEvent("MouseEvents");pe.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),As(de,pe)},Fa=j=>{const de=j.selection.getRng(),pe=de.startContainer;return gs(pe)&&de.startContainer===de.endContainer&&j.dom.select("img",pe).length===1},Ml=j=>j.selection.isCollapsed()||Fa(j)?Hn(j.dom.getParents(j.selection.getStart())):ir(j.selection.getRng()),Ko=j=>Ml(j)[0],Yr=j=>j.altKey===!0&&j.shiftKey===!1&&j.ctrlKey===!1&&j.metaKey===!1,ba=(j,de)=>{if(de){const pe=Ne(de);if(/^#/.test(pe)){const ze=j.dom.select(pe);ze.length&&j.selection.scrollIntoView(ze[0],!0)}else hs(de.href)}},Sr=j=>()=>{j.execCommand("mceLink",!1,{dialog:!0})},Ha=j=>()=>{ba(j,Ko(j))},hl=j=>{j.on("click",de=>{const pe=Hn(j.dom.getParents(de.target));pe.length===1&&pa.metaKeyPressed(de)&&(de.preventDefault(),ba(j,pe[0]))}),j.on("keydown",de=>{if(!de.isDefaultPrevented()&&de.keyCode===13&&Yr(de)){const pe=Ko(j);pe&&(de.preventDefault(),ba(j,pe))}})},Xr=(j,de)=>(j.on("NodeChange",de),()=>j.off("NodeChange",de)),Ja=j=>de=>{const pe=()=>{de.setActive(!j.mode.isReadOnly()&&to(j,j.selection.getNode())),de.setEnabled(j.selection.isEditable())};return pe(),Xr(j,pe)},Ac=j=>de=>{const pe=()=>{de.setEnabled(j.selection.isEditable())};return pe(),Xr(j,pe)},iu=j=>Ml(j).length===1,uc=j=>de=>{const pe=()=>de.setEnabled(iu(j));return pe(),Xr(j,pe)},Nl=j=>de=>{const pe=kn=>cs(kn)||ur(j.selection.getRng()),ze=j.dom.getParents(j.selection.getStart()),wt=kn=>{de.setEnabled(pe(kn)&&j.selection.isEditable())};return wt(ze),Xr(j,kn=>wt(kn.parents))},va=j=>{j.addShortcut("Meta+K","",()=>{j.execCommand("mceLink")})},pl=j=>{j.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Sr(j),onSetup:Ja(j),shortcut:"Meta+K"}),j.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ha(j),onSetup:uc(j)}),j.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Uc(j),onSetup:Nl(j)})},Pl=j=>{j.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ha(j),onSetup:uc(j)}),j.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Ac(j),onAction:Sr(j)}),j.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Uc(j),onSetup:Nl(j)})},ti=j=>{const de="link unlink openlink",pe="link";j.ui.registry.addContextMenu("link",{update:ze=>j.dom.isEditable(ze)?cs(j.dom.getParents(ze,"a"))?de:pe:""})},Nu=j=>{const de=wt=>{wt.selection.collapse(!1)},pe=wt=>{const kn=j.selection.getNode();return wt.setEnabled(to(j,kn)),qe},ze=wt=>{const kn=$t(j),ko=mt(j);if(kn.isNone()&&ko){const xr=Jo(j.selection,kn);return Wt(xr.length===0,wt)}else return Ct.none()};j.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Ja(j)},label:"Link",predicate:wt=>Ho(j)&&to(j,wt),initValue:()=>$t(j).fold(tt(""),Ne),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:wt=>{const kn=j.selection.getNode();return wt.setActive(to(j,kn)),Ja(j)(wt)},onAction:wt=>{const kn=wt.getValue(),ko=ze(kn);Xa(j,{href:kn,attach:qe},{href:kn,text:ko,title:Ct.none(),rel:Ct.none(),target:Ct.from(Ke(j)),class:Ct.none()}),de(j),wt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:pe,onAction:wt=>{Uc(j),wt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:pe,onAction:wt=>{Ha(j)(),wt.hide()}}]})};var Fi=()=>{lt.add("link",j=>{lo(j),pl(j),Pl(j),ti(j),Nu(j),hl(j),Rl(j),va(j)})};Fi()})();(function(){var lt=tinymce.util.Tools.resolve("tinymce.PluginManager");const $n=(x,R,V)=>{var re;return V(x,R.prototype)?!0:((re=x.constructor)===null||re===void 0?void 0:re.name)===R.name},an=x=>{const R=typeof x;return x===null?"null":R==="object"&&Array.isArray(x)?"array":R==="object"&&$n(x,String,(V,re)=>re.isPrototypeOf(V))?"string":R},Xt=x=>R=>an(R)===x,yt=x=>R=>typeof R===x,Ut=Xt("string"),Zn=Xt("object"),Mt=Xt("array"),qt=yt("boolean"),eo=x=>x==null,Cn=x=>!eo(x),Qt=yt("function"),Sn=yt("number"),Nt=()=>{},_t=(x,R)=>V=>x(R(V)),qe=x=>()=>x,tt=(x,R)=>x===R;function jn(x,...R){return(...V)=>{const re=R.concat(V);return x.apply(null,re)}}const Ct=x=>R=>!x(R),q=qe(!1);class Fe{constructor(R,V){this.tag=R,this.value=V}static some(R){return new Fe(!0,R)}static none(){return Fe.singletonNone}fold(R,V){return this.tag?V(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?Fe.some(R(this.value)):Fe.none()}bind(R){return this.tag?R(this.value):Fe.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:Fe.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return Cn(R)?Fe.some(R):Fe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Fe.singletonNone=new Fe(!1);const En=Array.prototype.slice,nt=Array.prototype.indexOf,W=Array.prototype.push,St=(x,R)=>nt.call(x,R),Gt=(x,R)=>St(x,R)>-1,cn=(x,R)=>{for(let V=0,re=x.length;V<re;V++){const ge=x[V];if(R(ge,V))return!0}return!1},Ae=(x,R)=>{const V=x.length,re=new Array(V);for(let ge=0;ge<V;ge++){const Je=x[ge];re[ge]=R(Je,ge)}return re},le=(x,R)=>{for(let V=0,re=x.length;V<re;V++){const ge=x[V];R(ge,V)}},Bo=(x,R)=>{const V=[];for(let re=0,ge=x.length;re<ge;re++){const Je=x[re];R(Je,re)&&V.push(Je)}return V},ro=(x,R)=>{if(x.length===0)return[];{let V=R(x[0]);const re=[];let ge=[];for(let Je=0,On=x.length;Je<On;Je++){const Jn=x[Je],Gn=R(Jn);Gn!==V&&(re.push(ge),ge=[]),V=Gn,ge.push(Jn)}return ge.length!==0&&re.push(ge),re}},Wt=(x,R,V)=>(le(x,(re,ge)=>{V=R(V,re,ge)}),V),A=(x,R,V)=>{for(let re=0,ge=x.length;re<ge;re++){const Je=x[re];if(R(Je,re))return Fe.some(Je);if(V(Je,re))break}return Fe.none()},lo=(x,R)=>A(x,R,q),rt=x=>{const R=[];for(let V=0,re=x.length;V<re;++V){if(!Mt(x[V]))throw new Error("Arr.flatten item "+V+" was not an array, input: "+x);W.apply(R,x[V])}return R},Ho=(x,R)=>rt(Ae(x,R)),ln=x=>{const R=En.call(x,0);return R.reverse(),R},Ke=(x,R)=>R>=0&&R<x.length?Fe.some(x[R]):Fe.none(),vo=x=>Ke(x,0),Gs=x=>Ke(x,x.length-1),mo=(x,R)=>{const V=[],re=Qt(R)?ge=>cn(V,Je=>R(Je,ge)):ge=>Gt(V,ge);for(let ge=0,Je=x.length;ge<Je;ge++){const On=x[ge];re(On)||V.push(On)}return V},qs=(x,R,V=tt)=>x.exists(re=>V(re,R)),Ze=(x,R,V=tt)=>ut(x,R,V).getOr(x.isNone()&&R.isNone()),ut=(x,R,V)=>x.isSome()&&R.isSome()?Fe.some(V(x.getOrDie(),R.getOrDie())):Fe.none(),L=8,Lr=9,io=11,as=1,Vo=3,kc=(x,R)=>{const re=(R||document).createElement("div");if(re.innerHTML=x,!re.hasChildNodes()||re.childNodes.length>1){const ge="HTML does not have a single root node";throw console.error(ge,x),new Error(ge)}return tn(re.childNodes[0])},An=(x,R)=>{const re=(R||document).createElement(x);return tn(re)},Xo=(x,R)=>{const re=(R||document).createTextNode(x);return tn(re)},tn=x=>{if(x==null)throw new Error("Node cannot be null or undefined");return{dom:x}},vt={fromHtml:kc,fromTag:An,fromText:Xo,fromDom:tn,fromPoint:(x,R,V)=>Fe.from(x.dom.elementFromPoint(R,V)).map(tn)},So=(x,R)=>{const V=x.dom;if(V.nodeType!==as)return!1;{const re=V;if(re.matches!==void 0)return re.matches(R);if(re.msMatchesSelector!==void 0)return re.msMatchesSelector(R);if(re.webkitMatchesSelector!==void 0)return re.webkitMatchesSelector(R);if(re.mozMatchesSelector!==void 0)return re.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}},It=(x,R)=>x.dom===R.dom,Ks=(x,R)=>{const V=x.dom,re=R.dom;return V===re?!1:V.contains(re)},zo=So,jr=typeof window<"u"?window:Function("return this;")(),bs=(x,R)=>{let V=R??jr;for(let re=0;re<x.length&&V!==void 0&&V!==null;++re)V=V[x[re]];return V},Qs=(x,R)=>{const V=x.split(".");return bs(V,R)},lc=(x,R)=>Qs(x,R),er=(x,R)=>{const V=lc(x,R);if(V==null)throw new Error(x+" not available on this browser");return V},gs=Object.getPrototypeOf,es=x=>er("HTMLElement",x),ma=x=>{const R=Qs("ownerDocument.defaultView",x);return Zn(x)&&(es(R).prototype.isPrototypeOf(x)||/^HTML\w*Element$/.test(gs(x).constructor.name))},Ne=x=>x.dom.nodeName.toLowerCase(),Xe=x=>x.dom.nodeType,rn=x=>R=>Xe(R)===x,$t=x=>Xe(x)===L||Ne(x)==="#comment",to=x=>Jo(x)&&ma(x.dom),Jo=rn(as),ir=rn(Vo),Hn=rn(Lr),cs=rn(io),ur=x=>R=>Jo(R)&&Ne(R)===x,mt=x=>vt.fromDom(x.dom.ownerDocument),po=x=>Hn(x)?x:mt(x),Dr=x=>Fe.from(x.dom.parentNode).map(vt.fromDom),fa=x=>Fe.from(x.dom.parentElement).map(vt.fromDom),ga=x=>Fe.from(x.dom.nextSibling).map(vt.fromDom),ha=x=>Ae(x.dom.childNodes,vt.fromDom),ls=(x,R)=>{const V=x.dom.childNodes;return Fe.from(V[R]).map(vt.fromDom)},Ta=x=>ls(x,0),Ya=x=>ls(x,x.dom.childNodes.length-1),is=x=>cs(x)&&Cn(x.dom.host),wr=Qt(Element.prototype.attachShadow)&&Qt(Node.prototype.getRootNode)?x=>vt.fromDom(x.dom.getRootNode()):po,Xa=x=>{const R=wr(x);return is(R)?Fe.some(R):Fe.none()},Uc=x=>vt.fromDom(x.dom.host),fl=x=>{const R=ir(x)?x.dom.parentNode:x.dom;if(R==null||R.ownerDocument===null)return!1;const V=R.ownerDocument;return Xa(vt.fromDom(R)).fold(()=>V.body.contains(R),_t(fl,Uc))};var tr=(x,R,V,re,ge)=>x(V,re)?Fe.some(V):Qt(ge)&&ge(V)?Fe.none():R(V,re,ge);const nr=(x,R,V)=>{let re=x.dom;const ge=Qt(V)?V:q;for(;re.parentNode;){re=re.parentNode;const Je=vt.fromDom(re);if(R(Je))return Fe.some(Je);if(ge(Je))break}return Fe.none()},zs=(x,R,V)=>tr((ge,Je)=>Je(ge),nr,x,R,V),La=(x,R,V)=>nr(x,re=>So(re,R),V),gl=(x,R,V)=>tr((ge,Je)=>So(ge,Je),La,x,R,V),Fr=x=>gl(x,"[contenteditable]"),ce=(x,R=!1)=>fl(x)?x.dom.isContentEditable:Fr(x).fold(qe(R),V=>se(V)==="true"),se=x=>x.dom.contentEditable,Oe=(x,R)=>{Dr(x).each(re=>{re.dom.insertBefore(R.dom,x.dom)})},He=(x,R)=>{ga(x).fold(()=>{Dr(x).each(ge=>{Tn(ge,R)})},re=>{Oe(re,R)})},fn=(x,R)=>{Ta(x).fold(()=>{Tn(x,R)},re=>{x.dom.insertBefore(R.dom,re.dom)})},Tn=(x,R)=>{x.dom.appendChild(R.dom)},no=(x,R)=>{le(R,V=>{Oe(x,V)})},Rs=(x,R)=>{le(R,V=>{Tn(x,V)})},he=x=>{x.dom.textContent="",le(ha(x),R=>{Un(R)})},Un=x=>{const R=x.dom;R.parentNode!==null&&R.parentNode.removeChild(R)};var Us=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),br=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Kr=tinymce.util.Tools.resolve("tinymce.util.VK");const ts=x=>Ae(x,vt.fromDom),Dl=Object.keys,ic=(x,R)=>{const V=Dl(x);for(let re=0,ge=V.length;re<ge;re++){const Je=V[re],On=x[Je];R(On,Je)}},ra=x=>(R,V)=>{x[V]=R},Rr=(x,R,V,re)=>{ic(x,(ge,Je)=>{(R(ge,Je)?V:re)(ge,Je)})},$o=(x,R)=>{const V={};return Rr(x,R,ra(V),Nt),V},qo=(x,R,V)=>{if(Ut(V)||qt(V)||Sn(V))x.setAttribute(R,V+"");else throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",V,":: Element ",x),new Error("Attribute value was not simple")},vr=(x,R)=>{const V=x.dom;ic(R,(re,ge)=>{qo(V,ge,re)})},aa=x=>Wt(x.dom.attributes,(R,V)=>(R[V.name]=V.value,R),{}),_c=(x,R)=>vt.fromDom(x.dom.cloneNode(R)),ei=x=>_c(x,!0),Xc=(x,R)=>{const V=vt.fromTag(R),re=aa(x);return vr(V,re),V},Uo=(x,R)=>{const V=Xc(x,R);He(x,V);const re=ha(x);return Rs(V,re),Un(x),V};var dr=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ea=tinymce.util.Tools.resolve("tinymce.util.Tools");const Rl=x=>R=>Cn(R)&&R.nodeName.toLowerCase()===x,pa=x=>R=>Cn(R)&&x.test(R.nodeName),As=x=>Cn(x)&&x.nodeType===3,hs=x=>Cn(x)&&x.nodeType===1,Fa=pa(/^(OL|UL|DL)$/),Ml=pa(/^(OL|UL)$/),Ko=Rl("ol"),Yr=pa(/^(LI|DT|DD)$/),ba=pa(/^(DT|DD)$/),Sr=pa(/^(TH|TD)$/),Ha=Rl("br"),hl=x=>{var R;return((R=x.parentNode)===null||R===void 0?void 0:R.firstChild)===x},Xr=(x,R)=>Cn(R)&&R.nodeName in x.schema.getTextBlockElements(),Ja=(x,R)=>Cn(x)&&x.nodeName in R,Ac=(x,R)=>Cn(R)&&R.nodeName in x.schema.getVoidElements(),iu=(x,R)=>Ha(R)?x.isBlock(R.nextSibling)&&!Ha(R.previousSibling):!1,uc=(x,R,V)=>{const re=x.isEmpty(R);return V&&x.select("span[data-mce-type=bookmark]",R).length>0?!1:re},Nl=(x,R)=>x.isChildOf(R,x.getRoot()),va=x=>R=>R.options.get(x),pl=x=>{const R=x.options.register;R("lists_indent_on_tab",{processor:"boolean",default:!0})},Pl=va("lists_indent_on_tab"),ti=va("forced_root_block"),Nu=va("forced_root_block_attrs"),Fi=(x,R,V={})=>{const re=x.dom,ge=x.schema.getBlockElements(),Je=re.createFragment(),On=ti(x),Jn=Nu(x);let Gn,Dn,sr=!1;for(Dn=re.create(On,{...Jn,...V.style?{style:V.style}:{}}),Ja(R.firstChild,ge)||Je.appendChild(Dn);Gn=R.firstChild;){const Er=Gn.nodeName;!sr&&(Er!=="SPAN"||Gn.getAttribute("data-mce-type")!=="bookmark")&&(sr=!0),Ja(Gn,ge)?(Je.appendChild(Gn),Dn=null):(Dn||(Dn=re.create(On,Jn),Je.appendChild(Dn)),Dn.appendChild(Gn))}return!sr&&Dn&&Dn.appendChild(re.create("br",{"data-mce-bogus":"1"})),Je},j=dr.DOM,de=(x,R,V)=>{const re=Dn=>{const sr=Dn.parentNode;sr&&Ea.each(ge,Er=>{sr.insertBefore(Er,V.parentNode)}),j.remove(Dn)},ge=j.select('span[data-mce-type="bookmark"]',R),Je=Fi(x,V),On=j.createRng();On.setStartAfter(V),On.setEndAfter(R);const Jn=On.extractContents();for(let Dn=Jn.firstChild;Dn;Dn=Dn.firstChild)if(Dn.nodeName==="LI"&&x.dom.isEmpty(Dn)){j.remove(Dn);break}x.dom.isEmpty(Jn)||j.insertAfter(Jn,R),j.insertAfter(Je,R);const Gn=V.parentElement;Gn&&uc(x.dom,Gn)&&re(Gn),j.remove(V),uc(x.dom,R)&&j.remove(R)},pe=ur("dd"),ze=ur("dt"),wt=(x,R)=>{pe(R)?Uo(R,"dt"):ze(R)&&fa(R).each(V=>de(x,V.dom,R.dom))},kn=x=>{ze(x)&&Uo(x,"dd")},ko=(x,R,V)=>{R==="Indent"?le(V,kn):le(V,re=>wt(x,re))},xr=(x,R)=>{if(As(x))return{container:x,offset:R};const V=Us.getNode(x,R);return As(V)?{container:V,offset:R>=x.childNodes.length?V.data.length:0}:V.previousSibling&&As(V.previousSibling)?{container:V.previousSibling,offset:V.previousSibling.data.length}:V.nextSibling&&As(V.nextSibling)?{container:V.nextSibling,offset:0}:{container:x,offset:R}},Io=x=>{const R=x.cloneRange(),V=xr(x.startContainer,x.startOffset);R.setStart(V.container,V.offset);const re=xr(x.endContainer,x.endOffset);return R.setEnd(re.container,re.offset),R},No=["OL","UL","DL"],Wo=No.join(","),Hr=(x,R)=>{const V=R||x.selection.getStart(!0);return x.dom.getParent(V,Wo,Bt(x,V))},Ci=(x,R)=>Cn(x)&&R.length===1&&R[0]===x,Ot=x=>Bo(x.querySelectorAll(Wo),Fa),Zd=x=>{const R=Hr(x),V=x.selection.getSelectedBlocks();return Ci(R,V)?Ot(R):Bo(V,re=>Fa(re)&&R!==re)},Ns=(x,R)=>{const V=Ea.map(R,re=>{const ge=x.dom.getParent(re,"li,dd,dt",Bt(x,re));return ge||re});return mo(V)},B=x=>{const R=x.selection.getSelectedBlocks();return Bo(Ns(x,R),Yr)},X=x=>Bo(B(x),ba),oe=(x,R)=>{const V=x.dom.getParents(R,"TD,TH");return V.length>0?V[0]:x.getBody()},De=(x,R)=>!Fa(R)&&!Yr(R)&&cn(No,V=>x.isValidChild(R.nodeName,V)),Bt=(x,R)=>{const V=x.dom.getParents(R,x.dom.isBlock),re=Je=>Je.nodeName.toLowerCase()!==ti(x);return lo(V,Je=>re(Je)&&De(x.schema,Je)).getOr(x.getBody())},fo=x=>Dr(x).exists(R=>Yr(R.dom)&&Ta(R).exists(V=>!Fa(V.dom))&&Ya(R).exists(V=>!Fa(V.dom))),Yt=(x,R)=>{const V=x.dom.getParents(R,"ol,ul",Bt(x,R));return Gs(V)},Ws=x=>{const R=Yt(x,x.selection.getStart()),V=Bo(x.selection.getSelectedBlocks(),Ml);return R.toArray().concat(V)},at=x=>{const R=x.selection.getStart();return x.dom.getParents(R,"ol,ul",Bt(x,R))},xs=x=>{const R=Ws(x),V=at(x);return lo(V,re=>fo(vt.fromDom(re))).fold(()=>Qa(x,R),re=>[re])},Qa=(x,R)=>{const V=Ae(R,re=>Yt(x,re).getOr(re));return mo(V)},Ms=x=>/\btox\-/.test(x.className),Vr=(x,R)=>A(x,Fa,Sr).exists(V=>V.nodeName===R&&!Ms(V)),bl=(x,R)=>R!==null&&!x.dom.isEditable(R),_o=x=>{const R=Hr(x);return bl(x,R)},ec=(x,R)=>{const V=x.dom.getParent(R,"ol,ul,dl");return bl(x,V)},Zs=(x,R)=>{const V=x.selection.getNode();return R({parents:x.dom.getParents(V),element:V}),x.on("NodeChange",R),()=>x.off("NodeChange",R)},ni=(x,R)=>{const re=document.createDocumentFragment();return le(x,ge=>{re.appendChild(ge.dom)}),vt.fromDom(re)},Ys=(x,R,V)=>x.dispatch("ListMutation",{action:R,element:V}),Pm=(x=>R=>R.replace(x,""))(/^\s+|\s+$/g),Ag=x=>x.length>0,or=x=>!Ag(x),Bl=x=>x.style!==void 0&&Qt(x.style.getPropertyValue),ya=(x,R,V)=>{if(!Ut(V))throw console.error("Invalid call to CSS.set. Property ",R,":: Value ",V,":: Element ",x),new Error("CSS value must be a string: "+V);Bl(x)&&x.style.setProperty(R,V)},ka=(x,R,V)=>{const re=x.dom;ya(re,R,V)},tc=x=>zo(x,"OL,UL"),jd=x=>zo(x,"LI"),Ao=x=>Ta(x).exists(tc),dc=x=>Ya(x).exists(tc),Va=x=>"listAttributes"in x,K=x=>"isComment"in x,ne=x=>"isFragment"in x,xe=x=>x.depth>0,Re=x=>x.isSelected,hn=x=>{const R=ha(x),V=dc(x)?R.slice(0,-1):R;return Ae(V,ei)},bo=(x,R,V)=>Dr(x).filter(Jo).map(re=>({depth:R,dirty:!1,isSelected:V,content:hn(x),itemAttributes:aa(x),listAttributes:aa(re),listType:Ne(re),isInPreviousLi:!1})),Ps=(x,R)=>{Tn(x.item,R.list)},Ca=x=>{for(let R=1;R<x.length;R++)Ps(x[R-1],x[R])},Co=(x,R)=>{ut(Gs(x),vo(R),Ps)},Jr=(x,R)=>{const V={list:vt.fromTag(R,x),item:vt.fromTag("li",x)};return Tn(V.list,V.item),V},js=(x,R,V)=>{const re=[];for(let ge=0;ge<V;ge++)re.push(Jr(x,Va(R)?R.listType:R.parentListType));return re},Mr=(x,R)=>{for(let V=0;V<x.length-1;V++)ka(x[V].item,"list-style-type","none");Gs(x).each(V=>{Va(R)&&(vr(V.list,R.listAttributes),vr(V.item,R.itemAttributes)),Rs(V.item,R.content)})},Tr=(x,R)=>{Ne(x.list)!==R.listType&&(x.list=Uo(x.list,R.listType)),vr(x.list,R.listAttributes)},yr=(x,R,V)=>{const re=vt.fromTag("li",x);return vr(re,R),Rs(re,V),re},Wc=(x,R)=>{Tn(x.list,R),x.item=R},oi=(x,R,V)=>{const re=R.slice(0,V.depth);return Gs(re).each(ge=>{if(Va(V)){const Je=yr(x,V.itemAttributes,V.content);Wc(ge,Je),Tr(ge,V)}else if(ne(V))Rs(ge.item,V.content);else{const Je=vt.fromHtml(`<!--${V.content}-->`);Tn(ge.list,Je)}}),re},_a=(x,R,V)=>{const re=js(x,V,V.depth-R.length);return Ca(re),Mr(re,V),Co(R,re),R.concat(re)},Zc=(x,R)=>{let V=Fe.none();const re=Wt(R,(ge,Je,On)=>K(Je)?On===0?(V=Fe.some(Je),ge):oi(x,ge,Je):Je.depth>ge.length?_a(x,ge,Je):oi(x,ge,Je),[]);return V.each(ge=>{const Je=vt.fromHtml(`<!--${ge.content}-->`);vo(re).each(On=>{fn(On.list,Je)})}),vo(re).map(ge=>ge.list)},wi=(x,R)=>{switch(x){case"Indent":R.depth++;break;case"Outdent":R.depth--;break;case"Flatten":R.depth=0}R.dirty=!0},Si=(x,R)=>{Va(x)&&Va(R)&&(x.listType=R.listType,x.listAttributes={...R.listAttributes})},Cf=x=>{x.listAttributes=$o(x.listAttributes,(R,V)=>V!=="start")},Bu=(x,R)=>{const V=x[R].depth,re=Je=>Je.depth===V&&!Je.dirty,ge=Je=>Je.depth<V;return A(ln(x.slice(0,R)),re,ge).orThunk(()=>A(x.slice(R+1),re,ge))},si=x=>(le(x,(R,V)=>{Bu(x,V).fold(()=>{R.dirty&&Va(R)&&Cf(R)},re=>Si(R,re))}),x),Oc=x=>{let R=x;return{get:()=>R,set:ge=>{R=ge}}},$u=(x,R,V,re)=>{var ge;if($t(re))return[{depth:x+1,content:(ge=re.dom.nodeValue)!==null&&ge!==void 0?ge:"",dirty:!1,isSelected:!1,isComment:!0}];R.each(Jn=>{It(Jn.start,re)&&V.set(!0)});const Je=bo(re,x,V.get());R.each(Jn=>{It(Jn.end,re)&&V.set(!1)});const On=Ya(re).filter(tc).map(Jn=>Hi(x,R,V,Jn)).getOr([]);return Je.toArray().concat(On)},Gd=(x,R,V,re)=>Ta(re).filter(tc).fold(()=>$u(x,R,V,re),ge=>{const Je=Wt(ha(re),(On,Jn,Gn)=>{if(Gn===0)return On;if(jd(Jn))return On.concat($u(x,R,V,Jn));{const Dn={isFragment:!0,depth:x,content:[Jn],isSelected:!1,dirty:!1,parentListType:Ne(ge)};return On.concat(Dn)}},[]);return Hi(x,R,V,ge).concat(Je)}),Hi=(x,R,V,re)=>Ho(ha(re),ge=>{const Je=tc(ge)?Hi:Gd,On=x+1;return Je(On,R,V,ge)}),Og=(x,R)=>{const V=Oc(!1),re=0;return Ae(x,ge=>({sourceList:ge,entries:Hi(re,R,V,ge)}))},qd=(x,R)=>{const V=si(R);return Ae(V,re=>{const ge=K(re)?ni([vt.fromHtml(`<!--${re.content}-->`)]):ni(re.content),Je=Va(re)?re.itemAttributes:{};return vt.fromDom(Fi(x,ge.dom,Je))})},Dg=(x,R)=>{const V=si(R);return Zc(x.contentDocument,V).toArray()},md=(x,R)=>Ho(ro(R,xe),V=>vo(V).exists(xe)?Dg(x,V):qd(x,V)),Rg=(x,R)=>{le(Bo(x,Re),V=>wi(R,V))},fd=x=>{const R=Ae(B(x),vt.fromDom);return ut(lo(R,Ct(Ao)),lo(ln(R),Ct(Ao)),(V,re)=>({start:V,end:re}))},u1=(x,R,V)=>{const re=Og(R,fd(x));le(re,ge=>{Rg(ge.entries,V);const Je=md(x,ge.entries);le(Je,On=>{Ys(x,V==="Indent"?"IndentList":"OutdentList",On.dom)}),no(ge.sourceList,Je),Un(ge.sourceList)})},ie=(x,R)=>{const V=ts(xs(x)),re=ts(X(x));let ge=!1;if(V.length||re.length){const Je=x.selection.getBookmark();u1(x,V,R),ko(x,R,re),x.selection.moveToBookmark(Je),x.selection.setRng(Io(x.selection.getRng())),x.nodeChanged(),ge=!0}return ge},Bm=(x,R)=>!_o(x)&&ie(x,R),Jc=x=>Bm(x,"Indent"),uu=x=>Bm(x,"Outdent"),Mg=x=>Bm(x,"Flatten"),Lh="\uFEFF",ns=x=>x===Lh,ri=(x,R,V)=>nr(x,R,V).isSome(),vl=(x,R)=>ri(x,jn(It,R));var Aa=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const gd=dr.DOM,xi=x=>{const R={},V=re=>{let ge=x[re?"startContainer":"endContainer"],Je=x[re?"startOffset":"endOffset"];if(hs(ge)){const On=gd.create("span",{"data-mce-type":"bookmark"});ge.hasChildNodes()?(Je=Math.min(Je,ge.childNodes.length-1),re?ge.insertBefore(On,ge.childNodes[Je]):gd.insertAfter(On,ge.childNodes[Je])):ge.appendChild(On),ge=On,Je=0}R[re?"startContainer":"endContainer"]=ge,R[re?"startOffset":"endOffset"]=Je};return V(!0),x.collapsed||V(),R},mc=x=>{const R=re=>{const ge=Jn=>{var Gn;let Dn=(Gn=Jn.parentNode)===null||Gn===void 0?void 0:Gn.firstChild,sr=0;for(;Dn;){if(Dn===Jn)return sr;(!hs(Dn)||Dn.getAttribute("data-mce-type")!=="bookmark")&&sr++,Dn=Dn.nextSibling}return-1};let Je=x[re?"startContainer":"endContainer"],On=x[re?"startOffset":"endOffset"];if(Je){if(hs(Je)&&Je.parentNode){const Jn=Je;On=ge(Je),Je=Je.parentNode,gd.remove(Jn),!Je.hasChildNodes()&&gd.isBlock(Je)&&Je.appendChild(gd.create("br"))}x[re?"startContainer":"endContainer"]=Je,x[re?"startOffset":"endOffset"]=On}};R(!0),R();const V=gd.createRng();return V.setStart(x.startContainer,x.startOffset),x.endContainer&&V.setEnd(x.endContainer,x.endOffset),Io(V)},Ti=x=>{switch(x){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Ng=(x,R,V)=>{const re=V["list-style-type"]?V["list-style-type"]:null;x.setStyle(R,"list-style-type",re)},Fh=(x,R)=>{Ea.each(R,(V,re)=>{x.setAttribute(re,V)})},$l=(x,R,V)=>{Fh(R,V["list-attributes"]),Ea.each(x.select("li",R),re=>{Fh(re,V["list-item-attributes"])})},Ei=(x,R,V)=>{Ng(x,R,V),$l(x,R,V)},Pg=(x,R,V)=>{Ea.each(V,re=>x.setStyle(R,re,""))},jc=(x,R)=>Cn(R)&&!Ja(R,x.schema.getBlockElements()),Oa=(x,R,V,re)=>{let ge=R[V?"startContainer":"endContainer"];const Je=R[V?"startOffset":"endOffset"];hs(ge)&&(ge=ge.childNodes[Math.min(Je,ge.childNodes.length-1)]||ge),!V&&Ha(ge.nextSibling)&&(ge=ge.nextSibling);const On=Gn=>{for(;!x.dom.isBlock(Gn)&&Gn.parentNode&&re!==Gn;)Gn=Gn.parentNode;return Gn},Jn=(Gn,Dn)=>{var sr;const Er=new br(Gn,On(Gn)),Cl=Dn?"next":"prev";let Ui;for(;Ui=Er[Cl]();)if(!(Ac(x,Ui)||ns(Ui.textContent)||((sr=Ui.textContent)===null||sr===void 0?void 0:sr.length)===0))return Fe.some(Ui);return Fe.none()};if(V&&As(ge))if(ns(ge.textContent))ge=Jn(ge,!1).getOr(ge);else for(ge.parentNode!==null&&jc(x,ge.parentNode)&&(ge=ge.parentNode);ge.previousSibling!==null&&(jc(x,ge.previousSibling)||As(ge.previousSibling));)ge=ge.previousSibling;if(!V&&As(ge))if(ns(ge.textContent))ge=Jn(ge,!0).getOr(ge);else for(ge.parentNode!==null&&jc(x,ge.parentNode)&&(ge=ge.parentNode);ge.nextSibling!==null&&(jc(x,ge.nextSibling)||As(ge.nextSibling));)ge=ge.nextSibling;for(;ge.parentNode!==re;){const Gn=ge.parentNode;if(Xr(x,ge)||/^(TD|TH)$/.test(Gn.nodeName))return ge;ge=Gn}return ge},Iu=(x,R,V)=>{const re=[],ge=x.dom,Je=Oa(x,R,!0,V),On=Oa(x,R,!1,V);let Jn;const Gn=[];for(let Dn=Je;Dn&&(Gn.push(Dn),Dn!==On);Dn=Dn.nextSibling);return Ea.each(Gn,Dn=>{var sr;if(Xr(x,Dn)){re.push(Dn),Jn=null;return}if(ge.isBlock(Dn)||Ha(Dn)){Ha(Dn)&&ge.remove(Dn),Jn=null;return}const Er=Dn.nextSibling;if(Aa.isBookmarkNode(Dn)&&(Fa(Er)||Xr(x,Er)||!Er&&Dn.parentNode===V)){Jn=null;return}Jn||(Jn=ge.create("p"),(sr=Dn.parentNode)===null||sr===void 0||sr.insertBefore(Jn,Dn),re.push(Jn)),Jn.appendChild(Dn)}),re},Kd=(x,R,V)=>{const re=x.getStyle(R,"list-style-type");let ge=V?V["list-style-type"]:"";return ge=ge===null?"":ge,re===ge},ai=(x,R)=>{const V=x.selection.getStart(!0),re=Oa(x,R,!0,x.getBody());return vl(vt.fromDom(re),vt.fromDom(R.commonAncestorContainer))?R.commonAncestorContainer:V},nc=(x,R,V)=>{const re=x.selection.getRng();let ge="LI";const Je=Bt(x,ai(x,re)),On=x.dom;if(On.getContentEditable(x.selection.getNode())==="false")return;R=R.toUpperCase(),R==="DL"&&(ge="DT");const Jn=xi(re),Gn=Bo(Iu(x,re,Je),x.dom.isEditable);Ea.each(Gn,Dn=>{let sr;const Er=Dn.previousSibling,Cl=Dn.parentNode;Yr(Cl)||(Er&&Fa(Er)&&Er.nodeName===R&&Kd(On,Er,V)?(sr=Er,Dn=On.rename(Dn,ge),Er.appendChild(Dn)):(sr=On.create(R),Cl.insertBefore(sr,Dn),sr.appendChild(Dn),Dn=On.rename(Dn,ge)),Pg(On,Dn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Ei(On,sr,V),Xd(x.dom,sr))}),x.selection.setRng(mc(Jn))},wf=(x,R)=>Fa(x)&&x.nodeName===(R==null?void 0:R.nodeName),Hh=(x,R,V)=>{const re=x.getStyle(R,"list-style-type",!0),ge=x.getStyle(V,"list-style-type",!0);return re===ge},$m=(x,R)=>x.className===R.className,Yd=(x,R,V)=>wf(R,V)&&Hh(x,R,V)&&$m(R,V),Xd=(x,R)=>{let V,re=R.nextSibling;if(Yd(x,R,re)){const ge=re;for(;V=ge.firstChild;)R.appendChild(V);x.remove(ge)}if(re=R.previousSibling,Yd(x,R,re)){const ge=re;for(;V=ge.lastChild;)R.insertBefore(V,R.firstChild);x.remove(ge)}},du=(x,R,V,re)=>{if(R.nodeName!==V){const ge=x.dom.rename(R,V);Ei(x.dom,ge,re),Ys(x,Ti(V),ge)}else Ei(x.dom,R,re),Ys(x,Ti(V),R)},Sf=(x,R,V,re)=>{if(R.classList.forEach((ge,Je,On)=>{ge.startsWith("tox-")&&(On.remove(ge),On.length===0&&R.removeAttribute("class"))}),R.nodeName!==V){const ge=x.dom.rename(R,V);Ei(x.dom,ge,re),Ys(x,Ti(V),ge)}else Ei(x.dom,R,re),Ys(x,Ti(V),R)},d1=(x,R,V,re,ge)=>{const Je=Fa(R);if(Je&&R.nodeName===re&&!Vh(ge)&&!Ms(R))Mg(x);else{nc(x,re,ge);const On=xi(x.selection.getRng()),Jn=Je?[R,...V]:V,Gn=Je&&Ms(R)?Sf:du;Ea.each(Jn,Dn=>{Gn(x,Dn,re,ge)}),x.selection.setRng(mc(On))}},Vh=x=>"list-style-type"in x,Bg=(x,R,V,re)=>{if(R!==x.getBody())if(R)if(R.nodeName===V&&!Vh(re)&&!Ms(R))Mg(x);else{const ge=xi(x.selection.getRng());Ms(R)&&R.classList.forEach((On,Jn,Gn)=>{On.startsWith("tox-")&&(Gn.remove(On),Gn.length===0&&R.removeAttribute("class"))}),Ei(x.dom,R,re);const Je=x.dom.rename(R,V);Xd(x.dom,Je),x.selection.setRng(mc(ge)),nc(x,V,re),Ys(x,Ti(V),Je)}else nc(x,V,re),Ys(x,Ti(V),R)},Jd=(x,R,V)=>{const re=Hr(x);if(ec(x,re))return;const ge=Zd(x),Je=Zn(V)?V:{};ge.length>0?d1(x,re,ge,R,Je):Bg(x,re,R,Je)},xf=dr.DOM,hd=(x,R)=>{const V=R.parentElement;if(V&&V.nodeName==="LI"&&V.firstChild===R){const re=V.previousSibling;re&&re.nodeName==="LI"?(re.appendChild(R),uc(x,V)&&xf.remove(V)):xf.setStyle(V,"listStyleType","none")}if(Fa(V)){const re=V.previousSibling;re&&re.nodeName==="LI"&&re.appendChild(R)}},zr=(x,R)=>{const V=Ea.grep(x.select("ol,ul",R));Ea.each(V,re=>{hd(x,re)})},mr=(x,R,V,re)=>{let ge=R.startContainer;const Je=R.startOffset;if(As(ge)&&(V?Je<ge.data.length:Je>0))return ge;const On=x.schema.getNonEmptyElements();hs(ge)&&(ge=Us.getNode(ge,Je));const Jn=new br(ge,re);V&&iu(x.dom,ge)&&Jn.next();const Gn=V?Jn.next.bind(Jn):Jn.prev2.bind(Jn);for(;ge=Gn();)if(ge.nodeName==="LI"&&!ge.hasChildNodes()||On[ge.nodeName]||As(ge)&&ge.data.length>0)return ge;return null},Da=(x,R)=>{const V=R.childNodes;return V.length===1&&!Fa(V[0])&&x.isBlock(V[0])},$g=x=>Fe.from(x).map(vt.fromDom).filter(to).exists(R=>ce(R)&&!Gt(["details"],Ne(R))),zh=(x,R)=>{Da(x,R)&&$g(R.firstChild)&&x.remove(R.firstChild,!0)},za=(x,R,V)=>{let re;const ge=Da(x,V)?V.firstChild:V;if(zh(x,R),!uc(x,R,!0))for(;re=R.firstChild;)ge.appendChild(re)},gn=(x,R,V)=>{let re;const ge=R.parentNode;if(!Nl(x,R)||!Nl(x,V))return;Fa(V.lastChild)&&(re=V.lastChild),ge===V.lastChild&&Ha(ge.previousSibling)&&x.remove(ge.previousSibling);const Je=V.lastChild;Je&&Ha(Je)&&R.hasChildNodes()&&x.remove(Je),uc(x,V,!0)&&he(vt.fromDom(V)),za(x,R,V),re&&V.appendChild(re);const Jn=Ks(vt.fromDom(V),vt.fromDom(R))?x.getParents(R,Fa,V):[];x.remove(R),le(Jn,Gn=>{uc(x,Gn)&&Gn!==x.getRoot()&&x.remove(Gn)})},Lu=(x,R,V)=>{he(vt.fromDom(V)),gn(x.dom,R,V),x.selection.setCursorLocation(V,0)},pd=(x,R,V,re)=>{const ge=x.dom;if(ge.isEmpty(re))Lu(x,V,re);else{const Je=xi(R);gn(ge,V,re),x.selection.setRng(mc(Je))}},Gc=(x,R,V,re)=>{const ge=xi(R);gn(x.dom,V,re);const Je=mc(ge);x.selection.setRng(Je)},os=(x,R)=>{const V=x.dom,re=x.selection,ge=re.getStart(),Je=oe(x,ge),On=V.getParent(re.getStart(),"LI",Je);if(On){const Jn=On.parentElement;if(Jn===x.getBody()&&uc(V,Jn))return!0;const Gn=Io(re.getRng()),Dn=V.getParent(mr(x,Gn,R,Je),"LI",Je),sr=Dn&&(R?V.isChildOf(On,Dn):V.isChildOf(Dn,On));if(Dn&&Dn!==On&&!sr)return x.undoManager.transact(()=>{R?pd(x,Gn,Dn,On):hl(On)?uu(x):Gc(x,Gn,On,Dn)}),!0;if(sr&&!R&&Dn!==On)return x.undoManager.transact(()=>{if(Gn.commonAncestorContainer.parentElement){const Er=xi(Gn),Cl=Gn.commonAncestorContainer.parentElement;za(V,Gn.commonAncestorContainer.parentElement,Dn),Cl.remove();const Ui=mc(Er);x.selection.setRng(Ui)}}),!0;if(!Dn&&!R&&Gn.startOffset===0&&Gn.endOffset===0)return x.undoManager.transact(()=>{Mg(x)}),!0}return!1},Ig=(x,R,V)=>{const re=x.getParent(R.parentNode,x.isBlock,V);x.remove(R),re&&x.isEmpty(re)&&x.remove(re)},Qd=(x,R)=>{const V=x.dom,re=x.selection.getStart(),ge=oe(x,re),Je=V.getParent(re,V.isBlock,ge);if(Je&&V.isEmpty(Je,void 0,{checkRootAsContent:!0})){const On=Io(x.selection.getRng()),Jn=V.getParent(mr(x,On,R,ge),"LI",ge);if(Jn){const Gn=Cl=>Gt(["td","th","caption"],Ne(Cl)),Dn=Cl=>Cl.dom===ge,sr=zs(vt.fromDom(Jn),Gn,Dn),Er=zs(vt.fromDom(On.startContainer),Gn,Dn);return Ze(sr,Er,It)?(x.undoManager.transact(()=>{const Cl=Jn.parentNode;Ig(V,Je,ge),Xd(V,Cl),x.selection.select(Jn,!0),x.selection.collapse(R)}),!0):!1}}return!1},Im=(x,R)=>os(x,R)||Qd(x,R),Lg=x=>{const R=x.selection.getStart(),V=oe(x,R);return x.dom.getParent(R,"LI,DT,DD",V)||B(x).length>0},ao=x=>Lg(x)?(x.undoManager.transact(()=>{x.execCommand("Delete"),zr(x.dom,x.getBody())}),!0):!1,Ra=(x,R)=>{const V=x.selection;return!ec(x,V.getNode())&&(V.isCollapsed()?Im(x,R):ao(x))},yl=x=>{x.on("ExecCommand",R=>{const V=R.command.toLowerCase();(V==="delete"||V==="forwarddelete")&&Lg(x)&&zr(x.dom,x.getBody())}),x.on("keydown",R=>{R.keyCode===Kr.BACKSPACE?Ra(x,!1)&&R.preventDefault():R.keyCode===Kr.DELETE&&Ra(x,!0)&&R.preventDefault()})},Il=x=>({backspaceDelete:R=>{Ra(x,R)}}),Dc=(x,R)=>{const V=Hr(x);V===null||ec(x,V)||x.undoManager.transact(()=>{Zn(R.styles)&&x.dom.setStyles(V,R.styles),Zn(R.attrs)&&ic(R.attrs,(re,ge)=>x.dom.setAttrib(V,ge,re))})},Rc=x=>{const R=ln(Pm(x).split("")),V=Ae(R,(re,ge)=>{const Je=re.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,ge)*Je});return Wt(V,(re,ge)=>re+ge,0)},Qr=x=>{if(x--,x<0)return"";{const R=x%26,V=Math.floor(x/26),re=Qr(V),ge=String.fromCharCode(65+R);return re+ge}},Fg=x=>/^[A-Z]+$/.test(x),oc=x=>/^[a-z]+$/.test(x),Vi=x=>/^[0-9]+$/.test(x),zi=x=>Vi(x)?2:Fg(x)?0:oc(x)?1:or(x)?3:4,ea=x=>{switch(zi(x)){case 2:return Fe.some({listStyleType:Fe.none(),start:x});case 0:return Fe.some({listStyleType:Fe.some("upper-alpha"),start:Rc(x).toString()});case 1:return Fe.some({listStyleType:Fe.some("lower-alpha"),start:Rc(x).toString()});case 3:return Fe.some({listStyleType:Fe.none(),start:""});case 4:return Fe.none()}},Ur=x=>{const R=parseInt(x.start,10);return qs(x.listStyleType,"upper-alpha")?Qr(R):qs(x.listStyleType,"lower-alpha")?Qr(R).toLowerCase():x.start},Uh=x=>{const R=Hr(x);!Ko(R)||ec(x,R)||x.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Ur({start:x.dom.getAttrib(R,"start","1"),listStyleType:Fe.from(x.dom.getStyle(R,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:V=>{const re=V.getData();ea(re.start).each(ge=>{x.execCommand("mceListUpdate",!1,{attrs:{start:ge.start==="1"?"":ge.start},styles:{"list-style-type":ge.listStyleType.getOr("")}})}),V.close()}})},ci=(x,R)=>()=>{const V=Hr(x);return Cn(V)&&V.nodeName===R},ki=x=>{x.addCommand("mceListProps",()=>{Uh(x)})},Bs=x=>{x.on("BeforeExecCommand",R=>{const V=R.command.toLowerCase();V==="indent"?Jc(x):V==="outdent"&&uu(x)}),x.addCommand("InsertUnorderedList",(R,V)=>{Jd(x,"UL",V)}),x.addCommand("InsertOrderedList",(R,V)=>{Jd(x,"OL",V)}),x.addCommand("InsertDefinitionList",(R,V)=>{Jd(x,"DL",V)}),x.addCommand("RemoveList",()=>{Mg(x)}),ki(x),x.addCommand("mceListUpdate",(R,V)=>{Zn(V)&&Dc(x,V)}),x.addQueryStateHandler("InsertUnorderedList",ci(x,"UL")),x.addQueryStateHandler("InsertOrderedList",ci(x,"OL")),x.addQueryStateHandler("InsertDefinitionList",ci(x,"DL"))};var Ll=tinymce.util.Tools.resolve("tinymce.html.Node");const bd=x=>x.type===3,$s=x=>x.length===0,em=x=>{const R=(ge,Je)=>{const On=Ll.create("li");le(ge,Jn=>On.append(Jn)),Je?x.insert(On,Je,!0):x.append(On)},V=(ge,Je)=>bd(Je)?[...ge,Je]:!$s(ge)&&!bd(Je)?(R(ge,Je),[]):ge,re=Wt(x.children(),V,[]);$s(re)||R(re)},qc=x=>{x.on("PreInit",()=>{const{parser:R}=x;R.addNodeFilter("ul,ol",V=>le(V,em))})},wo=x=>{x.on("keydown",R=>{R.keyCode!==Kr.TAB||Kr.metaKeyPressed(R)||x.undoManager.transact(()=>{(R.shiftKey?uu(x):Jc(x))&&R.preventDefault()})})},vd=x=>{Pl(x)&&wo(x),yl(x)},Lm=(x,R)=>V=>{const re=ge=>{V.setActive(Vr(ge.parents,R)),V.setEnabled(!ec(x,ge.element)&&x.selection.isEditable())};return V.setEnabled(x.selection.isEditable()),Zs(x,re)},Tf=x=>{const R=V=>()=>x.execCommand(V);x.hasPlugin("advlist")||(x.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:R("InsertOrderedList"),onSetup:Lm(x,"OL")}),x.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:R("InsertUnorderedList"),onSetup:Lm(x,"UL")}))},Wh=(x,R)=>V=>Zs(x,ge=>V.setEnabled(Vr(ge.parents,R)&&!ec(x,ge.element))),Ef=x=>{const R={text:"List properties...",icon:"ordered-list",onAction:()=>x.execCommand("mceListProps"),onSetup:Wh(x,"OL")};x.ui.registry.addMenuItem("listprops",R),x.ui.registry.addContextMenu("lists",{update:V=>{const re=Hr(x,V);return Ko(re)?["listprops"]:[]}})};var m1=()=>{lt.add("lists",x=>(pl(x),qc(x),x.hasPlugin("rtc",!0)?ki(x):(vd(x),Bs(x)),Tf(x),Ef(x),Il(x)))};m1()})();(function(){var lt=tinymce.util.Tools.resolve("tinymce.PluginManager");const $n=(ce,se,Oe)=>{var He;return Oe(ce,se.prototype)?!0:((He=ce.constructor)===null||He===void 0?void 0:He.name)===se.name},an=ce=>{const se=typeof ce;return ce===null?"null":se==="object"&&Array.isArray(ce)?"array":se==="object"&&$n(ce,String,(Oe,He)=>He.isPrototypeOf(Oe))?"string":se},Xt=ce=>se=>an(se)===ce,yt=Xt("string"),Ut=Xt("object"),Zn=Xt("array"),Mt=ce=>ce==null,qt=ce=>!Mt(ce);class eo{constructor(se,Oe){this.tag=se,this.value=Oe}static some(se){return new eo(!0,se)}static none(){return eo.singletonNone}fold(se,Oe){return this.tag?Oe(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?eo.some(se(this.value)):eo.none()}bind(se){return this.tag?se(this.value):eo.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:eo.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return qt(se)?eo.some(se):eo.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}eo.singletonNone=new eo(!1);const Cn=Array.prototype.push,Qt=(ce,se)=>{for(let Oe=0,He=ce.length;Oe<He;Oe++){const fn=ce[Oe];se(fn,Oe)}},Sn=ce=>{const se=[];for(let Oe=0,He=ce.length;Oe<He;++Oe){if(!Zn(ce[Oe]))throw new Error("Arr.flatten item "+Oe+" was not an array, input: "+ce);Cn.apply(se,ce[Oe])}return se},Nt=ce=>{let se=ce;return{get:()=>se,set:fn=>{se=fn}}},_t=Object.keys,qe=Object.hasOwnProperty,tt=(ce,se)=>{const Oe=_t(ce);for(let He=0,fn=Oe.length;He<fn;He++){const Tn=Oe[He],no=ce[Tn];se(no,Tn)}},jn=(ce,se)=>Ct(ce,se)?eo.from(ce[se]):eo.none(),Ct=(ce,se)=>qe.call(ce,se),q=ce=>se=>se.options.get(ce),Fe=ce=>{const se=ce.options.register;se("audio_template_callback",{processor:"function"}),se("video_template_callback",{processor:"function"}),se("iframe_template_callback",{processor:"function"}),se("media_live_embeds",{processor:"boolean",default:!0}),se("media_filter_html",{processor:"boolean",default:!0}),se("media_url_resolver",{processor:"function"}),se("media_alt_source",{processor:"boolean",default:!0}),se("media_poster",{processor:"boolean",default:!0}),se("media_dimensions",{processor:"boolean",default:!0})},En=q("audio_template_callback"),nt=q("video_template_callback"),W=q("iframe_template_callback"),St=q("media_live_embeds"),Gt=q("media_filter_html"),cn=q("media_url_resolver"),Ae=q("media_alt_source"),le=q("media_poster"),Bo=q("media_dimensions");var ro=tinymce.util.Tools.resolve("tinymce.util.Tools"),Wt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),A=tinymce.util.Tools.resolve("tinymce.html.DomParser");const lo=Wt.DOM,rt=ce=>ce.replace(/px$/,""),Ho=ce=>{const se=ce.attr("style"),Oe=se?lo.parseStyle(se):{};return{type:"ephox-embed-iri",source:ce.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:jn(Oe,"max-width").map(rt).getOr(""),height:jn(Oe,"max-height").map(rt).getOr("")}},ln=(ce,se)=>{let Oe={};const fn=A({validate:!1,forced_root_block:!1},se).parse(ce);for(let Tn=fn;Tn;Tn=Tn.walk())if(Tn.type===1){const no=Tn.name;if(Tn.attr("data-ephox-embed-iri")){Oe=Ho(Tn);break}else!Oe.source&&no==="param"&&(Oe.source=Tn.attr("movie")),(no==="iframe"||no==="object"||no==="embed"||no==="video"||no==="audio")&&(Oe.type||(Oe.type=no),Oe=ro.extend(Tn.attributes.map,Oe)),no==="source"&&(Oe.source?Oe.altsource||(Oe.altsource=Tn.attr("src")):Oe.source=Tn.attr("src")),no==="img"&&!Oe.poster&&(Oe.poster=Tn.attr("src"))}return Oe.source=Oe.source||Oe.src||"",Oe.altsource=Oe.altsource||"",Oe.poster=Oe.poster||"",Oe},Ke=ce=>{var se;const Oe={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},He=(se=ce.toLowerCase().split(".").pop())!==null&&se!==void 0?se:"";return jn(Oe,He).getOr("")};var vo=tinymce.util.Tools.resolve("tinymce.html.Node"),Gs=tinymce.util.Tools.resolve("tinymce.html.Serializer");const mo=(ce,se={})=>A({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...se},ce),qs=Wt.DOM,Ze=ce=>/^[0-9.]+$/.test(ce)?ce+"px":ce,ut=(ce,se)=>{const Oe=se.attr("style"),He=Oe?qs.parseStyle(Oe):{};qt(ce.width)&&(He["max-width"]=Ze(ce.width)),qt(ce.height)&&(He["max-height"]=Ze(ce.height)),se.attr("style",qs.serializeStyle(He))},L=["source","altsource"],Lr=(ce,se,Oe,He)=>{let fn=0,Tn=0;const no=mo(He);no.addNodeFilter("source",he=>fn=he.length);const Rs=no.parse(ce);for(let he=Rs;he;he=he.walk())if(he.type===1){const Un=he.name;if(he.attr("data-ephox-embed-iri")){ut(se,he);break}else{switch(Un){case"video":case"object":case"embed":case"img":case"iframe":se.height!==void 0&&se.width!==void 0&&(he.attr("width",se.width),he.attr("height",se.height));break}if(Oe)switch(Un){case"video":he.attr("poster",se.poster),he.attr("src",null);for(let br=fn;br<2;br++)if(se[L[br]]){const Kr=new vo("source",1);Kr.attr("src",se[L[br]]),Kr.attr("type",se[L[br]+"mime"]||null),he.append(Kr)}break;case"iframe":he.attr("src",se.source);break;case"object":const Us=he.getAll("img").length>0;if(se.poster&&!Us){he.attr("src",se.poster);const br=new vo("img",1);br.attr("src",se.poster),br.attr("width",se.width),br.attr("height",se.height),he.append(br)}break;case"source":if(Tn<2&&(he.attr("src",se[L[Tn]]),he.attr("type",se[L[Tn]+"mime"]||null),!se[L[Tn]])){he.remove();continue}Tn++;break;case"img":se.poster||he.remove();break}}}return Gs({},He).serialize(Rs)},io=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],as=ce=>{const se=ce.match(/^(https?:\/\/|www\.)(.+)$/i);return se&&se.length>1?se[1]==="www."?"https://":se[1]:"https://"},Vo=(ce,se)=>{const Oe=as(se),He=ce.regex.exec(se);let fn=Oe+ce.url;if(qt(He))for(let Tn=0;Tn<He.length;Tn++)fn=fn.replace("$"+Tn,()=>He[Tn]?He[Tn]:"");return fn.replace(/\?$/,"")},kc=ce=>{const se=io.filter(Oe=>Oe.regex.test(ce));return se.length>0?ro.extend({},se[0],{url:Vo(se[0],ce)}):null},An=(ce,se)=>{if(se)return se(ce);{const Oe=ce.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ce.source+'" width="'+ce.width+'" height="'+ce.height+'"'+Oe+"></iframe>"}},Xo=ce=>{let se='<object data="'+ce.source+'" width="'+ce.width+'" height="'+ce.height+'" type="application/x-shockwave-flash">';return ce.poster&&(se+='<img src="'+ce.poster+'" width="'+ce.width+'" height="'+ce.height+'" />'),se+="</object>",se},tn=(ce,se)=>se?se(ce):'<audio controls="controls" src="'+ce.source+'">'+(ce.altsource?`
<source src="`+ce.altsource+'"'+(ce.altsourcemime?' type="'+ce.altsourcemime+'"':"")+` />
`:"")+"</audio>",we=(ce,se)=>se?se(ce):'<video width="'+ce.width+'" height="'+ce.height+'"'+(ce.poster?' poster="'+ce.poster+'"':"")+` controls="controls">
<source src="`+ce.source+'"'+(ce.sourcemime?' type="'+ce.sourcemime+'"':"")+` />
`+(ce.altsource?'<source src="'+ce.altsource+'"'+(ce.altsourcemime?' type="'+ce.altsourcemime+'"':"")+` />
`:"")+"</video>",vt=(ce,se)=>{var Oe;const He=ro.extend({},se);if(!He.source&&(ro.extend(He,ln((Oe=He.embed)!==null&&Oe!==void 0?Oe:"",ce.schema)),!He.source))return"";He.altsource||(He.altsource=""),He.poster||(He.poster=""),He.source=ce.convertURL(He.source,"source"),He.altsource=ce.convertURL(He.altsource,"source"),He.sourcemime=Ke(He.source),He.altsourcemime=Ke(He.altsource),He.poster=ce.convertURL(He.poster,"poster");const fn=kc(He.source);if(fn&&(He.source=fn.url,He.type=fn.type,He.allowfullscreen=fn.allowFullscreen,He.width=He.width||String(fn.w),He.height=He.height||String(fn.h)),He.embed)return Lr(He.embed,He,!0,ce.schema);{const Tn=En(ce),no=nt(ce),Rs=W(ce);return He.width=He.width||"300",He.height=He.height||"150",ro.each(He,(he,Un)=>{He[Un]=ce.dom.encode(""+he)}),He.type==="iframe"?An(He,Rs):He.sourcemime==="application/x-shockwave-flash"?Xo(He):He.sourcemime.indexOf("audio")!==-1?tn(He,Tn):we(He,no)}},So=ce=>ce.hasAttribute("data-mce-object")||ce.hasAttribute("data-ephox-embed-iri"),It=ce=>{ce.on("mousedown",se=>{const Oe=ce.dom.getParent(se.target,".mce-preview-object");Oe&&ce.dom.getAttrib(Oe,"data-mce-selected")==="2"&&se.stopImmediatePropagation()}),ce.on("click keyup touchend",()=>{const se=ce.selection.getNode();se&&ce.dom.hasClass(se,"mce-preview-object")&&ce.dom.getAttrib(se,"data-mce-selected")&&se.setAttribute("data-mce-selected","2")}),ce.on("ObjectResized",se=>{const Oe=se.target;if(Oe.getAttribute("data-mce-object")){let He=Oe.getAttribute("data-mce-html");He&&(He=unescape(He),Oe.setAttribute("data-mce-html",escape(Lr(He,{width:String(se.width),height:String(se.height)},!1,ce.schema))))}})},Ks={},zo=(ce,se,Oe)=>new Promise((He,fn)=>{const Tn=no=>(no.html&&(Ks[ce.source]=no),He({url:ce.source,html:no.html?no.html:se(ce)}));Ks[ce.source]?Tn(Ks[ce.source]):Oe({url:ce.source}).then(Tn).catch(fn)}),jr=(ce,se)=>Promise.resolve({html:se(ce),url:ce.source}),bs=ce=>se=>vt(ce,se),Qs=(ce,se)=>{const Oe=cn(ce);return Oe?zo(se,bs(ce),Oe):jr(se,bs(ce))},lc=ce=>Ct(Ks,ce),er=(ce,se)=>jn(se,ce).bind(Oe=>jn(Oe,"meta")),gs=(ce,se,Oe)=>He=>{const fn=()=>jn(ce,He),Tn=()=>jn(se,He),no=Un=>jn(Un,"value").bind(Us=>Us.length>0?eo.some(Us):eo.none()),Rs=()=>fn().bind(Un=>Ut(Un)?no(Un).orThunk(Tn):Tn().orThunk(()=>eo.from(Un))),he=()=>Tn().orThunk(()=>fn().bind(Un=>Ut(Un)?no(Un):eo.from(Un)));return{[He]:(He===Oe?Rs():he()).getOr("")}},es=(ce,se)=>{const Oe={};return jn(ce,"dimensions").each(He=>{Qt(["width","height"],fn=>{jn(se,fn).orThunk(()=>jn(He,fn)).each(Tn=>Oe[fn]=Tn)})}),Oe},ma=(ce,se)=>{const Oe=se&&se!=="dimensions"?er(se,ce).getOr({}):{},He=gs(ce,Oe,se);return{...He("source"),...He("altsource"),...He("poster"),...He("embed"),...es(ce,Oe)}},Ne=ce=>{const se={...ce,source:{value:jn(ce,"source").getOr("")},altsource:{value:jn(ce,"altsource").getOr("")},poster:{value:jn(ce,"poster").getOr("")}};return Qt(["width","height"],Oe=>{jn(ce,Oe).each(He=>{const fn=se.dimensions||{};fn[Oe]=He,se.dimensions=fn})}),se},Xe=ce=>se=>{const Oe=se&&se.msg?"Media embed handler error: "+se.msg:"Media embed handler threw unknown error.";ce.notificationManager.open({type:"error",text:Oe})},rn=ce=>{const se=ce.selection.getNode(),Oe=So(se)?ce.serializer.serialize(se,{selection:!0}):"",He=ln(Oe,ce.schema),Tn=(()=>{if(ir(He.source,He.type)){const no=ce.dom.getRect(se);return{width:no.w.toString().replace(/px$/,""),height:no.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Oe,...He,...Tn}},$t=(ce,se)=>Oe=>{if(yt(Oe.url)&&Oe.url.trim().length>0){const He=Oe.html,Tn={...ln(He,se.schema),source:Oe.url,embed:He};ce.setData(Ne(Tn))}},to=(ce,se)=>{const Oe=ce.dom.select("*[data-mce-object]");for(let He=0;He<se.length;He++)for(let fn=Oe.length-1;fn>=0;fn--)se[He]===Oe[fn]&&Oe.splice(fn,1);ce.selection.select(Oe[0])},Jo=(ce,se)=>{const Oe=ce.dom.select("*[data-mce-object]");ce.insertContent(se),to(ce,Oe),ce.nodeChanged()},ir=(ce,se)=>qt(se)&&se==="ephox-embed-iri"&&qt(kc(ce)),Hn=(ce,se)=>((He,fn)=>He.width!==fn.width||He.height!==fn.height)(ce,se)&&ir(se.source,ce.type),cs=(ce,se,Oe)=>{var He;se.embed=Hn(ce,se)&&Bo(Oe)?vt(Oe,{...se,embed:""}):Lr((He=se.embed)!==null&&He!==void 0?He:"",se,!1,Oe.schema),se.embed&&(ce.source===se.source||lc(se.source))?Jo(Oe,se.embed):Qs(Oe,se).then(fn=>{Jo(Oe,fn.html)}).catch(Xe(Oe))},ur=ce=>{const se=rn(ce),Oe=Nt(se),He=Ne(se),fn=(Rr,$o)=>{const qo=ma($o.getData(),"source");Rr.source!==qo.source&&($t(ra,ce)({url:qo.source,html:""}),Qs(ce,qo).then($t(ra,ce)).catch(Xe(ce)))},Tn=Rr=>{var $o;const qo=ma(Rr.getData()),vr=ln(($o=qo.embed)!==null&&$o!==void 0?$o:"",ce.schema);Rr.setData(Ne(vr))},no=(Rr,$o,qo)=>{const vr=ma(Rr.getData(),$o),aa=Hn(qo,vr)&&Bo(ce)?{...vr,embed:""}:vr,_c=vt(ce,aa);Rr.setData(Ne({...aa,embed:_c}))},Rs=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],he=Bo(ce)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Un={title:"General",name:"general",items:Sn([Rs,he])},br={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},Kr=[];Ae(ce)&&Kr.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),le(ce)&&Kr.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const ts={title:"Advanced",name:"advanced",items:Kr},Dl=[Un,br];Kr.length>0&&Dl.push(ts);const ic={type:"tabpanel",tabs:Dl},ra=ce.windowManager.open({title:"Insert/Edit Media",size:"normal",body:ic,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Rr=>{const $o=ma(Rr.getData());cs(Oe.get(),$o,ce),Rr.close()},onChange:(Rr,$o)=>{switch($o.name){case"source":fn(Oe.get(),Rr);break;case"embed":Tn(Rr);break;case"dimensions":case"altsource":case"poster":no(Rr,$o.name,Oe.get());break}Oe.set(ma(Rr.getData()))},initialData:He})},mt=ce=>({showDialog:()=>{ur(ce)}}),po=ce=>{const se=()=>{ur(ce)};ce.addCommand("mceMedia",se)},Dr=(ce,se,Oe)=>ce.length>=se.length&&ce.substr(Oe,Oe+se.length)===se,fa=(ce,se)=>Dr(ce,se,0);var ga=tinymce.util.Tools.resolve("tinymce.Env");const ha=ce=>{const se=ce.name;return se==="iframe"||se==="video"||se==="audio"},ls=(ce,se,Oe,He=null)=>{const fn=ce.attr(Oe);return qt(fn)?fn:Ct(se,Oe)?null:He},Ta=(ce,se,Oe)=>{const He=se.name==="img"||ce.name==="video",fn=He?"300":null,Tn=ce.name==="audio"?"30":"150",no=He?Tn:null;se.attr({width:ls(ce,Oe,"width",fn),height:ls(ce,Oe,"height",no)})},Ya=(ce,se,Oe,He)=>{const fn=mo(ce.schema).parse(He,{context:se});for(;fn.firstChild;)Oe.append(fn.firstChild)},is=(ce,se)=>{const Oe=se.name,He=new vo("img",1);return wr(ce,se,He),Ta(se,He,{}),He.attr({style:se.attr("style"),src:ga.transparentSrc,"data-mce-object":Oe,class:"mce-object mce-object-"+Oe}),He},wn=(ce,se)=>{var Oe;const He=se.name,fn=new vo("span",1);fn.attr({contentEditable:"false",style:se.attr("style"),"data-mce-object":He,class:"mce-preview-object mce-object-"+He}),wr(ce,se,fn);const Tn=ce.dom.parseStyle((Oe=se.attr("style"))!==null&&Oe!==void 0?Oe:""),no=new vo(He,1);if(Ta(se,no,Tn),no.attr({src:se.attr("src"),style:se.attr("style"),class:se.attr("class")}),He==="iframe")no.attr({allowfullscreen:se.attr("allowfullscreen"),frameborder:"0",sandbox:se.attr("sandbox")});else{Qt(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Us=>{no.attr(Us,se.attr(Us))});const Un=fn.attr("data-mce-html");qt(Un)&&Ya(ce,He,no,unescape(Un))}const Rs=new vo("span",1);return Rs.attr("class","mce-shim"),fn.append(no),fn.append(Rs),fn},wr=(ce,se,Oe)=>{var He;const fn=(He=se.attributes)!==null&&He!==void 0?He:[];let Tn=fn.length;for(;Tn--;){const Un=fn[Tn].name;let Us=fn[Tn].value;Un!=="width"&&Un!=="height"&&Un!=="style"&&!fa(Un,"data-mce-")&&((Un==="data"||Un==="src")&&(Us=ce.convertURL(Us,Un)),Oe.attr("data-mce-p-"+Un,Us))}const no=Gs({inner:!0},ce.schema),Rs=new vo("div",1);Qt(se.children(),Un=>Rs.append(Un));const he=no.serialize(Rs);he&&(Oe.attr("data-mce-html",escape(he)),Oe.empty())},Xa=ce=>{const se=ce.attr("class");return yt(se)&&/\btiny-pageembed\b/.test(se)},Uc=ce=>{let se=ce;for(;se=se.parent;)if(se.attr("data-ephox-embed-iri")||Xa(se))return!0;return!1},fl=ce=>se=>{let Oe=se.length,He;for(;Oe--;)He=se[Oe],He.parent&&(He.parent.attr("data-mce-object")||(ha(He)&&St(ce)?Uc(He)||He.replace(wn(ce,He)):Uc(He)||He.replace(is(ce,He))))},tr=(ce,se,Oe)=>{const He=ce.options.get,fn=He("xss_sanitization"),Tn=Gt(ce);return mo(ce.schema,{sanitize:fn,validate:Tn}).parse(Oe,{context:se})},nr=ce=>{ce.on("PreInit",()=>{const{schema:se,serializer:Oe,parser:He}=ce,fn=se.getBoolAttrs();Qt("webkitallowfullscreen mozallowfullscreen".split(" "),Tn=>{fn[Tn]={}}),tt({embed:["wmode"]},(Tn,no)=>{const Rs=se.getElementRule(no);Rs&&Qt(Tn,he=>{Rs.attributes[he]={},Rs.attributesOrder.push(he)})}),He.addNodeFilter("iframe,video,audio,object,embed",fl(ce)),Oe.addAttributeFilter("data-mce-object",(Tn,no)=>{var Rs;let he=Tn.length;for(;he--;){const Un=Tn[he];if(!Un.parent)continue;const Us=Un.attr(no),br=new vo(Us,1);if(Us!=="audio"){const ic=Un.attr("class");ic&&ic.indexOf("mce-preview-object")!==-1&&Un.firstChild?br.attr({width:Un.firstChild.attr("width"),height:Un.firstChild.attr("height")}):br.attr({width:Un.attr("width"),height:Un.attr("height")})}br.attr({style:Un.attr("style")});const Kr=(Rs=Un.attributes)!==null&&Rs!==void 0?Rs:[];let ts=Kr.length;for(;ts--;){const ic=Kr[ts].name;ic.indexOf("data-mce-p-")===0&&br.attr(ic.substr(11),Kr[ts].value)}const Dl=Un.attr("data-mce-html");if(Dl){const ic=tr(ce,Us,unescape(Dl));Qt(ic.children(),ra=>br.append(ra))}Un.replace(br)}})}),ce.on("SetContent",()=>{const se=ce.dom;Qt(se.select("span.mce-preview-object"),Oe=>{se.select("span.mce-shim",Oe).length===0&&se.add(Oe,"span",{class:"mce-shim"})})})},zs=ce=>{ce.on("ResolveName",se=>{let Oe;se.target.nodeType===1&&(Oe=se.target.getAttribute("data-mce-object"))&&(se.name=Oe)})},La=ce=>se=>{const Oe=()=>{se.setEnabled(ce.selection.isEditable())};return ce.on("NodeChange",Oe),Oe(),()=>{ce.off("NodeChange",Oe)}},gl=ce=>{const se=()=>ce.execCommand("mceMedia");ce.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:se,onSetup:Oe=>{const He=ce.selection;Oe.setActive(So(He.getNode()));const fn=He.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Oe.setActive).unbind,Tn=La(ce)(Oe);return()=>{fn(),Tn()}}}),ce.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:se,onSetup:La(ce)})};var Fr=()=>{lt.add("media",ce=>(Fe(ce),po(ce),gl(ce),zs(ce),nr(ce),It(ce),mt(ce)))};Fr()})();(function(){var lt=tinymce.util.Tools.resolve("tinymce.PluginManager"),$n=tinymce.util.Tools.resolve("tinymce.Env");const an=_t=>qe=>qe.options.get(_t),Xt=_t=>{const qe=_t.options.register;qe("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),qe("pagebreak_split_block",{processor:"boolean",default:!1})},yt=an("pagebreak_separator"),Ut=an("pagebreak_split_block"),Zn="mce-pagebreak",Mt=_t=>{const qe=`<img src="${$n.transparentSrc}" class="${Zn}" data-mce-resize="false" data-mce-placeholder />`;return _t?`<p>${qe}</p>`:qe},qt=_t=>{const qe=yt(_t),tt=()=>Ut(_t),jn=new RegExp(qe.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,Ct=>"\\"+Ct),"gi");_t.on("BeforeSetContent",Ct=>{Ct.content=Ct.content.replace(jn,Mt(tt()))}),_t.on("PreInit",()=>{_t.serializer.addNodeFilter("img",Ct=>{let q=Ct.length,Fe,En;for(;q--;)if(Fe=Ct[q],En=Fe.attr("class"),En&&En.indexOf(Zn)!==-1){const nt=Fe.parent;if(nt&&_t.schema.getBlockElements()[nt.name]&&tt()){nt.type=3,nt.value=qe,nt.raw=!0,Fe.remove();continue}Fe.type=3,Fe.value=qe,Fe.raw=!0}})})},eo=_t=>{_t.addCommand("mcePageBreak",()=>{_t.insertContent(Mt(Ut(_t)))})},Cn=_t=>{_t.on("ResolveName",qe=>{qe.target.nodeName==="IMG"&&_t.dom.hasClass(qe.target,Zn)&&(qe.name="pagebreak")})},Qt=_t=>qe=>{const tt=()=>{qe.setEnabled(_t.selection.isEditable())};return _t.on("NodeChange",tt),tt(),()=>{_t.off("NodeChange",tt)}},Sn=_t=>{const qe=()=>_t.execCommand("mcePageBreak");_t.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:qe,onSetup:Qt(_t)}),_t.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:qe,onSetup:Qt(_t)})};var Nt=()=>{lt.add("pagebreak",_t=>{Xt(_t),eo(_t),Sn(_t),qt(_t),Cn(_t)})};Nt()})();(function(){var lt=tinymce.util.Tools.resolve("tinymce.PluginManager"),$n=tinymce.util.Tools.resolve("tinymce.Env"),an=tinymce.util.Tools.resolve("tinymce.util.Tools");const Xt=Nt=>_t=>_t.options.get(Nt),yt=Xt("content_style"),Ut=Xt("content_css_cors"),Zn=Xt("body_class"),Mt=Xt("body_id"),qt=Nt=>{var _t;let qe="";const tt=Nt.dom.encode,jn=(_t=yt(Nt))!==null&&_t!==void 0?_t:"";qe+='<base href="'+tt(Nt.documentBaseURI.getURI())+'">';const Ct=Ut(Nt)?' crossorigin="anonymous"':"";an.each(Nt.contentCSS,cn=>{qe+='<link type="text/css" rel="stylesheet" href="'+tt(Nt.documentBaseURI.toAbsolute(cn))+'"'+Ct+">"}),jn&&(qe+='<style type="text/css">'+jn+"</style>");const q=Mt(Nt),Fe=Zn(Nt),nt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+($n.os.isMacOS()||$n.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",W=Nt.getBody().dir,St=W?' dir="'+tt(W)+'"':"";return"<!DOCTYPE html><html><head>"+qe+'</head><body id="'+tt(q)+'" class="mce-content-body '+tt(Fe)+'"'+St+">"+Nt.getContent()+nt+"</body></html>"},eo=Nt=>{const _t=qt(Nt);Nt.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:_t}}).focus("close")},Cn=Nt=>{Nt.addCommand("mcePreview",()=>{eo(Nt)})},Qt=Nt=>{const _t=()=>Nt.execCommand("mcePreview");Nt.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:_t}),Nt.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:_t})};var Sn=()=>{lt.add("preview",Nt=>{Cn(Nt),Qt(Nt)})};Sn()})();(function(){var lt=tinymce.util.Tools.resolve("tinymce.PluginManager");const $n=(S,k,F)=>{var J;return F(S,k.prototype)?!0:((J=S.constructor)===null||J===void 0?void 0:J.name)===k.name},an=S=>{const k=typeof S;return S===null?"null":k==="object"&&Array.isArray(S)?"array":k==="object"&&$n(S,String,(F,J)=>J.isPrototypeOf(F))?"string":k},Xt=S=>k=>an(k)===S,yt=S=>k=>typeof k===S,Ut=S=>k=>S===k,Zn=Xt("string"),Mt=Xt("array"),qt=yt("boolean"),eo=Ut(void 0),Cn=S=>S==null,Qt=S=>!Cn(S),Sn=yt("function"),Nt=yt("number"),_t=()=>{},qe=(S,k)=>F=>S(k(F)),tt=S=>()=>S,jn=S=>S,Ct=(S,k)=>S===k;function q(S,...k){return(...F)=>{const J=k.concat(F);return S.apply(null,J)}}const Fe=S=>{S()},En=tt(!1),nt=tt(!0);class W{constructor(k,F){this.tag=k,this.value=F}static some(k){return new W(!0,k)}static none(){return W.singletonNone}fold(k,F){return this.tag?F(this.value):k()}isSome(){return this.tag}isNone(){return!this.tag}map(k){return this.tag?W.some(k(this.value)):W.none()}bind(k){return this.tag?k(this.value):W.none()}exists(k){return this.tag&&k(this.value)}forall(k){return!this.tag||k(this.value)}filter(k){return!this.tag||k(this.value)?this:W.none()}getOr(k){return this.tag?this.value:k}or(k){return this.tag?this:k}getOrThunk(k){return this.tag?this.value:k()}orThunk(k){return this.tag?this:k()}getOrDie(k){if(this.tag)return this.value;throw new Error(k??"Called getOrDie on None")}static from(k){return Qt(k)?W.some(k):W.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(k){this.tag&&k(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}W.singletonNone=new W(!1);const St=Object.keys,Gt=Object.hasOwnProperty,cn=(S,k)=>{const F=St(S);for(let J=0,me=F.length;J<me;J++){const je=F[J],pt=S[je];k(pt,je)}},Ae=S=>(k,F)=>{S[F]=k},le=(S,k,F,J)=>{cn(S,(me,je)=>{(k(me,je)?F:J)(me,je)})},Bo=(S,k)=>{const F={};return le(S,k,Ae(F),_t),F},ro=(S,k)=>{const F=[];return cn(S,(J,me)=>{F.push(k(J,me))}),F},Wt=S=>ro(S,jn),A=S=>St(S).length,lo=(S,k)=>rt(S,k)?W.from(S[k]):W.none(),rt=(S,k)=>Gt.call(S,k),Ho=(S,k)=>rt(S,k)&&S[k]!==void 0&&S[k]!==null,ln=S=>{for(const k in S)if(Gt.call(S,k))return!1;return!0},Ke=Array.prototype.indexOf,vo=Array.prototype.push,Gs=(S,k)=>Ke.call(S,k),mo=(S,k)=>Gs(S,k)>-1,qs=(S,k)=>{for(let F=0,J=S.length;F<J;F++){const me=S[F];if(k(me,F))return!0}return!1},Ze=(S,k)=>{const F=[];for(let J=0;J<S;J++)F.push(k(J));return F},ut=(S,k)=>{const F=S.length,J=new Array(F);for(let me=0;me<F;me++){const je=S[me];J[me]=k(je,me)}return J},L=(S,k)=>{for(let F=0,J=S.length;F<J;F++){const me=S[F];k(me,F)}},Lr=(S,k)=>{for(let F=S.length-1;F>=0;F--){const J=S[F];k(J,F)}},io=(S,k)=>{const F=[],J=[];for(let me=0,je=S.length;me<je;me++){const pt=S[me];(k(pt,me)?F:J).push(pt)}return{pass:F,fail:J}},as=(S,k)=>{const F=[];for(let J=0,me=S.length;J<me;J++){const je=S[J];k(je,J)&&F.push(je)}return F},Vo=(S,k,F)=>(Lr(S,(J,me)=>{F=k(F,J,me)}),F),kc=(S,k,F)=>(L(S,(J,me)=>{F=k(F,J,me)}),F),An=(S,k,F)=>{for(let J=0,me=S.length;J<me;J++){const je=S[J];if(k(je,J))return W.some(je);if(F(je,J))break}return W.none()},Xo=(S,k)=>An(S,k,En),tn=S=>{const k=[];for(let F=0,J=S.length;F<J;++F){if(!Mt(S[F]))throw new Error("Arr.flatten item "+F+" was not an array, input: "+S);vo.apply(k,S[F])}return k},we=(S,k)=>tn(ut(S,k)),vt=(S,k)=>{for(let F=0,J=S.length;F<J;++F){const me=S[F];if(k(me,F)!==!0)return!1}return!0},So=(S,k)=>{const F={};for(let J=0,me=S.length;J<me;J++){const je=S[J];F[String(je)]=k(je,J)}return F},It=(S,k)=>k>=0&&k<S.length?W.some(S[k]):W.none(),Ks=S=>It(S,0),zo=S=>It(S,S.length-1),jr=(S,k)=>{for(let F=0;F<S.length;F++){const J=k(S[F],F);if(J.isSome())return J}return W.none()},bs=8,Qs=9,lc=11,er=1,gs=3,es=(S,k)=>{const J=(k||document).createElement("div");if(J.innerHTML=S,!J.hasChildNodes()||J.childNodes.length>1){const me="HTML does not have a single root node";throw console.error(me,S),new Error(me)}return Xe(J.childNodes[0])},ma=(S,k)=>{const J=(k||document).createElement(S);return Xe(J)},Ne=(S,k)=>{const J=(k||document).createTextNode(S);return Xe(J)},Xe=S=>{if(S==null)throw new Error("Node cannot be null or undefined");return{dom:S}},$t={fromHtml:es,fromTag:ma,fromText:Ne,fromDom:Xe,fromPoint:(S,k,F)=>W.from(S.dom.elementFromPoint(k,F)).map(Xe)},to=(S,k)=>{const F=S.dom;if(F.nodeType!==er)return!1;{const J=F;if(J.matches!==void 0)return J.matches(k);if(J.msMatchesSelector!==void 0)return J.msMatchesSelector(k);if(J.webkitMatchesSelector!==void 0)return J.webkitMatchesSelector(k);if(J.mozMatchesSelector!==void 0)return J.mozMatchesSelector(k);throw new Error("Browser lacks native selectors")}},Jo=S=>S.nodeType!==er&&S.nodeType!==Qs&&S.nodeType!==lc||S.childElementCount===0,ir=(S,k)=>{const F=k===void 0?document:k.dom;return Jo(F)?[]:ut(F.querySelectorAll(S),$t.fromDom)},Hn=(S,k)=>{const F=k===void 0?document:k.dom;return Jo(F)?W.none():W.from(F.querySelector(S)).map($t.fromDom)},cs=(S,k)=>S.dom===k.dom,ur=to;typeof window<"u"||Function("return this;")();const mt=S=>S.dom.nodeName.toLowerCase(),po=S=>S.dom.nodeType,Dr=S=>k=>po(k)===S,fa=S=>po(S)===bs||mt(S)==="#comment",ga=Dr(er),ha=Dr(gs),ls=Dr(Qs),Ta=Dr(lc),Ya=S=>k=>ga(k)&&mt(k)===S,is=S=>$t.fromDom(S.dom.ownerDocument),wn=S=>ls(S)?S:is(S),wr=S=>W.from(S.dom.parentNode).map($t.fromDom),Xa=(S,k)=>{const F=Sn(k)?k:En;let J=S.dom;const me=[];for(;J.parentNode!==null&&J.parentNode!==void 0;){const je=J.parentNode,pt=$t.fromDom(je);if(me.push(pt),F(pt)===!0)break;J=je}return me},Uc=S=>W.from(S.dom.previousSibling).map($t.fromDom),fl=S=>W.from(S.dom.nextSibling).map($t.fromDom),tr=S=>ut(S.dom.childNodes,$t.fromDom),nr=(S,k)=>{const F=S.dom.childNodes;return W.from(F[k]).map($t.fromDom)},zs=S=>nr(S,0),La=S=>Ta(S)&&Qt(S.dom.host),Fr=Sn(Element.prototype.attachShadow)&&Sn(Node.prototype.getRootNode)?S=>$t.fromDom(S.dom.getRootNode()):wn,ce=S=>{const k=Fr(S);return La(k)?W.some(k):W.none()},se=S=>$t.fromDom(S.dom.host),Oe=S=>{const k=ha(S)?S.dom.parentNode:S.dom;if(k==null||k.ownerDocument===null)return!1;const F=k.ownerDocument;return ce($t.fromDom(k)).fold(()=>F.body.contains(k),qe(Oe,se))};var He=(S,k,F,J,me)=>S(F,J)?W.some(F):Sn(me)&&me(F)?W.none():k(F,J,me);const fn=(S,k,F)=>{let J=S.dom;const me=Sn(F)?F:En;for(;J.parentNode;){J=J.parentNode;const je=$t.fromDom(J);if(k(je))return W.some(je);if(me(je))break}return W.none()},Tn=(S,k,F)=>He((me,je)=>je(me),fn,S,k,F),no=(S,k)=>{const F=me=>k($t.fromDom(me));return Xo(S.dom.childNodes,F).map($t.fromDom)},Rs=(S,k,F)=>fn(S,J=>to(J,k),F),he=(S,k)=>no(S,F=>to(F,k)),Un=(S,k)=>Hn(k,S),Us=(S,k,F)=>He((me,je)=>to(me,je),Rs,S,k,F),br=S=>Us(S,"[contenteditable]"),Kr=(S,k=!1)=>Oe(S)?S.dom.isContentEditable:br(S).fold(tt(k),F=>ts(F)==="true"),ts=S=>S.dom.contentEditable,Dl=S=>S.nodeName.toLowerCase(),ic=S=>$t.fromDom(S.getBody()),ra=S=>k=>cs(k,ic(S)),Rr=S=>S?S.replace(/px$/,""):"",$o=S=>/^\d+(\.\d+)?$/.test(S)?S+"px":S,qo=S=>$t.fromDom(S.selection.getStart()),vr=S=>$t.fromDom(S.selection.getEnd()),aa=S=>Tn(S,Ya("table")).forall(Kr),_c=(S,k)=>as(tr(S),k),ei=(S,k)=>{let F=[];return L(tr(S),J=>{k(J)&&(F=F.concat([J])),F=F.concat(ei(J,k))}),F},Xc=(S,k)=>_c(S,F=>to(F,k)),Uo=(S,k)=>ir(k,S),dr=(S,k,F)=>{if(Zn(F)||qt(F)||Nt(F))S.setAttribute(k,F+"");else throw console.error("Invalid call to Attribute.set. Key ",k,":: Value ",F,":: Element ",S),new Error("Attribute value was not simple")},Ea=(S,k,F)=>{dr(S.dom,k,F)},Rl=(S,k)=>{const F=S.dom;cn(k,(J,me)=>{dr(F,me,J)})},pa=(S,k)=>{const F=S.dom.getAttribute(k);return F===null?void 0:F},As=(S,k)=>W.from(pa(S,k)),hs=(S,k)=>{S.dom.removeAttribute(k)},Fa=S=>kc(S.dom.attributes,(k,F)=>(k[F.name]=F.value,k),{}),Ml=(S,k,F=Ct)=>S.exists(J=>F(J,k)),Ko=S=>{const k=[],F=J=>{k.push(J)};for(let J=0;J<S.length;J++)S[J].each(F);return k},Yr=(S,k,F)=>S.isSome()&&k.isSome()?W.some(F(S.getOrDie(),k.getOrDie())):W.none(),ba=S=>S.bind(jn),Sr=(S,k)=>S?W.some(k):W.none(),Ha=(S,k)=>S.substring(k),hl=(S,k,F)=>k===""||S.length>=k.length&&S.substr(F,F+k.length)===k,Xr=(S,k)=>Ja(S,k)?Ha(S,k.length):S,Ja=(S,k)=>hl(S,k,0),iu=(S=>k=>k.replace(S,""))(/^\s+|\s+$/g),uc=S=>S.length>0,Nl=S=>!uc(S),va=(S,k=10)=>{const F=parseInt(S,k);return isNaN(F)?W.none():W.some(F)},pl=S=>{const k=parseFloat(S);return isNaN(k)?W.none():W.some(k)},Pl=S=>S.style!==void 0&&Sn(S.style.getPropertyValue),ti=(S,k,F)=>{if(!Zn(F))throw console.error("Invalid call to CSS.set. Property ",k,":: Value ",F,":: Element ",S),new Error("CSS value must be a string: "+F);Pl(S)&&S.style.setProperty(k,F)},Nu=(S,k)=>{Pl(S)&&S.style.removeProperty(k)},Fi=(S,k,F)=>{const J=S.dom;ti(J,k,F)},j=(S,k)=>{const F=S.dom,me=window.getComputedStyle(F).getPropertyValue(k);return me===""&&!Oe(S)?de(F,k):me},de=(S,k)=>Pl(S)?S.style.getPropertyValue(k):"",pe=(S,k)=>{const F=S.dom,J=de(F,k);return W.from(J).filter(me=>me.length>0)},ze=(S,k)=>{const F=S.dom;Nu(F,k),Ml(As(S,"style").map(iu),"")&&hs(S,"style")},wt=(S,k,F=0)=>As(S,k).map(J=>parseInt(J,10)).getOr(F),kn=(S,k)=>ko(S,k,nt),ko=(S,k,F)=>we(tr(S),J=>to(J,k)?F(J)?[J]:[]:ko(J,k,F)),xr=["tfoot","thead","tbody","colgroup"],Io=S=>mo(xr,S),No=(S,k)=>({rows:S,columns:k}),Wo=(S,k,F)=>({element:S,rowspan:k,colspan:F}),Hr=(S,k,F,J,me,je)=>({element:S,rowspan:k,colspan:F,row:J,column:me,isLocked:je}),Ci=(S,k,F)=>({element:S,cells:k,section:F}),Ot=(S,k,F,J)=>({startRow:S,startCol:k,finishRow:F,finishCol:J}),Zd=(S,k,F)=>({element:S,colspan:k,column:F}),Ns=(S,k)=>({element:S,columns:k}),B=(S,k,F=En)=>{if(F(k))return W.none();if(mo(S,mt(k)))return W.some(k);const J=me=>to(me,"table")||F(me);return Rs(k,S.join(","),J)},X=(S,k)=>B(["td","th"],S,k),oe=S=>kn(S,"th,td"),De=S=>to(S,"colgroup")?Xc(S,"col"):we(Yt(S),k=>Xc(k,"col")),Bt=(S,k)=>Us(S,"table",k),fo=S=>kn(S,"tr"),Yt=S=>Bt(S).fold(tt([]),k=>Xc(k,"colgroup")),Ws=(S,k)=>ut(S,F=>{if(mt(F)==="colgroup"){const J=ut(De(F),me=>{const je=wt(me,"span",1);return Wo(me,1,je)});return Ci(F,J,"colgroup")}else{const J=ut(oe(F),me=>{const je=wt(me,"rowspan",1),pt=wt(me,"colspan",1);return Wo(me,je,pt)});return Ci(F,J,k(F))}}),at=S=>wr(S).map(k=>{const F=mt(k);return Io(F)?F:"tbody"}).getOr("tbody"),xs=S=>{const k=fo(S),J=[...Yt(S),...k];return Ws(J,at)},Qa="data-snooker-locked-cols",Ms=S=>As(S,Qa).bind(k=>W.from(k.match(/\d+/g))).map(k=>So(k,nt)),Vr=(S,k)=>S+","+k,bl=(S,k,F)=>W.from(S.access[Vr(k,F)]),_o=(S,k,F)=>{const J=ec(S,me=>F(k,me.element));return J.length>0?W.some(J[0]):W.none()},ec=(S,k)=>{const F=we(S.all,J=>J.cells);return as(F,k)},Zs=S=>{const k={};let F=0;return L(S.cells,J=>{const me=J.colspan;Ze(me,je=>{const pt=F+je;k[pt]=Zd(J.element,me,pt)}),F+=me}),k},ni=S=>{const k={},F=[],me=Ks(S).map(Qc=>Qc.element).bind(Bt).bind(Ms).getOr({});let je=0,pt=0,Jt=0;const{pass:qn,fail:go}=io(S,Qc=>Qc.section==="colgroup");L(go,Qc=>{const Uu=[];L(Qc.cells,wl=>{let Wu=0;for(;k[Vr(Jt,Wu)]!==void 0;)Wu++;const sm=Ho(me,Wu.toString()),Vm=Hr(wl.element,wl.rowspan,wl.colspan,Jt,Wu,sm);for(let Gi=0;Gi<wl.colspan;Gi++)for(let yu=0;yu<wl.rowspan;yu++){const Of=Jt+yu,jh=Wu+Gi,zg=Vr(Of,jh);k[zg]=Vm,pt=Math.max(pt,jh+1)}Uu.push(Vm)}),je++,F.push(Ci(Qc.element,Uu,Qc.section)),Jt++});const{columns:vs,colgroups:ss}=zo(qn).map(Qc=>{const Uu=Zs(Qc);return{colgroups:[Ns(Qc.element,Wt(Uu))],columns:Uu}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:No(je,pt),access:k,all:F,columns:vs,colgroups:ss}},Bl={fromTable:S=>{const k=xs(S);return ni(k)},generate:ni,getAt:bl,findItem:_o,filterItems:ec,justCells:S=>we(S.all,k=>k.cells),justColumns:S=>Wt(S.columns),hasColumns:S=>St(S.columns).length>0,getColumnAt:(S,k)=>W.from(S.columns[k])};var ya=tinymce.util.Tools.resolve("tinymce.util.Tools");const ka=(S,k,F)=>{const J=S.select("td,th",k);let me;for(let je=0;je<J.length;je++){const pt=S.getStyle(J[je],F);if(eo(me)&&(me=pt),me!==pt)return""}return me},tc=(S,k,F)=>{ya.each("left center right".split(" "),J=>{J!==F&&S.formatter.remove("align"+J,{},k)}),F&&S.formatter.apply("align"+F,{},k)},jd=(S,k,F)=>{ya.each("top middle bottom".split(" "),J=>{J!==F&&S.formatter.remove("valign"+J,{},k)}),F&&S.formatter.apply("valign"+F,{},k)},Ao=(S,k,F)=>{S.dispatch("TableModified",{...F,table:k})},dc=(S,k)=>pl(S).getOr(k),Va=(S,k,F)=>dc(j(S,k),F),K=(S,k,F,J)=>{const me=Va(S,`padding-${F}`,0),je=Va(S,`padding-${J}`,0),pt=Va(S,`border-${F}-width`,0),Jt=Va(S,`border-${J}-width`,0);return k-me-je-pt-Jt},ne=(S,k)=>{const F=S.dom,J=F.getBoundingClientRect().width||F.offsetWidth;return k==="border-box"?J:K(S,J,"left","right")},Re=S=>ne(S,"content-box");var hn=tinymce.util.Tools.resolve("tinymce.Env");const bo="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Ps=Ze(5,S=>{const k=`${S+1}px`;return{title:k,value:k}}),Ca=ut(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],S=>({title:S,value:S.toLowerCase()})),Co="100%",Jr=S=>{var k;const F=S.dom,J=(k=F.getParent(S.selection.getStart(),F.isBlock))!==null&&k!==void 0?k:S.getBody();return Re($t.fromDom(J))+"px"},js=(S,k)=>md(S)||!si(S)?k:Dg(S)?{...k,width:Jr(S)}:{...k,width:Co},Mr=(S,k)=>md(S)||si(S)?k:Dg(S)?{...k,width:Jr(S)}:{...k,width:Co},Tr=S=>k=>k.options.get(S),yr=S=>{const k=S.options.register;k("table_border_widths",{processor:"object[]",default:Ps}),k("table_border_styles",{processor:"object[]",default:Ca}),k("table_cell_advtab",{processor:"boolean",default:!0}),k("table_row_advtab",{processor:"boolean",default:!0}),k("table_advtab",{processor:"boolean",default:!0}),k("table_appearance_options",{processor:"boolean",default:!0}),k("table_grid",{processor:"boolean",default:!hn.deviceType.isTouch()}),k("table_cell_class_list",{processor:"object[]",default:[]}),k("table_row_class_list",{processor:"object[]",default:[]}),k("table_class_list",{processor:"object[]",default:[]}),k("table_toolbar",{processor:"string",default:bo}),k("table_background_color_map",{processor:"object[]",default:[]}),k("table_border_color_map",{processor:"object[]",default:[]})},Wc=Tr("table_sizing_mode"),oi=Tr("table_border_widths"),_a=Tr("table_border_styles"),Zc=Tr("table_cell_advtab"),wi=Tr("table_row_advtab"),Si=Tr("table_advtab"),Cf=Tr("table_appearance_options"),Bu=Tr("table_grid"),si=Tr("table_style_by_css"),Oc=Tr("table_cell_class_list"),$u=Tr("table_row_class_list"),Gd=Tr("table_class_list"),Hi=Tr("table_toolbar"),Og=Tr("table_background_color_map"),qd=Tr("table_border_color_map"),Dg=S=>Wc(S)==="fixed",md=S=>Wc(S)==="responsive",Rg=S=>{const k=S.options,F=k.get("table_default_styles");return k.isSet("table_default_styles")?F:js(S,F)},fd=S=>{const k=S.options,F=k.get("table_default_attributes");return k.isSet("table_default_attributes")?F:Mr(S,F)},u1=(S,k)=>k.column>=S.startCol&&k.column+k.colspan-1<=S.finishCol&&k.row>=S.startRow&&k.row+k.rowspan-1<=S.finishRow,ie=(S,k)=>{let F=!0;const J=q(u1,k);for(let me=k.startRow;me<=k.finishRow;me++)for(let je=k.startCol;je<=k.finishCol;je++)F=F&&Bl.getAt(S,me,je).exists(J);return F?W.some(k):W.none()},Bm=(S,k)=>Ot(Math.min(S.row,k.row),Math.min(S.column,k.column),Math.max(S.row+S.rowspan-1,k.row+k.rowspan-1),Math.max(S.column+S.colspan-1,k.column+k.colspan-1)),Jc=(S,k,F)=>{const J=Bl.findItem(S,k,cs),me=Bl.findItem(S,F,cs);return J.bind(je=>me.map(pt=>Bm(je,pt)))},uu=(S,k,F)=>Jc(S,k,F).bind(J=>ie(S,J)),Mg=(S,k,F)=>{const J=Lh(S);return uu(J,k,F)},Lh=Bl.fromTable,ns=(S,k)=>{wr(S).each(J=>{J.dom.insertBefore(k.dom,S.dom)})},ri=(S,k)=>{fl(S).fold(()=>{wr(S).each(me=>{Aa(me,k)})},J=>{ns(J,k)})},vl=(S,k)=>{zs(S).fold(()=>{Aa(S,k)},J=>{S.dom.insertBefore(k.dom,J.dom)})},Aa=(S,k)=>{S.dom.appendChild(k.dom)},gd=(S,k)=>{ns(S,k),Aa(k,S)},xi=(S,k)=>{L(k,(F,J)=>{const me=J===0?S:k[J-1];ri(me,F)})},mc=(S,k)=>{L(k,F=>{Aa(S,F)})},Ti=S=>{const k=S.dom;k.parentNode!==null&&k.parentNode.removeChild(k)},Ng=S=>{const k=tr(S);k.length>0&&xi(S,k),Ti(S)},$l=((S,k)=>{const F=je=>{if(!S(je))throw new Error("Can only get "+k+" value of a "+k+" node");return J(je).getOr("")},J=je=>S(je)?W.from(je.dom.nodeValue):W.none();return{get:F,getOption:J,set:(je,pt)=>{if(!S(je))throw new Error("Can only set raw "+k+" value of a "+k+" node");je.dom.nodeValue=pt}}})(ha,"text"),Ei=S=>$l.get(S),Pg=(S,k)=>$l.set(S,k);var jc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Oa=()=>{const S=go=>$t.fromDom(go.dom.cloneNode(!1)),k=go=>wn(go).dom,F=go=>ga(go)?mt(go)==="body"?!0:mo(jc,mt(go)):!1,J=go=>ga(go)?mo(["br","img","hr","input"],mt(go)):!1,me=go=>ga(go)&&pa(go,"contenteditable")==="false",je=(go,vs)=>go.dom.compareDocumentPosition(vs.dom),pt=(go,vs)=>{const ss=Fa(go);Rl(vs,ss)},Jt=go=>{const vs=mt(go);return mo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],vs)},qn=go=>ga(go)?As(go,"lang"):W.none();return{up:tt({selector:Rs,closest:Us,predicate:fn,all:Xa}),down:tt({selector:Uo,predicate:ei}),styles:tt({get:j,getRaw:pe,set:Fi,remove:ze}),attrs:tt({get:pa,set:Ea,remove:hs,copyTo:pt}),insert:tt({before:ns,after:ri,afterAll:xi,append:Aa,appendAll:mc,prepend:vl,wrap:gd}),remove:tt({unwrap:Ng,remove:Ti}),create:tt({nu:$t.fromTag,clone:S,text:$t.fromText}),query:tt({comparePosition:je,prevSibling:Uc,nextSibling:fl}),property:tt({children:tr,name:mt,parent:wr,document:k,isText:ha,isComment:fa,isElement:ga,isSpecial:Jt,getLanguage:qn,getText:Ei,setText:Pg,isBoundary:F,isEmptyTag:J,isNonEditable:me}),eq:cs,is:ur}};const Iu=(S,k,F,J)=>{const me=F[0],je=F.slice(1);return J(S,k,me,je)},Kd=(S,k,F)=>F.length>0?Iu(S,k,F,ai):W.none(),ai=(S,k,F,J)=>{const me=k(S,F);return Vo(J,(je,pt)=>{const Jt=k(S,pt);return nc(S,je,Jt)},me)},nc=(S,k,F)=>k.bind(J=>F.filter(q(S.eq,J))),wf=Kd,Hh=Oa(),$m=(S,k)=>wf(Hh,(F,J)=>S(J),k),Yd=S=>Rs(S,"table"),Xd=(S,k)=>{const F=Uo(S,k);return F.length>0?W.some(F):W.none()},du=(S,k,F)=>Un(S,k).bind(J=>Un(S,F).bind(me=>$m(Yd,[J,me]).map(je=>({first:J,last:me,table:je})))),Sf=(S,k)=>Xd(S,k),d1=(S,k,F)=>du(S,k,F).bind(J=>{const me=qn=>cs(S,qn),je="thead,tfoot,tbody,table",pt=Rs(J.first,je,me),Jt=Rs(J.last,je,me);return pt.bind(qn=>Jt.bind(go=>cs(qn,go)?Mg(J.table,J.first,J.last):W.none()))}),Vh=S=>ut(S,$t.fromDom),Bg="data-mce-selected",Jd="td["+Bg+"],th["+Bg+"]",xf="data-mce-first-selected",hd="td["+xf+"],th["+xf+"]",zr="data-mce-last-selected",mr="td["+zr+"],th["+zr+"]",Da={selected:Bg,selectedSelector:Jd,firstSelected:xf,firstSelectedSelector:hd,lastSelected:zr,lastSelectedSelector:mr},$g=S=>Bt(S).bind(k=>Sf(k,Da.firstSelectedSelector)).fold(tt(S),k=>k[0]),zh=S=>(k,F)=>{const J=mt(k),me=J==="col"||J==="colgroup"?$g(k):k;return Us(me,S,F)},za=zh("th,td,caption"),gn=zh("th,td"),Lu=S=>Vh(S.model.table.getSelectedCells()),pd=(S,k)=>{const F=gn(S),J=F.bind(me=>Bt(me)).map(me=>fo(me));return Yr(F,J,(me,je)=>as(je,pt=>qs(Vh(pt.dom.cells),Jt=>pa(Jt,k)==="1"||cs(Jt,me)))).getOr([])},Gc=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],os=S=>({value:Lg(S)}),Ig=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Qd=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Im=S=>Ig.test(S)||Qd.test(S),Lg=S=>Xr(S,"#").toUpperCase(),ao=S=>Im(S)?W.some({value:Lg(S)}):W.none(),Ra=S=>{const k=S.toString(16);return(k.length===1?"0"+k:k).toUpperCase()},yl=S=>{const k=Ra(S.red)+Ra(S.green)+Ra(S.blue);return os(k)},Il=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Dc=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Rc=(S,k,F,J)=>({red:S,green:k,blue:F,alpha:J}),Qr=(S,k,F,J)=>{const me=parseInt(S,10),je=parseInt(k,10),pt=parseInt(F,10),Jt=parseFloat(J);return Rc(me,je,pt,Jt)},Fg=S=>{if(S==="transparent")return W.some(Rc(0,0,0,0));const k=Il.exec(S);if(k!==null)return W.some(Qr(k[1],k[2],k[3],"1"));const F=Dc.exec(S);return F!==null?W.some(Qr(F[1],F[2],F[3],F[4])):W.none()},oc=S=>ao(S).orThunk(()=>Fg(S).map(yl)).getOrThunk(()=>{const k=document.createElement("canvas");k.height=1,k.width=1;const F=k.getContext("2d");F.clearRect(0,0,k.width,k.height),F.fillStyle="#FFFFFF",F.fillStyle=S,F.fillRect(0,0,1,1);const J=F.getImageData(0,0,1,1).data,me=J[0],je=J[1],pt=J[2],Jt=J[3];return yl(Rc(me,je,pt,Jt))}),Vi=S=>Fg(S).map(yl).map(k=>"#"+k.value).getOr(S),zi=S=>{let k=S;return{get:()=>k,set:me=>{k=me}}},ea=S=>{const k=zi(W.none()),F=()=>k.get().each(S);return{clear:()=>{F(),k.set(W.none())},isSet:()=>k.get().isSome(),get:()=>k.get(),set:Jt=>{F(),k.set(W.some(Jt))}}},Ur=()=>ea(S=>S.unbind()),Uh=(S,k,F)=>J=>{const me=Ur(),je=Nl(F),pt=()=>{const Jt=Lu(S),qn=go=>S.formatter.match(k,{value:F},go.dom,je);je?(J.setActive(!qs(Jt,qn)),me.set(S.formatter.formatChanged(k,go=>J.setActive(!go),!0))):(J.setActive(vt(Jt,qn)),me.set(S.formatter.formatChanged(k,J.setActive,!1,{value:F})))};return S.initialized?pt():S.on("init",pt),me.clear},ci=S=>Ho(S,"menu"),ki=S=>ut(S,k=>{const F=k.text||k.title||"";return ci(k)?{text:F,items:ki(k.menu)}:{text:F,value:k.value}}),Bs=S=>S.length?W.some(ki([{text:"Select...",value:"mce-no-match"},...S])):W.none(),Ll=(S,k,F,J)=>ut(k,me=>{const je=me.text||me.title;return ci(me)?{type:"nestedmenuitem",text:je,getSubmenuItems:()=>Ll(S,me.menu,F,J)}:{text:je,type:"togglemenuitem",onAction:()=>J(me.value),onSetup:Uh(S,F,me.value)}}),bd=(S,k)=>F=>{S.execCommand("mceTableApplyCellStyle",!1,{[k]:F})},$s=S=>we(S,k=>ci(k)?[{...k,menu:$s(k.menu)}]:uc(k.value)?[k]:[]),em=(S,k,F,J)=>me=>me(Ll(S,k,F,J)),qc=(S,k,F)=>{const J=ut(k,me=>({text:me.title,value:"#"+oc(me.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:J.length>0?J:void 0,allowCustomColors:!1},onAction:me=>{const je=me.value==="remove"?"":me.value;S.execCommand("mceTableApplyCellStyle",!1,{[F]:je})}}]},wo=S=>()=>{const F=S.queryCommandValue("mceTableRowType")==="header"?"body":"header";S.execCommand("mceTableRowType",!1,{type:F})},vd=S=>()=>{const F=S.queryCommandValue("mceTableColType")==="th"?"td":"th";S.execCommand("mceTableColType",!1,{type:F})},Lm=S=>Bs(Oc(S)).map(k=>({name:"class",type:"listbox",label:"Class",items:k})),Tf=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Gc}],Wh=S=>Tf.concat(Lm(S).toArray()),Ef=(S,k)=>{const J=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(ki(_a(S)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:k==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(J):J}},x={normal:(S,k)=>{const F=S.dom;return{setAttrib:(pt,Jt)=>{F.setAttrib(k,pt,Jt)},setStyle:(pt,Jt)=>{F.setStyle(k,pt,Jt)},setFormat:(pt,Jt)=>{Jt===""?S.formatter.remove(pt,{value:null},k,!0):S.formatter.apply(pt,{value:Jt},k)}}}},R=Ya("th"),V=(S,k)=>S&&k?"sectionCells":S?"section":"cells",re=S=>{const k=S.section==="thead",F=Ml(ge(S.cells),"th");return S.section==="tfoot"?{type:"footer"}:k||F?{type:"header",subType:V(k,F)}:{type:"body"}},ge=S=>{const k=as(S,F=>R(F.element));return k.length===0?W.some("td"):k.length===S.length?W.some("th"):W.none()},Je=S=>{const k=ut(S,me=>re(me).type),F=mo(k,"header"),J=mo(k,"footer");if(!F&&!J)return W.some("body");{const me=mo(k,"body");return F&&!me&&!J?W.some("header"):!F&&!me&&J?W.some("footer"):W.none()}},On=S=>{let k=!1,F;return(...J)=>(k||(k=!0,F=S.apply(null,J)),F)},Jn=(S,k)=>jr(S.all,F=>Xo(F.cells,J=>cs(k,J.element))),Gn=(S,k,F)=>{const J=ut(k.selection,je=>X(je).bind(pt=>Jn(S,pt)).filter(F)),me=Ko(J);return Sr(me.length>0,me)},Dn=(S,k)=>k.mergable,sr=(S,k)=>k.unmergable,Er=(S,k)=>Gn(S,k,nt),Cl=(S,k)=>Jn(S,k).exists(F=>!F.isLocked),Ui=(S,k)=>vt(k,F=>Cl(S,F)),fc=(S,k)=>Dn(S,k).filter(F=>Ui(S,F.cells)),f1=(S,k)=>sr(S,k).filter(F=>Ui(S,F));({...{generate:S=>{if(!Mt(S))throw new Error("cases must be an array");if(S.length===0)throw new Error("there must be at least one case");const k=[],F={};return L(S,(J,me)=>{const je=St(J);if(je.length!==1)throw new Error("one and only one name per case");const pt=je[0],Jt=J[pt];if(F[pt]!==void 0)throw new Error("duplicate key detected:"+pt);if(pt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Mt(Jt))throw new Error("case arguments must be an array");k.push(pt),F[pt]=(...qn)=>{const go=qn.length;if(go!==Jt.length)throw new Error("Wrong number of arguments to case "+pt+". Expected "+Jt.length+" ("+Jt+"), got "+go);return{fold:(...ss)=>{if(ss.length!==S.length)throw new Error("Wrong number of arguments to fold. Expected "+S.length+", got "+ss.length);return ss[me].apply(null,qn)},match:ss=>{const gr=St(ss);if(k.length!==gr.length)throw new Error("Wrong number of arguments to match. Expected: "+k.join(",")+`
Actual: `+gr.join(","));if(!vt(k,Uu=>mo(gr,Uu)))throw new Error("Not all branches were specified when using match. Specified: "+gr.join(", ")+`
Required: `+k.join(", "));return ss[pt].apply(null,qn)},log:ss=>{console.log(ss,{constructors:k,constructor:pt,params:qn})}}}}),F}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const sc=(S,k)=>{const F=Bl.fromTable(S);return Er(F,k).bind(me=>{const je=me[me.length-1],pt=me[0].row,Jt=je.row+je.rowspan,qn=F.all.slice(pt,Jt);return Je(qn)}).getOr("")},Ua=S=>Ja(S,"rgb")?Vi(S):S,Nn=S=>{const k=$t.fromDom(S);return{borderwidth:pe(k,"border-width").getOr(""),borderstyle:pe(k,"border-style").getOr(""),bordercolor:pe(k,"border-color").map(Ua).getOr(""),backgroundcolor:pe(k,"background-color").map(Ua).getOr("")}},tm=S=>{const k=S[0],F=S.slice(1);return L(F,J=>{L(St(k),me=>{cn(J,(je,pt)=>{const Jt=k[me];Jt!==""&&me===pt&&Jt!==je&&(k[me]=me==="class"?"mce-no-match":"")})})}),k},mu=(S,k,F,J)=>Xo(S,me=>!eo(F.formatter.matchNode(J,k+me))).getOr(""),kf=q(mu,["left","center","right"],"align"),xy=q(mu,["top","middle","bottom"],"valign"),Zh=(S,k)=>{const F=Rg(S),J=fd(S),me=()=>({borderstyle:lo(F,"border-style").getOr(""),bordercolor:Ua(lo(F,"border-color").getOr("")),backgroundcolor:Ua(lo(F,"background-color").getOr(""))}),je={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},pt=()=>{const vs=F["border-width"];return si(S)&&vs?{border:vs}:lo(J,"border").fold(()=>({}),ss=>({border:ss}))},Jt=k?me():{},qn=()=>{const vs=lo(F,"border-spacing").or(lo(J,"cellspacing")).fold(()=>({}),gr=>({cellspacing:gr})),ss=lo(F,"border-padding").or(lo(J,"cellpadding")).fold(()=>({}),gr=>({cellpadding:gr}));return{...vs,...ss}};return{...je,...F,...J,...Jt,...pt(),...qn()}},fu=S=>Bt($t.fromDom(S)).map(k=>{const F={selection:Vh(S.cells)};return sc(k,F)}).getOr(""),Hg=(S,k,F)=>{const J=(Jt,qn)=>{const go=pe($t.fromDom(qn),"border-width");return si(S)&&go.isSome()?go.getOr(""):Jt.getAttrib(qn,"border")||ka(S.dom,qn,"border-width")||ka(S.dom,qn,"border")||""},me=S.dom,je=si(S)?me.getStyle(k,"border-spacing")||me.getAttrib(k,"cellspacing"):me.getAttrib(k,"cellspacing")||me.getStyle(k,"border-spacing"),pt=si(S)?ka(me,k,"padding")||me.getAttrib(k,"cellpadding"):me.getAttrib(k,"cellpadding")||ka(me,k,"padding");return{width:me.getStyle(k,"width")||me.getAttrib(k,"width"),height:me.getStyle(k,"height")||me.getAttrib(k,"height"),cellspacing:je??"",cellpadding:pt??"",border:J(me,k),caption:!!me.select("caption",k)[0],class:me.getAttrib(k,"class",""),align:kf(S,k),...F?Nn(k):{}}},gu=(S,k,F)=>{const J=S.dom;return{height:J.getStyle(k,"height")||J.getAttrib(k,"height"),class:J.getAttrib(k,"class",""),type:fu(k),align:kf(S,k),...F?Nn(k):{}}},wa=(S,k,F,J)=>{const me=S.dom,je=J.getOr(k);return{width:((Jt,qn)=>me.getStyle(Jt,qn)||me.getAttrib(Jt,qn))(je,"width"),scope:me.getAttrib(k,"scope"),celltype:Dl(k),class:me.getAttrib(k,"class",""),halign:kf(S,k),valign:xy(S,k),...F?Nn(k):{}}},nn=(S,k)=>{const F=Bl.fromTable(S),J=Bl.justCells(F),me=as(J,je=>qs(k,pt=>cs(je.element,pt)));return ut(me,je=>({element:je.element.dom,column:Bl.getColumnAt(F,je.column).map(pt=>pt.element.dom)}))},hu=(S,k,F,J)=>{J("scope")&&S.setAttrib("scope",F.scope),J("class")&&F.class!=="mce-no-match"&&S.setAttrib("class",F.class),J("width")&&k.setStyle("width",$o(F.width))},g1=(S,k,F)=>{F("backgroundcolor")&&S.setFormat("tablecellbackgroundcolor",k.backgroundcolor),F("bordercolor")&&S.setFormat("tablecellbordercolor",k.bordercolor),F("borderstyle")&&S.setFormat("tablecellborderstyle",k.borderstyle),F("borderwidth")&&S.setFormat("tablecellborderwidth",$o(k.borderwidth))},_f=(S,k,F,J)=>{const me=k.length===1;L(k,je=>{const pt=je.element,Jt=me?nt:J,qn=x.normal(S,pt),go=je.column.map(vs=>x.normal(S,vs)).getOr(qn);hu(qn,go,F,Jt),Zc(S)&&g1(qn,F,Jt),J("halign")&&tc(S,pt,F.halign),J("valign")&&jd(S,pt,F.valign)})},Wi=(S,k)=>{S.execCommand("mceTableCellType",!1,{type:k.celltype,no_events:!0})},pu=(S,k,F,J)=>{const me=Bo(J,(je,pt)=>F[pt]!==je);A(me)>0&&k.length>=1&&Bt(k[0]).each(je=>{const pt=nn(je,k),Jt=A(Bo(me,(go,vs)=>vs!=="scope"&&vs!=="celltype"))>0,qn=rt(me,"celltype");(Jt||rt(me,"scope"))&&_f(S,pt,J,q(rt,me)),qn&&Wi(S,J),Ao(S,je.dom,{structure:qn,style:Jt})})},Ty=(S,k,F,J)=>{const me=J.getData();J.close(),S.undoManager.transact(()=>{pu(S,k,F,me),S.focus()})},bu=(S,k)=>{const F=Bt(k[0]).map(J=>ut(nn(J,k),me=>wa(S,me.element,Zc(S),me.column)));return tm(F.getOrDie())},ev=S=>{const k=Lu(S);if(k.length===0)return;const F=bu(S,k),J={type:"tabpanel",tabs:[{title:"General",name:"general",items:Wh(S)},Ef(S,"cell")]},me={type:"panel",items:[{type:"grid",columns:2,items:Wh(S)}]};S.windowManager.open({title:"Cell Properties",size:"normal",body:Zc(S)?J:me,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:F,onSubmit:q(Ty,S,k,F)})},Fu=S=>Bs($u(S)).map(k=>({name:"class",type:"listbox",label:"Class",items:k})),Nr=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],li=S=>Nr.concat(Fu(S).toArray()),st=(S,k,F)=>{F("class")&&k.class!=="mce-no-match"&&S.setAttrib("class",k.class),F("height")&&S.setStyle("height",$o(k.height))},vu=(S,k,F)=>{F("backgroundcolor")&&S.setStyle("background-color",k.backgroundcolor),F("bordercolor")&&S.setStyle("border-color",k.bordercolor),F("borderstyle")&&S.setStyle("border-style",k.borderstyle)},Fl=(S,k,F,J)=>{const je=k.length===1?nt:J;L(k,pt=>{const Jt=Xc($t.fromDom(pt),"td,th"),qn=x.normal(S,pt);st(qn,F,je),wi(S)&&vu(qn,F,je),J("height")&&L(Jt,go=>{S.dom.setStyle(go.dom,"height",null)}),J("align")&&tc(S,pt,F.align)})},yd=(S,k)=>{S.execCommand("mceTableRowType",!1,{type:k.type,no_events:!0})},ca=(S,k,F,J)=>{const me=Bo(J,(je,pt)=>F[pt]!==je);if(A(me)>0){const je=rt(me,"type"),pt=je?A(me)>1:!0;pt&&Fl(S,k,J,q(rt,me)),je&&yd(S,J),Bt($t.fromDom(k[0])).each(Jt=>Ao(S,Jt.dom,{structure:je,style:pt}))}},hc=(S,k,F,J)=>{const me=J.getData();J.close(),S.undoManager.transact(()=>{ca(S,k,F,me),S.focus()})},Pr=S=>{const k=pd(qo(S),Da.selected);if(k.length===0)return;const F=ut(k,pt=>gu(S,pt.dom,wi(S))),J=tm(F),me={type:"tabpanel",tabs:[{title:"General",name:"general",items:li(S)},Ef(S,"row")]},je={type:"panel",items:[{type:"grid",columns:2,items:li(S)}]};S.windowManager.open({title:"Row Properties",size:"normal",body:wi(S)?me:je,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:J,onSubmit:q(hc,S,ut(k,pt=>pt.dom),J)})},Qe=(S,k,F)=>{const J=F?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],me=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],je=Cf(S)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],pt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Jt=k.length>0?[{name:"class",type:"listbox",label:"Class",items:k}]:[];return J.concat(me).concat(je).concat(pt).concat(Jt)},ta=(S,k,F,J)=>{if(k.tagName==="TD"||k.tagName==="TH")Zn(F)&&Qt(J)?S.setStyle(k,F,J):S.setStyles(k,F);else if(k.children)for(let me=0;me<k.children.length;me++)ta(S,k.children[me],F,J)},fr=(S,k,F,J)=>{const me=S.dom,je={},pt={},Jt=si(S),qn=Si(S),go=parseFloat(F.border)===0;if(!eo(F.class)&&F.class!=="mce-no-match"&&(je.class=F.class),pt.height=$o(F.height),Jt?pt.width=$o(F.width):me.getAttrib(k,"width")&&(je.width=Rr(F.width)),Jt?(go?(je.border=0,pt["border-width"]=""):(pt["border-width"]=$o(F.border),je.border=1),pt["border-spacing"]=$o(F.cellspacing)):(je.border=go?0:F.border,je.cellpadding=F.cellpadding,je.cellspacing=F.cellspacing),Jt&&k.children){const vs={};if(go?vs["border-width"]="":J.border&&(vs["border-width"]=$o(F.border)),J.cellpadding&&(vs.padding=$o(F.cellpadding)),qn&&J.bordercolor&&(vs["border-color"]=F.bordercolor),!ln(vs))for(let ss=0;ss<k.children.length;ss++)ta(me,k.children[ss],vs)}if(qn){const vs=F;pt["background-color"]=vs.backgroundcolor,pt["border-color"]=vs.bordercolor,pt["border-style"]=vs.borderstyle}me.setStyles(k,{...Rg(S),...pt}),me.setAttribs(k,{...fd(S),...je})},Gr=(S,k,F,J)=>{const me=S.dom,je=J.getData(),pt=Bo(je,(Jt,qn)=>F[qn]!==Jt);J.close(),S.undoManager.transact(()=>{if(!k){const Jt=va(je.cols).getOr(1),qn=va(je.rows).getOr(1);S.execCommand("mceInsertTable",!1,{rows:qn,columns:Jt}),k=gn(qo(S),ra(S)).bind(go=>Bt(go,ra(S))).map(go=>go.dom).getOrDie()}if(A(pt)>0){const Jt={border:rt(pt,"border"),bordercolor:rt(pt,"bordercolor"),cellpadding:rt(pt,"cellpadding")};fr(S,k,je,Jt);const qn=me.select("caption",k)[0];(qn&&!je.caption||!qn&&je.caption)&&S.execCommand("mceTableToggleCaption"),tc(S,k,je.align)}if(S.focus(),S.addVisual(),A(pt)>0){const Jt=rt(pt,"caption"),qn=Jt?A(pt)>1:!0;Ao(S,k,{structure:Jt,style:qn})}})},Hu=(S,k)=>{const F=S.dom;let J,me=Zh(S,Si(S));k?(me.cols="1",me.rows="1",Si(S)&&(me.borderstyle="",me.bordercolor="",me.backgroundcolor="")):(J=F.getParent(S.selection.getStart(),"table",S.getBody()),J?me=Hg(S,J,Si(S)):Si(S)&&(me.borderstyle="",me.bordercolor="",me.backgroundcolor=""));const je=Bs(Gd(S));je.isSome()&&me.class&&(me.class=me.class.replace(/\s*mce\-item\-table\s*/g,""));const pt={type:"grid",columns:2,items:Qe(S,je.getOr([]),k)},Jt=()=>({type:"panel",items:[pt]}),qn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[pt]},Ef(S,"table")]}),go=Si(S)?qn():Jt();S.windowManager.open({title:"Table Properties",size:"normal",body:go,onSubmit:q(Gr,S,J,me),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:me})},Vu=S=>{const k=F=>{aa(qo(S))&&F()};cn({mceTableProps:q(Hu,S,!1),mceTableRowProps:q(Pr,S),mceTableCellProps:q(ev,S),mceInsertTableDialog:q(Hu,S,!0)},(F,J)=>S.addCommand(J,()=>k(F)))},Zi=(S,k)=>he(S,k).isSome(),h1=jn,nm=S=>{const k=(J,me)=>As(J,me).exists(je=>parseInt(je,10)>1),F=J=>k(J,"rowspan")||k(J,"colspan");return S.length>0&&vt(S,F)?W.some(S):W.none()},p1=(S,k,F)=>k.length<=1?W.none():d1(S,F.firstSelectedSelector,F.lastSelectedSelector).map(J=>({bounds:J,cells:k})),ii=S=>({element:S,mergable:W.none(),unmergable:W.none(),selection:[S]}),ms=(S,k,F)=>({element:F,mergable:p1(k,S,Da),unmergable:nm(S),selection:h1(S)}),zu=S=>{const k=zi(W.none()),F=zi([]);let J=W.none();const me=Ya("caption"),je=Do=>J.forall(Xs=>!Xs[Do]),pt=()=>za(qo(S),ra(S)),Jt=()=>za(vr(S),ra(S)),qn=()=>pt().bind(Do=>ba(Yr(Bt(Do),Jt().bind(Bt),(Xs,ac)=>cs(Xs,ac)?me(Do)?W.some(ii(Do)):W.some(ms(Lu(S),Xs,Do)):W.none()))),go=Do=>Bt(Do.element).map(ac=>{const Hl=Bl.fromTable(ac),ui=Er(Hl,Do).getOr([]),Ug=kc(ui,(Cd,rm)=>(rm.isLocked&&(Cd.onAny=!0,rm.column===0?Cd.onFirst=!0:rm.column+rm.colspan>=Hl.grid.columns&&(Cd.onLast=!0)),Cd),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:fc(Hl,Do).isSome(),unmergeable:f1(Hl,Do).isSome(),locked:Ug}}),vs=()=>{k.set(On(qn)()),J=k.get().bind(go),L(F.get(),Fe)},ss=Do=>(Do(),F.set(F.get().concat([Do])),()=>{F.set(as(F.get(),Xs=>Xs!==Do))}),gr=(Do,Xs)=>ss(()=>k.get().fold(()=>{Do.setEnabled(!1)},ac=>{Do.setEnabled(!Xs(ac)&&S.selection.isEditable())})),Qc=(Do,Xs,ac)=>ss(()=>k.get().fold(()=>{Do.setEnabled(!1),Do.setActive(!1)},Hl=>{Do.setEnabled(!Xs(Hl)&&S.selection.isEditable()),Do.setActive(ac(Hl))})),Uu=Do=>J.exists(Xs=>Xs.locked[Do]),wl=Do=>gr(Do,Xs=>!1),Wu=Do=>gr(Do,Xs=>me(Xs.element)),sm=Do=>Xs=>gr(Xs,ac=>me(ac.element)||Uu(Do)),Vm=Do=>Xs=>gr(Xs,ac=>me(ac.element)||Do().isNone()),Gi=(Do,Xs)=>ac=>gr(ac,Hl=>me(Hl.element)||Do().isNone()||Uu(Xs)),yu=Do=>gr(Do,Xs=>je("mergeable")),Of=Do=>gr(Do,Xs=>je("unmergeable")),jh=Do=>Qc(Do,En,Xs=>Bt(Xs.element,ra(S)).exists(Hl=>Zi(Hl,"caption"))),zg=(Do,Xs)=>ac=>Qc(ac,Hl=>me(Hl.element),()=>S.queryCommandValue(Do)===Xs),v1=zg("mceTableRowType","header"),Ma=zg("mceTableColType","th");return S.on("NodeChange ExecCommand TableSelectorChange",vs),{onSetupTable:wl,onSetupCellOrRow:Wu,onSetupColumn:sm,onSetupPasteable:Vm,onSetupPasteableColumn:Gi,onSetupMergeable:yu,onSetupUnmergeable:Of,resetTargets:vs,onSetupTableWithCaption:jh,onSetupTableRowHeaders:v1,onSetupTableColumnHeaders:Ma,targets:k.get}};var Hm=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const rc="x-tinymce/dom-table-",b1=rc+"rows",om=rc+"columns",Vg=S=>{var k;const F=(k=Hm.read())!==null&&k!==void 0?k:[];return jr(F,J=>W.from(J.getType(S)))},qr=()=>Vg(b1),Wa=()=>Vg(om),ke=S=>k=>{const F=()=>{k.setEnabled(S.selection.isEditable())};return S.on("NodeChange",F),F(),()=>{S.off("NodeChange",F)}},rr=(S,k)=>{S.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:ke(S),fetch:Jt=>Jt("inserttable | cell row column | advtablesort | tableprops deletetable")});const F=Jt=>()=>S.execCommand(Jt),J=(Jt,qn)=>{S.queryCommandSupported(qn.command)&&S.ui.registry.addButton(Jt,{...qn,onAction:Sn(qn.onAction)?qn.onAction:F(qn.command)})},me=(Jt,qn)=>{S.queryCommandSupported(qn.command)&&S.ui.registry.addToggleButton(Jt,{...qn,onAction:Sn(qn.onAction)?qn.onAction:F(qn.command)})};J("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:k.onSetupTable}),J("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:k.onSetupTable}),J("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:k.onSetupCellOrRow}),J("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:k.onSetupMergeable}),J("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:k.onSetupUnmergeable}),J("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:k.onSetupCellOrRow}),J("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:k.onSetupCellOrRow}),J("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:k.onSetupCellOrRow}),J("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:k.onSetupCellOrRow}),J("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:k.onSetupColumn("onFirst")}),J("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:k.onSetupColumn("onLast")}),J("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:k.onSetupColumn("onAny")}),J("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:k.onSetupCellOrRow}),J("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:k.onSetupCellOrRow}),J("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:k.onSetupPasteable(qr)}),J("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:k.onSetupPasteable(qr)}),J("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:k.onSetupColumn("onAny")}),J("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:k.onSetupColumn("onAny")}),J("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:k.onSetupPasteableColumn(Wa,"onFirst")}),J("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:k.onSetupPasteableColumn(Wa,"onLast")}),J("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:ke(S)});const je=$s(Gd(S));je.length!==0&&S.queryCommandSupported("mceTableToggleClass")&&S.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:em(S,je,"tableclass",Jt=>S.execCommand("mceTableToggleClass",!1,Jt)),onSetup:k.onSetupTable});const pt=$s(Oc(S));pt.length!==0&&S.queryCommandSupported("mceTableCellToggleClass")&&S.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:em(S,pt,"tablecellclass",Jt=>S.execCommand("mceTableCellToggleClass",!1,Jt)),onSetup:k.onSetupCellOrRow}),S.queryCommandSupported("mceTableApplyCellStyle")&&(S.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:em(S,Gc,"tablecellverticalalign",bd(S,"vertical-align")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:em(S,oi(S),"tablecellborderwidth",bd(S,"border-width")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:em(S,_a(S),"tablecellborderstyle",bd(S,"border-style")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Jt=>Jt(qc(S,Og(S),"background-color")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Jt=>Jt(qc(S,qd(S),"border-color")),onSetup:k.onSetupCellOrRow})),me("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),me("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:wo(S),onSetup:k.onSetupTableRowHeaders}),me("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:vd(S),onSetup:k.onSetupTableColumnHeaders})},Af=S=>{const k=J=>S.dom.is(J,"table")&&S.getBody().contains(J)&&S.dom.isEditable(J.parentNode),F=Hi(S);F.length>0&&S.ui.registry.addContextToolbar("table",{predicate:k,items:F,scope:"node",position:"node"})},ji=S=>k=>{const F=()=>{k.setEnabled(S.selection.isEditable())};return S.on("NodeChange",F),F(),()=>{S.off("NodeChange",F)}},Mc=(S,k)=>{const F=ss=>()=>S.execCommand(ss),J=(ss,gr)=>S.queryCommandSupported(gr.command)?(S.ui.registry.addMenuItem(ss,{...gr,onAction:Sn(gr.onAction)?gr.onAction:F(gr.command)}),!0):!1,me=(ss,gr)=>{S.queryCommandSupported(gr.command)&&S.ui.registry.addToggleMenuItem(ss,{...gr,onAction:Sn(gr.onAction)?gr.onAction:F(gr.command)})},je=ss=>{S.execCommand("mceInsertTable",!1,{rows:ss.numRows,columns:ss.numColumns})},pt=[J("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:k.onSetupCellOrRow}),J("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:k.onSetupCellOrRow}),J("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:k.onSetupCellOrRow}),J("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:k.onSetupCellOrRow}),J("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:k.onSetupCellOrRow}),J("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:k.onSetupCellOrRow}),J("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:k.onSetupPasteable(qr)}),J("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:k.onSetupPasteable(qr)})],Jt=[J("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:k.onSetupColumn("onFirst")}),J("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:k.onSetupColumn("onLast")}),J("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:k.onSetupColumn("onAny")}),J("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:k.onSetupColumn("onAny")}),J("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:k.onSetupColumn("onAny")}),J("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:k.onSetupPasteableColumn(Wa,"onFirst")}),J("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:k.onSetupPasteableColumn(Wa,"onLast")})],qn=[J("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:k.onSetupCellOrRow}),J("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:k.onSetupMergeable}),J("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:k.onSetupUnmergeable})];Bu(S)?S.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:je}],onSetup:ji(S)}):S.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:F("mceInsertTableDialog"),onSetup:ji(S)}),S.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:F("mceInsertTableDialog"),onSetup:ji(S)}),J("tableprops",{text:"Table properties",onSetup:k.onSetupTable,command:"mceTableProps"}),J("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:k.onSetupTable,command:"mceTableDelete"}),mo(pt,!0)&&S.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:tt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),mo(Jt,!0)&&S.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:tt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),mo(qn,!0)&&S.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:tt("tablecellprops tablemergecells tablesplitcells")}),S.ui.registry.addContextMenu("table",{update:()=>(k.resetTargets(),k.targets().fold(tt(""),ss=>mt(ss.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const go=$s(Gd(S));go.length!==0&&S.queryCommandSupported("mceTableToggleClass")&&S.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Ll(S,go,"tableclass",ss=>S.execCommand("mceTableToggleClass",!1,ss)),onSetup:k.onSetupTable});const vs=$s(Oc(S));vs.length!==0&&S.queryCommandSupported("mceTableCellToggleClass")&&S.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Ll(S,vs,"tablecellclass",ss=>S.execCommand("mceTableCellToggleClass",!1,ss)),onSetup:k.onSetupCellOrRow}),S.queryCommandSupported("mceTableApplyCellStyle")&&(S.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Ll(S,Gc,"tablecellverticalalign",bd(S,"vertical-align")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Ll(S,oi(S),"tablecellborderwidth",bd(S,"border-width")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Ll(S,_a(S),"tablecellborderstyle",bd(S,"border-style")),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>qc(S,Og(S),"background-color"),onSetup:k.onSetupCellOrRow}),S.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>qc(S,qd(S),"border-color"),onSetup:k.onSetupCellOrRow})),me("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),me("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:wo(S),onSetup:k.onSetupTableRowHeaders}),me("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:vd(S),onSetup:k.onSetupTableRowHeaders})},pc=S=>{const k=zu(S);yr(S),Vu(S),Mc(S,k),rr(S,k),Af(S)};var kr=()=>{lt.add("table",pc)};kr()})();(function(){const lt=Object.getPrototypeOf,$n=(t,s,a)=>{var l;return a(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},an=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&$n(t,String,(a,l)=>l.isPrototypeOf(a))?"string":s},Xt=t=>s=>an(s)===t,yt=t=>s=>typeof s===t,Ut=t=>s=>t===s,Zn=(t,s)=>qt(t)&&$n(t,s,(a,l)=>lt(a)===l),Mt=Xt("string"),qt=Xt("object"),eo=t=>Zn(t,Object),Cn=Xt("array"),Qt=Ut(null),Sn=yt("boolean"),Nt=Ut(void 0),_t=t=>t==null,qe=t=>!_t(t),tt=yt("function"),jn=yt("number"),Ct=(t,s)=>{if(Cn(t)){for(let a=0,l=t.length;a<l;++a)if(!s(t[a]))return!1;return!0}return!1},q=()=>{},Fe=t=>()=>t(),En=(t,s)=>(...a)=>t(s.apply(null,a)),nt=(t,s)=>a=>t(s(a)),W=t=>()=>t,St=t=>t,Gt=(t,s)=>t===s;function cn(t,...s){return(...a)=>{const l=s.concat(a);return t.apply(null,l)}}const Ae=t=>s=>!t(s),le=t=>()=>{throw new Error(t)},Bo=t=>t(),ro=W(!1),Wt=W(!0);class A{constructor(s,a){this.tag=s,this.value=a}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return qe(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const lo=Array.prototype.slice,rt=Array.prototype.indexOf,Ho=Array.prototype.push,ln=(t,s)=>rt.call(t,s),Ke=(t,s)=>{const a=ln(t,s);return a===-1?A.none():A.some(a)},vo=(t,s)=>ln(t,s)>-1,Gs=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return!0}return!1},mo=(t,s)=>{const a=[];for(let l=0;l<t;l++)a.push(s(l));return a},qs=(t,s)=>{const a=[];for(let l=0;l<t.length;l+=s){const d=lo.call(t,l,l+s);a.push(d)}return a},Ze=(t,s)=>{const a=t.length,l=new Array(a);for(let d=0;d<a;d++){const g=t[d];l[d]=s(g,d)}return l},ut=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];s(d,a)}},L=(t,s)=>{for(let a=t.length-1;a>=0;a--){const l=t[a];s(l,a)}},Lr=(t,s)=>{const a=[],l=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?a:l).push(h)}return{pass:a,fail:l}},io=(t,s)=>{const a=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];s(g,l)&&a.push(g)}return a},as=(t,s,a)=>(L(t,(l,d)=>{a=s(a,l,d)}),a),Vo=(t,s,a)=>(ut(t,(l,d)=>{a=s(a,l,d)}),a),kc=(t,s,a)=>{for(let l=0,d=t.length;l<d;l++){const g=t[l];if(s(g,l))return A.some(g);if(a(g,l))break}return A.none()},An=(t,s)=>kc(t,s,ro),Xo=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return A.some(a)}return A.none()},tn=t=>{const s=[];for(let a=0,l=t.length;a<l;++a){if(!Cn(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Ho.apply(s,t[a])}return s},we=(t,s)=>tn(Ze(t,s)),vt=(t,s)=>{for(let a=0,l=t.length;a<l;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},So=t=>{const s=lo.call(t,0);return s.reverse(),s},It=(t,s)=>io(t,a=>!vo(s,a)),Ks=(t,s)=>{const a={};for(let l=0,d=t.length;l<d;l++){const g=t[l];a[String(g)]=s(g,l)}return a},zo=t=>[t],jr=(t,s)=>{const a=lo.call(t,0);return a.sort(s),a},bs=(t,s)=>s>=0&&s<t.length?A.some(t[s]):A.none(),Qs=t=>bs(t,0),lc=t=>bs(t,t.length-1),er=tt(Array.from)?Array.from:t=>lo.call(t),gs=(t,s)=>{for(let a=0;a<t.length;a++){const l=s(t[a],a);if(l.isSome())return l}return A.none()},es=Object.keys,ma=Object.hasOwnProperty,Ne=(t,s)=>{const a=es(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],h=t[g];s(h,g)}},Xe=(t,s)=>rn(t,(a,l)=>({k:l,v:s(a,l)})),rn=(t,s)=>{const a={};return Ne(t,(l,d)=>{const g=s(l,d);a[g.k]=g.v}),a},$t=t=>(s,a)=>{t[a]=s},to=(t,s,a,l)=>{Ne(t,(d,g)=>{(s(d,g)?a:l)(d,g)})},Jo=(t,s)=>{const a={},l={};return to(t,s,$t(a),$t(l)),{t:a,f:l}},ir=(t,s)=>{const a={};return to(t,s,$t(a),q),a},Hn=(t,s)=>{const a=[];return Ne(t,(l,d)=>{a.push(s(l,d))}),a},cs=(t,s)=>{const a=es(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],h=t[g];if(s(h,g,t))return A.some(h)}return A.none()},ur=t=>Hn(t,St),mt=(t,s)=>po(t,s)?A.from(t[s]):A.none(),po=(t,s)=>ma.call(t,s),Dr=(t,s)=>po(t,s)&&t[s]!==void 0&&t[s]!==null,fa=(t,s,a=Gt)=>t.exists(l=>a(l,s)),ga=(t,s,a=Gt)=>Ta(t,s,a).getOr(t.isNone()&&s.isNone()),ha=t=>{const s=[],a=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(a);return s},ls=t=>{const s=[];for(let a=0;a<t.length;a++){const l=t[a];if(l.isSome())s.push(l.getOrDie());else return A.none()}return A.some(s)},Ta=(t,s,a)=>t.isSome()&&s.isSome()?A.some(a(t.getOrDie(),s.getOrDie())):A.none(),Ya=(t,s,a,l)=>t.isSome()&&s.isSome()&&a.isSome()?A.some(l(t.getOrDie(),s.getOrDie(),a.getOrDie())):A.none(),is=(t,s)=>t!=null?A.some(s(t)):A.none(),wn=(t,s)=>t?A.some(s):A.none(),wr=(t,s)=>t+s,Xa=(t,s)=>t.substring(s),Uc=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,fl=(t,s)=>zs(t,s)?Xa(t,s.length):t,tr=(t,s)=>La(t,s)?t:wr(t,s),nr=(t,s,a=0,l)=>{const d=t.indexOf(s,a);return d!==-1?Nt(l)?!0:d+s.length<=l:!1},zs=(t,s)=>Uc(t,s,0),La=(t,s)=>Uc(t,s,t.length-s.length),Fr=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),ce=t=>t.length>0,se=t=>!ce(t),Oe=t=>t.style!==void 0&&tt(t.style.getPropertyValue),He=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return no(l.childNodes[0])},fn=(t,s)=>{const l=(s||document).createElement(t);return no(l)},Tn=(t,s)=>{const l=(s||document).createTextNode(t);return no(l)},no=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},he={fromHtml:He,fromTag:fn,fromText:Tn,fromDom:no,fromPoint:(t,s,a)=>A.from(t.dom.elementFromPoint(s,a)).map(no)},Un=typeof window<"u"?window:Function("return this;")(),Us=(t,s)=>{let a=s??Un;for(let l=0;l<t.length&&a!==void 0&&a!==null;++l)a=a[t[l]];return a},br=(t,s)=>{const a=t.split(".");return Us(a,s)},Kr=(t,s)=>br(t,s),ts=(t,s)=>{const a=Kr(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Dl=Object.getPrototypeOf,ic=t=>ts("HTMLElement",t),ra=t=>{const s=br("ownerDocument.defaultView",t);return qt(t)&&(ic(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Dl(t).constructor.name))},Rr=9,$o=11,qo=1,vr=3,aa=t=>t.dom.nodeName.toLowerCase(),_c=t=>t.dom.nodeType,ei=t=>s=>_c(s)===t,Xc=t=>Uo(t)&&ra(t.dom),Uo=ei(qo),dr=ei(vr),Ea=ei(Rr),Rl=ei($o),pa=t=>s=>Uo(s)&&aa(s)===t,As=(t,s)=>{const a=t.dom;if(a.nodeType!==qo)return!1;{const l=a;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},hs=t=>t.nodeType!==qo&&t.nodeType!==Rr&&t.nodeType!==$o||t.childElementCount===0,Fa=(t,s)=>{const a=s===void 0?document:s.dom;return hs(a)?[]:Ze(a.querySelectorAll(t),he.fromDom)},Ml=(t,s)=>{const a=s===void 0?document:s.dom;return hs(a)?A.none():A.from(a.querySelector(t)).map(he.fromDom)},Ko=(t,s)=>t.dom===s.dom,Yr=(t,s)=>{const a=t.dom,l=s.dom;return a===l?!1:a.contains(l)},ba=t=>he.fromDom(t.dom.ownerDocument),Sr=t=>Ea(t)?t:ba(t),Ha=t=>he.fromDom(Sr(t).dom.documentElement),hl=t=>he.fromDom(Sr(t).dom.defaultView),Xr=t=>A.from(t.dom.parentNode).map(he.fromDom),Ja=t=>Xr(t),Ac=t=>A.from(t.dom.parentElement).map(he.fromDom),iu=(t,s)=>{const a=tt(s)?s:ro;let l=t.dom;const d=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,h=he.fromDom(g);if(d.push(h),a(h)===!0)break;l=g}return d},uc=t=>A.from(t.dom.offsetParent).map(he.fromDom),Nl=t=>A.from(t.dom.nextSibling).map(he.fromDom),va=t=>Ze(t.dom.childNodes,he.fromDom),pl=(t,s)=>{const a=t.dom.childNodes;return A.from(a[s]).map(he.fromDom)},Pl=t=>pl(t,0),ti=(t,s)=>({element:t,offset:s}),Nu=(t,s)=>{const a=va(t);return a.length>0&&s<a.length?ti(a[s],0):ti(t,s)},Fi=t=>Rl(t)&&qe(t.dom.host),j=tt(Element.prototype.attachShadow)&&tt(Node.prototype.getRootNode),de=W(j),pe=j?t=>he.fromDom(t.dom.getRootNode()):Sr,ze=t=>Fi(t)?t:he.fromDom(Sr(t).dom.body),wt=t=>kn(t).isSome(),kn=t=>{const s=pe(t);return Fi(s)?A.some(s):A.none()},ko=t=>he.fromDom(t.dom.host),xr=t=>{if(de()&&qe(t.target)){const s=he.fromDom(t.target);if(Uo(s)&&Io(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Qs(a)}}return A.from(t.target)},Io=t=>qe(t.dom.shadowRoot),No=t=>{const s=dr(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return kn(he.fromDom(s)).fold(()=>a.body.contains(s),nt(No,ko))},Wo=()=>Hr(he.fromDom(document)),Hr=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return he.fromDom(s)},Ci=(t,s,a)=>{if(Mt(a)||Sn(a)||jn(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Ot=(t,s,a)=>{Ci(t.dom,s,a)},Zd=(t,s)=>{const a=t.dom;Ne(s,(l,d)=>{Ci(a,d,l)})},Ns=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},B=(t,s)=>A.from(Ns(t,s)),X=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},oe=(t,s)=>{t.dom.removeAttribute(s)},De=t=>Vo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Bt=(t,s,a)=>{if(!Mt(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Oe(t)&&t.style.setProperty(s,a)},fo=(t,s)=>{Oe(t)&&t.style.removeProperty(s)},Yt=(t,s,a)=>{const l=t.dom;Bt(l,s,a)},Ws=(t,s)=>{const a=t.dom;Ne(s,(l,d)=>{Bt(a,d,l)})},at=(t,s)=>{const a=t.dom;Ne(s,(l,d)=>{l.fold(()=>{fo(a,d)},g=>{Bt(a,d,g)})})},xs=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!No(t)?Qa(a,s):d},Qa=(t,s)=>Oe(t)?t.style.getPropertyValue(s):"",Ms=(t,s)=>{const a=t.dom,l=Qa(a,s);return A.from(l).filter(d=>d.length>0)},Vr=t=>{const s={},a=t.dom;if(Oe(a))for(let l=0;l<a.style.length;l++){const d=a.style.item(l);s[d]=a.style[d]}return s},bl=(t,s,a)=>{const l=he.fromTag(t);return Yt(l,s,a),Ms(l,s).isSome()},_o=(t,s)=>{const a=t.dom;fo(a,s),fa(B(t,"style").map(Fr),"")&&oe(t,"style")},ec=t=>t.dom.offsetWidth,Zs=(t,s)=>{const a=(C,w)=>{if(!jn(w)&&!w.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+w);const _=C.dom;Oe(_)&&(_.style[t]=w+"px")},l=C=>{const w=s(C);if(w<=0||w===null){const _=xs(C,t);return parseFloat(_)||0}return w},d=l,g=(C,w)=>Vo(w,(_,D)=>{const P=xs(C,D),H=P===void 0?0:parseInt(P,10);return isNaN(H)?_:_+H},0);return{set:a,get:l,getOuter:d,aggregate:g,max:(C,w,_)=>{const D=g(C,_);return w>D?w-D:0}}},ni=Zs("height",t=>{const s=t.dom;return No(t)?s.getBoundingClientRect().height:s.offsetHeight}),Ys=t=>ni.get(t),Pu=t=>ni.getOuter(t),Pm=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=ni.max(t,s,a);Yt(t,"max-height",l+"px")},Ag=(t,s)=>({left:t,top:s,translate:(l,d)=>Ag(t+l,s+d)}),or=Ag,Bl=t=>{const s=t.getBoundingClientRect();return or(s.left,s.top)},ya=(t,s)=>t!==void 0?t:s!==void 0?s:0,ka=t=>{const s=t.dom.ownerDocument,a=s.body,l=s.defaultView,d=s.documentElement;if(a===t.dom)return or(a.offsetLeft,a.offsetTop);const g=ya(l==null?void 0:l.pageYOffset,d.scrollTop),h=ya(l==null?void 0:l.pageXOffset,d.scrollLeft),C=ya(d.clientTop,a.clientTop),w=ya(d.clientLeft,a.clientLeft);return tc(t).translate(h-w,g-C)},tc=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?or(l.offsetLeft,l.offsetTop):No(t)?Bl(s):or(0,0)},jd=Zs("width",t=>t.dom.offsetWidth),Ao=(t,s)=>jd.set(t,s),dc=t=>jd.get(t),Va=t=>jd.getOuter(t),K=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=jd.max(t,s,a);Yt(t,"max-width",l+"px")},ne=t=>{let s=!1,a;return(...l)=>(s||(s=!0,a=t.apply(null,l)),a)},xe=(t,s,a,l)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),C=h||l("(pointer:coarse)"),w=d||!g&&h&&l("(min-device-width:768px)"),_=g||h&&!w,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,P=!_&&!w&&!D;return{isiPad:W(d),isiPhone:W(g),isTablet:W(w),isPhone:W(_),isTouch:W(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:W(D),isDesktop:W(P)}},Re=(t,s)=>{for(let a=0;a<t.length;a++){const l=t[a];if(l.test(s))return l}},hn=(t,s)=>{const a=Re(t,s);if(!a)return{major:0,minor:0};const l=d=>Number(s.replace(a,"$"+d));return Ca(l(1),l(2))},bo=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Ps():hn(t,a)},Ps=()=>Ca(0,0),Ca=(t,s)=>({major:t,minor:s}),Co={nu:Ca,detect:bo,unknown:Ps},Jr=(t,s)=>gs(s.brands,a=>{const l=a.brand.toLowerCase();return An(t,d=>{var g;return l===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Co.nu(parseInt(a.version,10),0)}))}),js=(t,s)=>{const a=String(s).toLowerCase();return An(t,l=>l.search(a))},Mr=(t,s)=>js(t,s).map(a=>{const l=Co.detect(a.versionRegexes,s);return{current:a.name,version:l}}),Tr=(t,s)=>js(t,s).map(a=>{const l=Co.detect(a.versionRegexes,s);return{current:a.name,version:l}}),yr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Wc=t=>s=>nr(s,t),oi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>nr(t,"edge/")&&nr(t,"chrome")&&nr(t,"safari")&&nr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,yr],search:t=>nr(t,"chrome")&&!nr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>nr(t,"msie")||nr(t,"trident")},{name:"Opera",versionRegexes:[yr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Wc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Wc("firefox")},{name:"Safari",versionRegexes:[yr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(nr(t,"safari")||nr(t,"mobile/"))&&nr(t,"applewebkit")}],_a=[{name:"Windows",search:Wc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>nr(t,"iphone")||nr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Wc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Wc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Wc("linux"),versionRegexes:[]},{name:"Solaris",search:Wc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Wc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Wc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Zc={browsers:W(oi),oses:W(_a)},wi="Edge",Si="Chromium",Cf="IE",Bu="Opera",si="Firefox",Oc="Safari",$u=()=>Gd({current:void 0,version:Co.unknown()}),Gd=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isEdge:l(wi),isChromium:l(Si),isIE:l(Cf),isOpera:l(Bu),isFirefox:l(si),isSafari:l(Oc)}},Hi={unknown:$u,nu:Gd,edge:W(wi),chromium:W(Si),ie:W(Cf),opera:W(Bu),firefox:W(si),safari:W(Oc)},Og="Windows",qd="iOS",Dg="Android",md="Linux",Rg="macOS",fd="Solaris",u1="FreeBSD",ie="ChromeOS",Bm=()=>Jc({current:void 0,version:Co.unknown()}),Jc=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isWindows:l(Og),isiOS:l(qd),isAndroid:l(Dg),isMacOS:l(Rg),isLinux:l(md),isSolaris:l(fd),isFreeBSD:l(u1),isChromeOS:l(ie)}},uu={unknown:Bm,nu:Jc,windows:W(Og),ios:W(qd),android:W(Dg),linux:W(md),macos:W(Rg),solaris:W(fd),freebsd:W(u1),chromeos:W(ie)},Lh={detect:(t,s,a)=>{const l=Zc.browsers(),d=Zc.oses(),g=s.bind(w=>Jr(l,w)).orThunk(()=>Mr(l,t)).fold(Hi.unknown,Hi.nu),h=Tr(d,t).fold(uu.unknown,uu.nu),C=xe(h,g,t,a);return{browser:g,os:h,deviceType:C}}},ns=t=>window.matchMedia(t).matches;let ri=ne(()=>Lh.detect(navigator.userAgent,A.from(navigator.userAgentData),ns));const vl=()=>ri(),Aa=(t,s,a,l,d,g,h)=>({target:t,x:s,y:a,stop:l,prevent:d,kill:g,raw:h}),gd=t=>{const s=he.fromDom(xr(t).getOr(t.target)),a=()=>t.stopPropagation(),l=()=>t.preventDefault(),d=En(l,a);return Aa(s,t.clientX,t.clientY,a,l,d,t)},xi=(t,s)=>a=>{t(a)&&s(gd(a))},mc=(t,s,a,l,d)=>{const g=xi(a,l);return t.dom.addEventListener(s,g,d),{unbind:cn(Fh,t,s,g,d)}},Ti=(t,s,a,l)=>mc(t,s,a,l,!1),Ng=(t,s,a,l)=>mc(t,s,a,l,!0),Fh=(t,s,a,l)=>{t.dom.removeEventListener(s,a,l)},$l=(t,s)=>{Xr(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},Ei=(t,s)=>{Nl(t).fold(()=>{Xr(t).each(d=>{jc(d,s)})},l=>{$l(l,s)})},Pg=(t,s)=>{Pl(t).fold(()=>{jc(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},jc=(t,s)=>{t.dom.appendChild(s.dom)},Oa=(t,s,a)=>{pl(t,a).fold(()=>{jc(t,s)},l=>{$l(l,s)})},Iu=(t,s)=>{ut(s,a=>{jc(t,a)})},Kd=t=>{t.dom.textContent="",ut(va(t),s=>{ai(s)})},ai=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},nc=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return or(a,l)},wf=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Hh=t=>{const s=t===void 0?window:t;return vl().browser.isFirefox()?A.none():A.from(s.visualViewport)},$m=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),Yd=t=>{const s=t===void 0?window:t,a=s.document,l=nc(he.fromDom(a));return Hh(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return $m(l.left,l.top,g,h)},d=>$m(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},Xd=()=>he.fromDom(document),du=(t,s)=>t.view(s).fold(W([]),l=>{const d=t.owner(l),g=du(t,d);return[l].concat(g)}),Sf=(t,s)=>{const a=s.owner(t),l=du(s,a);return A.some(l)};var Bg=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?A.none():A.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(he.fromDom)},owner:t=>ba(t)});const Jd=t=>{const s=Xd(),a=nc(s);return Sf(t,Bg).fold(cn(ka,t),d=>{const g=tc(t),h=as(d,(C,w)=>{const _=tc(w);return{left:C.left+_.left,top:C.top+_.top}},{left:0,top:0});return or(h.left+g.left+a.left,h.top+g.top+a.top)})},xf=(t,s,a)=>({point:t,width:s,height:a}),hd=(t,s,a,l)=>({x:t,y:s,width:a,height:l}),zr=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),mr=t=>{const s=ka(t),a=Va(t),l=Pu(t);return zr(s.left,s.top,a,l)},Da=t=>{const s=Jd(t),a=Va(t),l=Pu(t);return zr(s.left,s.top,a,l)},$g=(t,s)=>{const a=Math.max(t.x,s.x),l=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-a,C=g-l;return zr(a,l,h,C)},zh=(t,s)=>Vo(s,(a,l)=>$g(a,l),t),za=()=>Yd(window),gn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Lu=t=>{const s=gn(A.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(A.some(C))}}},pd=()=>Lu(t=>t.destroy()),Gc=()=>Lu(t=>t.unbind()),os=()=>{const t=Lu(q);return{...t,on:a=>t.get().each(a)}};var Ig=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Qd=t=>{const s=g=>g(t),a=W(t),l=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:Wt,isError:ro,map:g=>ao.value(g(t)),mapError:l,bind:s,exists:s,forall:s,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:g=>{g(t)},toOptional:()=>A.some(t)};return d},Im=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(l,d)=>l(t),isValue:ro,isError:Wt,map:s,mapError:l=>ao.error(l(t)),bind:s,exists:ro,forall:Wt,getOr:St,or:St,getOrThunk:Bo,orThunk:Bo,getOrDie:le(String(t)),each:q,toOptional:A.none};return a},ao={value:Qd,error:Im,fromOption:(t,s)=>t.fold(()=>Im(s),Qd)};var Ra;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Ra||(Ra={}));const yl=(t,s,a)=>t.stype===Ra.Error?s(t.serror):a(t.svalue),Il=t=>{const s=[],a=[];return ut(t,l=>{yl(l,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Dc=(t,s)=>t.stype===Ra.Error?{stype:Ra.Error,serror:s(t.serror)}:t,Rc=(t,s)=>t.stype===Ra.Value?{stype:Ra.Value,svalue:s(t.svalue)}:t,Qr=(t,s)=>t.stype===Ra.Value?s(t.svalue):t,Fg=(t,s)=>t.stype===Ra.Error?s(t.serror):t,oc=t=>({stype:Ra.Value,svalue:t}),Vi=t=>({stype:Ra.Error,serror:t}),Ur={fromResult:t=>t.fold(Vi,oc),toResult:t=>yl(t,ao.error,ao.value),svalue:oc,partition:Il,serror:Vi,bind:Qr,bindError:Fg,map:Rc,mapError:Dc,fold:yl},Uh=(t,s,a,l)=>({tag:"field",key:t,newKey:s,presence:a,prop:l}),ci=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),ki=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Bs=(t,s)=>s,Ll=(t,s)=>eo(t)&&eo(s)?$s(t,s):s,bd=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)po(d,g)&&(a[g]=t(a[g],d[g]))}return a},$s=bd(Ll),em=bd(Bs),qc=()=>({tag:"required",process:{}}),wo=t=>({tag:"defaultedThunk",process:t}),vd=t=>wo(W(t)),Lm=()=>({tag:"option",process:{}}),Tf=t=>({tag:"mergeWithThunk",process:t}),Wh=t=>Tf(W(t)),Ef=(t,s)=>t.length>0?Ur.svalue($s(s,em.apply(void 0,t))):Ur.svalue(s),m1=t=>En(Ur.serror,tn)(t),V={consolidateObj:(t,s)=>{const a=Ur.partition(t);return a.errors.length>0?m1(a.errors):Ef(a.values,s)},consolidateArr:t=>{const s=Ur.partition(t);return s.errors.length>0?m1(s.errors):Ur.svalue(s.values)}},re=t=>qt(t)&&es(t).length>100?" removed due to size":JSON.stringify(t,null,2),ge=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:W("... (only showing first ten failures)")}]):t;return Ze(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Je=(t,s)=>Ur.serror([{path:t,getErrorInfo:s}]),On=(t,s,a)=>Je(t,()=>'Could not find valid *required* value for "'+s+'" in '+re(a)),Jn=(t,s)=>Je(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Gn=(t,s,a)=>Je(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+re(s)),Dn=(t,s)=>Je(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),sr=(t,s)=>Je(t,W(s)),Er=t=>{const s=(l,d)=>Ur.bindError(t(d),g=>sr(l,g)),a=W("val");return{extract:s,toString:a}},Cl=Er(Ur.svalue),Ui=(t,s,a,l)=>mt(s,a).fold(()=>On(t,a,s),l),fc=(t,s,a,l)=>{const d=mt(t,s).getOrThunk(()=>a(t));return l(d)},f1=(t,s,a)=>a(mt(t,s)),Qb=(t,s,a,l)=>{const d=mt(t,s).map(g=>g===!0?a(t):g);return l(d)},Sy=(t,s,a,l,d)=>{const g=C=>d.extract(s.concat([l]),C),h=C=>C.fold(()=>Ur.svalue(A.none()),w=>{const _=d.extract(s.concat([l]),w);return Ur.map(_,A.some)});switch(t.tag){case"required":return Ui(s,a,l,g);case"defaultedThunk":return fc(a,l,t.process,g);case"option":return f1(a,l,h);case"defaultedOptionThunk":return Qb(a,l,t.process,h);case"mergeWithThunk":return fc(a,l,W({}),C=>{const w=$s(t.process(a),C);return g(w)})}},gc=(t,s,a)=>{const l={},d=[];for(const g of a)ki(g,(h,C,w,_)=>{const D=Sy(w,t,s,h,_);Ur.fold(D,P=>{d.push(...P)},P=>{l[C]=P})},(h,C)=>{l[h]=C(s)});return d.length>0?Ur.serror(d):Ur.svalue(l)},Fm=t=>({extract:(l,d)=>t().extract(l,d),toString:()=>t().toString()}),sc=t=>es(ir(t,qe)),Ua=t=>{const s=Nn(t),a=as(t,(d,g)=>ki(g,h=>$s(d,{[h]:!0}),W(d)),{});return{extract:(d,g)=>{const h=Sn(g)?[]:sc(g),C=io(h,w=>!Dr(a,w));return C.length===0?s.extract(d,g):Dn(d,C)},toString:s.toString}},Nn=t=>({extract:(l,d)=>gc(l,d,t),toString:()=>`obj{
`+Ze(t,d=>ki(d,(g,h,C,w)=>g+" -> "+w.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),tm=t=>({extract:(l,d)=>{const g=Ze(d,(h,C)=>t.extract(l.concat(["["+C+"]"]),h));return V.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),mu=(t,s)=>{const a=s!==void 0?s:St;return{extract:(g,h)=>{const C=[];for(const w of t){const _=w.extract(g,h);if(_.stype===Ra.Value)return{stype:Ra.Value,svalue:a(_.svalue)};C.push(_)}return V.consolidateArr(C)},toString:()=>"oneOf("+Ze(t,g=>g.toString()).join(", ")+")"}},kf=(t,s)=>{const a=(g,h)=>tm(Er(t)).extract(g,h);return{extract:(g,h)=>{const C=es(h),w=a(g,C);return Ur.bind(w,_=>{const D=Ze(_,P=>Uh(P,P,qc(),s));return Nn(D).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},xy=(t,s)=>{const a=ne(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},Zh=En(tm,Nn),fu=W(Cl),Hg=(t,s)=>Er(a=>{const l=typeof a;return t(a)?Ur.svalue(a):Ur.serror(`Expected type: ${s} but got: ${l}`)}),gu=Hg(jn,"number"),wa=Hg(Mt,"string"),nn=Hg(Sn,"boolean"),hu=Hg(tt,"function"),g1=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>g1(t[s]));default:return!1}},_f=Er(t=>g1(t)?Ur.svalue(t):Ur.serror("Expected value to be acceptable for sending via postMessage")),Wi=(t,s,a,l)=>mt(a,l).fold(()=>Gn(t,a,l),g=>g.extract(t.concat(["branch: "+l]),s)),pu=(t,s)=>({extract:(d,g)=>mt(g,t).fold(()=>Jn(d,t),C=>Wi(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+es(s)}),Ty=()=>tm(Cl),bu=t=>Er(s=>t(s).fold(Ur.serror,Ur.svalue)),ev=(t,s)=>kf(a=>Ur.fromResult(t(a)),s),Fu=(t,s,a)=>{const l=s.extract([t],a);return Ur.mapError(l,d=>({input:a,errors:d}))},Nr=(t,s,a)=>Ur.toResult(Fu(t,s,a)),li=t=>t.fold(s=>{throw new Error(vu(s))},St),st=(t,s,a)=>li(Nr(t,s,a)),vu=t=>`Errors: 
`+ge(t.errors).join(`
`)+`

Input object: `+re(t.input),Fl=(t,s)=>pu(t,Xe(s,Nn)),yd=(t,s)=>xy(t,s),ca=Uh,hc=ci,Pr=t=>bu(s=>vo(t,s)?ao.value(s):ao.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Qe=t=>ca(t,t,qc(),fu()),ta=(t,s)=>ca(t,t,qc(),s),fr=t=>ta(t,gu),Gr=t=>ta(t,wa),Hu=(t,s)=>ca(t,t,qc(),Pr(s)),Vu=t=>ta(t,nn),Zi=t=>ta(t,hu),h1=(t,s)=>ca(t,t,Lm(),Er(a=>Ur.serror("The field: "+t+" is forbidden. "+s))),nm=(t,s)=>ca(t,t,qc(),Nn(s)),p1=(t,s)=>ca(t,t,qc(),Zh(s)),ii=(t,s)=>ca(t,t,qc(),tm(s)),ms=t=>ca(t,t,Lm(),fu()),zu=(t,s)=>ca(t,t,Lm(),s),Hm=t=>zu(t,gu),rc=t=>zu(t,wa),b1=(t,s)=>zu(t,Pr(s)),om=t=>zu(t,hu),Vg=(t,s)=>zu(t,tm(s)),qr=(t,s)=>zu(t,Nn(s)),Wa=(t,s)=>zu(t,Ua(s)),ke=(t,s)=>ca(t,t,vd(s),fu()),rr=(t,s,a)=>ca(t,t,vd(s),a),Af=(t,s)=>rr(t,s,gu),ji=(t,s)=>rr(t,s,wa),Mc=(t,s,a)=>rr(t,s,Pr(a)),pc=(t,s)=>rr(t,s,nn),kr=(t,s)=>rr(t,s,hu),S=(t,s)=>rr(t,s,_f),k=(t,s,a)=>rr(t,s,tm(a)),F=(t,s,a)=>rr(t,s,Nn(a)),me={generate:t=>{if(!Cn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return ut(t,(l,d)=>{const g=es(l);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=l[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Cn(C))throw new Error("case arguments must be an array");s.push(h),a[h]=(...w)=>{const _=w.length;if(_!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+_);return{fold:(...P)=>{if(P.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+P.length);return P[d].apply(null,w)},match:P=>{const H=es(P);if(s.length!==H.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+H.join(","));if(!vt(s,z=>vo(H,z)))throw new Error("Not all branches were specified when using match. Specified: "+H.join(", ")+`
Required: `+s.join(", "));return P[h].apply(null,w)},log:P=>{console.log(P,{constructors:s,constructor:h,params:w})}}}}),a}};me.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const je=t=>{const s=[],a=[];return ut(t,l=>{l.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},pt=(t,s)=>{const a={};return Ne(t,(l,d)=>{vo(s,d)||(a[d]=l)}),a},Jt=(t,s)=>({[t]:s}),qn=t=>{const s={};return ut(t,a=>{s[a.key]=a.value}),s},go=(t,s)=>pt(t,s),vs=(t,s)=>Jt(t,s),ss=t=>qn(t),gr=(t,s)=>t.length===0?ao.value(s):ao.value($s(s,em.apply(void 0,t))),Qc=t=>ao.error(tn(t)),Uu=(t,s)=>{const a=je(t);return a.errors.length>0?Qc(a.errors):gr(a.values,s)},wl=t=>tt(t)?t:ro,Wu=(t,s,a)=>{let l=t.dom;const d=wl(a);for(;l.parentNode;){l=l.parentNode;const g=he.fromDom(l),h=s(g);if(h.isSome())return h;if(d(g))break}return A.none()},sm=(t,s,a)=>{const l=s(t),d=wl(a);return l.orThunk(()=>d(t)?A.none():Wu(t,s,d))},Vm=(t,s)=>Ko(t.element,s.event.target),Gi={can:Wt,abort:ro,run:q},yu=t=>{if(!Dr(t,"can")&&!Dr(t,"abort")&&!Dr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Gi,...t}},Of=(t,s)=>(...a)=>Vo(t,(l,d)=>l&&s(d).apply(void 0,a),!0),jh=(t,s)=>(...a)=>Vo(t,(l,d)=>l||s(d).apply(void 0,a),!1),zg=t=>tt(t)?{can:Wt,abort:ro,run:t}:t,v1=t=>{const s=Of(t,d=>d.can),a=jh(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{ut(t,g=>{g.run.apply(void 0,d)})}}},Ma=W,Do=Ma("touchstart"),Xs=Ma("touchmove"),ac=Ma("touchend"),Hl=Ma("touchcancel"),ui=Ma("mousedown"),Ug=Ma("mousemove"),Cd=Ma("mouseout"),rm=Ma("mouseup"),am=Ma("mouseover"),wd=Ma("focusin"),Df=Ma("focusout"),qi=Ma("keydown"),s2=Ma("keyup"),cm=Ma("input"),zm=Ma("change"),Wg=Ma("click"),r2=Ma("transitioncancel"),y1=Ma("transitionend"),Rf=Ma("transitionstart"),Ey=Ma("selectstart"),la=t=>W("alloy."+t),ky={tap:la("tap")},Zu=la("focus"),Um=la("blur.post"),Mf=la("paste.post"),ju=la("receive"),di=la("execute"),C1=la("focus.item"),tv=ky.tap,Nf=la("longpress"),bc=la("sandbox.close"),nv=la("typeahead.cancel"),w1=la("system.init"),S1=la("system.touchmove"),a2=la("system.touchend"),Zg=la("system.scroll"),lm=la("system.resize"),el=la("system.attached"),Gu=la("system.detached"),Wm=la("system.dismissRequested"),_y=la("system.repositionRequested"),x1=la("focusmanager.shifted"),T1=la("slotcontainer.visibility"),c2=la("system.external.element.scroll"),l2=la("change.tab"),i2=la("dismiss.tab"),E1=la("highlight"),Gh=la("dehighlight"),Ro=(t,s)=>{ov(t,t.element,s,{})},dn=(t,s,a)=>{ov(t,t.element,s,a)},Pf=t=>{Ro(t,di())},k1=(t,s,a)=>{ov(t,s,a,{})},ov=(t,s,a,l)=>{const d={target:s,...l};t.getSystem().triggerEvent(a,s,d)},u2=(t,s,a,l)=>{const d={...l,target:s};t.getSystem().triggerEvent(a,s,d)},_1=(t,s,a,l)=>{t.getSystem().triggerEvent(a,s,l.event)},ys=t=>ss(t),d2=(t,s)=>({key:t,value:yu({abort:s})}),Kk=(t,s)=>({key:t,value:yu({can:s})}),qh=t=>({key:t,value:yu({run:(s,a)=>{a.event.prevent()}})}),Ye=(t,s)=>({key:t,value:yu({run:s})}),Kh=(t,s,a)=>({key:t,value:yu({run:(l,d)=>{s.apply(void 0,[l,d].concat(a))}})}),Yk=t=>s=>Ye(t,s),Bf=t=>s=>({key:t,value:yu({run:(a,l)=>{Vm(a,l)&&s(a,l)}})}),m2=(t,s)=>Ye(t,(a,l)=>{a.getSystem().getByUid(s).each(d=>{_1(d,d.element,t,l)})}),jg=(t,s,a)=>{const l=s.partUids[a];return m2(t,l)},Ay=(t,s)=>Ye(t,(a,l)=>{const d=l.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>sm(d.target,C=>a.getSystem().getByDom(C).toOptional(),ro).getOr(a));s(a,g,l)}),Sd=t=>Ye(t,(s,a)=>{a.cut()}),Oy=t=>Ye(t,(s,a)=>{a.stop()}),Yh=(t,s)=>Bf(t)(s),_r=Bf(el()),im=Bf(Gu()),f2=Bf(w1()),qu=Yk(di()),Dy=(t,s,a)=>{const l=a.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),h=l.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:A1(h.slice(0,1).concat(h.slice(3)))}),t},A1=t=>Ze(t,s=>La(s,"/*")?s.substring(0,s.length-2):s),Xh=(t,s)=>{const a=t.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:A1(g)}),t},O1=(t,s)=>{const a=s.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:A1(g.slice(1))}),t},_i=t=>({classes:Nt(t.classes)?[]:t.classes,attributes:Nt(t.attributes)?{}:t.attributes,styles:Nt(t.styles)?{}:t.styles}),g2=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),D1=(t,s,a)=>qu(l=>{a(l,t,s)}),Ry=(t,s,a)=>f2((l,d)=>{a(l,t,s)}),$f=(t,s,a,l,d,g)=>{const h=Ua(t),C=qr(s,[Wa("config",t)]);return p2(h,C,s,a,l,d,g)},My=(t,s,a,l,d,g)=>{const h=t,C=qr(s,[zu("config",t)]);return p2(h,C,s,a,l,d,g)},h2=(t,s,a)=>Dy((d,...g)=>{const h=[d].concat(g);return d.config({name:W(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},C=>{const w=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(w))})},a,s),Ny=t=>({key:t,value:void 0}),p2=(t,s,a,l,d,g,h)=>{const C=P=>Dr(P,a)?P[a]():A.none(),w=Xe(d,(P,H)=>h2(a,P,H)),D={...Xe(g,(P,H)=>Xh(P,H)),...w,revoke:cn(Ny,a),config:P=>{const H=st(a+"-config",t,P);return{key:a,value:{config:H,me:D,configAsRaw:ne(()=>st(a+"-config",t,P)),initialConfig:P,state:h}}},schema:W(s),exhibit:(P,H)=>Ta(C(P),mt(l,"exhibit"),(U,z)=>z(H,U.config,U.state)).getOrThunk(()=>_i({})),name:W(a),handlers:P=>C(P).map(H=>mt(l,"events").getOr(()=>({}))(H.config,H.state)).getOr({})};return D},Sl={init:()=>Ai({readState:W("No State required")})},Ai=t=>t,ft=t=>ss(t),sv=Ua([Qe("fields"),Qe("name"),ke("active",{}),ke("apis",{}),ke("state",Sl),ke("extra",{})]),Nc=t=>{const s=st("Creating behaviour: "+t.name,sv,t);return $f(s.fields,s.name,s.active,s.apis,s.extra,s.state)},rv=Ua([Qe("branchKey"),Qe("branches"),Qe("name"),ke("active",{}),ke("apis",{}),ke("state",Sl),ke("extra",{})]),b2=t=>{const s=st("Creating behaviour: "+t.name,rv,t);return My(Fl(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},hr=W(void 0),Zm=(t,s)=>{const a=Ns(t,s);return a===void 0||a===""?[]:a.split(" ")},av=(t,s,a)=>{const d=Zm(t,s).concat([a]);return Ot(t,s,d.join(" ")),!0},Xk=(t,s,a)=>{const l=io(Zm(t,s),d=>d!==a);return l.length>0?Ot(t,s,l.join(" ")):oe(t,s),!1},jm=t=>t.dom.classList!==void 0,cv=t=>Zm(t,"class"),xd=(t,s)=>av(t,"class",s),v2=(t,s)=>Xk(t,"class",s),Py=(t,s)=>vo(cv(t),s)?v2(t,s):xd(t,s),ar=(t,s)=>{jm(t)?t.dom.classList.add(s):xd(t,s)},Jh=t=>{(jm(t)?t.dom.classList:cv(t)).length===0&&oe(t,"class")},Wr=(t,s)=>{jm(t)?t.dom.classList.remove(s):v2(t,s),Jh(t)},y2=(t,s)=>{const a=jm(t)?t.dom.classList.toggle(s):Py(t,s);return Jh(t),a},Oi=(t,s)=>jm(t)&&t.dom.classList.contains(s),Qh=(t,s)=>{ut(s,a=>{ar(t,a)})},Di=(t,s)=>{ut(s,a=>{Wr(t,a)})},Jk=(t,s)=>{ut(s,a=>{y2(t,a)})},Qk=(t,s)=>vt(s,a=>Oi(t,a)),e_=t=>{const s=t.dom.classList,a=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(a[l]=d)}return a},t_=t=>jm(t)?e_(t):cv(t),vc=(t,s,a,l,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:a.map(g),right:l.map(g),bottom:d.map(g)}},Vl=t=>({...t,position:A.some(t.position)}),R1=(t,s)=>{at(t,Vl(s))},If=t=>(fa(Ms(t,"position"),"fixed")?A.none():uc(t)).orThunk(()=>{const l=he.fromTag("span");return Xr(t).bind(d=>{jc(d,l);const g=uc(l);return ai(l),g})}),By=t=>If(t).map(ka).getOrThunk(()=>or(0,0)),ep=(t,s)=>{const a=t.element;ar(a,s.transitionClass),Wr(a,s.fadeOutClass),ar(a,s.fadeInClass),s.onShow(t)},um=(t,s)=>{const a=t.element;ar(a,s.transitionClass),Wr(a,s.fadeInClass),ar(a,s.fadeOutClass),s.onHide(t)},tp=(t,s)=>t.y<s.bottom&&t.bottom>s.y,Gg=(t,s)=>t.y>=s.y,Lf=(t,s)=>t.bottom<=s.bottom,dm=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),qg=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),Kg=t=>t.box.x-t.win.x,n_=(t,s,a)=>{const l=s.win,d=s.box,g=Kg(s);return gs(t,h=>{switch(h){case"bottom":return Lf(d,a.bounds)?A.none():A.some(qg(l,g,a));case"top":return Gg(d,a.bounds)?A.none():A.some(dm(l,g,a));default:return A.none()}}).getOr({location:"no-dock"})},$y=(t,s,a)=>vt(t,l=>{switch(l){case"bottom":return Lf(s,a.bounds);case"top":return Gg(s,a.bounds)}}),lv=(t,s)=>{const a=s.optScrollEnv.fold(W(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return or(t.bounds.x,a)},C2=(t,s)=>{const a=s.optScrollEnv.fold(W(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return or(t.x,a)},Iy=(t,s,a)=>a.getInitialPos().map(l=>{const d=lv(l,s);return{box:zr(d.left,d.top,dc(t),Ys(t)),location:l.location}}),iv=(t,s,a,l,d)=>{const g=C2(s,a),h=zr(g.left,g.top,s.width,s.height);l.setInitialPos({style:Vr(t),position:xs(t,"position")||"static",bounds:h,location:d.location})},Ly=(t,s,a,l,d)=>{l.getInitialPos().fold(()=>iv(t,s,a,l,d),()=>q)},uv=(t,s,a)=>a.getInitialPos().bind(l=>{var d;switch(a.clearInitialPos(),l.position){case"static":return A.some({morph:"static"});case"absolute":const g=If(t).getOr(Wo()),h=mr(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return A.some({morph:"absolute",positionCss:vc("absolute",mt(l.style,"left").map(w=>s.x-h.x),mt(l.style,"top").map(w=>s.y-h.y+C),mt(l.style,"right").map(w=>h.right-s.right),mt(l.style,"bottom").map(w=>h.bottom-s.bottom))});default:return A.none()}}),np=(t,s,a)=>Iy(t,s,a).filter(({box:l})=>$y(a.getModes(),l,s)).bind(({box:l})=>uv(t,l,a)),dv=t=>{switch(t.location){case"top":return A.some({morph:"fixed",positionCss:vc("fixed",A.some(t.leftX),A.some(t.topY),A.none(),A.none())});case"bottom":return A.some({morph:"fixed",positionCss:vc("fixed",A.some(t.leftX),A.none(),A.none(),A.some(t.bottomY))});default:return A.none()}},kR=(t,s,a)=>{const l=mr(t),d=za(),g=n_(a.getModes(),{win:d,box:l},s);return g.location==="top"||g.location==="bottom"?(iv(t,l,s,a,g),dv(g)):A.none()},o_=(t,s,a)=>np(t,s,a).orThunk(()=>s.optScrollEnv.bind(l=>Iy(t,s,a)).bind(({box:l,location:d})=>{const g=za(),h=Kg({win:g,box:l}),C=d==="top"?dm(g,h,s):qg(g,h,s);return dv(C)})),Td=(t,s,a)=>{const l=t.element;return fa(Ms(l,"position"),"fixed")?o_(l,s,a):kR(l,s,a)},op=(t,s,a)=>{const l=t.element;return Iy(l,s,a).bind(({box:d})=>uv(l,d,a))},w2=(t,s,a,l)=>{const d=mr(t),g=za(),h=Kg({win:g,box:d}),C=l(g,h,s);return C.location==="bottom"||C.location==="top"?(Ly(t,d,s,a,C),dv(C)):A.none()},S2=(t,s,a)=>{a.setDocked(!1),ut(["left","right","top","bottom","position"],l=>_o(t.element,l)),s.onUndocked(t)},mv=(t,s,a,l)=>{const d=l.position==="fixed";a.setDocked(d),R1(t.element,l),(d?s.onDocked:s.onUndocked)(t)},Ff=(t,s,a,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const C=tp(h,l.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(Qh(t.element,[g.fadeOutClass]),g.onHide(t)):(C?ep:um)(t,g))})})},s_=(t,s,a,l,d)=>{Ff(t,s,a,l,!0),mv(t,s,a,d.positionCss)},Fy=(t,s,a,l,d)=>{switch(d.morph){case"static":return S2(t,s,a);case"absolute":return mv(t,s,a,d.positionCss);case"fixed":return s_(t,s,a,l,d)}},M1=(t,s,a)=>{const l=s.lazyViewport(t);Ff(t,s,a,l),Td(t,l,a).each(d=>{Fy(t,s,a,l,d)})},r_=(t,s,a)=>{const l=t.element;a.setDocked(!1);const d=s.lazyViewport(t);op(t,d,a).each(g=>{switch(g.morph){case"static":{S2(t,s,a);break}case"absolute":{mv(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{Di(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),fv(t,s,a)},fv=(t,s,a)=>{t.getSystem().isConnected()&&M1(t,s,a)},sp=(t,s,a)=>{a.isDocked()&&r_(t,s,a)},x2=t=>(s,a,l)=>{const d=a.lazyViewport(s);w2(s.element,d,l,t).each(h=>{s_(s,a,l,d,h)})},gv=x2(dm),Hy=x2(qg);var Vy=Object.freeze({__proto__:null,refresh:fv,reset:sp,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,l)=>a.setModes(l),forceDockToTop:gv,forceDockToBottom:Hy}),E2=Object.freeze({__proto__:null,events:(t,s)=>ys([Yh(y1(),(a,l)=>{t.contextual.each(d=>{Oi(a.element,d.transitionClass)&&(Di(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),l.stop()})}),Ye(Zg(),(a,l)=>{fv(a,t,s)}),Ye(c2(),(a,l)=>{fv(a,t,s)}),Ye(lm(),(a,l)=>{sp(a,t,s)})])});const Ed=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,va(he.fromDom(l))},mi=t=>t.dom.innerHTML,ap=(t,s)=>{const l=ba(t).dom,d=he.fromDom(l.createDocumentFragment()),g=Ed(s,l);Iu(d,g),Kd(t),jc(t,d)},cp=t=>{const s=he.fromTag("div"),a=he.fromDom(t.dom.cloneNode(!0));return jc(s,a),mi(s)},P1=(t,s)=>he.fromDom(t.dom.cloneNode(s)),a_=t=>P1(t,!1),c_=t=>P1(t,!0),lp=t=>{if(Fi(t))return"#shadow-root";{const s=a_(t);return cp(s)}},Ri=t=>lp(t),k2="unknown";var ia;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(ia||(ia={}));const Yg=gn({}),Mi=(t,s)=>{const a=[],l=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();vo(["mousemove","mouseover","mouseout",w1()],t)||console.log(t,{event:t,time:d-l,target:s.dom,sequence:Ze(a,g=>vo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Ri(g.target)+")":g.outcome)})}}},_R=(t,s,a)=>{switch(mt(Yg.get(),t).orThunk(()=>{const d=es(Yg.get());return gs(d,g=>t.indexOf(g)>-1?A.some(Yg.get()[g]):A.none())}).getOr(ia.NORMAL)){case ia.NORMAL:return a(Ni());case ia.LOGGING:{const d=Mi(t,s),g=a(d);return d.write(),g}case ia.STOP:return!0}},hv=["alloy/data/Fields","alloy/debugging/Debugging"],ip=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return An(s,a=>a.indexOf("alloy")>0&&!Gs(hv,l=>a.indexOf(l)>-1)).getOr(k2)}else return k2},Xg={logEventCut:q,logEventStopped:q,logNoParent:q,logEventNoHandlers:q,logEventResponse:q,write:q},kd=(t,s,a)=>_R(t,s,a),Ni=W(Xg),zy=W([Qe("menu"),Qe("selectedMenu")]),Uy=W([Qe("item"),Qe("selectedItem")]);W(Nn(Uy().concat(zy())));const Wy=W(Nn(Uy())),Jg=nm("initSize",[Qe("numColumns"),Qe("numRows")]),l_=()=>ta("markers",Wy()),Qg=()=>nm("markers",[Qe("backgroundMenu")].concat(zy()).concat(Uy())),mm=t=>nm("markers",Ze(t,Qe)),B1=(t,s,a)=>(ip(),ca(s,s,a,bu(l=>ao.value((...d)=>l.apply(void 0,d))))),Zo=t=>B1("onHandler",t,vd(q)),zl=t=>B1("onKeyboardHandler",t,vd(A.none)),Cu=t=>B1("onHandler",t,qc()),Gm=t=>B1("onKeyboardHandler",t,qc()),cr=(t,s)=>hc(t,W(s)),_2=t=>hc(t,St),pv=W(Jg);var $1=[qr("contextual",[Gr("fadeInClass"),Gr("fadeOutClass"),Gr("transitionClass"),Zi("lazyContext"),Zo("onShow"),Zo("onShown"),Zo("onHide"),Zo("onHidden")]),kr("lazyViewport",()=>({bounds:za(),optScrollEnv:A.none()})),k("modes",["top","bottom"],wa),Zo("onDocked"),Zo("onUndocked")],i_=Object.freeze({__proto__:null,init:t=>{const s=gn(!1),a=gn(!0),l=os(),d=gn(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Ai({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Br=Nc({fields:$1,name:"docking",active:E2,apis:Vy,state:i_}),Zy=(t,s,a)=>Ko(s,t.element)&&!Ko(s,a),u_=ys([Kk(Zu(),(t,s)=>{const a=s.event,l=a.originator,d=a.target;return Zy(t,l,d)?(console.warn(Zu()+` did not get interpreted by the desired target. 
Originator: `+Ri(l)+`
Target: `+Ri(d)+`
Check the `+Zu()+" event handlers"),!1):!0})]);var d_=Object.freeze({__proto__:null,events:u_});let up=0;const jt=t=>{const a=new Date().getTime(),l=Math.floor(Math.random()*1e9);return up++,t+"_"+l+up+String(a)},m_=W("alloy-id-"),A2=W("data-alloy-id"),vv=m_(),jy=A2(),f_=(t,s)=>{const a=jt(vv+t);return I1(s,a),a},I1=(t,s)=>{Object.defineProperty(t.dom,jy,{value:s,writable:!0})},L1=t=>{const s=Uo(t)?t.dom[jy]:null;return A.from(s)},eh=t=>jt(t),AR=St,fm=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Ri(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},l=d=>()=>{console.warn(s(d))};return{debugInfo:W("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:ro}},g_=fm(),qm=jt("alloy-premade"),O2=t=>(Object.defineProperty(t.element.dom,qm,{value:t.uid,writable:!0}),vs(qm,t)),_d=t=>po(t.dom,qm),D2=t=>mt(t,qm),dp=t=>O1((s,...a)=>t(s.getApis(),s,...a),t),h_=(t,s)=>{const a=Ze(s,d=>qr(d.name(),[Qe("config"),ke("state",Sl)])),l=Nr("component.behaviours",Nn(a),t.behaviours).fold(d=>{throw new Error(vu(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},St);return{list:s,data:Xe(l,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return W(g)})}},p_=t=>t.list,b_=t=>t.data,Gy=(t,s)=>{const a={};return Ne(t,(l,d)=>{Ne(l,(g,h)=>{const C=mt(a,h).getOr([]);a[h]=C.concat([s(d,g)])})}),a},yv=(t,s,a,l)=>{const d={...s};ut(a,D=>{d[D.name()]=D.exhibit(t,l)});const g=Gy(d,(D,P)=>({name:D,modification:P})),h=D=>as(D,(P,H)=>({...H.modification,...P}),{}),C=as(g.classes,(D,P)=>P.modification.concat(D),[]),w=h(g.attributes),_=h(g.styles);return _i({classes:C,attributes:w,styles:_})},R2=(t,s,a,l)=>{try{const d=jr(a,(g,h)=>{const C=g[s],w=h[s],_=l.indexOf(C),D=l.indexOf(w);if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(l,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(l,null,2));return _<D?-1:D<_?1:0});return ao.value(d)}catch(d){return ao.error([d])}},qy=(t,s)=>({handler:t,purpose:s}),v_=(t,s)=>({cHandler:t,purpose:s}),F1=(t,s)=>v_(cn.apply(void 0,[t.handler].concat(s)),t.purpose),Hf=t=>t.cHandler,mp=(t,s)=>({name:t,handler:s}),Cv=(t,s)=>{const a={};return ut(t,l=>{a[l.name()]=l.handlers(s)}),a},Ky=(t,s,a)=>{const l={...a,...Cv(s,t)};return Gy(l,mp)},wv=(t,s,a,l)=>{const d=Ky(t,a,l);return M2(d,s)},Yy=t=>{const s=zg(t);return(a,l,...d)=>{const g=[a,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Xy=(t,s)=>ao.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ze(s,a=>a.name),null,2)]),Jy=(t,s,a)=>{const l=s[a];return l?R2("Event: "+a,"name",t,l).map(d=>{const g=Ze(d,h=>h.handler);return v1(g)}):Xy(a,t)},M2=(t,s)=>{const a=Hn(t,(l,d)=>(l.length===1?ao.value(l[0].handler):Jy(l,s,d)).map(h=>{const C=Yy(h),w=l.length>1?io(s[d],_=>Gs(l,D=>D.name===_)).join(" > "):l[0].name;return vs(d,qy(C,w))}));return Uu(a,{})},Pc="alloy.base.behaviour",y_=Nn([ca("dom","dom",qc(),Nn([Qe("tag"),ke("styles",{}),ke("classes",[]),ke("attributes",{}),ms("value"),ms("innerHtml")])),Qe("components"),Qe("uid"),ke("events",{}),ke("apis",{}),ca("eventOrder","eventOrder",Wh({[di()]:["disabling",Pc,"toggling","typeaheadevents"],[Zu()]:[Pc,"focusing","keying"],[w1()]:[Pc,"disabling","toggling","representing"],[cm()]:[Pc,"representing","streaming","invalidating"],[Gu()]:[Pc,"representing","item-events","toolbar-button-events","tooltipping"],[ui()]:["focusing",Pc,"item-type-events"],[Do()]:["focusing",Pc,"item-type-events"],[am()]:["item-type-events","tooltipping"],[ju()]:["receiving","reflecting","tooltipping"]}),fu()),ms("domModification")]),N2=t=>Nr("custom.definition",y_,t),Vf=t=>({...t.dom,uid:t.uid,domChildren:Ze(t.components,s=>s.element)}),th=t=>t.domModification.fold(()=>_i({}),_i),Qy=t=>t.events,Pe=t=>t.dom.value,gm=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},C_=(t,s,a)=>pl(t,s).map(d=>{if(a.exists(h=>!Ko(h,d))){const h=a.map(aa).getOr("span"),C=he.fromTag(h);return $l(d,C),C}else return d}),P2=(t,s,a)=>{a.fold(()=>jc(t,s),l=>{Ko(l,s)||($l(l,s),ai(l))})},H1=(t,s,a)=>{const l=Ze(s,a),d=va(t);return ut(d.slice(l.length),ai),l},wu=(t,s,a,l)=>{const d=pl(t,s),g=l(a,d),h=C_(t,s,d);return P2(t,g.element,h),g},V1=(t,s,a)=>H1(t,s,(l,d)=>wu(t,d,l,a)),B2=(t,s)=>H1(t,s,(a,l)=>{const d=pl(t,l);return P2(t,a,d),a}),eC=(t,s)=>{const a=es(t),l=es(s),d=It(l,a),g=Jo(t,(h,C)=>!po(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},xl=(t,s)=>{const{class:a,style:l,...d}=De(s),{toSet:g,toRemove:h}=eC(t.attributes,d),C=()=>{ut(h,Ce=>oe(s,Ce)),Zd(s,g)},w=Vr(s),{toSet:_,toRemove:D}=eC(t.styles,w),P=()=>{ut(D,Ce=>_o(s,Ce)),Ws(s,_)},H=t_(s),U=It(H,t.classes),z=It(t.classes,H),ae=()=>{Qh(s,z),Di(s,U)},Ee=Ce=>{ap(s,Ce)},fe=()=>{const Ce=t.domChildren;B2(s,Ce)},Se=()=>{const Ce=s,We=t.value.getOrUndefined();We!==Pe(Ce)&&gm(Ce,We??"")};return C(),ae(),P(),t.innerHtml.fold(fe,Ee),Se(),s},Sv=t=>{const s=he.fromTag(t.tag);Zd(s,t.attributes),Qh(s,t.classes),Ws(s,t.styles),t.innerHtml.each(l=>ap(s,l));const a=t.domChildren;return Iu(s,a),t.value.each(l=>{gm(s,l)}),s},$2=(t,s)=>{try{const a=xl(t,s);return A.some(a)}catch{return A.none()}},w_=t=>t.innerHtml.isSome()&&t.domChildren.length>0,I2=(t,s)=>{const a=d=>aa(d)===t.tag&&!w_(t)&&!_d(d),l=s.filter(a).bind(d=>$2(t,d)).getOrThunk(()=>Sv(t));return I1(l,t.uid),l},S_=t=>{const s=mt(t,"behaviours").getOr({});return we(es(s),a=>{const l=s[a];return qe(l)?[l.me]:[]})},L2=(t,s)=>h_(t,s),x_=t=>{const s=S_(t);return L2(t,s)},T_=(t,s,a)=>{const l=Vf(t),d=th(t),g={"alloy.base.modification":d},h=s.length>0?yv(a,g,s,l):d;return g2(l,h)},F2=(t,s,a)=>{const l={"alloy.base.behaviour":Qy(t)};return wv(a,t.eventOrder,s,l).getOrDie()},fp=(t,s)=>{const a=()=>Ce,l=gn(g_),d=li(N2(t)),g=x_(t),h=p_(g),C=b_(g),w=T_(d,h,C),_=I2(w,s),D=F2(d,h,C),P=gn(d.components),H=We=>{l.set(We)},U=()=>{l.set(fm(a))},z=()=>{const We=va(_),Ve=we(We,gt=>l.get().getByDom(gt).fold(()=>[],zo));P.set(Ve)},ae=We=>{const Ve=C;return(tt(Ve[We.name()])?Ve[We.name()]:()=>{throw new Error("Could not find "+We.name()+" in "+JSON.stringify(t,null,2))})()},Ee=We=>tt(C[We.name()]),fe=()=>d.apis,Se=We=>C[We]().map(Ve=>Ve.state.readState()).getOr("not enabled"),Ce={uid:t.uid,getSystem:l.get,config:ae,hasConfigured:Ee,spec:t,readState:Se,getApis:fe,connect:H,disconnect:U,element:_,syncComponents:z,components:P.get,events:D};return Ce},E_=(t,s)=>{const a=mt(t,"components").getOr([]);return s.fold(()=>Ze(a,nl),l=>Ze(a,(d,g)=>Tv(d,pl(l,g))))},H2=(t,s)=>{const{events:a,...l}=AR(t),d=E_(l,s),g={...l,events:{...d_,...a},components:d};return ao.value(fp(g,s))},na=t=>{const s=he.fromText(t);return xv({element:s})},xv=t=>{const s=st("external.component",Ua([Qe("element"),ms("uid")]),t),a=gn(fm()),l=C=>{a.set(C)},d=()=>{a.set(fm(()=>h))},g=s.uid.getOrThunk(()=>eh("external"));I1(s.element,g);const h={uid:g,getSystem:a.get,config:A.none,hasConfigured:ro,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:W("No state"),syncComponents:q,components:W([]),events:{}};return O2(h)},V2=eh,z2=t=>po(t,"uid"),Tv=(t,s)=>D2(t).getOrThunk(()=>{const a=z2(t)?t:{uid:V2(""),...t};return H2(a,s).getOrDie()}),nl=t=>Tv(t,A.none()),Tl=O2;var U2=(t,s,a,l,d)=>t(a,l)?A.some(a):tt(d)&&d(a)?A.none():s(a,l,d);const W2=(t,s,a)=>{let l=t.dom;const d=tt(a)?a:ro;for(;l.parentNode;){l=l.parentNode;const g=he.fromDom(l);if(s(g))return A.some(g);if(d(g))break}return A.none()},tC=(t,s,a)=>U2((d,g)=>g(d),W2,t,s,a),Z2=(t,s)=>{const a=t.dom;return a.parentNode?j2(he.fromDom(a.parentNode),l=>!Ko(t,l)&&s(l)):A.none()},j2=(t,s)=>{const a=d=>s(he.fromDom(d));return An(t.dom.childNodes,a).map(he.fromDom)},nC=(t,s)=>{const a=l=>{for(let d=0;d<l.childNodes.length;d++){const g=he.fromDom(l.childNodes[d]);if(s(g))return A.some(g);const h=a(l.childNodes[d]);if(h.isSome())return h}return A.none()};return a(t.dom)},oC=(t,s,a)=>tC(t,s,a).isSome(),Ev=t=>Ml(t),Km=(t,s,a)=>W2(t,l=>As(l,s),a),Ul=(t,s)=>Z2(t,a=>As(a,s)),sC=(t,s)=>j2(t,a=>As(a,s)),Cs=(t,s)=>Ml(s,t),Ad=(t,s,a)=>U2((d,g)=>As(d,g),Km,t,s,a),z1="aria-controls",G2=t=>tC(t,a=>{if(!Uo(a))return!1;const l=Ns(a,"id");return l!==void 0&&l.indexOf(z1)>-1}).bind(a=>{const l=Ns(a,"id"),d=pe(a);return Cs(d,`[${z1}="${l}"]`)}),kv=()=>{const t=jt(z1);return{id:t,link:l=>{Ot(l,z1,t)},unlink:l=>{oe(l,z1)}}},_v=(t,s)=>G2(s).exists(a=>zf(t,a)),zf=(t,s)=>oC(s,a=>Ko(a,t.element),ro)||_v(t,s),Bc=(t,s,a,l,d,g,h,C=!1)=>({x:t,y:s,bubble:a,direction:l,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),Uf=me.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),rC=(t,s,a,l,d,g,h,C,w)=>t.fold(s,a,l,d,g,h,C,w),q2=(t,s,a,l)=>t.fold(s,s,l,l,s,l,a,a),k_=(t,s,a,l)=>t.fold(s,l,s,l,a,a,s,l),gp=Uf.southeast,aC=Uf.southwest,cC=Uf.northeast,lC=Uf.northwest,iC=Uf.south,Kt=Uf.north,U1=Uf.east,uC=Uf.west,hp=(t,s,a,l)=>{const d=t+s;return d>l?a:d<a?l:d},Ku=(t,s,a)=>Math.min(Math.max(t,s),a),__=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},$c=(t,s)=>Ks(["left","right","top","bottom"],a=>mt(s,a).map(l=>__(t,l))),A_=(t,s,a)=>{const l=(w,_)=>s[w].map(D=>{const P=w==="top"||w==="bottom",H=P?a.top:a.left,z=(w==="left"||w==="top"?Math.max:Math.min)(D,_)+H;return P?Ku(z,t.y,t.bottom):Ku(z,t.x,t.right)}).getOr(_),d=l("left",t.x),g=l("top",t.y),h=l("right",t.right),C=l("bottom",t.bottom);return zr(d,g,h-d,C-g)},Wf="layout",dC=t=>t.x,K2=(t,s)=>t.x+t.width/2-s.width/2,ol=(t,s)=>t.x+t.width-s.width,Zf=(t,s)=>t.y-s.height,Av=t=>t.y+t.height,jf=(t,s)=>t.y+t.height/2-s.height/2,O_=t=>t.x+t.width,D_=(t,s)=>t.x-s.width,Za=(t,s,a)=>Bc(dC(t),Av(t),a.southeast(),gp(),"southeast",$c(t,{left:1,top:3}),Wf),Na=(t,s,a)=>Bc(ol(t,s),Av(t),a.southwest(),aC(),"southwest",$c(t,{right:0,top:3}),Wf),ja=(t,s,a)=>Bc(dC(t),Zf(t,s),a.northeast(),cC(),"northeast",$c(t,{left:1,bottom:2}),Wf),Os=(t,s,a)=>Bc(ol(t,s),Zf(t,s),a.northwest(),lC(),"northwest",$c(t,{right:0,bottom:2}),Wf),cc=(t,s,a)=>Bc(K2(t,s),Zf(t,s),a.north(),Kt(),"north",$c(t,{bottom:2}),Wf),Pa=(t,s,a)=>Bc(K2(t,s),Av(t),a.south(),iC(),"south",$c(t,{top:3}),Wf),mC=(t,s,a)=>Bc(O_(t),jf(t,s),a.east(),U1(),"east",$c(t,{left:0}),Wf),Ov=(t,s,a)=>Bc(D_(t,s),jf(t,s),a.west(),uC(),"west",$c(t,{right:1}),Wf),fC=()=>[Za,Na,ja,Os,Pa,cc,mC,Ov],Y2=()=>[Na,Za,Os,ja,Pa,cc,mC,Ov],X2=()=>[ja,Os,Za,Na,cc,Pa],Dv=()=>[Os,ja,Na,Za,cc,Pa],Rv=()=>[Za,Na,ja,Os,Pa,cc],nh=()=>[Na,Za,Os,ja,Pa,cc],gC=(t,s)=>s.universal?t:io(t,a=>vo(s.channels,a));var oh=Object.freeze({__proto__:null,events:t=>ys([Ye(ju(),(s,a)=>{const l=t.channels,d=es(l),g=a,h=gC(d,g);ut(h,C=>{const w=l[C],_=w.schema,D=st("channel["+C+`] data
Receiver: `+Ri(s.element),_,g.data);w.onReceive(s,D)})})])}),R_=[ta("channels",ev(ao.value,Ua([Cu("onReceive"),ke("schema",fu())])))];const fi=Nc({fields:R_,name:"receiving",active:oh});var M_=Object.freeze({__proto__:null,exhibit:(t,s)=>_i({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Ki=(t,s=!1)=>t.dom.focus({preventScroll:s}),W1=t=>t.dom.blur(),Z1=t=>{const s=pe(t).dom;return t.dom===s.activeElement},Od=(t=Xd())=>A.from(t.dom.activeElement).map(he.fromDom),Wl=t=>Od(pe(t)).filter(s=>t.dom.contains(s.dom)),Gf=(t,s)=>{const a=pe(s),l=Od(a).bind(g=>{const h=C=>Ko(g,C);return h(s)?A.some(s):nC(s,h)}),d=t(s);return l.each(g=>{Od(a).filter(h=>Ko(h,g)).fold(()=>{Ki(g)},q)}),d},hC=me.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Mv=(t,s,a,l,d,g)=>{const h=s.rect,C=h.x-a,w=h.y-l,_=h.width,D=h.height,P=d-(C+_),H=g-(w+D),U=A.some(C),z=A.some(w),ae=A.some(P),Ee=A.some(H),fe=A.none();return rC(s.direction,()=>vc(t,U,z,fe,fe),()=>vc(t,fe,z,ae,fe),()=>vc(t,U,fe,fe,Ee),()=>vc(t,fe,fe,ae,Ee),()=>vc(t,U,z,fe,fe),()=>vc(t,U,fe,fe,Ee),()=>vc(t,U,z,fe,fe),()=>vc(t,fe,z,ae,fe))},J2=(t,s)=>t.fold(()=>{const a=s.rect;return vc("absolute",A.some(a.x),A.some(a.y),A.none(),A.none())},(a,l,d,g)=>Mv("absolute",s,a,l,d,g),(a,l,d,g)=>Mv("fixed",s,a,l,d,g)),sh=(t,s)=>{const a=cn(Jd,s),l=t.fold(a,a,()=>{const h=nc();return Jd(s).translate(-h.left,-h.top)}),d=Va(s),g=Pu(s);return zr(l.left,l.top,d,g)},pC=(t,s)=>s.fold(()=>t.fold(za,za,zr),a=>t.fold(W(a),W(a),()=>{const l=bC(t,a.x,a.y);return zr(l.left,l.top,a.width,a.height)})),bC=(t,s,a)=>{const l=or(s,a),d=()=>{const g=nc();return l.translate(-g.left,-g.top)};return t.fold(W(l),W(l),d)},Q2=(t,s,a,l)=>t.fold(s,a,l);hC.none;const ex=hC.relative,j1=hC.fixed,rh=(t,s)=>({anchorBox:t,origin:s}),vC=(t,s)=>rh(t,s),yC="data-alloy-placement",tx=(t,s)=>{Ot(t,yC,s)},nx=t=>B(t,yC),N_=t=>oe(t,yC),Nv=me.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),ox=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:h,y:C,right:w,bottom:_,width:D,height:P}=t,H=h>=a&&h<=d,U=C>=l&&C<=g,z=H&&U,ae=w<=d&&w>=a,Ee=_<=g&&_>=l,fe=ae&&Ee,Se=Math.min(D,h>=a?d-h:w-a),Ce=Math.min(P,C>=l?g-C:_-l);return{originInBounds:z,sizeInBounds:fe,visibleW:Se,visibleH:Ce}},P_=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:h,y:C,width:w,height:_}=t,D=Math.max(a,d-w),P=Math.max(l,g-_),H=Ku(h,a,D),U=Ku(C,l,P),z=Math.min(H+w,d)-H,ae=Math.min(U+_,g)-U;return zr(H,U,z,ae)},sx=(t,s,a)=>{const l=W(s.bottom-a.y),d=W(a.bottom-s.y),g=q2(t,d,d,l),h=W(s.right-a.x),C=W(a.right-s.x);return{maxWidth:k_(t,C,C,h),maxHeight:g}},G1=(t,s,a,l)=>{const d=t.bubble,g=d.offset,h=A_(l,t.restriction,g),C=t.x+g.left,w=t.y+g.top,_=zr(C,w,s,a),{originInBounds:D,sizeInBounds:P,visibleW:H,visibleH:U}=ox(_,h),z=D&&P,ae=z?_:P_(_,h),Ee=ae.width>0&&ae.height>0,{maxWidth:fe,maxHeight:Se}=sx(t.direction,ae,l),Ce={rect:ae,maxHeight:Se,maxWidth:fe,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:w};return z||t.alwaysFit?Nv.fit(Ce):Nv.nofit(Ce,H,U,Ee)},B_=(t,s,a,l,d,g)=>{const h=l.width,C=l.height,w=(D,P,H,U,z)=>{const ae=D(a,l,d,t,g),Ee=G1(ae,h,C,g);return Ee.fold(W(Ee),(fe,Se,Ce,We)=>(z===We?Ce>U||Se>H:!z&&We)?Ee:Nv.nofit(P,H,U,z))};return Vo(s,(D,P)=>{const H=cn(w,P);return D.fold(W(D),H)},Nv.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:gp(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(St,St)},rx=Wt,Zl=(t,s,a)=>Ti(t,s,rx,a),CC=(t,s,a)=>Ng(t,s,rx,a),wC=gd,SC=["top","bottom","right","left"],Pv="data-alloy-transition-timer",$_=(t,s)=>Qk(t,s.classes),I_=(t,s,a)=>a.exists(l=>{const d=t.mode;return d==="all"?!0:l[d]!==s[d]}),Bv=(t,s)=>{const a=l=>parseFloat(l).toFixed(3);return cs(s,(l,d)=>{const g=t[d].map(a),h=l.map(a);return!ga(g,h)}).isSome()},ax=t=>{const s=g=>{const C=xs(t,g).split(/\s*,\s*/);return io(C,ce)},a=g=>{if(Mt(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return La(g,"ms")?h:h*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return Vo(d,(g,h,C)=>{const w=a(l[C])+a(h);return Math.max(g,w)},0)},xC=(t,s)=>{const a=Gc(),l=Gc();let d;const g=_=>{var D;const P=(D=_.raw.pseudoElement)!==null&&D!==void 0?D:"";return Ko(_.target,t)&&se(P)&&vo(SC,_.raw.propertyName)},h=_=>{if(_t(_)||g(_)){a.clear(),l.clear();const D=_==null?void 0:_.raw.type;(_t(D)||D===y1())&&(clearTimeout(d),oe(t,Pv),Di(t,s.classes))}},C=Zl(t,Rf(),_=>{g(_)&&(C.unbind(),a.set(Zl(t,y1(),h)),l.set(Zl(t,r2(),h)))}),w=ax(t);requestAnimationFrame(()=>{d=setTimeout(h,w+17),Ot(t,Pv,d)})},TC=(t,s)=>{Qh(t,s.classes),B(t,Pv).each(a=>{clearTimeout(parseInt(a,10)),oe(t,Pv)}),xC(t,s)},q1=(t,s,a,l,d,g)=>{const h=I_(l,d,g);if(h||$_(t,l)){Yt(t,"position",a.position);const C=sh(s,t),w=J2(s,{...d,rect:C}),_=Ks(SC,D=>w[D]);Bv(a,_)&&(at(t,_),h&&TC(t,l),ec(t))}else Di(t,l.classes)},EC=t=>({width:Va(t),height:Pu(t)}),cx=(t,s,a,l)=>{_o(s,"max-height"),_o(s,"max-width");const d=EC(s);return B_(s,l.preference,t,d,a,l.bounds)},lx=(t,s)=>{const a=s.classes;Di(t,a.off),Qh(t,a.on)},ix=(t,s,a)=>{const l=a.maxHeightFunction;l(t,s.maxHeight)},L_=(t,s,a)=>{const l=a.maxWidthFunction;l(t,s.maxWidth)},ux=(t,s,a)=>{const l=J2(a.origin,s);a.transition.each(d=>{q1(t,a.origin,l,d,s,a.lastPlacement)}),R1(t,l)},dx=(t,s)=>{tx(t,s.placement)},mx=(t,s)=>{Pm(t,Math.floor(s))},$v=W((t,s)=>{mx(t,s),Ws(t,{"overflow-x":"hidden","overflow-y":"auto"})}),pp=W((t,s)=>{mx(t,s)}),fx=(t,s,a)=>t[s]===void 0?a:t[s],F_=(t,s,a,l,d,g,h,C)=>{const w=fx(h,"maxHeightFunction",$v()),_=fx(h,"maxWidthFunction",q),D=t.anchorBox,P=t.origin,H={bounds:pC(P,g),origin:P,preference:l,maxHeightFunction:w,maxWidthFunction:_,lastPlacement:d,transition:C};return Iv(D,s,a,H)},Iv=(t,s,a,l)=>{const d=cx(t,s,a,l);return ux(s,d,l),dx(s,d),lx(s,d),ix(s,d,l),L_(s,d,l),{layout:d.layout,placement:d.placement}},H_=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Yu=(t,s,a,l=1)=>{const d=t*l,g=s*l,h=w=>mt(a,w).getOr([]),C=(w,_,D)=>{const P=It(H_,D);return{offset:or(w,_),classesOn:we(D,h),classesOff:we(P,h)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},Lv=()=>Yu(0,0,{}),Fv=St,Hv=(t,s)=>a=>jl(a)==="rtl"?s:t,jl=t=>xs(t,"direction")==="rtl"?"rtl":"ltr";var qf;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(qf||(qf={}));const Kf="data-alloy-vertical-dir",V_=t=>oC(t,s=>Uo(s)&&Ns(s,"data-alloy-vertical-dir")===qf.BottomToTop),Yf=()=>qr("layouts",[Qe("onLtr"),Qe("onRtl"),ms("onBottomLtr"),ms("onBottomRtl")]),K1=(t,s,a,l,d,g,h)=>{const C=h.map(V_).getOr(!1),w=s.layouts.map(U=>U.onLtr(t)),_=s.layouts.map(U=>U.onRtl(t)),D=C?s.layouts.bind(U=>U.onBottomLtr.map(z=>z(t))).or(w).getOr(d):w.getOr(a),P=C?s.layouts.bind(U=>U.onBottomRtl.map(z=>z(t))).or(_).getOr(g):_.getOr(l);return Hv(D,P)(t)},z_=(t,s,a)=>{const l=s.hotspot,d=sh(a,l.element),g=K1(t.element,s,Rv(),nh(),X2(),Dv(),A.some(s.hotspot.element));return A.some(Fv({anchorBox:d,bubble:s.bubble.getOr(Lv()),overrides:s.overrides,layouts:g}))};var U_=[Qe("hotspot"),ms("bubble"),ke("overrides",{}),Yf(),cr("placement",z_)];const gx=(t,s,a)=>{const l=bC(a,s.x,s.y),d=zr(l.left,l.top,s.width,s.height),g=K1(t.element,s,fC(),Y2(),fC(),Y2(),A.none());return A.some(Fv({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var Vv=[Qe("x"),Qe("y"),ke("height",0),ke("width",0),ke("bubble",Lv()),ke("overrides",{}),Yf(),cr("placement",gx)];const zv=me.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),W_=t=>t.fold(St,(s,a,l)=>s.translate(-a,-l)),Y1=t=>t.fold(St,St),kC=t=>Vo(t,(s,a)=>s.translate(a.left,a.top),or(0,0)),Z_=t=>{const s=Ze(t,W_);return kC(s)},_C=t=>{const s=Ze(t,Y1);return kC(s)},AC=zv.screen,Uv=zv.absolute,j_=(t,s,a)=>{const l=hl(a.root).dom,d=g=>{const h=ba(g),C=ba(t.element);return Ko(h,C)};return A.from(l.frameElement).map(he.fromDom).filter(d).map(ka)},ah=(t,s,a)=>{const l=ba(t.element),d=nc(l),g=j_(t,s,a).getOr(d);return Uv(g,d.left,d.top)},hx=(t,s,a,l)=>{const d=AC(or(t,s));return A.some(xf(d,a,l))},OC=(t,s,a,l,d)=>t.map(g=>{const h=[s,g.point],C=Q2(l,()=>_C(h),()=>_C(h),()=>Z_(h)),w=hd(C.left,C.top,g.width,g.height),_=a.showAbove?X2():Rv(),D=a.showAbove?Dv():nh(),P=K1(d,a,_,D,_,D,A.none());return Fv({anchorBox:w,bubble:a.bubble.getOr(Lv()),overrides:a.overrides,layouts:P})}),px=(t,s,a)=>{const l=ah(t,a,s);return s.node.filter(No).bind(d=>{const g=d.dom.getBoundingClientRect(),h=hx(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return OC(h,l,s,a,C)})};var Wv=[Qe("node"),Qe("root"),ms("bubble"),Yf(),ke("overrides",{}),ke("showAbove",!1),cr("placement",px)];const G_="\uFEFF",Xf=" ",bp={create:(t,s,a,l)=>({start:t,soffset:s,finish:a,foffset:l})},Zv=me.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),vp=(t,s,a,l)=>t.fold(s,a,l),yp=t=>t.fold(St,St,St),q_=Zv.before,bx=Zv.on,K_=Zv.after,jv={before:q_,on:bx,after:K_,cata:vp,getStart:yp},Ym=me.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),DC=t=>Ym.exact(t.start,t.soffset,t.finish,t.foffset),RC=t=>t.match({domRange:s=>he.fromDom(s.startContainer),relative:(s,a)=>jv.getStart(s),exact:(s,a,l,d)=>s}),Y_=Ym.domRange,MC=Ym.relative,vx=Ym.exact,yx=t=>{const s=RC(t);return hl(s)},Cx=bp.create,Cp={domRange:Y_,relative:MC,exact:vx,exactFromRange:DC,getWin:yx,range:Cx},Gv=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,l)=>{t.setStart(a.dom,l)},a=>{t.setStartAfter(a.dom)})},ch=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,l)=>{t.setEnd(a.dom,l)},a=>{t.setEndAfter(a.dom)})},Xm=(t,s,a)=>{const l=t.document.createRange();return Gv(l,s),ch(l,a),l},X1=(t,s,a,l,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(l.dom,d),g},wp=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),X_=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?A.some(a).map(wp):A.none()},Dd=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(wp):A.none()},Yi=me.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),qv=(t,s,a)=>s(he.fromDom(a.startContainer),a.startOffset,he.fromDom(a.endContainer),a.endOffset),J_=(t,s)=>s.match({domRange:a=>({ltr:W(a),rtl:A.none}),relative:(a,l)=>({ltr:ne(()=>Xm(t,a,l)),rtl:ne(()=>A.some(Xm(t,l,a)))}),exact:(a,l,d,g)=>({ltr:ne(()=>X1(t,a,l,d,g)),rtl:ne(()=>A.some(X1(t,d,g,a,l)))})}),RR=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Yi.rtl(he.fromDom(d.endContainer),d.endOffset,he.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>qv(t,Yi.ltr,a)):qv(t,Yi.ltr,a)},lh=(t,s)=>{const a=J_(t,s);return RR(t,a)},Sp=(t,s)=>lh(t,s).match({ltr:(l,d,g,h)=>{const C=t.document.createRange();return C.setStart(l.dom,d),C.setEnd(g.dom,h),C},rtl:(l,d,g,h)=>{const C=t.document.createRange();return C.setStart(g.dom,h),C.setEnd(l.dom,d),C}});Yi.ltr,Yi.rtl;const xp=(t,s,a)=>io(iu(t,a),s),sl=(t,s)=>Fa(s,t),Kv=(t,s,a,l)=>{const g=ba(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,l),g},ih=(t,s,a,l)=>{const d=Kv(t,s,a,l),g=Ko(t,a)&&s===l;return d.collapsed&&!g},Yv=t=>A.from(t.getSelection()),wx=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return A.some(bp.create(he.fromDom(s.startContainer),s.startOffset,he.fromDom(a.endContainer),a.endOffset))}else return A.none()},NC=t=>{if(t.anchorNode===null||t.focusNode===null)return wx(t);{const s=he.fromDom(t.anchorNode),a=he.fromDom(t.focusNode);return ih(s,t.anchorOffset,a,t.focusOffset)?A.some(bp.create(s,t.anchorOffset,a,t.focusOffset)):wx(t)}},Xv=t=>Yv(t).filter(s=>s.rangeCount>0).bind(NC),yc=(t,s)=>{const a=Sp(t,s);return X_(a)},Jv=(t,s)=>{const a=Sp(t,s);return Dd(a)},PC=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>t(g)?A.from(g.dom.nodeValue):A.none();return{get:a,getOption:l,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(dr,"text"),BC=t=>PC.get(t),Jm=(t,s)=>({element:t,offset:s}),Sx=(t,s)=>{const a=va(t);if(a.length===0)return Jm(t,s);if(s<a.length)return Jm(a[s],0);{const l=a[a.length-1],d=dr(l)?BC(l).length:va(l).length;return Jm(l,d)}},Jf=(t,s)=>dr(t)?Jm(t,s):Sx(t,s),Qv=t=>t.foffset!==void 0,e0=(t,s)=>s.getSelection.getOrThunk(()=>()=>Xv(t))().map(l=>{if(Qv(l)){const d=Jf(l.start,l.soffset),g=Jf(l.finish,l.foffset);return Cp.range(d.element,d.offset,g.element,g.offset)}else return l}),$C=(t,s,a)=>{const l=hl(s.root).dom,d=ah(t,a,s),g=e0(l,s).bind(w=>{if(Qv(w))return Jv(l,Cp.exactFromRange(w)).orThunk(()=>{const D=he.fromText(G_);$l(w.start,D);const P=yc(l,Cp.exact(D,0,D,1));return ai(D),P}).bind(D=>hx(D.left,D.top,D.width,D.height));{const _=Xe(w,P=>P.dom.getBoundingClientRect()),D={left:Math.min(_.firstCell.left,_.lastCell.left),right:Math.max(_.firstCell.right,_.lastCell.right),top:Math.min(_.firstCell.top,_.lastCell.top),bottom:Math.max(_.firstCell.bottom,_.lastCell.bottom)};return hx(D.left,D.top,D.right-D.left,D.bottom-D.top)}}),C=e0(l,s).bind(w=>Qv(w)?Uo(w.start)?A.some(w.start):Ac(w.start):A.some(w.firstCell)).getOr(t.element);return OC(g,d,s,a,C)};var uh=[ms("getSelection"),Qe("root"),ms("bubble"),Yf(),ke("overrides",{}),ke("showAbove",!1),cr("placement",$C)];const Tp="link-layout",Kc=t=>t.x+t.width,xx=(t,s)=>t.x-s.width,IC=(t,s)=>t.y-s.height+t.height,LC=t=>t.y,Tx=(t,s,a)=>Bc(Kc(t),LC(t),a.southeast(),gp(),"southeast",$c(t,{left:0,top:2}),Tp),FC=(t,s,a)=>Bc(xx(t,s),LC(t),a.southwest(),aC(),"southwest",$c(t,{right:1,top:2}),Tp),Ex=(t,s,a)=>Bc(Kc(t),IC(t,s),a.northeast(),cC(),"northeast",$c(t,{left:0,bottom:3}),Tp),kx=(t,s,a)=>Bc(xx(t,s),IC(t,s),a.northwest(),lC(),"northwest",$c(t,{right:1,bottom:3}),Tp),Xi=()=>[Tx,FC,Ex,kx],Qm=()=>[FC,Tx,kx,Ex],_x=(t,s,a)=>{const l=sh(a,s.item.element),d=K1(t.element,s,Xi(),Qm(),Xi(),Qm(),A.none());return A.some(Fv({anchorBox:l,bubble:Lv(),overrides:s.overrides,layouts:d}))};var dh=[Qe("item"),Yf(),ke("overrides",{}),cr("placement",_x)],El=Fl("type",{selection:uh,node:Wv,hotspot:U_,submenu:dh,makeshift:Vv});const Pi=[ii("classes",wa),Mc("mode","all",["all","layout","placement"])],kl=[ke("useFixed",ro),ms("getBounds")],Ji=[ta("anchor",El),qr("transition",Pi)],t0=()=>{const t=document.documentElement;return j1(0,0,t.clientWidth,t.clientHeight)},Qi=t=>{const s=ka(t.element),a=t.element.dom.getBoundingClientRect();return ex(s.left,s.top,a.width,a.height)},mh=(t,s,a,l,d,g)=>{const h=vC(s.anchorBox,t);return F_(h,l.element,s.bubble,s.layouts,d,a,s.overrides,g)},Q_=(t,s,a,l,d)=>{const g=A.none();Ax(t,s,a,l,d,g)},Ax=(t,s,a,l,d,g)=>{const h=st("placement.info",Nn(Ji),d),C=h.anchor,w=l.element,_=a.get(l.uid);Gf(()=>{Yt(w,"position","fixed");const D=Ms(w,"visibility");Yt(w,"visibility","hidden");const P=s.useFixed()?t0():Qi(t);C.placement(t,C,P).each(H=>{const U=g.orThunk(()=>s.getBounds.map(Bo)),z=mh(P,H,U,l,_,h.transition);a.set(l.uid,z)}),D.fold(()=>{_o(w,"visibility")},H=>{Yt(w,"visibility",H)}),Ms(w,"left").isNone()&&Ms(w,"top").isNone()&&Ms(w,"right").isNone()&&Ms(w,"bottom").isNone()&&fa(Ms(w,"position"),"fixed")&&_o(w,"position")},w)};var Dx=Object.freeze({__proto__:null,position:Q_,positionWithinBounds:Ax,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,l)=>{const d=l.element;ut(["position","left","right","top","bottom"],g=>_o(d,g)),N_(d),a.clear(l.uid)}}),VC=Object.freeze({__proto__:null,init:()=>{let t={};return Ai({readState:()=>t,clear:d=>{qe(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>mt(t,d)})}});const Ic=Nc({fields:kl,name:"positioning",active:M_,apis:Dx,state:VC}),zC=t=>t.getSystem().isConnected(),Qf=t=>{Ro(t,Gu());const s=t.components();ut(s,Qf)},Ep=t=>{const s=t.components();ut(s,Ep),Ro(t,el())},UC=(t,s)=>{t.getSystem().addToWorld(s),No(t.element)&&Ep(s)},n0=t=>{Qf(t),t.getSystem().removeFromWorld(t)},J1=(t,s)=>{jc(t.element,s.element)},WC=t=>{ut(t.components(),s=>ai(s.element)),Kd(t.element),t.syncComponents()},kp=(t,s,a)=>{const l=t.components();WC(t);const d=a(s),g=It(l,d);ut(g,h=>{Qf(h),t.getSystem().removeFromWorld(h)}),ut(d,h=>{zC(h)?J1(t,h):(t.getSystem().addToWorld(h),J1(t,h),No(t.element)&&Ep(h))}),t.syncComponents()},ZC=(t,s,a)=>{const l=t.components(),d=we(s,C=>D2(C).toArray());ut(l,C=>{vo(d,C)||n0(C)});const g=a(s),h=It(l,g);ut(h,C=>{zC(C)&&n0(C)}),ut(g,C=>{zC(C)||UC(t,C)}),t.syncComponents()},hm=(t,s)=>{fh(t,s,jc)},fh=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),No(t.element)&&Ep(s),t.syncComponents()},Rx=t=>{Qf(t),ai(t.element),t.getSystem().removeFromWorld(t)},ef=t=>{const s=Xr(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Rx(t),s.each(a=>{a.syncComponents()})},eu=t=>{const s=t.components();ut(s,Rx),Kd(t.element),t.syncComponents()},Mx=(t,s)=>{gh(t,s,jc)},pm=(t,s)=>{gh(t,s,Ei)},gh=(t,s,a)=>{a(t,s.element);const l=va(s.element);ut(l,d=>{s.getByDom(d).each(Ep)})},jC=t=>{const s=va(t.element);ut(s,a=>{t.getByDom(a).each(Qf)}),ai(t.element)},o0=(t,s,a,l)=>{a.get().each(h=>{eu(t)});const d=s.getAttachPoint(t);hm(d,t);const g=t.getSystem().build(l);return hm(t,g),a.set(g),g},Nx=(t,s,a,l)=>{const d=o0(t,s,a,l);return s.onOpen(t,d),d},tA=(t,s,a,l)=>a.get().map(()=>o0(t,s,a,l)),nA=(t,s,a,l,d)=>{Ap(t,s),Nx(t,s,a,l),d(),s0(t,s)},Px=(t,s,a)=>{a.get().each(l=>{eu(t),ef(t),s.onClose(t,l),a.clear()})},eg=(t,s,a)=>a.isOpen(),_p=(t,s,a,l)=>eg(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,l)),Q1=(t,s,a)=>a.get(),oA=(t,s,a,l)=>{Ms(t.element,s).fold(()=>{oe(t.element,a)},d=>{Ot(t.element,a,d)}),Yt(t.element,s,l)},sA=(t,s,a)=>{B(t.element,a).fold(()=>_o(t.element,s),l=>Yt(t.element,s,l))},Ap=(t,s,a)=>{const l=s.getAttachPoint(t);Yt(t.element,"position",Ic.getMode(l)),oA(t,"visibility",s.cloakVisibilityAttr,"hidden")},GC=t=>Gs(["top","left","right","bottom"],s=>Ms(t,s).isSome()),s0=(t,s,a)=>{GC(t.element)||_o(t.element,"position"),sA(t,"visibility",s.cloakVisibilityAttr)};var qC=Object.freeze({__proto__:null,cloak:Ap,decloak:s0,open:Nx,openWhileCloaked:nA,close:Px,isOpen:eg,isPartOf:_p,getState:Q1,setContent:tA}),Op=Object.freeze({__proto__:null,events:(t,s)=>ys([Ye(bc(),(a,l)=>{Px(a,t,s)})])}),YC=[Zo("onOpen"),Zo("onClose"),Qe("isPartOf"),Qe("getAttachPoint"),ke("cloakVisibilityAttr","data-precloak-visibility")],XC=Object.freeze({__proto__:null,init:()=>{const t=os(),s=W("not-implemented");return Ai({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Yo=Nc({fields:YC,name:"sandboxing",active:Op,apis:qC,state:XC}),bm=W("dismiss.popups"),hh=W("reposition.popups"),eb=W("mouse.released"),JC=Ua([ke("isExtraPart",ro),qr("fireEventInstead",[ke("event",Wm())])]),tf=t=>{const s=st("Dismissal",JC,t);return{[bm()]:{schema:Ua([Qe("target")]),onReceive:(a,l)=>{Yo.isOpen(a)&&(Yo.isPartOf(a,l.target)||s.isExtraPart(a,l.target)||s.fireEventInstead.fold(()=>Yo.close(a),g=>Ro(a,g.event)))}}}},QC=Ua([qr("fireEventInstead",[ke("event",_y())]),Zi("doReposition")]),r0=t=>{const s=st("Reposition",QC,t);return{[hh()]:{onReceive:a=>{Yo.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),l=>Ro(a,l.event))}}}},ew=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},tw=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var c0=Object.freeze({__proto__:null,onLoad:ew,onUnload:tw,setValue:(t,s,a,l)=>{s.store.manager.setValue(t,s,a,l)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),Rp=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[_r((l,d)=>{ew(l,t,s)}),im((l,d)=>{tw(l,t,s)})]:[Ry(t,s,ew)];return ys(a)}});const l0=()=>{const t=gn(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,l=()=>{t.set(null)};return Ai({set:t.set,get:t.get,isNotSet:a,clear:l,readState:s})},rA=()=>Ai({readState:q}),i0=()=>{const t=gn({}),s=gn({});return Ai({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>mt(t.get(),h).orThunk(()=>mt(s.get(),h)),update:h=>{const C=t.get(),w=s.get(),_={},D={};ut(h,P=>{_[P.value]=P,mt(P,"meta").each(H=>{mt(H,"text").each(U=>{D[U]=P})})}),t.set({...C,..._}),s.set({...w,...D})},clear:()=>{t.set({}),s.set({})}})};var aA=Object.freeze({__proto__:null,memory:l0,dataset:i0,manual:rA,init:t=>t.store.manager.state(t)});const tb=(t,s,a,l)=>{const d=s.store;a.update([l]),d.setValue(t,l),s.onSetValue(t,l)},Su=(t,s,a)=>{const l=s.store,d=l.getDataKey(t);return a.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},Cc=(t,s,a)=>{s.store.initialValue.each(d=>{tb(t,s,a,d)})},cA=(t,s,a)=>{a.clear()};var Rd=[ms("initialValue"),Qe("getFallbackEntry"),Qe("getDataKey"),Qe("setValue"),cr("manager",{setValue:tb,getValue:Su,onLoad:Cc,onUnload:cA,state:i0})];const lA=(t,s,a)=>s.store.getValue(t),$x=(t,s,a,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},nb=(t,s,a)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var Mp=[Qe("getValue"),ke("setValue",q),ms("initialValue"),cr("manager",{setValue:$x,getValue:lA,onLoad:nb,onUnload:q,state:Sl.init})];const Ix=(t,s,a,l)=>{a.set(l),s.onSetValue(t,l)},Lx=(t,s,a)=>a.get(),MR=(t,s,a)=>{s.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},NR=(t,s,a)=>{a.clear()};var Fx=[ms("initialValue"),cr("manager",{setValue:Ix,getValue:Lx,onLoad:MR,onUnload:NR,state:l0})],Hx=[rr("store",{mode:"memory"},Fl("mode",{memory:Fx,manual:Mp,dataset:Rd})),Zo("onSetValue"),ke("resetOnDom",!1)];const Zt=Nc({fields:Hx,name:"representing",active:Rp,apis:c0,extra:{setValueFrom:(t,s)=>{const a=Zt.getValue(s);Zt.setValue(t,a)}},state:aA}),wc=(t,s)=>F(t,{},Ze(s,a=>h1(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([hc("dump",St)])),ob=t=>t.dump,Sc=(t,s)=>({...ft(s),...t.dump}),xu={field:wc,augment:Sc,get:ob},nw="placeholder",vh=me.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),u0=t=>po(t,"uiType"),tg=(t,s,a,l)=>t.exists(d=>d!==a.owner)?vh.single(!0,W(a)):mt(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+es(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),sb=(t,s,a,l)=>u0(a)&&a.uiType===nw?tg(t,s,a,l):vh.single(!1,W(a)),Vx=(t,s,a,l)=>sb(t,s,a,l).fold((g,h)=>{const C=u0(a)?h(s,a.config,a.validated):h(s),w=mt(C,"components").getOr([]),_=we(w,D=>Vx(t,s,D,l));return[{...C,components:_}]},(g,h)=>{if(u0(a)){const C=h(s,a.config,a.validated);return a.validated.preprocess.getOr(St)(C)}else return h(s)}),iA=(t,s,a,l)=>we(a,d=>Vx(t,s,d,l)),uA=(t,s)=>{let a=!1;const l=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:W(t),required:g,used:l,replace:d}},dA=(t,s,a,l)=>{const d=Xe(l,(h,C)=>uA(C,h)),g=iA(t,s,a,d);return Ne(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},ng=vh.single,rb=vh.multiple,ab=W(nw),d0=me.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Bi=ke("factory",{sketch:St}),vm=ke("schema",[]),og=Qe("name"),sg=ca("pname","pname",wo(t=>"<alloy."+jt(t.name)+">"),fu()),mA=hc("schema",()=>[ms("preprocess")]),m0=ke("defaults",W({})),f0=ke("overrides",W({})),fA=Nn([Bi,vm,og,sg,m0,f0]),gA=Nn([Bi,vm,og,m0,f0]),hA=Nn([Bi,vm,og,sg,m0,f0]),pA=Nn([Bi,mA,og,Qe("unit"),sg,m0,f0]),zx=t=>t.fold(A.some,A.none,A.some,A.some),g0=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},bA=t=>t.fold(St,St,St,St),h0=(t,s)=>a=>{const l=st("Converting part type",s,a);return t(l)},Yc=h0(d0.required,fA),Tu=h0(d0.external,gA),tu=h0(d0.optional,hA),p0=h0(d0.group,pA),b0=W("entirety");var Ux=Object.freeze({__proto__:null,required:Yc,external:Tu,optional:tu,group:p0,asNamedPart:zx,name:g0,asCommon:bA,original:b0});const ow=(t,s,a,l)=>$s(s.defaults(t,a,l),a,{uid:t.partUids[s.name]},s.overrides(t,a,l)),Wx=(t,s,a)=>{const l={},d={};return ut(a,g=>{g.fold(h=>{l[h.pname]=ng(!0,(C,w,_)=>h.factory.sketch(ow(C,h,w,_)))},h=>{const C=s.parts[h.name];d[h.name]=W(h.factory.sketch(ow(s,h,C[b0()]),C))},h=>{l[h.pname]=ng(!1,(C,w,_)=>h.factory.sketch(ow(C,h,w,_)))},h=>{l[h.pname]=rb(!0,(C,w,_)=>{const D=C[h.name];return Ze(D,P=>h.factory.sketch($s(h.defaults(C,P,_),P,h.overrides(C,P))))})})}),{internals:W(l),externals:W(d)}},sw=(t,s)=>{const a={};return ut(s,l=>{zx(l).each(d=>{const g=Zx(t,d.pname);a[d.name]=h=>{const C=st("Part: "+d.name+" in "+t,Nn(d.schema),h);return{...g,config:h,validated:C}}})}),a},Zx=(t,s)=>({uiType:ab(),owner:t,name:s}),jx=(t,s,a)=>({uiType:ab(),owner:t,name:s,config:a,validated:{}}),vA=t=>we(t,s=>s.fold(A.none,A.some,A.none,A.none).map(a=>nm(a.name,a.schema.concat([_2(b0())]))).toArray()),yA=t=>Ze(t,g0),v0=(t,s,a)=>Wx(t,s,a),rw=(t,s,a)=>dA(A.some(t),s,s.components,a),ht=(t,s,a)=>{const l=s.partUids[a];return t.getSystem().getByUid(l).toOptional()},Gl=(t,s,a)=>ht(t,s,a).getOrDie("Could not find part: "+a),Gx=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return ut(a,h=>{l[h]=W(g.getByUid(d[h]))}),l},aw=(t,s)=>{const a=t.getSystem();return Xe(s.partUids,(l,d)=>W(a.getByUid(l)))},cb=t=>es(t.partUids),lb=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return ut(a,h=>{l[h]=W(g.getByUid(d[h]).getOrDie())}),l},y0=(t,s)=>{const a=yA(s);return ss(Ze(a,l=>({key:l,value:t+"-"+l})))},ib=t=>ca("partUids","partUids",Tf(s=>y0(s.uid,t)),fu());var qx=Object.freeze({__proto__:null,generate:sw,generateOne:jx,schemas:vA,names:yA,substitutes:v0,components:rw,defaultUids:y0,defaultUidsSchema:ib,getAllParts:aw,getAllPartNames:cb,getPart:ht,getPartOrDie:Gl,getParts:Gx,getPartsOrDie:lb});const Kx=(t,s)=>(t.length>0?[nm("parts",t)]:[]).concat([Qe("uid"),ke("dom",{}),ke("components",[]),_2("originalSpec"),ke("debug.sketcher",{})]).concat(s),cw=(t,s,a,l,d)=>{const g=Kx(l,d);return st(t+" [SpecSchema]",Ua(g.concat(s)),a)},lw=(t,s,a,l)=>{const d=Yx(l),g=cw(t,s,d,[],[]);return a(g,d)},of=(t,s,a,l,d)=>{const g=Yx(d),h=vA(a),C=ib(a),w=cw(t,s,g,h,[C]),_=v0(t,w,a),D=rw(t,w,_.internals());return l(w,D,g,_.externals())},iw=t=>po(t,"uid"),Yx=t=>iw(t)?t:{...t,uid:eh("uid")},CA=t=>t.uid!==void 0,wA=Ua([Qe("name"),Qe("factory"),Qe("configFields"),ke("apis",{}),ke("extraApis",{})]),Xx=Ua([Qe("name"),Qe("factory"),Qe("configFields"),Qe("partFields"),ke("apis",{}),ke("extraApis",{})]),gi=t=>{const s=st("Sketcher for "+t.name,wA,t),a=g=>lw(s.name,s.configFields,s.factory,g),l=Xe(s.apis,dp),d=Xe(s.extraApis,(g,h)=>Xh(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...l,...d}},_l=t=>{const s=st("Sketcher for "+t.name,Xx,t),a=h=>of(s.name,s.configFields,s.partFields,s.factory,h),l=sw(s.name,s.partFields),d=Xe(s.apis,dp),g=Xe(s.extraApis,(h,C)=>Xh(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:l,...d,...g}},Np=t=>pa("input")(t)&&Ns(t,"type")!=="radio"||pa("textarea")(t);var SA=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const uw=[Qe("find")],jo=Nc({fields:uw,name:"composing",apis:SA}),BR=["input","button","textarea","select"],Jx=(t,s,a)=>{(s.disabled()?C0:db)(t,s)},Qx=(t,s)=>s.useNative===!0&&vo(BR,aa(t.element)),$R=t=>X(t.element,"disabled"),rg=t=>{Ot(t.element,"disabled","disabled")},ub=t=>{oe(t.element,"disabled")},xA=t=>Ns(t.element,"aria-disabled")==="true",TA=t=>{Ot(t.element,"aria-disabled","true")},EA=t=>{Ot(t.element,"aria-disabled","false")},C0=(t,s,a)=>{s.disableClass.each(d=>{ar(t.element,d)}),(Qx(t,s)?rg:TA)(t),s.onDisabled(t)},db=(t,s,a)=>{s.disableClass.each(d=>{Wr(t.element,d)}),(Qx(t,s)?ub:EA)(t),s.onEnabled(t)},eT=(t,s)=>Qx(t,s)?$R(t):xA(t);var Pp=Object.freeze({__proto__:null,enable:db,disable:C0,isDisabled:eT,onLoad:Jx,set:(t,s,a,l)=>{(l?C0:db)(t,s)}}),tT=Object.freeze({__proto__:null,exhibit:(t,s)=>_i({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>ys([d2(di(),(a,l)=>eT(a,t)),Ry(t,s,Jx)])}),kA=[kr("disabled",ro),ke("useNative",!0),ms("disableClass"),Zo("onDisabled"),Zo("onEnabled")];const Ln=Nc({fields:kA,name:"disabling",active:tT,apis:Pp}),i=(t,s,a,l)=>{const d=sl(t.element,"."+s.highlightClass);ut(d,g=>{Gs(l,C=>Ko(C.element,g))||(Wr(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),Ro(C,Gh())}))})},m=(t,s,a)=>i(t,s,a,[]),p=(t,s,a,l)=>{Q(t,s,a,l)&&(Wr(l.element,s.highlightClass),s.onDehighlight(t,l),Ro(l,Gh()))},v=(t,s,a,l)=>{i(t,s,a,[l]),Q(t,s,a,l)||(ar(l.element,s.highlightClass),s.onHighlight(t,l),Ro(l,E1()))},T=(t,s,a)=>{ct(t,s).each(l=>{v(t,s,a,l)})},O=(t,s,a)=>{Lt(t,s).each(l=>{v(t,s,a,l)})},I=(t,s,a,l)=>{_e(t,s,a,l).fold(d=>{throw d},d=>{v(t,s,a,d)})},Z=(t,s,a,l)=>{const d=ot(t,s);An(d,l).each(h=>{v(t,s,a,h)})},Q=(t,s,a,l)=>Oi(l.element,s.highlightClass),ue=(t,s,a)=>Cs(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),_e=(t,s,a,l)=>{const d=sl(t.element,"."+s.itemClass);return A.from(d[l]).fold(()=>ao.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},ct=(t,s,a)=>Cs(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),Lt=(t,s,a)=>{const l=sl(t.element,"."+s.itemClass);return(l.length>0?A.some(l[l.length-1]):A.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Dt=(t,s,a,l)=>{const d=sl(t.element,"."+s.itemClass);return Xo(d,h=>Oi(h,s.highlightClass)).bind(h=>{const C=hp(h,l,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},Tt=(t,s,a)=>Dt(t,s,a,-1),on=(t,s,a)=>Dt(t,s,a,1),ot=(t,s,a)=>{const l=sl(t.element,"."+s.itemClass);return ha(Ze(l,d=>t.getSystem().getByDom(d).toOptional()))};var kt=Object.freeze({__proto__:null,dehighlightAll:m,dehighlight:p,highlight:v,highlightFirst:T,highlightLast:O,highlightAt:I,highlightBy:Z,isHighlighted:Q,getHighlighted:ue,getFirst:ct,getLast:Lt,getPrevious:Tt,getNext:on,getCandidates:ot}),Pn=[Qe("highlightClass"),Qe("itemClass"),Zo("onHighlight"),Zo("onDehighlight")];const Pt=Nc({fields:Pn,name:"highlighting",apis:kt}),us=[8],Ds=[9],Ts=[13],Lc=[27],Ba=[32],ym=[37],ag=[38],cg=[39],ws=[40],ql=(t,s,a)=>{const l=So(t.slice(0,s)),d=So(t.slice(s+1));return An(l.concat(d),a)},Kl=(t,s,a)=>{const l=So(t.slice(0,s));return An(l,a)},Eu=(t,s,a)=>{const l=t.slice(0,s),d=t.slice(s+1);return An(d.concat(l),a)},ku=(t,s,a)=>{const l=t.slice(s+1);return An(l,a)},Oo=t=>s=>{const a=s.raw;return vo(t,a.which)},oa=t=>s=>vt(t,a=>a(s)),Cm=t=>t.raw.shiftKey===!0,mb=t=>t.raw.ctrlKey===!0,$i=Ae(Cm),oo=(t,s)=>({matches:t,classification:s}),mw=(t,s)=>An(t,l=>l.matches(s)).map(l=>l.classification),fw=(t,s,a)=>{s.exists(d=>a.exists(g=>Ko(g,d)))||dn(t,x1(),{prevFocus:s,newFocus:a})},w0=()=>{const t=a=>Wl(a.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().triggerFocus(l,a.element);const g=t(a);fw(a,d,g)}}},nT=()=>{const t=a=>Pt.getHighlighted(a).map(l=>l.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().getByDom(l).fold(q,h=>{Pt.highlight(a,h)});const g=t(a);fw(a,d,g)}}};var yh;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(yh||(yh={}));const sf=(t,s,a,l,d)=>{const g=()=>t.concat([ke("focusManager",w0()),rr("focusInside","onFocus",bu(_=>vo(["onFocus","onEnterOrSpace","onApi"],_)?ao.value(_):ao.error("Invalid value for focusInside"))),cr("handler",w),cr("state",s),cr("sendFocusIn",d)]),h=(_,D,P,H,U)=>{const z=P(_,D,H,U);return mw(z,D.event).bind(ae=>ae(_,D,H,U))},w={schema:g,processKey:h,toEvents:(_,D)=>{const P=_.focusInside!==yh.OnFocusMode?A.none():d(_).map(z=>Ye(Zu(),(ae,Ee)=>{z(ae,_,D),Ee.stop()})),H=(z,ae)=>{const Ee=Oo(Ba.concat(Ts))(ae.event);_.focusInside===yh.OnEnterOrSpaceMode&&Ee&&Vm(z,ae)&&d(_).each(fe=>{fe(z,_,D),ae.stop()})},U=[Ye(qi(),(z,ae)=>{h(z,ae,a,_,D).fold(()=>{H(z,ae)},Ee=>{ae.stop()})}),Ye(s2(),(z,ae)=>{h(z,ae,l,_,D).each(Ee=>{ae.stop()})})];return ys(P.toArray().concat(U))}};return w},oT=t=>{const s=[ms("onEscape"),ms("onEnter"),ke("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ke("firstTabstop",0),ke("useTabstopAt",Wt),ms("visibilitySelector")].concat([t]),a=(fe,Se)=>{const Ce=fe.visibilitySelector.bind(We=>Ad(Se,We)).getOr(Se);return Ys(Ce)>0},l=(fe,Se)=>{const Ce=sl(fe.element,Se.selector),We=io(Ce,Ve=>a(Se,Ve));return A.from(We[Se.firstTabstop])},d=(fe,Se)=>Se.focusManager.get(fe).bind(Ce=>Ad(Ce,Se.selector)),g=(fe,Se)=>a(fe,Se)&&fe.useTabstopAt(Se),h=(fe,Se,Ce)=>{l(fe,Se).each(We=>{Se.focusManager.set(fe,We)})},C=(fe,Se,Ce,We,Ve)=>Ve(Se,Ce,gt=>g(We,gt)).fold(()=>We.cyclic?A.some(!0):A.none(),gt=>(We.focusManager.set(fe,gt),A.some(!0))),w=(fe,Se,Ce,We)=>{const Ve=sl(fe.element,Ce.selector);return d(fe,Ce).bind(gt=>Xo(Ve,cn(Ko,gt)).bind(Ue=>C(fe,Ve,Ue,Ce,We)))},_=(fe,Se,Ce)=>{const We=Ce.cyclic?ql:Kl;return w(fe,Se,Ce,We)},D=(fe,Se,Ce)=>{const We=Ce.cyclic?Eu:ku;return w(fe,Se,Ce,We)},P=fe=>Ja(fe).bind(Pl).exists(Se=>Ko(Se,fe)),H=(fe,Se,Ce)=>d(fe,Ce).filter(We=>!Ce.useTabstopAt(We)).bind(We=>(P(We)?_:D)(fe,Se,Ce)),U=(fe,Se,Ce)=>Ce.onEnter.bind(We=>We(fe,Se)),z=(fe,Se,Ce)=>Ce.onEscape.bind(We=>We(fe,Se)),ae=W([oo(oa([Cm,Oo(Ds)]),_),oo(Oo(Ds),D),oo(oa([$i,Oo(Ts)]),U)]),Ee=W([oo(Oo(Lc),z),oo(Oo(Ds),H)]);return sf(s,Sl.init,ae,Ee,()=>A.some(h))};var fb=oT(hc("cyclic",ro)),_F=oT(hc("cyclic",Wt));const gw=(t,s,a)=>(k1(t,a,di()),A.some(!0)),S0=(t,s,a)=>Np(a)&&Oo(Ba)(s.event)?A.none():gw(t,s,a),gb=(t,s)=>A.some(!0),_A=[ke("execute",S0),ke("useSpace",!1),ke("useEnter",!0),ke("useControlEnter",!1),ke("useDown",!1)],FR=(t,s,a)=>a.execute(t,s,t.element),HR=(t,s,a,l)=>{const d=a.useSpace&&!Np(t.element)?Ba:[],g=a.useEnter?Ts:[],h=a.useDown?ws:[],C=d.concat(g).concat(h);return[oo(Oo(C),FR)].concat(a.useControlEnter?[oo(oa([mb,Oo(Ts)]),FR)]:[])},AF=(t,s,a,l)=>a.useSpace&&!Np(t.element)?[oo(Oo(Ba),gb)]:[];var VR=sf(_A,Sl.init,HR,AF,()=>A.none());const AA=()=>{const t=os();return Ai({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var OF=Object.freeze({__proto__:null,flatgrid:AA,init:t=>t.state(t)});const zR=t=>(s,a,l,d)=>{const g=t(s.element);return hw(g,s,a,l,d)},OA=(t,s)=>{const a=Hv(t,s);return zR(a)},DA=(t,s)=>{const a=Hv(s,t);return zR(a)},RA=t=>(s,a,l,d)=>hw(t,s,a,l,d),hw=(t,s,a,l,d)=>l.focusManager.get(s).bind(h=>t(s.element,h,l,d)).map(h=>(l.focusManager.set(s,h),!0)),sT=RA,UR=RA,MA=RA,WR=t=>t.offsetWidth<=0&&t.offsetHeight<=0,ZR=t=>!WR(t.dom),DF=(t,s)=>Xo(t,s).map(a=>({index:a,candidates:t})),Ju=(t,s,a)=>{const l=h=>Ko(h,s),d=sl(t,a),g=io(d,ZR);return DF(g,l)},jR=(t,s)=>Xo(t,a=>Ko(s,a)),GR=(t,s,a,l)=>{const d=Math.floor(s/a),g=s%a;return l(d,g).bind(h=>{const C=h.row*a+h.column;return C>=0&&C<t.length?A.some(t[C]):A.none()})},qR=(t,s,a,l,d)=>GR(t,s,l,(g,h)=>{const w=g===a-1?t.length-g*l:l,_=hp(h,d,0,w-1);return A.some({row:g,column:_})}),KR=(t,s,a,l,d)=>GR(t,s,l,(g,h)=>{const C=hp(g,d,0,a-1),_=C===a-1?t.length-C*l:l,D=Ku(h,0,_-1);return A.some({row:C,column:D})}),RF=(t,s,a,l)=>qR(t,s,a,l,1),x0=(t,s,a,l)=>qR(t,s,a,l,-1),NA=(t,s,a,l)=>KR(t,s,a,l,-1),MF=(t,s,a,l)=>KR(t,s,a,l,1),PA=[Qe("selector"),ke("execute",S0),zl("onEscape"),ke("captureTab",!1),pv()],rT=(t,s,a)=>{Cs(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},BA=(t,s)=>s.focusManager.get(t).bind(a=>Ad(a,s.selector)),NF=(t,s,a,l)=>BA(t,a).bind(d=>a.execute(t,s,d)),aT=t=>(s,a,l,d)=>Ju(s,a,l.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),YR=(t,s,a)=>a.captureTab?A.some(!0):A.none(),PF=(t,s,a)=>a.onEscape(t,s),XR=aT(x0),JR=aT(RF),QR=aT(NA),$A=aT(MF),BF=W([oo(Oo(ym),OA(XR,JR)),oo(Oo(cg),DA(XR,JR)),oo(Oo(ag),sT(QR)),oo(Oo(ws),UR($A)),oo(oa([Cm,Oo(Ds)]),YR),oo(oa([$i,Oo(Ds)]),YR),oo(Oo(Ba.concat(Ts)),NF)]),$F=W([oo(Oo(Lc),PF),oo(Oo(Ba),gb)]);var IF=sf(PA,AA,BF,$F,()=>A.some(rT));const eM=(t,s,a,l,d)=>{const g=C=>aa(C)==="button"&&Ns(C,"disabled")==="disabled",h=(C,w,_)=>d(C,w,l,0,_.length-1,_[w],D=>g(_[D])?h(C,D,_):A.from(_[D]));return Ju(t,a,s).bind(C=>{const w=C.index,_=C.candidates;return h(w,w,_)})},Bp=(t,s,a,l)=>eM(t,s,a,l,(d,g,h,C,w,_,D)=>{const P=Ku(g+h,C,w);return P===d?A.from(_):D(P)}),pw=(t,s,a,l)=>eM(t,s,a,l,(d,g,h,C,w,_,D)=>{const P=hp(g,h,C,w);return P===d?A.none():D(P)}),LF=[Qe("selector"),ke("getInitial",A.none),ke("execute",S0),zl("onEscape"),ke("executeOnMove",!1),ke("allowVertical",!0),ke("allowHorizontal",!0),ke("cycles",!0)],IA=(t,s)=>s.focusManager.get(t).bind(a=>Ad(a,s.selector)),LA=(t,s,a)=>IA(t,a).bind(l=>a.execute(t,s,l)),tM=(t,s,a)=>{s.getInitial(t).orThunk(()=>Cs(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},FA=(t,s,a)=>(a.cycles?pw:Bp)(t,a.selector,s,-1),HA=(t,s,a)=>(a.cycles?pw:Bp)(t,a.selector,s,1),VA=t=>(s,a,l,d)=>t(s,a,l,d).bind(()=>l.executeOnMove?LA(s,a,l):A.some(!0)),nM=(t,s,a)=>a.onEscape(t,s),FF=(t,s,a,l)=>{const d=[...a.allowHorizontal?ym:[]].concat(a.allowVertical?ag:[]),g=[...a.allowHorizontal?cg:[]].concat(a.allowVertical?ws:[]);return[oo(Oo(d),VA(OA(FA,HA))),oo(Oo(g),VA(DA(FA,HA))),oo(Oo(Ts),LA),oo(Oo(Ba),LA)]},HF=W([oo(Oo(Ba),gb),oo(Oo(Lc),nM)]);var VF=sf(LF,Sl.init,FF,HF,()=>A.some(tM));const T0=(t,s,a)=>A.from(t[s]).bind(l=>A.from(l[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),oM=(t,s,a,l)=>{const g=t[s].length,h=hp(a,l,0,g-1);return T0(t,s,h)},bw=(t,s,a,l)=>{const d=hp(a,l,0,t.length-1),g=t[d].length,h=Ku(s,0,g-1);return T0(t,d,h)},sM=(t,s,a,l)=>{const g=t[s].length,h=Ku(a+l,0,g-1);return T0(t,s,h)},zA=(t,s,a,l)=>{const d=Ku(a+l,0,t.length-1),g=t[d].length,h=Ku(s,0,g-1);return T0(t,d,h)},Ii=(t,s,a)=>oM(t,s,a,1),zF=(t,s,a)=>oM(t,s,a,-1),rM=(t,s,a)=>bw(t,a,s,-1),aM=(t,s,a)=>bw(t,a,s,1),UF=(t,s,a)=>sM(t,s,a,-1),cM=(t,s,a)=>sM(t,s,a,1),lM=(t,s,a)=>zA(t,a,s,-1),WF=(t,s,a)=>zA(t,a,s,1),ZF=[nm("selectors",[Qe("row"),Qe("cell")]),ke("cycles",!0),ke("previousSelector",A.none),ke("execute",S0)],jF=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Cs(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},GF=(t,s,a)=>Wl(t.element).bind(l=>a.execute(t,s,l)),iM=(t,s)=>Ze(t,a=>sl(a,s.selectors.cell)),cT=(t,s)=>(a,l,d)=>{const g=d.cycles?t:s;return Ad(l,d.selectors.row).bind(h=>{const C=sl(h,d.selectors.cell);return jR(C,l).bind(w=>{const _=sl(a,d.selectors.row);return jR(_,h).bind(D=>{const P=iM(_,d);return g(P,D,w).map(H=>H.cell)})})})},uM=cT(zF,UF),UA=cT(Ii,cM),dM=cT(rM,lM),mM=cT(aM,WF),qF=W([oo(Oo(ym),OA(uM,UA)),oo(Oo(cg),DA(uM,UA)),oo(Oo(ag),sT(dM)),oo(Oo(ws),UR(mM)),oo(Oo(Ba.concat(Ts)),GF)]),KF=W([oo(Oo(Ba),gb)]);var YF=sf(ZF,Sl.init,qF,KF,()=>A.some(jF));const XF=[Qe("selector"),ke("execute",S0),ke("moveOnTab",!1)],WA=(t,s,a)=>a.focusManager.get(t).bind(l=>a.execute(t,s,l)),fM=(t,s,a)=>{Cs(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},Ch=(t,s,a)=>pw(t,a.selector,s,-1),ZA=(t,s,a)=>pw(t,a.selector,s,1),gM=(t,s,a,l)=>a.moveOnTab?MA(Ch)(t,s,a,l):A.none(),jA=(t,s,a,l)=>a.moveOnTab?MA(ZA)(t,s,a,l):A.none(),JF=W([oo(Oo(ag),MA(Ch)),oo(Oo(ws),MA(ZA)),oo(oa([Cm,Oo(Ds)]),gM),oo(oa([$i,Oo(Ds)]),jA),oo(Oo(Ts),WA),oo(Oo(Ba),WA)]),QF=W([oo(Oo(Ba),gb)]);var e6=sf(XF,Sl.init,JF,QF,()=>A.some(fM));const t6=[zl("onSpace"),zl("onEnter"),zl("onShiftEnter"),zl("onLeft"),zl("onRight"),zl("onTab"),zl("onShiftTab"),zl("onUp"),zl("onDown"),zl("onEscape"),ke("stopSpaceKeyup",!1),ms("focusIn")],hM=(t,s,a)=>[oo(Oo(Ba),a.onSpace),oo(oa([$i,Oo(Ts)]),a.onEnter),oo(oa([Cm,Oo(Ts)]),a.onShiftEnter),oo(oa([Cm,Oo(Ds)]),a.onShiftTab),oo(oa([$i,Oo(Ds)]),a.onTab),oo(Oo(ag),a.onUp),oo(Oo(ws),a.onDown),oo(Oo(ym),a.onLeft),oo(Oo(cg),a.onRight),oo(Oo(Ba),a.onSpace)],GA=(t,s,a)=>[...a.stopSpaceKeyup?[oo(Oo(Ba),gb)]:[],oo(Oo(Lc),a.onEscape)];var qA=sf(t6,Sl.init,hM,GA,t=>t.focusIn);const n6=fb.schema(),$p=_F.schema(),pM=VF.schema(),bM=IF.schema(),o6=YF.schema(),s6=VR.schema(),vw=e6.schema(),yw=qA.schema();var vM=Object.freeze({__proto__:null,acyclic:n6,cyclic:$p,flow:pM,flatgrid:bM,matrix:o6,execution:s6,menu:vw,special:yw});const yM=t=>Dr(t,"setGridSize"),mn=b2({branchKey:"mode",branches:vM,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,a)})},setGridSize:(t,s,a,l,d)=>{yM(a)?a.setGridSize(l,d):console.error("Layout does not support setGridSize")}},state:OF}),wh=(t,s)=>{Gf(()=>{kp(t,s,()=>Ze(s,t.getSystem().build))},t.element)},CM=(t,s)=>{Gf(()=>{ZC(t,s,()=>V1(t.element,s,t.getSystem().buildOrPatch))},t.element)},r6=(t,s,a,l)=>{n0(s);const d=wu(t.element,a,l,t.getSystem().buildOrPatch);UC(t,d),t.syncComponents()},lT=(t,s,a)=>{const l=t.getSystem().build(a);fh(t,l,s)},Sh=(t,s,a,l)=>{ef(s),lT(t,(d,g)=>Oa(d,g,a),l)},KA=(t,s,a,l)=>(s.reuseDom?CM:wh)(t,l),a6=(t,s,a,l)=>{lT(t,jc,l)},wM=(t,s,a,l)=>{lT(t,Pg,l)},SM=(t,s,a,l)=>{const d=Cw(t);An(d,h=>Ko(l.element,h.element)).each(ef)},Cw=(t,s)=>t.components(),iT=(t,s,a,l,d)=>{const g=Cw(t);return A.from(g[l]).map(h=>(d.fold(()=>ef(h),C=>{(s.reuseDom?r6:Sh)(t,h,l,C)}),h))};var l6=Object.freeze({__proto__:null,append:a6,prepend:wM,remove:SM,replaceAt:iT,replaceBy:(t,s,a,l,d)=>{const g=Cw(t);return Xo(g,l).bind(h=>iT(t,s,a,h,d))},set:KA,contents:Cw});const Kn=Nc({fields:[pc("reuseDom",!0)],name:"replacing",apis:l6}),i6=(t,s)=>{const a=ys(s);return Nc({fields:[Qe("enabled")],name:t,active:{events:W(a)}})},co=(t,s)=>{const a=i6(t,s);return{key:t,value:{config:{},me:a,configAsRaw:W({}),initialConfig:{},state:Sl}}},uT=(t,s)=>{s.ignore||(Ki(t.element),s.onFocus(t))};var u6=Object.freeze({__proto__:null,focus:uT,blur:(t,s)=>{s.ignore||W1(t.element)},isFocused:t=>Z1(t.element)}),TM=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return _i(a)},events:t=>ys([Ye(Zu(),(s,a)=>{uT(s,t),a.stop()})].concat(t.stopMousedown?[Ye(ui(),(s,a)=>{a.event.prevent()})]:[]))}),EM=[Zo("onFocus"),ke("stopMousedown",!1),ke("ignore",!1)];const Vn=Nc({fields:EM,name:"focusing",active:TM,apis:u6}),YA=t=>({init:()=>{const a=gn(t);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(t),readState:()=>a.get()}}}),f6=(t,s,a)=>{const l=s.aria;l.update(t,l,a.get())},g6=(t,s,a)=>{s.toggleClass.each(l=>{a.get()?ar(t.element,l):Wr(t.element,l)})},ww=(t,s,a,l)=>{const d=a.get();a.set(l),g6(t,s,a),f6(t,s,a),d!==l&&s.onToggled(t,l)},kM=(t,s,a)=>{ww(t,s,a,!a.get())},_M=(t,s,a)=>{ww(t,s,a,!0)},h6=(t,s,a)=>{ww(t,s,a,!1)},p6=(t,s,a)=>a.get(),XA=(t,s,a)=>{ww(t,s,a,s.selected)};var Sw=Object.freeze({__proto__:null,onLoad:XA,toggle:kM,isOn:p6,on:_M,off:h6,set:ww}),JA=Object.freeze({__proto__:null,exhibit:()=>_i({}),events:(t,s)=>{const a=D1(t,s,kM),l=Ry(t,s,XA);return ys(tn([t.toggleOnExecute?[a]:[],[l]]))}});const AM=(t,s,a)=>{Ot(t.element,"aria-pressed",a),s.syncWithExpanded&&DM(t,s,a)},OM=(t,s,a)=>{Ot(t.element,"aria-selected",a)},b6=(t,s,a)=>{Ot(t.element,"aria-checked",a)},DM=(t,s,a)=>{Ot(t.element,"aria-expanded",a)};var RM=[ke("selected",!1),ms("toggleClass"),ke("toggleOnExecute",!0),Zo("onToggled"),rr("aria",{mode:"none"},Fl("mode",{pressed:[ke("syncWithExpanded",!1),cr("update",AM)],checked:[cr("update",b6)],expanded:[cr("update",DM)],selected:[cr("update",OM)],none:[cr("update",q)]}))];const yo=Nc({fields:RM,name:"toggling",active:JA,apis:Sw,state:YA(!1)}),QA=()=>{const t=(s,a)=>{a.stop(),Pf(s)};return[Ye(Wg(),t),Ye(tv(),t),Sd(Do()),Sd(ui())]},mT=t=>{const s=a=>qu((l,d)=>{a(l),d.stop()});return ys(tn([t.map(s).toArray(),QA()]))},MM="alloy.item-hover",eO="alloy.item-focus",xw="alloy.item-toggled",fT=t=>{(Wl(t.element).isNone()||Vn.isFocused(t))&&(Vn.isFocused(t)||Vn.focus(t),dn(t,MM,{item:t}))},gT=t=>{dn(t,eO,{item:t})},v6=(t,s)=>{dn(t,xw,{item:t,state:s})},NM=W(MM),y6=W(eO),C6=W(xw),PM=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),BM=t=>({aria:{mode:"checked"},...ir(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{tt(t.onToggled)&&t.onToggled(s,a),v6(s,a)}}),w6=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:PM(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:xu.augment(t.itemBehaviours,[t.toggling.fold(yo.revoke,s=>yo.config(BM(s))),Vn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{gT(s)}}),mn.config({mode:"execution"}),Zt.config({store:{mode:"memory",initialValue:t.data}}),co("item-type-events",[...QA(),Ye(am(),fT),Ye(C1(),Vn.focus)])]),components:t.components,eventOrder:t.eventOrder}),S6=[Qe("data"),Qe("components"),Qe("dom"),ke("hasSubmenu",!1),ms("toggling"),xu.field("itemBehaviours",[yo,Vn,mn,Zt]),ke("ignoreFocus",!1),ke("domModification",{}),cr("builder",w6),ke("eventOrder",{})],x6=t=>({dom:t.dom,components:t.components,events:ys([Oy(C1())])}),T6=[Qe("dom"),Qe("components"),cr("builder",x6)],tO=W("item-widget"),nO=W([Yc({name:"widget",overrides:t=>({behaviours:ft([Zt.config({store:{mode:"manual",getValue:s=>t.data,setValue:q}})])})})]),$M=t=>{const s=v0(tO(),t,nO()),a=rw(tO(),t,s.internals()),l=g=>ht(g,t,"widget").map(h=>(mn.focusIn(h),h)),d=(g,h)=>Np(h.event.target)?A.none():(t.autofocus&&h.setSource(g.element),A.none());return{dom:t.dom,components:a,domModification:t.domModification,events:ys([qu((g,h)=>{l(g).each(C=>{h.stop()})}),Ye(am(),fT),Ye(C1(),(g,h)=>{t.autofocus?l(g):Vn.focus(g)})]),behaviours:xu.augment(t.widgetBehaviours,[Zt.config({store:{mode:"memory",initialValue:t.data}}),Vn.config({ignore:t.ignoreFocus,onFocus:g=>{gT(g)}}),mn.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:hr(),onLeft:d,onRight:d,onEscape:(g,h)=>!Vn.isFocused(g)&&!t.autofocus?(Vn.focus(g),A.some(!0)):(t.autofocus&&h.setSource(g.element),A.none())})])}},E6=[Qe("uid"),Qe("data"),Qe("components"),Qe("dom"),ke("autofocus",!1),ke("ignoreFocus",!1),xu.field("widgetBehaviours",[Zt,Vn,mn]),ke("domModification",{}),ib(nO()),cr("builder",$M)],k6=Fl("type",{widget:E6,item:S6,separator:T6}),_6=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),A6=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),O6=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),hb=W([p0({factory:{sketch:t=>{const s=st("menu.spec item",k6,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>po(s,"uid")?s:{...s,uid:eh("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),D6=W([Qe("value"),Qe("items"),Qe("dom"),Qe("components"),ke("eventOrder",{}),wc("menuBehaviours",[Pt,Zt,jo,mn]),rr("movement",{mode:"menu",moveOnTab:!0},Fl("mode",{grid:[pv(),cr("config",_6)],matrix:[cr("config",A6),Qe("rowSelector"),ke("previousSelector",A.none)],menu:[ke("moveOnTab",!0),cr("config",O6)]})),l_(),ke("fakeFocus",!1),ke("focusManager",w0()),Zo("onHighlight"),Zo("onDehighlight"),ke("menuRole",!0)]),IM=W("alloy.menu-focus"),pb=(t,s)=>{const a=sl(t.element,'[role="menuitemradio"][aria-checked="true"]');ut(a,l=>{Ko(l,s.element)||t.getSystem().getByDom(l).each(d=>{yo.off(d)})})},LM=(t,s,a,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Sc(t.menuBehaviours,[Pt.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Zt.config({store:{mode:"memory",initialValue:t.value}}),jo.config({find:A.some}),mn.config(t.movement.config(t,t.movement))]),events:ys([Ye(y6(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{Pt.highlight(d,C),g.stop(),dn(d,IM(),{menu:d,item:C})})}),Ye(NM(),(d,g)=>{const h=g.event.item;Pt.highlight(d,h)}),Ye(C6(),(d,g)=>{const{item:h,state:C}=g.event;C&&Ns(h.element,"role")==="menuitemradio"&&pb(d,h)})]),components:s,eventOrder:t.eventOrder,...t.menuRole?{domModification:{attributes:{role:"menu"}}}:{}}),bb=_l({name:"Menu",configFields:D6(),partFields:hb(),factory:LM}),Ip=t=>rn(t,(s,a)=>({k:s,v:a})),FM=(t,s,a,l)=>mt(a,l).bind(d=>mt(t,d).bind(g=>{const h=FM(t,s,a,g);return A.some([g].concat(h))})).getOr([]),R6=(t,s)=>{const a={};Ne(t,(h,C)=>{ut(h,w=>{a[w]=C})});const l=s,d=Ip(s),g=Xe(d,(h,C)=>[C].concat(FM(a,l,d,C)));return Xe(a,h=>mt(g,h).getOr([h]))},Md=()=>{const t=gn({}),s=gn({}),a=gn({}),l=os(),d=gn({}),g=()=>{t.set({}),s.set({}),a.set({}),l.clear()},h=()=>l.get().isNone(),C=(Ve,gt)=>{s.set({...s.get(),[Ve]:{type:"prepared",menu:gt}})},w=(Ve,gt,dt,Ue)=>{l.set(Ve),t.set(dt),s.set(gt),d.set(Ue);const Wn=R6(Ue,dt);a.set(Wn)},_=Ve=>cs(t.get(),(gt,dt)=>gt===Ve),D=(Ve,gt,dt)=>ae(Ve).bind(Ue=>_(Ve).bind(Wn=>gt(Wn).map(en=>({triggeredMenu:Ue,triggeringItem:en,triggeringPath:dt})))),P=(Ve,gt)=>{const dt=io(fe(Ve).toArray(),Ue=>ae(Ue).isSome());return mt(a.get(),Ve).bind(Ue=>{const Wn=So(dt.concat(Ue)),en=we(Wn,(Mn,xn)=>D(Mn,gt,Wn.slice(0,xn+1)).fold(()=>fa(l.get(),Mn)?[]:[A.none()],ds=>[A.some(ds)]));return ls(en)})},H=Ve=>mt(t.get(),Ve).map(gt=>{const dt=mt(a.get(),Ve).getOr([]);return[gt].concat(dt)}),U=Ve=>mt(a.get(),Ve).bind(gt=>gt.length>1?A.some(gt.slice(1)):A.none()),z=Ve=>mt(a.get(),Ve),ae=Ve=>Ee(Ve).bind(oO),Ee=Ve=>mt(s.get(),Ve),fe=Ve=>mt(t.get(),Ve);return{setMenuBuilt:C,setContents:w,expand:H,refresh:z,collapse:U,lookupMenu:Ee,lookupItem:fe,otherMenus:Ve=>{const gt=d.get();return It(es(gt),Ve)},getPrimary:()=>l.get().bind(ae),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:P}},oO=t=>t.type==="prepared"?A.some(t.menu):A.none(),sO={init:Md,extractPreparedMenu:oO},rO=jt("tiered-menu-item-highlight"),HM=jt("tiered-menu-item-dehighlight");var Yl;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Yl||(Yl={}));const M6=(t,s)=>{const a=os(),l=(Et,sn,so)=>Xe(so,(In,_n)=>{const Qn=()=>bb.sketch({...In,value:_n,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Vs,fs)=>{dn(Vs,rO,{menuComp:Vs,itemComp:fs})},onDehighlight:(Vs,fs)=>{dn(Vs,HM,{menuComp:Vs,itemComp:fs})},focusManager:t.fakeFocus?nT():w0()});return _n===sn?{type:"prepared",menu:Et.getSystem().build(Qn())}:{type:"notbuilt",nbMenu:Qn}}),d=sO.init(),g=Et=>{const sn=l(Et,t.data.primary,t.data.menus),so=w();return d.setContents(t.data.primary,sn,t.data.expansions,so),d.getPrimary()},h=Et=>Zt.getValue(Et).value,C=(Et,sn,so)=>gs(sn,In=>{if(!In.getSystem().isConnected())return A.none();const _n=Pt.getCandidates(In);return An(_n,Qn=>h(Qn)===so)}),w=Et=>Xe(t.data.menus,(sn,so)=>we(sn.items,In=>In.type==="separator"?[]:[In.data.value])),_=Pt.highlight,D=(Et,sn)=>{_(Et,sn),Pt.getHighlighted(sn).orThunk(()=>Pt.getFirst(sn)).each(so=>{t.fakeFocus?Pt.highlight(sn,so):k1(Et,so.element,C1())})},P=(Et,sn)=>ha(Ze(sn,so=>Et.lookupMenu(so).bind(In=>In.type==="prepared"?A.some(In.menu):A.none()))),H=(Et,sn,so)=>{const In=P(sn,sn.otherMenus(so));ut(In,_n=>{Di(_n.element,[t.markers.backgroundMenu]),t.stayInDom||Kn.remove(Et,_n)})},U=Et=>a.get().getOrThunk(()=>{const sn={},so=sl(Et.element,`.${t.markers.item}`),In=io(so,_n=>Ns(_n,"aria-haspopup")==="true");return ut(In,_n=>{Et.getSystem().getByDom(_n).each(Qn=>{const Vs=h(Qn);sn[Vs]=Qn})}),a.set(sn),sn}),z=(Et,sn)=>{const so=U(Et);Ne(so,(In,_n)=>{const Qn=vo(sn,_n);Ot(In.element,"aria-expanded",Qn)})},ae=(Et,sn,so)=>A.from(so[0]).bind(In=>sn.lookupMenu(In).bind(_n=>{if(_n.type==="notbuilt")return A.none();{const Qn=_n.menu,Vs=P(sn,so.slice(1));return ut(Vs,fs=>{ar(fs.element,t.markers.backgroundMenu)}),No(Qn.element)||Kn.append(Et,Tl(Qn)),Di(Qn.element,[t.markers.backgroundMenu]),D(Et,Qn),H(Et,sn,so),A.some(Qn)}}));let Ee;(function(Et){Et[Et.HighlightSubmenu=0]="HighlightSubmenu",Et[Et.HighlightParent=1]="HighlightParent"})(Ee||(Ee={}));const fe=(Et,sn,so)=>{if(so.type==="notbuilt"){const In=Et.getSystem().build(so.nbMenu());return d.setMenuBuilt(sn,In),In}else return so.menu},Se=(Et,sn,so=Ee.HighlightSubmenu)=>{if(sn.hasConfigured(Ln)&&Ln.isDisabled(sn))return A.some(sn);{const In=h(sn);return d.expand(In).bind(_n=>(z(Et,_n),A.from(_n[0]).bind(Qn=>d.lookupMenu(Qn).bind(Vs=>{const fs=fe(Et,Qn,Vs);return No(fs.element)||Kn.append(Et,Tl(fs)),t.onOpenSubmenu(Et,sn,fs,So(_n)),so===Ee.HighlightSubmenu?(Pt.highlightFirst(fs),ae(Et,d,_n)):(Pt.dehighlightAll(fs),A.some(sn))}))))}},Ce=(Et,sn)=>{const so=h(sn);return d.collapse(so).bind(In=>(z(Et,In),ae(Et,d,In).map(_n=>(t.onCollapseMenu(Et,sn,_n),_n))))},We=(Et,sn)=>{const so=h(sn);return d.refresh(so).bind(In=>(z(Et,In),ae(Et,d,In)))},Ve=(Et,sn)=>Np(sn.element)?A.none():Se(Et,sn,Ee.HighlightSubmenu),gt=(Et,sn)=>Np(sn.element)?A.none():Ce(Et,sn),dt=(Et,sn)=>Ce(Et,sn).orThunk(()=>t.onEscape(Et,sn).map(()=>Et)),Ue=Et=>(sn,so)=>Ad(so.getSource(),`.${t.markers.item}`).bind(In=>sn.getSystem().getByDom(In).toOptional().bind(_n=>Et(sn,_n).map(Wt))),Wn=ys([Ye(IM(),(Et,sn)=>{const so=sn.event.item;d.lookupItem(h(so)).each(()=>{const In=sn.event.menu;Pt.highlight(Et,In);const _n=h(sn.event.item);d.refresh(_n).each(Qn=>H(Et,d,Qn))})}),qu((Et,sn)=>{const so=sn.event.target;Et.getSystem().getByDom(so).each(In=>{h(In).indexOf("collapse-item")===0&&Ce(Et,In),Se(Et,In,Ee.HighlightSubmenu).fold(()=>{t.onExecute(Et,In)},q)})}),_r((Et,sn)=>{g(Et).each(so=>{Kn.append(Et,Tl(so)),t.onOpenMenu(Et,so),t.highlightOnOpen===Yl.HighlightMenuAndItem?D(Et,so):t.highlightOnOpen===Yl.HighlightJustMenu&&_(Et,so)})}),Ye(rO,(Et,sn)=>{t.onHighlightItem(Et,sn.event.menuComp,sn.event.itemComp)}),Ye(HM,(Et,sn)=>{t.onDehighlightItem(Et,sn.event.menuComp,sn.event.itemComp)}),...t.navigateOnHover?[Ye(NM(),(Et,sn)=>{const so=sn.event.item;We(Et,so),Se(Et,so,Ee.HighlightParent),t.onHover(Et,so)})]:[]]),en=Et=>Pt.getHighlighted(Et).bind(Pt.getHighlighted),Mn=Et=>{en(Et).each(sn=>{Ce(Et,sn)})},xn=Et=>{d.getPrimary().each(sn=>{D(Et,sn)})},ds=Et=>A.from(Et.components()[0]).filter(sn=>Ns(sn.element,"role")==="menu"),Eo={collapseMenu:Mn,highlightPrimary:xn,repositionMenus:Et=>{d.getPrimary().bind(so=>en(Et).bind(In=>{const _n=h(In),Qn=ur(d.getMenus()),Vs=ha(Ze(Qn,sO.extractPreparedMenu));return d.getTriggeringPath(_n,fs=>C(Et,Vs,fs))}).map(In=>({primary:so,triggeringPath:In}))).fold(()=>{ds(Et).each(so=>{t.onRepositionMenu(Et,so,[])})},({primary:so,triggeringPath:In})=>{t.onRepositionMenu(Et,so,In)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Sc(t.tmenuBehaviours,[mn.config({mode:"special",onRight:Ue(Ve),onLeft:Ue(gt),onEscape:Ue(dt),focusIn:(Et,sn)=>{d.getPrimary().each(so=>{k1(Et,so.element,C1())})}}),Pt.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),jo.config({find:Et=>Pt.getHighlighted(Et)}),Kn.config({})]),eventOrder:t.eventOrder,apis:Eo,events:Wn}},N6=W("collapse-item"),P6=(t,s,a)=>({primary:t,menus:s,expansions:a}),hT=(t,s)=>({primary:t,menus:vs(t,s),expansions:{}}),aO=t=>({value:jt(N6()),meta:{text:t}}),Lp=gi({name:"TieredMenu",configFields:[Gm("onExecute"),Gm("onEscape"),Cu("onOpenMenu"),Cu("onOpenSubmenu"),Zo("onRepositionMenu"),Zo("onCollapseMenu"),ke("highlightOnOpen",Yl.HighlightMenuAndItem),nm("data",[Qe("primary"),Qe("menus"),Qe("expansions")]),ke("fakeFocus",!1),Zo("onHighlightItem"),Zo("onDehighlightItem"),Zo("onHover"),Qg(),Qe("dom"),ke("navigateOnHover",!0),ke("stayInDom",!1),wc("tmenuBehaviours",[mn,Pt,jo,Kn]),ke("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:M6,extraApis:{tieredData:P6,singleData:hT,collapseItem:aO}}),VM=(t,s,a,l,d)=>{const g=()=>t.lazySink(s),h=l.type==="horizontal"?{layouts:{onLtr:()=>Rv(),onRtl:()=>nh()}}:{},C=_=>_.length===2,w=_=>C(_)?h:{};return Lp.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(Yo.close(s),t.onEscape.map(_=>_(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(_,D)=>{Ic.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(_,D,P,H)=>{const U=g().getOrDie();Ic.position(U,P,{anchor:{type:"submenu",item:D,...w(H)}})},onRepositionMenu:(_,D,P)=>{const H=g().getOrDie();Ic.positionWithinBounds(H,D,a,d()),ut(P,U=>{const z=w(U.triggeringPath);Ic.position(H,U.triggeredMenu,{anchor:{type:"submenu",item:U.triggeringItem,...z}})})}})},zM=(t,s)=>{const a=(H,U)=>t.getRelated(H).exists(ae=>zf(ae,U)),l=(H,U)=>{Yo.setContent(H,U)},d=(H,U,z)=>{const ae=A.none;g(H,U,z,ae)},g=(H,U,z,ae)=>{const Ee=t.lazySink(H).getOrDie();Yo.openWhileCloaked(H,U,()=>Ic.positionWithinBounds(Ee,H,z,ae())),Zt.setValue(H,A.some({mode:"position",config:z,getBounds:ae}))},h=(H,U,z)=>{C(H,U,z,A.none)},C=(H,U,z,ae)=>{const Ee=VM(t,H,U,z,ae);Yo.open(H,Ee),Zt.setValue(H,A.some({mode:"menu",menu:Ee}))},w=H=>{Yo.isOpen(H)&&(Zt.setValue(H,A.none()),Yo.close(H))},_=H=>Yo.getState(H),D=H=>{Yo.isOpen(H)&&Zt.getValue(H).each(U=>{switch(U.mode){case"menu":Yo.getState(H).each(Lp.repositionMenus);break;case"position":const z=t.lazySink(H).getOrDie();Ic.positionWithinBounds(z,H,U.config,U.getBounds());break}})},P={setContent:l,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:w,getContent:_,reposition:D,isOpen:Yo.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Sc(t.inlineBehaviours,[Yo.config({isPartOf:(H,U,z)=>zf(U,z)||a(H,z),getAttachPoint:H=>t.lazySink(H).getOrDie(),onOpen:H=>{t.onShow(H)},onClose:H=>{t.onHide(H)}}),Zt.config({store:{mode:"memory",initialValue:A.none()}}),fi.config({channels:{...tf({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({})}),...r0({...t.fireRepositionEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({}),doReposition:D})}})]),eventOrder:t.eventOrder,apis:P}},Zr=gi({name:"InlineView",configFields:[Qe("lazySink"),Zo("onShow"),Zo("onHide"),om("onEscape"),wc("inlineBehaviours",[Yo,Zt,fi]),qr("fireDismissalEventInstead",[ke("event",Wm())]),qr("fireRepositionEventInstead",[ke("event",_y())]),ke("getRelated",A.none),ke("isExtraPart",ro),ke("eventOrder",A.none)],factory:zM,apis:{showAt:(t,s,a,l)=>{t.showAt(s,a,l)},showWithinBounds:(t,s,a,l,d)=>{t.showWithinBounds(s,a,l,d)},showMenuAt:(t,s,a,l)=>{t.showMenuAt(s,a,l)},showMenuWithinBounds:(t,s,a,l,d)=>{t.showMenuWithinBounds(s,a,l,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var E0=tinymce.util.Tools.resolve("tinymce.util.Delay"),vb=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),B6=tinymce.util.Tools.resolve("tinymce.EditorManager"),k0=tinymce.util.Tools.resolve("tinymce.Env"),Nd;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Nd||(Nd={}));var yb;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(yb||(yb={}));const Js=t=>s=>s.options.get(t),xh=t=>s=>A.from(t(s)),Tw=t=>{const s=k0.deviceType.isPhone(),a=k0.deviceType.isTablet()||s,l=t.options.register,d=h=>Mt(h)||h===!1,g=h=>Mt(h)||jn(h);l("skin",{processor:h=>Mt(h)||h===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:vb.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:h=>Mt(h)||Sn(h),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:h=>Sn(h)||Mt(h)||Cn(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),mo(9,h=>{l("toolbar"+(h+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:yb.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:h=>h==="both"||Sn(h),default:!k0.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},cO=Js("readonly"),pT=Js("height"),lO=Js("width"),iO=xh(Js("min_width")),uO=xh(Js("min_height")),bT=xh(Js("max_width")),Ew=xh(Js("max_height")),dO=xh(Js("style_formats")),mO=Js("style_formats_merge"),vT=Js("style_formats_autohide"),UM=Js("content_langs"),fO=Js("removed_menuitems"),_0=Js("toolbar_mode"),WM=Js("toolbar_groups"),gO=Js("toolbar_location"),ZM=Js("fixed_toolbar_container"),$6=Js("fixed_toolbar_container_target"),jM=Js("toolbar_persist"),yT=Js("toolbar_sticky_offset"),hO=Js("menubar"),kw=Js("toolbar"),GM=Js("file_picker_callback"),CT=Js("file_picker_validator_handler"),qM=Js("font_size_input_default_unit"),KM=Js("file_picker_types"),YM=Js("typeahead_urls"),XM=Js("anchor_top"),JM=Js("anchor_bottom"),pO=Js("draggable_modal"),wT=Js("statusbar"),QM=Js("elementpath"),A0=Js("branding"),eN=Js("resize"),tN=Js("paste_as_text"),nN=Js("sidebar_show"),oN=Js("promotion"),sN=Js("help_accessibility"),rN=Js("default_font_stack"),ST=t=>t.options.get("skin")===!1,xT=t=>t.options.get("menubar")!==!1,bO=t=>{const s=t.options.get("skin_url");if(ST(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return B6.baseURL+"/skins/ui/"+a}},O0=t=>A.from(t.options.get("skin_url")),Fp=t=>t.options.get("line_height_formats").split(" "),TT=t=>{const s=kw(t),a=Mt(s),l=Cn(s)&&s.length>0;return!Cb(t)&&(l||a||s===!0)},vO=t=>{const s=mo(9,l=>t.options.get("toolbar"+(l+1))),a=io(s,Mt);return wn(a.length>0,a)},Cb=t=>vO(t).fold(()=>{const s=kw(t);return Ct(s,Mt)&&s.length>0},Wt),ET=t=>gO(t)===yb.bottom,aN=t=>{var s;if(!t.inline)return A.none();const a=(s=ZM(t))!==null&&s!==void 0?s:"";if(a.length>0)return Cs(Wo(),a);const l=$6(t);return qe(l)?A.some(he.fromDom(l)):A.none()},D0=t=>t.inline&&aN(t).isSome(),kT=t=>aN(t).getOrThunk(()=>ze(pe(he.fromDom(t.getElement())))),yO=t=>t.inline&&!xT(t)&&!TT(t)&&!Cb(t),wb=t=>(t.options.get("toolbar_sticky")||t.inline)&&!D0(t)&&!yO(t),Th=t=>!D0(t)&&t.options.get("ui_mode")==="split",_T=t=>{const s=t.options.get("menu");return Xe(s,a=>({...a,items:a.items}))};var I6=Object.freeze({__proto__:null,get ToolbarMode(){return Nd},get ToolbarLocation(){return yb},register:Tw,getSkinUrl:bO,getSkinUrlOption:O0,isReadOnly:cO,isSkinDisabled:ST,getHeightOption:pT,getWidthOption:lO,getMinWidthOption:iO,getMinHeightOption:uO,getMaxWidthOption:bT,getMaxHeightOption:Ew,getUserStyleFormats:dO,shouldMergeStyleFormats:mO,shouldAutoHideStyleFormats:vT,getLineHeightFormats:Fp,getContentLanguages:UM,getRemovedMenuItems:fO,isMenubarEnabled:xT,isMultipleToolbars:Cb,isToolbarEnabled:TT,isToolbarPersist:jM,getMultipleToolbarsOption:vO,getUiContainer:kT,useFixedContainer:D0,isSplitUiMode:Th,getToolbarMode:_0,isDraggableModal:pO,isDistractionFree:yO,isStickyToolbar:wb,getStickyToolbarOffset:yT,getToolbarLocation:gO,isToolbarLocationBottom:ET,getToolbarGroups:WM,getMenus:_T,getMenubar:hO,getToolbar:kw,getFilePickerCallback:GM,getFilePickerTypes:KM,useTypeaheadUrls:YM,getAnchorTop:XM,getAnchorBottom:JM,getFilePickerValidatorHandler:CT,getFontSizeInputDefaultUnit:qM,useStatusBar:wT,useElementPath:QM,promotionEnabled:oN,useBranding:A0,getResize:eN,getPasteAsText:tN,getSidebarShow:nN,useHelpAccessibility:sN,getDefaultFontStack:rN});const cN=["visible","hidden","clip"],lN=t=>Fr(t).length>0&&!vo(cN,t),R0=t=>{if(Xc(t)){const s=xs(t,"overflow-x"),a=xs(t,"overflow-y");return lN(s)||lN(a)}else return!1},L6=t=>{const s=xp(t,R0),a=s.length===0?kn(t).map(ko).map(l=>xp(l,R0)).getOr([]):s;return Qs(a).map(l=>({element:l,others:a.slice(1)}))},Hp=(t,s)=>Th(t)?L6(s):A.none(),Eh=t=>{const s=[...Ze(t.others,mr),za()];return zh(mr(t.element),s)},rl=gi({name:"Button",factory:t=>{const s=mT(t.action),a=t.dom.tag,l=g=>mt(t.dom,"attributes").bind(h=>mt(h,g)),d=()=>{if(a==="button"){const g=l("type").getOr("button"),h=l("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:xu.augment(t.buttonBehaviours,[Vn.config({}),mn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[ke("uid",void 0),Qe("dom"),ke("components",[]),xu.field("buttonBehaviours",[Vn,mn]),ms("action"),ms("role"),ke("eventOrder",{})]}),CO=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Vo(s,(a,l)=>l.name==="class"?a:{...a,[l.name]:l.value},{})},F6=t=>Array.prototype.slice.call(t.dom.classList,0),kh=t=>{const s=he.fromHtml(t),a=va(s),l=CO(s),d=F6(s),g=a.length===0?{}:{innerHtml:mi(s)};return{tag:aa(s),classes:d,attributes:l,...g}},ps=t=>{const s=CA(t)&&Dr(t,"uid")?t.uid:eh("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var H6=Object.freeze({__proto__:null,exhibit:(t,s)=>_i({attributes:ss([{key:s.tabAttr,value:"true"}])})}),V6=[ke("tabAttr","data-alloy-tabstop")];const Cr=Nc({fields:V6,name:"tabstopping",active:H6}),uN=jt("tooltip.exclusive"),_w=jt("tooltip.show"),Aw=jt("tooltip.hide"),AT=jt("tooltip.immediateHide"),OT=jt("tooltip.immediateShow"),dN=(t,s,a)=>{t.getSystem().broadcastOn([uN],{})};var z6=Object.freeze({__proto__:null,hideAllExclusive:dN,setComponents:(t,s,a,l)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Kn.set(d,l)})}}),U6=Object.freeze({__proto__:null,events:(t,s)=>{const a=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(ef(C),t.onHide(h,C),s.clearTooltip())}),s.clearTimer()},l=h=>{if(!s.isShowing()){dN(h);const C=t.lazySink(h).getOrDie(),w=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:ys(t.mode==="normal"?[Ye(am(),_=>{Ro(h,_w)}),Ye(Cd(),_=>{Ro(h,Aw)})]:[]),behaviours:ft([Kn.config({})])});s.setTooltip(w),hm(C,w),t.onShow(h,w),Ic.position(C,w,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const w=t.lazySink(h).getOrDie();Ic.position(w,C,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[Ye(wd(),h=>{Ro(h,OT)}),Ye(Um(),h=>{Ro(h,AT)}),Ye(am(),h=>{Ro(h,_w)}),Ye(Cd(),h=>{Ro(h,Aw)})];case"follow-highlight":return[Ye(E1(),(h,C)=>{Ro(h,_w)}),Ye(Gh(),h=>{Ro(h,Aw)})];case"children-normal":return[Ye(wd(),(h,C)=>{Wl(h.element).each(w=>{As(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Ro(h,OT)},_=>{s.isShowing()&&(t.onShow(h,_),d(h))})})}),Ye(Um(),h=>{Wl(h.element).fold(()=>{Ro(h,AT)},q)}),Ye(am(),h=>{Cs(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{Ro(h,_w)},w=>{s.isShowing()&&(t.onShow(h,w),d(h))})})}),Ye(Cd(),h=>{Cs(h.element,"[data-mce-tooltip]:hover").fold(()=>{Ro(h,Aw)},q)})];default:return[Ye(wd(),(h,C)=>{Wl(h.element).each(w=>{As(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Ro(h,OT)},_=>{s.isShowing()&&(t.onShow(h,_),d(h))})})}),Ye(Um(),h=>{Wl(h.element).fold(()=>{Ro(h,AT)},q)})]}};return ys(tn([[Ye(_w,h=>{s.resetTimer(()=>{l(h)},t.delayForShow())}),Ye(Aw,h=>{s.resetTimer(()=>{a(h)},t.delayForHide())}),Ye(OT,h=>{s.resetTimer(()=>{l(h)},0)}),Ye(AT,h=>{s.resetTimer(()=>{a(h)},0)}),Ye(ju(),(h,C)=>{const w=C;w.universal||vo(w.channels,uN)&&a(h)}),im(h=>{a(h)})],g()]))}}),W6=[Qe("lazySink"),Qe("tooltipDom"),ke("exclusive",!0),ke("tooltipComponents",[]),kr("delayForShow",W(300)),kr("delayForHide",W(300)),Mc("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),ke("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:W([Pa,cc,Za,ja,Na,Os]),onRtl:W([Pa,cc,Za,ja,Na,Os])},bubble:Yu(0,-2,{})})),Zo("onHide"),Zo("onShow")],fN=Object.freeze({__proto__:null,init:()=>{const t=os(),s=os(),a=()=>{t.on(clearTimeout)},l=(g,h)=>{a(),t.set(setTimeout(g,h))},d=W("not-implemented");return Ai({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:l,readState:d})}});const al=Nc({fields:W6,name:"tooltipping",active:U6,state:fN,apis:z6}),{entries:gN,setPrototypeOf:hN,isFrozen:Z6,getPrototypeOf:j6,getOwnPropertyDescriptor:G6}=Object;let{freeze:Li,seal:rf,create:q6}=Object,{apply:wO,construct:SO}=typeof Reflect<"u"&&Reflect;wO||(wO=function(s,a,l){return s.apply(a,l)}),Li||(Li=function(s){return s}),rf||(rf=function(s){return s}),SO||(SO=function(s,a){return new s(...a)});const K6=Qu(Array.prototype.forEach),Y6=Qu(Array.prototype.pop),Ow=Qu(Array.prototype.push),DT=Qu(String.prototype.toLowerCase),xO=Qu(String.prototype.toString),X6=Qu(String.prototype.match),af=Qu(String.prototype.replace),J6=Qu(String.prototype.indexOf),Q6=Qu(String.prototype.trim),nu=Qu(RegExp.prototype.test),Dw=e8(TypeError);function Qu(t){return function(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return wO(t,s,l)}}function e8(t){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return SO(t,a)}}function Is(t,s,a){var l;a=(l=a)!==null&&l!==void 0?l:DT,hN&&hN(t,null);let d=s.length;for(;d--;){let g=s[d];if(typeof g=="string"){const h=a(g);h!==g&&(Z6(s)||(s[d]=h),g=h)}t[g]=!0}return t}function M0(t){const s=q6(null);for(const[a,l]of gN(t))s[a]=l;return s}function Rw(t,s){for(;t!==null;){const l=G6(t,s);if(l){if(l.get)return Qu(l.get);if(typeof l.value=="function")return Qu(l.value)}t=j6(t)}function a(l){return console.warn("fallback value for",l),null}return a}const pN=Li(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Mw=Li(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Nw=Li(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),bN=Li(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Pw=Li(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),RT=Li(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),TO=Li(["#text"]),cf=Li(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Bw=Li(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),vN=Li(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),MT=Li(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),t8=rf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),n8=rf(/<%[\w\W]*|[\w\W]*%>/gm),$w=rf(/\${[\w\W]*}/gm),o8=rf(/^data-[\-\w.\u00B7-\uFFFF]/),yN=rf(/^aria-[\-\w]+$/),NT=rf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),s8=rf(/^(?:\w+script|data):/i),EO=rf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PT=rf(/^html$/i);var CN=Object.freeze({__proto__:null,MUSTACHE_EXPR:t8,ERB_EXPR:n8,TMPLIT_EXPR:$w,DATA_ATTR:o8,ARIA_ATTR:yN,IS_ALLOWED_URI:NT,IS_SCRIPT_OR_DATA:s8,ATTR_WHITESPACE:EO,DOCTYPE_NAME:PT});const wN=()=>typeof window>"u"?null:window,SN=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let l=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(l=a.getAttribute(d));const g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function xN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wN();const s=Fo=>xN(Fo);if(s.version="3.0.5",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;const a=t.document,l=a.currentScript;let{document:d}=t;const{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:w,NodeFilter:_,NamedNodeMap:D=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:P,DOMParser:H,trustedTypes:U}=t,z=w.prototype,ae=Rw(z,"cloneNode"),Ee=Rw(z,"nextSibling"),fe=Rw(z,"childNodes"),Se=Rw(z,"parentNode");if(typeof h=="function"){const Fo=d.createElement("template");Fo.content&&Fo.content.ownerDocument&&(d=Fo.content.ownerDocument)}let Ce,We="";const{implementation:Ve,createNodeIterator:gt,createDocumentFragment:dt,getElementsByTagName:Ue}=d,{importNode:Wn}=a;let en={};s.isSupported=typeof gN=="function"&&typeof Se=="function"&&Ve&&Ve.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Mn,ERB_EXPR:xn,TMPLIT_EXPR:ds,DATA_ATTR:Qo,ARIA_ATTR:Eo,IS_SCRIPT_OR_DATA:Et,ATTR_WHITESPACE:sn}=CN;let{IS_ALLOWED_URI:so}=CN,In=null;const _n=Is({},[...pN,...Mw,...Nw,...Pw,...TO]);let Qn=null;const Vs=Is({},[...cf,...Bw,...vN,...MT]);let fs=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Jl=null,ud=null,yf=!0,Ol=!0,dd=!1,Wd=!0,ru=!1,Tg=!1,Yb=!1,wR=!1,Cy=!1,Wk=!1,vF=!1,UG=!0,WG=!1;const hq="user-content-";let Oj=!0,SR=!1,Zk={},jk=null;const ZG=Is({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let jG=null;const GG=Is({},["audio","video","img","source","image","track"]);let Dj=null;const qG=Is({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),yF="http://www.w3.org/1998/Math/MathML",CF="http://www.w3.org/2000/svg",Xb="http://www.w3.org/1999/xhtml";let Gk=Xb,Rj=!1,Mj=null;const pq=Is({},[yF,CF,Xb],xO);let QS;const bq=["application/xhtml+xml","text/html"],vq="text/html";let au,qk=null;const yq=d.createElement("form"),KG=function(Ie){return Ie instanceof RegExp||Ie instanceof Function},Nj=function(Ie){if(!(qk&&qk===Ie)){if((!Ie||typeof Ie!="object")&&(Ie={}),Ie=M0(Ie),QS=bq.indexOf(Ie.PARSER_MEDIA_TYPE)===-1?QS=vq:QS=Ie.PARSER_MEDIA_TYPE,au=QS==="application/xhtml+xml"?xO:DT,In="ALLOWED_TAGS"in Ie?Is({},Ie.ALLOWED_TAGS,au):_n,Qn="ALLOWED_ATTR"in Ie?Is({},Ie.ALLOWED_ATTR,au):Vs,Mj="ALLOWED_NAMESPACES"in Ie?Is({},Ie.ALLOWED_NAMESPACES,xO):pq,Dj="ADD_URI_SAFE_ATTR"in Ie?Is(M0(qG),Ie.ADD_URI_SAFE_ATTR,au):qG,jG="ADD_DATA_URI_TAGS"in Ie?Is(M0(GG),Ie.ADD_DATA_URI_TAGS,au):GG,jk="FORBID_CONTENTS"in Ie?Is({},Ie.FORBID_CONTENTS,au):ZG,Jl="FORBID_TAGS"in Ie?Is({},Ie.FORBID_TAGS,au):{},ud="FORBID_ATTR"in Ie?Is({},Ie.FORBID_ATTR,au):{},Zk="USE_PROFILES"in Ie?Ie.USE_PROFILES:!1,yf=Ie.ALLOW_ARIA_ATTR!==!1,Ol=Ie.ALLOW_DATA_ATTR!==!1,dd=Ie.ALLOW_UNKNOWN_PROTOCOLS||!1,Wd=Ie.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ru=Ie.SAFE_FOR_TEMPLATES||!1,Tg=Ie.WHOLE_DOCUMENT||!1,Cy=Ie.RETURN_DOM||!1,Wk=Ie.RETURN_DOM_FRAGMENT||!1,vF=Ie.RETURN_TRUSTED_TYPE||!1,wR=Ie.FORCE_BODY||!1,UG=Ie.SANITIZE_DOM!==!1,WG=Ie.SANITIZE_NAMED_PROPS||!1,Oj=Ie.KEEP_CONTENT!==!1,SR=Ie.IN_PLACE||!1,so=Ie.ALLOWED_URI_REGEXP||NT,Gk=Ie.NAMESPACE||Xb,fs=Ie.CUSTOM_ELEMENT_HANDLING||{},Ie.CUSTOM_ELEMENT_HANDLING&&KG(Ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(fs.tagNameCheck=Ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ie.CUSTOM_ELEMENT_HANDLING&&KG(Ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(fs.attributeNameCheck=Ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ie.CUSTOM_ELEMENT_HANDLING&&typeof Ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(fs.allowCustomizedBuiltInElements=Ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ru&&(Ol=!1),Wk&&(Cy=!0),Zk&&(In=Is({},[...TO]),Qn=[],Zk.html===!0&&(Is(In,pN),Is(Qn,cf)),Zk.svg===!0&&(Is(In,Mw),Is(Qn,Bw),Is(Qn,MT)),Zk.svgFilters===!0&&(Is(In,Nw),Is(Qn,Bw),Is(Qn,MT)),Zk.mathMl===!0&&(Is(In,Pw),Is(Qn,vN),Is(Qn,MT))),Ie.ADD_TAGS&&(In===_n&&(In=M0(In)),Is(In,Ie.ADD_TAGS,au)),Ie.ADD_ATTR&&(Qn===Vs&&(Qn=M0(Qn)),Is(Qn,Ie.ADD_ATTR,au)),Ie.ADD_URI_SAFE_ATTR&&Is(Dj,Ie.ADD_URI_SAFE_ATTR,au),Ie.FORBID_CONTENTS&&(jk===ZG&&(jk=M0(jk)),Is(jk,Ie.FORBID_CONTENTS,au)),Oj&&(In["#text"]=!0),Tg&&Is(In,["html","head","body"]),In.table&&(Is(In,["tbody"]),delete Jl.tbody),Ie.TRUSTED_TYPES_POLICY){if(typeof Ie.TRUSTED_TYPES_POLICY.createHTML!="function")throw Dw('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ie.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Dw('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ce=Ie.TRUSTED_TYPES_POLICY,We=Ce.createHTML("")}else Ce===void 0&&(Ce=SN(U,l)),Ce!==null&&typeof We=="string"&&(We=Ce.createHTML(""));Li&&Li(Ie),qk=Ie}},YG=Is({},["mi","mo","mn","ms","mtext"]),XG=Is({},["foreignobject","desc","title","annotation-xml"]),Cq=Is({},["title","style","font","a","script"]),wF=Is({},Mw);Is(wF,Nw),Is(wF,bN);const Pj=Is({},Pw);Is(Pj,RT);const wq=function(Ie){let vn=Se(Ie);(!vn||!vn.tagName)&&(vn={namespaceURI:Gk,tagName:"template"});const Xn=DT(Ie.tagName),Ka=DT(vn.tagName);return Mj[Ie.namespaceURI]?Ie.namespaceURI===CF?vn.namespaceURI===Xb?Xn==="svg":vn.namespaceURI===yF?Xn==="svg"&&(Ka==="annotation-xml"||YG[Ka]):!!wF[Xn]:Ie.namespaceURI===yF?vn.namespaceURI===Xb?Xn==="math":vn.namespaceURI===CF?Xn==="math"&&XG[Ka]:!!Pj[Xn]:Ie.namespaceURI===Xb?vn.namespaceURI===CF&&!XG[Ka]||vn.namespaceURI===yF&&!YG[Ka]?!1:!Pj[Xn]&&(Cq[Xn]||!wF[Xn]):!!(QS==="application/xhtml+xml"&&Mj[Ie.namespaceURI]):!1},e2=function(Ie){Ow(s.removed,{element:Ie});try{Ie.parentNode.removeChild(Ie)}catch{Ie.remove()}},xR=function(Ie,vn){try{Ow(s.removed,{attribute:vn.getAttributeNode(Ie),from:vn})}catch{Ow(s.removed,{attribute:null,from:vn})}if(vn.removeAttribute(Ie),Ie==="is"&&!Qn[Ie])if(Cy||Wk)try{e2(vn)}catch{}else try{vn.setAttribute(Ie,"")}catch{}},JG=function(Ie){let vn,Xn;if(wR)Ie="<remove></remove>"+Ie;else{const Eg=X6(Ie,/^[\r\n\t ]+/);Xn=Eg&&Eg[0]}QS==="application/xhtml+xml"&&Gk===Xb&&(Ie='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ie+"</body></html>");const Ka=Ce?Ce.createHTML(Ie):Ie;if(Gk===Xb)try{vn=new H().parseFromString(Ka,QS)}catch{}if(!vn||!vn.documentElement){vn=Ve.createDocument(Gk,"template",null);try{vn.documentElement.innerHTML=Rj?We:Ka}catch{}}const cu=vn.body||vn.documentElement;return Ie&&Xn&&cu.insertBefore(d.createTextNode(Xn),cu.childNodes[0]||null),Gk===Xb?Ue.call(vn,Tg?"html":"body")[0]:Tg?vn.documentElement:cu},QG=function(Ie){return gt.call(Ie.ownerDocument||Ie,Ie,_.SHOW_ELEMENT|_.SHOW_COMMENT|_.SHOW_TEXT,null,!1)},Sq=function(Ie){return Ie instanceof P&&(typeof Ie.nodeName!="string"||typeof Ie.textContent!="string"||typeof Ie.removeChild!="function"||!(Ie.attributes instanceof D)||typeof Ie.removeAttribute!="function"||typeof Ie.setAttribute!="function"||typeof Ie.namespaceURI!="string"||typeof Ie.insertBefore!="function"||typeof Ie.hasChildNodes!="function")},SF=function(Ie){return typeof C=="object"?Ie instanceof C:Ie&&typeof Ie=="object"&&typeof Ie.nodeType=="number"&&typeof Ie.nodeName=="string"},Jb=function(Ie,vn,Xn){en[Ie]&&K6(en[Ie],Ka=>{Ka.call(s,vn,Xn,qk)})},eq=function(Ie){let vn;if(Jb("beforeSanitizeElements",Ie,null),Sq(Ie))return e2(Ie),!0;const Xn=au(Ie.nodeName);if(Jb("uponSanitizeElement",Ie,{tagName:Xn,allowedTags:In}),Ie.hasChildNodes()&&!SF(Ie.firstElementChild)&&(!SF(Ie.content)||!SF(Ie.content.firstElementChild))&&nu(/<[/\w]/g,Ie.innerHTML)&&nu(/<[/\w]/g,Ie.textContent))return e2(Ie),!0;if(!In[Xn]||Jl[Xn]){if(!Jl[Xn]&&nq(Xn)&&(fs.tagNameCheck instanceof RegExp&&nu(fs.tagNameCheck,Xn)||fs.tagNameCheck instanceof Function&&fs.tagNameCheck(Xn)))return!1;if(Oj&&!jk[Xn]){const Ka=Se(Ie)||Ie.parentNode,cu=fe(Ie)||Ie.childNodes;if(cu&&Ka){const Eg=cu.length;for(let ul=Eg-1;ul>=0;--ul)Ka.insertBefore(ae(cu[ul],!0),Ee(Ie))}}return e2(Ie),!0}return Ie instanceof w&&!wq(Ie)||(Xn==="noscript"||Xn==="noembed"||Xn==="noframes")&&nu(/<\/no(script|embed|frames)/i,Ie.innerHTML)?(e2(Ie),!0):(ru&&Ie.nodeType===3&&(vn=Ie.textContent,vn=af(vn,Mn," "),vn=af(vn,xn," "),vn=af(vn,ds," "),Ie.textContent!==vn&&(Ow(s.removed,{element:Ie.cloneNode()}),Ie.textContent=vn)),Jb("afterSanitizeElements",Ie,null),!1)},tq=function(Ie,vn,Xn){if(UG&&(vn==="id"||vn==="name")&&(Xn in d||Xn in yq))return!1;if(!(Ol&&!ud[vn]&&nu(Qo,vn))){if(!(yf&&nu(Eo,vn))){if(!Qn[vn]||ud[vn]){if(!(nq(Ie)&&(fs.tagNameCheck instanceof RegExp&&nu(fs.tagNameCheck,Ie)||fs.tagNameCheck instanceof Function&&fs.tagNameCheck(Ie))&&(fs.attributeNameCheck instanceof RegExp&&nu(fs.attributeNameCheck,vn)||fs.attributeNameCheck instanceof Function&&fs.attributeNameCheck(vn))||vn==="is"&&fs.allowCustomizedBuiltInElements&&(fs.tagNameCheck instanceof RegExp&&nu(fs.tagNameCheck,Xn)||fs.tagNameCheck instanceof Function&&fs.tagNameCheck(Xn))))return!1}else if(!Dj[vn]){if(!nu(so,af(Xn,sn,""))){if(!((vn==="src"||vn==="xlink:href"||vn==="href")&&Ie!=="script"&&J6(Xn,"data:")===0&&jG[Ie])){if(!(dd&&!nu(Et,af(Xn,sn,"")))){if(Xn)return!1}}}}}}return!0},nq=function(Ie){return Ie.indexOf("-")>0},oq=function(Ie){let vn,Xn,Ka,cu;Jb("beforeSanitizeAttributes",Ie,null);const{attributes:Eg}=Ie;if(!Eg)return;const ul={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Qn};for(cu=Eg.length;cu--;){vn=Eg[cu];const{name:kg,namespaceURI:Bj}=vn;Xn=kg==="value"?vn.value:Q6(vn.value);const Tq=Xn;if(Ka=au(kg),ul.attrName=Ka,ul.attrValue=Xn,ul.keepAttr=!0,ul.forceKeepAttr=void 0,Jb("uponSanitizeAttribute",Ie,ul),Xn=ul.attrValue,ul.forceKeepAttr)continue;if(!ul.keepAttr){xR(kg,Ie);continue}if(!Wd&&nu(/\/>/i,Xn)){xR(kg,Ie);continue}ru&&(Xn=af(Xn,Mn," "),Xn=af(Xn,xn," "),Xn=af(Xn,ds," "));const sq=au(Ie.nodeName);if(!tq(sq,Ka,Xn)){xR(kg,Ie);continue}if(WG&&(Ka==="id"||Ka==="name")&&(xR(kg,Ie),Xn=hq+Xn),Ce&&typeof U=="object"&&typeof U.getAttributeType=="function"&&!Bj)switch(U.getAttributeType(sq,Ka)){case"TrustedHTML":{Xn=Ce.createHTML(Xn);break}case"TrustedScriptURL":{Xn=Ce.createScriptURL(Xn);break}}if(Xn!==Tq)try{Bj?Ie.setAttributeNS(Bj,kg,Xn):Ie.setAttribute(kg,Xn)}catch{xR(kg,Ie)}}Jb("afterSanitizeAttributes",Ie,null)},xq=function Fo(Ie){let vn;const Xn=QG(Ie);for(Jb("beforeSanitizeShadowDOM",Ie,null);vn=Xn.nextNode();)Jb("uponSanitizeShadowNode",vn,null),!eq(vn)&&(vn.content instanceof g&&Fo(vn.content),oq(vn));Jb("afterSanitizeShadowDOM",Ie,null)};return s.sanitize=function(Fo){let Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vn,Xn,Ka,cu;if(Rj=!Fo,Rj&&(Fo="<!-->"),typeof Fo!="string"&&!SF(Fo))if(typeof Fo.toString=="function"){if(Fo=Fo.toString(),typeof Fo!="string")throw Dw("dirty is not a string, aborting")}else throw Dw("toString is not a function");if(!s.isSupported)return Fo;if(Yb||Nj(Ie),s.removed=[],typeof Fo=="string"&&(SR=!1),SR){if(Fo.nodeName){const kg=au(Fo.nodeName);if(!In[kg]||Jl[kg])throw Dw("root node is forbidden and cannot be sanitized in-place")}}else if(Fo instanceof C)vn=JG("<!---->"),Xn=vn.ownerDocument.importNode(Fo,!0),Xn.nodeType===1&&Xn.nodeName==="BODY"||Xn.nodeName==="HTML"?vn=Xn:vn.appendChild(Xn);else{if(!Cy&&!ru&&!Tg&&Fo.indexOf("<")===-1)return Ce&&vF?Ce.createHTML(Fo):Fo;if(vn=JG(Fo),!vn)return Cy?null:vF?We:""}vn&&wR&&e2(vn.firstChild);const Eg=QG(SR?Fo:vn);for(;Ka=Eg.nextNode();)eq(Ka)||(Ka.content instanceof g&&xq(Ka.content),oq(Ka));if(SR)return Fo;if(Cy){if(Wk)for(cu=dt.call(vn.ownerDocument);vn.firstChild;)cu.appendChild(vn.firstChild);else cu=vn;return(Qn.shadowroot||Qn.shadowrootmode)&&(cu=Wn.call(a,cu,!0)),cu}let ul=Tg?vn.outerHTML:vn.innerHTML;return Tg&&In["!doctype"]&&vn.ownerDocument&&vn.ownerDocument.doctype&&vn.ownerDocument.doctype.name&&nu(PT,vn.ownerDocument.doctype.name)&&(ul="<!DOCTYPE "+vn.ownerDocument.doctype.name+`>
`+ul),ru&&(ul=af(ul,Mn," "),ul=af(ul,xn," "),ul=af(ul,ds," ")),Ce&&vF?Ce.createHTML(ul):ul},s.setConfig=function(Fo){Nj(Fo),Yb=!0},s.clearConfig=function(){qk=null,Yb=!1},s.isValidAttribute=function(Fo,Ie,vn){qk||Nj({});const Xn=au(Fo),Ka=au(Ie);return tq(Xn,Ka,vn)},s.addHook=function(Fo,Ie){typeof Ie=="function"&&(en[Fo]=en[Fo]||[],Ow(en[Fo],Ie))},s.removeHook=function(Fo){if(en[Fo])return Y6(en[Fo])},s.removeHooks=function(Fo){en[Fo]&&(en[Fo]=[])},s.removeAllHooks=function(){en={}},s}var r8=xN();const TN=t=>r8().sanitize(t);var ed=tinymce.util.Tools.resolve("tinymce.util.I18n");const a8={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},EN="temporary-placeholder",BT=t=>()=>mt(t,EN).getOr("!not found!"),$T=(t,s)=>{const a=t.toLowerCase();if(ed.isRtl()){const l=tr(a,"-rtl");return po(s,l)?l:a}else return a},kN=(t,s)=>mt(s,$T(t,s)),kO=(t,s)=>{const a=s();return kN(t,a).getOrThunk(BT(a))},Iw=(t,s,a)=>{const l=s();return kN(t,l).or(a).getOrThunk(BT(l))},_N=t=>ed.isRtl()?po(a8,t):!1,_O=()=>co("add-focusable",[_r(t=>{sC(t.element,"svg").each(s=>Ot(s,"focusable","false"))})]),AN=(t,s,a,l)=>{var d,g;const h=_N(s)?["tox-icon--flip"]:[],C=mt(a,$T(s,a)).or(l).getOrThunk(BT(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:C},behaviours:ft([...(g=t.behaviours)!==null&&g!==void 0?g:[],_O()])}},Pd=(t,s,a,l=A.none())=>AN(s,t,a(),l),c8=(t,s,a)=>{const l=a(),d=An(t,g=>po(l,$T(g,l)));return AN(s,d.getOr(EN),l,A.none())},l8={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},IT=gi({name:"Notification",factory:t=>{const s=jt("notification-text"),a=ps({dom:kh(`<p id=${s}>${TN(t.backstageProvider.translate(t.text))}</p>`),behaviours:ft([Kn.config({})])}),l=z=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${z}%`}}}),d=z=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${z}%`}}),g=ps({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(0)]},d(0)],behaviours:ft([Kn.config({})])}),w={updateProgress:(z,ae)=>{z.getSystem().isConnected()&&g.getOpt(z).each(Ee=>{Kn.set(Ee,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(ae)]},d(ae)])})},updateText:(z,ae)=>{if(z.getSystem().isConnected()){const Ee=a.get(z);Kn.set(Ee,[na(ae)])}}},_=tn([t.icon.toArray(),t.level.toArray(),t.level.bind(z=>A.from(l8[z])).toArray()]),D=ps(rl.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Pd("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:ft([Cr.config({}),al.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:z=>{t.onAction(z)}})),P=c8(_,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),H={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:ft([Kn.config({})])},U=[P,H];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(z=>["tox-notification","tox-notification--in",`tox-notification--${z}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:ft([Cr.config({}),Vn.config({}),mn.config({mode:"special",onEscape:z=>(t.onAction(z),A.some(!0))})]),components:U.concat(t.progress?[g.asSpec()]:[]).concat([D.asSpec()]),apis:w}},configFields:[ms("level"),Qe("progress"),ms("icon"),Qe("onAction"),Qe("text"),Qe("iconProvider"),Qe("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var ON=(t,s,a,l)=>{const d=s.backstage.shared,g=()=>{const D=mr(he.fromDom(t.getContentAreaContainer()));return A.some(D)},h=D=>{g().each(P=>{ut(D,H=>{dc(H.element)>P.width&&Yt(H.element,"width",P.width+"px")})})};return{open:(D,P,H)=>{const U=()=>{const fe=Ve=>{Kn.remove(Ve,z),ae()},Se=(Ve,gt)=>{va(Ve.element).length===0?Ce(Ve,gt):We(Ve,gt)},Ce=(Ve,gt)=>{Zr.hide(Ve),l.clear(),gt&&t.focus()},We=(Ve,gt)=>{gt&&mn.focusIn(Ve)};l.on(Ve=>{P();const gt=H();fe(Ve),Se(Ve,gt)})},z=nl(IT.sketch({text:D.text,level:vo(["success","error","warning","warn","info"],D.type)?D.type:void 0,progress:D.progressBar===!0,icon:D.icon,onAction:U,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(l.isSet()){const fe=Tl(z);l.on(Se=>{Kn.append(Se,fe),Zr.reposition(Se),Br.refresh(Se),h(Se.components())})}else{const fe=nl(Zr.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:ft([mn.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Kn.config({}),...wb(t)&&!d.header.isPositionedAtTop()?[]:[Br.config({contextual:{lazyContext:()=>A.some(mr(he.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Ve=>Hp(t,Ve.element).map(dt=>({bounds:Eh(dt),optScrollEnv:A.some({currentScrollTop:dt.element.dom.scrollTop,scrollElmTop:ka(dt.element).top})})).getOrThunk(()=>({bounds:za(),optScrollEnv:A.none()}))})]])})),Se=Tl(z),Ce={maxHeightFunction:pp()},We={...d.anchors.banner(),overrides:Ce};l.set(fe),a.add(fe),Zr.showWithinBounds(fe,Se,{anchor:We},g)}jn(D.timeout)&&D.timeout>0&&E0.setEditorTimeout(t,()=>{U()},D.timeout);const ae=()=>{l.on(fe=>{Zr.reposition(fe),Br.refresh(fe),h(fe.components())})};return{close:U,reposition:ae,text:fe=>{IT.updateText(z,fe)},settings:D,getEl:()=>z.element.dom,progressBar:{value:fe=>{IT.updateProgress(z,fe)}}}},close:D=>{D.close()},getArgs:D=>D.settings}};const d8={setup:(t,s)=>{const a=(d,g)=>{dn(d,qi(),{raw:g})},l=()=>t.getMenu().bind(Pt.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(Pf),d.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(Pt.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var AO;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(AO||(AO={}));var wm=AO;const Lw="tox-menu-nav__js",N0="tox-collection__item",LT="tox-swatch",DN={normal:Lw,color:LT},OO="tox-collection__item--enabled",m8="tox-collection__group-heading",FT="tox-collection__item-icon",DO="tox-collection__item-label",RN="tox-collection__item-accessory",RO="tox-collection__item-caret",Sb="tox-collection__item-checkmark",xb="tox-collection__item--active",HT="tox-collection__item-container",VT="tox-collection__item-container--column",MN="tox-collection__item-container--row",NN="tox-collection__item-container--align-right",PN="tox-collection__item-container--align-left",BN="tox-collection__item-container--valign-top",MO="tox-collection__item-container--valign-middle",$N="tox-collection__item-container--valign-bottom",IN=t=>mt(DN,t).getOr(Lw),LN=t=>t==="color"?"tox-swatches":"tox-menu",zT=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:LN(t),tieredMenu:"tox-tiered-menu"}),Vp=t=>{const s=zT(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:IN(t)}},FN=(t,s,a)=>{const l=zT(a);return{tag:"div",classes:tn([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},f8=[bb.parts.items({})],Fw=(t,s,a)=>{const l=zT(a);return{dom:{tag:"div",classes:tn([[l.tieredMenu]])},markers:Vp(a)}},HN=W([ms("data"),ke("inputAttributes",{}),ke("inputStyles",{}),ke("tag","input"),ke("inputClasses",[]),Zo("onSetValue"),ke("styles",{}),ke("eventOrder",{}),wc("inputBehaviours",[Zt,Vn]),ke("selectOnFocus",!0)]),VN=t=>ft([Vn.config({onFocus:t.selectOnFocus?s=>{const a=s.element,l=Pe(a);a.dom.setSelectionRange(0,l.length)}:q})]),g8=t=>({...VN(t),...Sc(t.inputBehaviours,[Zt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Pe(s.element),setValue:(s,a)=>{Pe(s.element)!==a&&gm(s.element,a)}},onSetValue:t.onSetValue})])}),zN=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),UN=(t,s)=>({uid:t.uid,dom:zN(t),components:[],behaviours:g8(t),eventOrder:t.eventOrder}),lf=gi({name:"Input",configFields:HN(),factory:UN}),NO=jt("refetch-trigger-event"),WN=jt("redirect-menu-item-interaction"),ZN="tox-menu__searcher",UT=t=>Cs(t.element,`.${ZN}`).bind(s=>t.getSystem().getByDom(s).toOptional()),jN=UT,h8=(t,s)=>{Zt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},Hw=t=>{const s=Zt.getValue(t),a=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:l}},p8=(t,s)=>{B(s.element,"id").each(a=>Ot(t.element,"aria-activedescendant",a))},GN=t=>{const s=(d,g)=>(g.cut(),A.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return dn(d,WN,h),A.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[N0]},components:[lf.sketch({inputClasses:[ZN,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:ft([co(l,[Ye(cm(),d=>{Ro(d,NO)}),Ye(qi(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),mn.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,mn.name()]}})]}},WT="tox-collection--results__js",PO=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:jt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},ZT=(t,s)=>a=>{const l=qs(a,s);return Ze(l,d=>({dom:t,components:d}))},b8=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[bb.parts.items({preprocess:t!=="auto"?ZT({tag:"div",classes:["tox-swatches__row"]},t):St})]}]}),qN=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[bb.parts.items({preprocess:ZT({tag:"div",classes:["tox-collection__group"]},t)})]}),BO=(t,s)=>{const a=[];let l=[];return ut(t,(d,g)=>{s(d,g)?(l.length>0&&a.push(l),l=[],(po(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&a.push(l),Ze(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},jT=(t,s,a)=>bb.parts.items({preprocess:l=>{const d=Ze(l,a);return t!=="auto"&&t>1?ZT({tag:"div",classes:["tox-collection__group"]},t)(d):BO(d,(g,h)=>s[h].type==="separator")}}),$O=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[jT(t,s,St)]}),v8=(t,s,a=!0)=>{const l=jt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",WT].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[jT(t,s,PO)]}},y8=(t,s,a)=>{const l=jt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[GN({i18n:ed.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],WT],attributes:{id:l}},components:[jT(t,s,PO)]}]}},C8=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[bb.parts.items({preprocess:a=>BO(a,(l,d)=>t[d].type==="separator")})]}),GT=t=>Gs(t,s=>"icon"in s&&s.icon!==void 0),lg=t=>(console.error(vu(t)),console.log(t),A.none()),KN=(t,s,a,l,d)=>{const g=C8(a);return{value:t,dom:g.dom,components:g.components,items:a}},IO=(t,s,a,l,d)=>{const g=()=>d.menuType!=="searchable"?$O(l,a):d.searchMode.searchMode==="search-with-field"?y8(l,a,d.searchMode):v8(l,a);if(d.menuType==="color"){const h=b8(l);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&l==="auto"){const h=$O(l,a);return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&l!=="auto"){const h=qN(l);return{value:t,dom:h.dom,components:h.components,items:a}}else return{value:t,dom:FN(s,l,d.menuType),components:f8,items:a}},$a=Gr("type"),LO=Gr("name"),FO=Gr("label"),_h=Gr("text"),YN=Gr("title"),XN=Gr("icon"),Tb=Gr("value"),JN=Zi("fetch"),w8=Zi("getSubmenuItems"),P0=Zi("onAction"),QN=Zi("onItemAction"),Eb=kr("onSetup",()=>q),S8=rc("name"),Ah=rc("text"),td=rc("icon"),B0=rc("tooltip"),HO=rc("label"),VO=rc("shortcut"),x8=om("select"),Vw=pc("active",!1),zO=pc("borderless",!1),Sm=pc("enabled",!0),qT=pc("primary",!1),eP=t=>ke("columns",t),UO=ke("meta",{}),WO=kr("onAction",q),kb=t=>ji("type",t),KT=t=>ca("name","name",wo(()=>jt(`${t}-name`)),wa),tP=t=>ca("value","value",wo(()=>jt(`${t}-value`)),fu()),nP=Nn([$a,Ah]),T8=t=>Nr("separatormenuitem",nP,t),E8=Nn([kb("autocompleteitem"),Vw,Sm,UO,Tb,Ah,td]),_u=t=>Nr("Autocompleter.Separator",nP,t),uf=t=>Nr("Autocompleter.Item",E8,t),zw=[Sm,B0,td,Ah,Eb],ZO=Nn([$a,P0,VO].concat(zw)),YT=t=>Nr("toolbarbutton",ZO,t),jO=[Vw].concat(zw),k8=Nn(jO.concat([$a,P0,VO])),$0=t=>Nr("ToggleButton",k8,t),Uw=[kr("predicate",ro),Mc("scope","node",["node","editor"]),Mc("position","selection",["node","selection","line"])],GO=zw.concat([kb("contextformbutton"),qT,P0,hc("original",St)]),_8=jO.concat([kb("contextformbutton"),qT,P0,hc("original",St)]),df=zw.concat([kb("contextformbutton")]),A8=jO.concat([kb("contextformtogglebutton")]),O8=Fl("type",{contextformbutton:GO,contextformtogglebutton:_8}),Bd=Nn([kb("contextform"),kr("initValue",W("")),HO,ii("commands",O8),zu("launch",Fl("type",{contextformbutton:df,contextformtogglebutton:A8}))].concat(Uw)),Ww=t=>Nr("ContextForm",Bd,t),xm=Nn([kb("contexttoolbar"),Gr("items")].concat(Uw)),D8=t=>Nr("ContextToolbar",xm,t),Ls=[$a,Gr("src"),rc("alt"),k("classes",[],wa)],I0=Nn(Ls),XT=[$a,_h,S8,k("classes",["tox-collection__item-label"],wa)],oP=Nn(XT),JT=Fm(()=>pu("type",{cardimage:I0,cardtext:oP,cardcontainer:qO})),qO=Nn([$a,ji("direction","horizontal"),ji("align","left"),ji("valign","middle"),ii("items",JT)]),L0=[Sm,Ah,VO,tP("menuitem"),UO],KO=Nn([$a,HO,ii("items",JT),Eb,WO].concat(L0)),R8=t=>Nr("cardmenuitem",KO,t),sP=Nn([$a,Vw,td].concat(L0)),rP=t=>Nr("choicemenuitem",sP,t),QT=[$a,Gr("fancytype"),WO],aP=[ke("initData",{})].concat(QT),eE=[om("select"),F("initData",{},[pc("allowCustomColors",!0),ji("storageKey","default"),Vg("colors",fu())])].concat(QT),M8=Fl("fancytype",{inserttable:aP,colorswatch:eE}),N8=t=>Nr("fancymenuitem",M8,t),P8=Nn([$a,Eb,WO,td].concat(L0)),B8=t=>Nr("menuitem",P8,t),$8=Nn([$a,w8,Eb,td].concat(L0)),cP=t=>Nr("nestedmenuitem",$8,t),I8=Nn([$a,td,Vw,Eb,P0].concat(L0)),L8=t=>Nr("togglemenuitem",I8,t),tE=(t,s,a)=>{const l=sl(t.element,"."+a);if(l.length>0){const d=Xo(l,g=>{const h=g.dom.getBoundingClientRect().top,C=l[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(l.length);return A.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return A.none()},YO=(t,s)=>ft([co(t,s)]),Zw={namedEvents:YO,unnamedEvents:t=>YO(jt("unnamed-events"),t)},lP=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),nE="silver.readonly",iP=Nn([Vu("readonly")]),oE=(t,s)=>{const l=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&ut(d,g=>{g.broadcastOn([bm()],{target:l})}),ut(d,g=>{g.broadcastOn([nE],{readonly:s})})},uP=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&oE(s,!0)}),t.on("SwitchMode",()=>oE(s,t.mode.isReadOnly())),cO(t)&&t.mode.set("readonly")},xc=()=>fi.config({channels:{[nE]:{schema:iP,onReceive:(t,s)=>{Ln.set(t,s.readonly)}}}}),Fc={item:t=>Ln.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Ln.config({disabled:t}),splitButton:t=>Ln.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Ln.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},sE=(t,s)=>{const a=t.getApi(s);return l=>{l(a)}},ig=(t,s)=>_r(a=>{sE(t,a)(d=>{const g=t.onSetup(d);tt(g)&&s.set(g)})}),Oh=(t,s)=>im(a=>sE(t,a)(s.get())),dP=(t,s)=>qu((a,l)=>{sE(t,a)(t.onAction),!t.triggersSubmenu&&s===wm.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Ro(a,bc()),l.stop())}),H8={[di()]:["disabling","alloy.base.behaviour","toggling","item-events"]},_b=ha,Ab=(t,s,a,l)=>{const d=gn(q);return{type:"item",dom:s.dom,components:_b(s.optComponents),data:t.data,eventOrder:H8,hasSubmenu:t.triggersSubmenu,itemBehaviours:ft([co("item-events",[dP(t,a),ig(t,d),Oh(t,d)]),Fc.item(()=>!t.enabled||l.isDisabled()),xc(),Kn.config({})].concat(t.itemBehaviours))}},Ob=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),XO=t=>{const s=k0.os.isMacOS()||k0.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=Ze(g,C=>{const w=C.toLowerCase().trim();return po(d,w)?d[w]:C});return s?h.join(""):h.join("+")},JO=(t,s,a=[FT])=>Pd(t,{tag:"div",classes:a},s),mP=t=>({dom:{tag:"div",classes:[DO]},components:[na(ed.translate(t))]}),fP=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),V8=(t,s)=>({dom:{tag:"div",classes:[DO]},components:[{dom:{tag:t.tag,styles:t.styles},components:[na(ed.translate(s))]}]}),gP=t=>({dom:{tag:"div",classes:[RN]},components:[na(XO(t))]}),QO=t=>JO("checkmark",t,[Sb]),hP=t=>JO("chevron-right",t,[RO]),z8=t=>JO("chevron-down",t,[RO]),U8=(t,s)=>{const a=t.direction==="vertical"?VT:MN,l=t.align==="left"?PN:NN;return{dom:{tag:"div",classes:[HT,a,l,(()=>{switch(t.valign){case"top":return BN;case"middle":return MO;case"bottom":return $N}})()]},components:s}},W8=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),F0=(t,s,a)=>{const l="custom",d="remove",g=t.value,h=t.iconContent.map(_=>Iw(_,s.icons,a)),C=t.ariaLabel.map(_=>({"aria-label":s.translate(_),"data-mce-name":_})).getOr({});return{dom:(()=>{const _=LT,D=h.getOr(""),P={tag:"div",attributes:C,classes:[_]};return g===l?{...P,tag:"button",classes:[...P.classes,"tox-swatches__picker-btn"],innerHtml:D}:g===d?{...P,classes:[...P.classes,"tox-swatch--remove"],innerHtml:D}:qe(g)?{...P,attributes:{...P.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:D}:P})(),optComponents:[]}},pP=t=>{const s=t.map(a=>({attributes:{id:jt("menu-item"),"aria-label":ed.translate(a)}})).getOr({});return{tag:"div",classes:[Lw,N0],...s}},bP=(t,s,a,l)=>{const d={tag:"div",classes:[FT]},g=H=>Pd(H,d,s.icons,l),h=()=>A.some({dom:d}),C=a?t.iconContent.map(g).orThunk(h):A.none(),w=t.checkMark,_=A.from(t.meta).fold(()=>mP,H=>po(H,"style")?cn(V8,H.style):mP),D=t.htmlContent.fold(()=>t.textContent.map(_),H=>A.some(fP(H,[DO])));return{dom:pP(t.ariaLabel),optComponents:[C,D,t.shortcutContent.map(gP),w,t.caret]}},H0=(t,s,a,l=A.none())=>t.presets==="color"?F0(t,s,l):bP(t,s,a,l),e4=(t,s,a)=>mt(t,"tooltipWorker").map(l=>[al.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:pp}}),mode:"follow-highlight",onShow:(d,g)=>{l(h=>{al.setComponents(d,[xv({element:he.fromDom(h)})])})}})]).getOrThunk(()=>a.map(l=>[al.config({...s.providers.tooltips.getConfig({tooltipText:l}),mode:"follow-highlight"})]).getOr([])),vP=t=>vb.DOM.encode(t),rE=(t,s)=>{const a=ed.translate(t),l=vP(a);if(s.length>0){const d=new RegExp(lP(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},t4=(t,s,a,l,d,g,h,C=!0)=>{const w=H0({presets:l,textContent:A.none(),htmlContent:a?t.text.map(D=>rE(D,s)):A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:t.value},h.providers,C,t.icon),_=t.text.filter(D=>!a&&D!=="");return Ab({data:Ob(t),enabled:t.enabled,getApi:W({}),onAction:D=>d(t.value,t.meta),onSetup:W(q),triggersSubmenu:!1,itemBehaviours:e4(t,h,_)},w,g,h.providers)},aE=(t,s)=>Ze(t,a=>{switch(a.type){case"cardcontainer":return U8(a,aE(a.items,s));case"cardimage":return W8(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>vo(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return fP(rE(a.text,d),a.classes)}}),yP=(t,s,a,l)=>{const d=h=>({isEnabled:()=>!Ln.isDisabled(h),setEnabled:C=>{Ln.set(h,!C),ut(sl(h.element,"*"),w=>{h.getSystem().getByDom(w).each(_=>{_.hasConfigured(Ln)&&Ln.set(_,!C)})})}}),g={dom:pP(t.label),optComponents:[A.some({dom:{tag:"div",classes:[HT,MN]},components:aE(t.items,l)})]};return Ab({data:Ob({text:A.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(l.itemBehaviours).getOr([])},g,s,a.providers)},Z8=(t,s,a,l,d,g,h,C=!0)=>{const w=P=>({setActive:H=>{yo.set(P,H)},isActive:()=>yo.isOn(P),isEnabled:()=>!Ln.isDisabled(P),setEnabled:H=>Ln.set(P,!H)}),_=H0({presets:a,textContent:s?t.text:A.none(),htmlContent:A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:A.none(),checkMark:s?A.some(QO(h.icons)):A.none(),caret:A.none(),value:t.value},h,C),D=t.text.filter(W(!s)).map(P=>al.config(h.tooltips.getConfig({tooltipText:h.translate(P)})));return $s(Ab({data:Ob(t),enabled:t.enabled,getApi:w,onAction:P=>l(t.value),onSetup:P=>(P.setActive(d),q),triggersSubmenu:!1,itemBehaviours:[...D.toArray()]},_,g,h),{toggling:{toggleClass:OO,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},n4=sw(tO(),nO()),CP=t=>({value:s4(t)}),wP=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,SP=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,o4=t=>wP.test(t)||SP.test(t),s4=t=>fl(t,"#").toUpperCase(),xP=t=>o4(t)?A.some({value:s4(t)}):A.none(),j8=t=>({value:t.value.replace(wP,(a,l,d,g)=>l+l+d+d+g+g)}),G8=t=>{const s=j8(t),a=SP.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},r4=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},jw=t=>{const s=r4(t.red)+r4(t.green)+r4(t.blue);return CP(s)},TP=Math.min,EP=Math.max,cE=Math.round,q8=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,K8=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,zp=(t,s,a,l)=>({red:t,green:s,blue:a,alpha:l}),a4=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},c4=t=>{let s,a,l;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=EP(0,TP(g,1)),h=EP(0,TP(h,1)),g===0)return s=a=l=cE(255*h),zp(s,a,l,1);const C=d/60,w=h*g,_=w*(1-Math.abs(C%2-1)),D=h-w;switch(Math.floor(C)){case 0:s=w,a=_,l=0;break;case 1:s=_,a=w,l=0;break;case 2:s=0,a=w,l=_;break;case 3:s=0,a=_,l=w;break;case 4:s=_,a=0,l=w;break;case 5:s=w,a=0,l=_;break;default:s=a=l=0}return s=cE(255*(s+D)),a=cE(255*(a+D)),l=cE(255*(l+D)),zp(s,a,l,1)},Gw=t=>{const s=G8(t),a=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return zp(a,l,d,1)},kP=(t,s,a,l)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(a,10),C=parseFloat(l);return zp(d,g,h,C)},l4=t=>{if(t==="transparent")return A.some(zp(0,0,0,0));const s=q8.exec(t);if(s!==null)return A.some(kP(s[1],s[2],s[3],"1"));const a=K8.exec(t);return a!==null?A.some(kP(a[1],a[2],a[3],a[4])):A.none()},_P=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,AP=zp(255,0,0,1),lE=t=>{t.dispatch("SkinLoaded")},OP=(t,s)=>{t.dispatch("SkinLoadError",s)},Y8=t=>{t.dispatch("ResizeEditor")},i4=(t,s)=>{t.dispatch("ResizeContent",s)},X8=(t,s)=>{t.dispatch("ScrollContent",s)},DP=(t,s)=>{t.dispatch("TextColorChange",s)},J8=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},Q8=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),u4=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},RP=(t,s)=>{t.dispatch("StylesTextUpdate",s)},MP=(t,s)=>{t.dispatch("AlignTextUpdate",s)},e7=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},NP=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},t7=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},n7=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},iE=(t,s)=>()=>{t(),s()},hi=t=>Db(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),o7=(t,s)=>a=>{const l=Gc(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);l.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),l.clear()}},uE=(t,s)=>a=>{const l=hi(t)(a),d=o7(t,s)(a);return()=>{l(),d()}},Db=(t,s,a)=>l=>{const d=()=>a(l),g=()=>{a(l),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},PP=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Au=(t,s)=>()=>t.execCommand(s);var Rb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const qw={},d4=(t,s=10)=>{const a=Rb.getItem(t),l=Mt(a)?JSON.parse(a):[],g=(_=>s-_.length<0?_.slice(0,s):_)(l),h=_=>{Ke(g,_).each(C),g.unshift(_),g.length>s&&g.pop(),Rb.setItem(t,JSON.stringify(g))},C=_=>{g.splice(_,1)};return{add:h,state:()=>g.slice(0)}},dE=t=>mt(qw,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Rb.getItem(s);if(_t(a)){const d=Rb.getItem("tinymce-custom-colors");Rb.setItem(s,qe(d)?d:"[]")}const l=d4(s,10);return qw[t]=l,l}),BP=t=>Ze(dE(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),$P=(t,s)=>{dE(t).add(s)},Kw=(t,s,a)=>({hue:t,saturation:s,value:a}),Yw=t=>{let s=0,a=0,l=0;const d=t.red/255,g=t.green/255,h=t.blue/255,C=Math.min(d,Math.min(g,h)),w=Math.max(d,Math.max(g,h));if(C===w)return l=C,Kw(0,0,l*100);const _=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-_/(w-C)),a=(w-C)/w,l=w,Kw(Math.round(s),Math.round(a*100),Math.round(l*100))},m4=t=>Yw(Gw(t)),Xw=t=>jw(c4(t)),IP=t=>xP(t).orThunk(()=>l4(t).map(jw)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,d=l[0],g=l[1],h=l[2],C=l[3];return jw(zp(d,g,h,C))}),f4="forecolor",g4="hilitecolor",s7=5,r7=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+IP(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},ug=t=>s=>s.options.get(t),h4="#000000",a7=t=>{const s=t.options.register,a=d=>Ct(d,Mt)?{value:r7(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},l=d=>jn(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:l,default:p4(t)}),s("color_cols_foreground",{processor:l,default:LP(t,f4)}),s("color_cols_background",{processor:l,default:LP(t,g4)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:h4}),s("color_default_background",{processor:"string",default:h4})},mE=(t,s)=>s===f4&&t.options.isSet("color_map_foreground")?ug("color_map_foreground")(t):s===g4&&t.options.isSet("color_map_background")?ug("color_map_background")(t):ug("color_map")(t),p4=(t,s="default")=>Math.max(s7,Math.ceil(Math.sqrt(mE(t,s).length))),LP=(t,s)=>{const a=ug("color_cols")(t),l=p4(t,s);return a===p4(t)?l:a},FP=(t,s="default")=>Math.round(s===f4?ug("color_cols_foreground")(t):s===g4?ug("color_cols_background")(t):ug("color_cols")(t)),HP=ug("custom_colors"),c7=ug("color_default_foreground"),VP=ug("color_default_background"),l7="rgba(0, 0, 0, 0)",i7=t=>l4(t).exists(s=>s.alpha!==0),dg=t=>sm(t,s=>{if(Uo(s)){const a=xs(s,"background-color");return wn(i7(a),a)}else return A.none()}).getOr(l7),zP=(t,s)=>{const a=he.fromDom(t.selection.getStart()),l=s==="hilitecolor"?dg(a):xs(a,"color");return l4(l).map(d=>"#"+jw(d).value)},u7=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},b4=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},Hc=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{u7(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{b4(t,s)})},UP=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},v4=(t,s,a,l)=>{a==="custom"?KP(t)(g=>{g.each(h=>{$P(s,h),t.execCommand("mceApplyTextcolor",s,h),l(h)})},zP(t,s).getOr(h4)):a==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(a),t.execCommand("mceApplyTextcolor",s,a))},y4=(t,s,a)=>t.concat(BP(s).concat(UP(a))),WP=(t,s,a)=>l=>{l(y4(t,s,a))},C4=(t,s,a)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,a)},ZP=(t,s)=>{t.setTooltip(s)},jP=(t,s)=>a=>{const l=zP(t,s);return fa(l,a.toUpperCase())},w4=(t,s,a)=>{if(se(a))return s==="forecolor"?"Text color":"Background color";const l=s==="forecolor"?"Text color {0}":"Background color {0}",d=y4(mE(t,s),s,!1),g=An(d,h=>h.value===a).getOr({text:""}).text;return t.translate([l,t.translate(g)])},GP=(t,s,a,l)=>{t.ui.registry.addSplitButton(s,{tooltip:w4(t,a,l.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:jP(t,a),columns:FP(t,a),fetch:WP(mE(t,a),a,HP(t)),onAction:d=>{v4(t,a,l.get(),q)},onItemAction:(d,g)=>{v4(t,a,g,h=>{l.set(h),DP(t,{name:s,color:h})})},onSetup:d=>{C4(d,s,l.get());const g=h=>{h.name===s&&(C4(d,h.name,h.color),ZP(d,w4(t,a,h.color)))};return t.on("TextColorChange",g),iE(hi(t)(d),()=>{t.off("TextColorChange",g)})}})},qP=(t,s,a,l,d)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(ZP(g,w4(t,a,d.get())),C4(g,s,d.get()),hi(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:jP(t,a),initData:{storageKey:a},onAction:g=>{v4(t,a,g.value,h=>{d.set(h),DP(t,{name:s,color:h})})}}]})},KP=t=>(s,a)=>{let l=!1;const d=C=>{const _=C.getData().colorpicker;l?(s(A.from(_)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",_]))},g=(C,w)=>{w.name==="hex-valid"&&(l=w.value)},h={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:q,onCancel:()=>{s(A.none())}})},d7=t=>{Hc(t);const s=c7(t),a=VP(t),l=gn(s),d=gn(a);GP(t,"forecolor","forecolor",l),GP(t,"backcolor","hilitecolor",d),qP(t,"forecolor","forecolor","Text color",l),qP(t,"backcolor","hilitecolor","Background color",d)},S4=(t,s,a,l,d,g,h,C)=>{const w=GT(s),D=m7(s,a,l,d!=="color"?"normal":"color",g,h,C);return IO(t,w,D,l,{menuType:d})},m7=(t,s,a,l,d,g,h)=>ha(Ze(t,C=>C.type==="choiceitem"?rP(C).fold(lg,w=>A.some(Z8(w,a===1,l,s,g(w.value),d,h,GT(t)))):A.none())),fE=(t,s)=>{const a=Vp(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?Cs(d.element,"[aria-checked=true]"):A.none()}},f7=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${LT}`:`.${N0}`}},g7=(t,s)=>{const a=h7(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...S4(jt("menu-value"),a,C=>{t.onAction({value:C})},l,d,wm.CLOSE_ON_EXECUTE,t.select.getOr(ro),s.shared.providers),markers:Vp(d),movement:fE(l,d),menuRole:!1};return{type:"widget",data:{value:jt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[n4.widget(bb.sketch(h))]}},h7=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>y4(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),l=>l.concat(UP(a)))},YP=jt("cell-over"),XP=jt("cell-execute"),p7=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),b7=(t,s,a)=>{const l=h=>dn(h,YP,{row:t,col:s}),d=h=>dn(h,XP,{row:t,col:s}),g=(h,C)=>{C.stop(),d(h)};return nl({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:ft([co("insert-table-picker-cell",[Ye(am(),Vn.focus),Ye(di(),d),Ye(Wg(),g),Ye(tv(),g)]),yo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Vn.config({onFocus:l})])})},v7=(t,s,a)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const C=t(d+1,h+1);g.push(b7(d,h,C))}l.push(g)}return l},y7=(t,s,a,l,d)=>{for(let g=0;g<l;g++)for(let h=0;h<d;h++)yo.set(t[g][h],g<=s&&h<=a)},C7=t=>we(t,s=>Ze(s,Tl)),x4=(t,s)=>na(`${s}x${t}`),JP={inserttable:(t,s)=>{const d=p7(s),g=v7(d,10,10),h=x4(0,0),C=ps({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:ft([Kn.config({})])});return{type:"widget",data:{value:jt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[n4.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:C7(g).concat(C.asSpec()),behaviours:ft([co("insert-table-picker",[_r(w=>{Kn.set(C.get(w),[h])}),Ay(YP,(w,_,D)=>{const{row:P,col:H}=D.event;y7(g,P,H,10,10),Kn.set(C.get(w),[x4(P+1,H+1)])}),Ay(XP,(w,_,D)=>{const{row:P,col:H}=D.event;t.onAction({numRows:P+1,numColumns:H+1}),Ro(w,bc())})]),mn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:g7},w7=(t,s)=>mt(JP,t.fancytype).map(a=>a(t,s)),S7=(t,s,a,l=!0,d=!1)=>{const g=d?z8(a.icons):hP(a.icons),h=w=>({isEnabled:()=>!Ln.isDisabled(w),setEnabled:_=>Ln.set(w,!_),setIconFill:(_,D)=>{Cs(w.element,`svg path[class="${_}"], rect[class="${_}"]`).each(P=>{Ot(P,"fill",D)})},setTooltip:_=>{const D=a.translate(_);Ot(w.element,"aria-label",D)}}),C=H0({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.some(g),checkMark:A.none(),shortcutContent:t.shortcut},a,l);return Ab({data:Ob(t),getApi:h,enabled:t.enabled,onAction:q,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},x7=(t,s,a,l=!0)=>{const d=h=>({isEnabled:()=>!Ln.isDisabled(h),setEnabled:C=>Ln.set(h,!C)}),g=H0({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.none(),checkMark:A.none(),shortcutContent:t.shortcut},a,l);return Ab({data:Ob(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},QP=t=>({type:"separator",dom:{tag:"div",classes:[N0,m8]},components:t.text.map(na).toArray()}),T7=(t,s,a,l=!0)=>{const d=h=>({setActive:C=>{yo.set(h,C)},isActive:()=>yo.isOn(h),isEnabled:()=>!Ln.isDisabled(h),setEnabled:C=>Ln.set(h,!C)}),g=H0({iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,checkMark:A.some(QO(a.icons)),caret:A.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,l);return $s(Ab({data:Ob(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:OO,toggleOnExecute:!1,selected:t.active}})},E7=t4,eB=QP,k7=x7,tB=S7,_7=T7,nB=w7,A7=yP;var D7=Object.freeze({__proto__:null,getCoupled:(t,s,a,l)=>a.getOrCreate(t,s,l),getExistingCoupled:(t,s,a,l)=>a.getExisting(t,s,l)}),R7=[ta("others",ev(ao.value,fu()))],M7=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(es(g.others).length===0)throw new Error("Cannot find any known coupled components");return mt(t,h)},a=(g,h,C)=>s(h,C).getOrThunk(()=>{const _=mt(h.others,C).getOrDie("No information found for coupled component: "+C)(g),D=g.getSystem().build(_);return t[C]=D,D}),l=(g,h,C)=>s(h,C).orThunk(()=>(mt(h.others,C).getOrDie("No information found for coupled component: "+C),A.none())),d=W({});return Ai({readState:d,getExisting:l,getOrCreate:a})}});const ua=Nc({fields:R7,name:"coupling",apis:D7,state:M7}),T4=t=>{let s=A.none(),a=[];const l=_=>T4(D=>{d(P=>{D(_(P))})}),d=_=>{h()?w(_):a.push(_)},g=_=>{h()||(s=A.some(_),C(a),a=[])},h=()=>s.isSome(),C=_=>{ut(_,w)},w=_=>{s.each(D=>{setTimeout(()=>{_(D)},0)})};return t(g),{get:d,map:l,isReady:h}},N7={nu:T4,pure:t=>T4(s=>{s(t)})},P7=t=>{setTimeout(()=>{throw t},0)},V0=t=>{const s=w=>{t().then(w,P7)};return{map:w=>V0(()=>t().then(w)),bind:w=>V0(()=>t().then(_=>w(_).toPromise())),anonBind:w=>V0(()=>t().then(()=>w.toPromise())),toLazy:()=>N7.nu(s),toCached:()=>{let w=null;return V0(()=>(w===null&&(w=t()),w))},toPromise:t,get:s}},cl={nu:t=>V0(()=>new Promise(t)),pure:t=>V0(()=>Promise.resolve(t))},oB=W("sink"),sB=W(tu({name:oB(),overrides:W({dom:{tag:"div"},behaviours:ft([Ic.config({useFixed:Wt})]),events:ys([Sd(qi()),Sd(ui()),Sd(Wg())])})})),rB=(t,s)=>{const a=t.getHotspot(s).getOr(s),l="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:a,overrides:d}),g=>({type:l,hotspot:a,overrides:d,layouts:g}))},B7=(t,s,a)=>{const l=t.fetch;return l(a).map(s)},$7=(t,s,a,l,d,g,h)=>{const C=B7(t,s,l),w=k4(l,t);return C.map(_=>_.bind(D=>A.from(Lp.sketch({...g.menu(),uid:eh(""),data:D,highlightOnOpen:h,onOpenMenu:(P,H)=>{const U=w().getOrDie();Ic.position(U,H,{anchor:a}),Yo.decloak(d)},onOpenSubmenu:(P,H,U)=>{const z=w().getOrDie();Ic.position(z,U,{anchor:{type:"submenu",item:H}}),Yo.decloak(d)},onRepositionMenu:(P,H,U)=>{const z=w().getOrDie();Ic.position(z,H,{anchor:a}),ut(U,ae=>{Ic.position(z,ae.triggeredMenu,{anchor:{type:"submenu",item:ae.triggeringItem}})})},onEscape:()=>(Vn.focus(l),Yo.close(d),A.some(!0))}))))},z0=(t,s,a,l,d,g,h)=>{const C=rB(t,a);return $7(t,s,C,a,l,d,h).map(_=>(_.fold(()=>{Yo.isOpen(l)&&Yo.close(l)},D=>{Yo.cloak(l),Yo.open(l,D),g(l)}),l))},I7=(t,s,a,l,d,g,h)=>(Yo.close(l),cl.pure(l)),E4=(t,s,a,l,d,g)=>{const h=ua.getCoupled(a,"sandbox");return(Yo.isOpen(h)?I7:z0)(t,s,a,h,l,d,g)},L7=(t,s,a)=>{const l=jo.getCurrent(s).getOr(s),d=dc(t.element);a?Yt(l.element,"min-width",d+"px"):Ao(l.element,d)},k4=(t,s)=>t.getSystem().getByUid(s.uid+"-"+oB()).map(a=>()=>ao.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>ao.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),_4=t=>{Yo.getState(t).each(s=>{Lp.repositionMenus(s)})},A4=(t,s,a)=>{const l=kv(),d=(C,w)=>{const _=rB(t,s);l.link(s.element),t.matchWidth&&L7(_.hotspot,w,t.useMinWidth),t.onOpen(_,C,w),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,w)},g=(C,w)=>{l.unlink(s.element),h().getOr(w).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(C,w)},h=k4(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:xu.augment(t.sandboxBehaviours,[Zt.config({store:{mode:"memory",initialValue:s}}),Yo.config({onOpen:d,onClose:g,isPartOf:(C,w,_)=>zf(w,_)||zf(s,_),getAttachPoint:()=>h().getOrDie()}),jo.config({find:C=>Yo.getState(C).bind(w=>jo.getCurrent(w))}),fi.config({channels:{...tf({isExtraPart:ro}),...r0({doReposition:_4})}})])}},aB=t=>{const s=ua.getCoupled(t,"sandbox");_4(s)},gE=()=>[ke("sandboxClasses",[]),xu.field("sandboxBehaviours",[jo,fi,Yo,Zt])],F7=W([Qe("dom"),Qe("fetch"),Zo("onOpen"),zl("onExecute"),ke("getHotspot",A.some),ke("getAnchorOverrides",W({})),Yf(),wc("dropdownBehaviours",[yo,ua,mn,Vn]),Qe("toggleClass"),ke("eventOrder",{}),ms("lazySink"),ke("matchWidth",!1),ke("useMinWidth",!1),ms("role")].concat(gE())),H7=W([Tu({schema:[Qg(),ke("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),sB()]),V7=(t,s,a,l)=>{const d=D=>mt(t.dom,"attributes").bind(P=>mt(P,D)),g=D=>{Yo.getState(D).each(P=>{Lp.highlightPrimary(P)})},h=(D,P,H)=>E4(t,St,D,l,P,H),C=D=>{h(D,g,Yl.HighlightMenuAndItem).get(q)},w={expand:D=>{yo.isOn(D)||h(D,q,Yl.HighlightNone).get(q)},open:D=>{yo.isOn(D)||h(D,q,Yl.HighlightMenuAndItem).get(q)},refetch:D=>ua.getExistingCoupled(D,"sandbox").fold(()=>h(D,q,Yl.HighlightMenuAndItem).map(q),H=>z0(t,St,D,H,l,q,Yl.HighlightMenuAndItem).map(q)),isOpen:yo.isOn,close:D=>{yo.isOn(D)&&h(D,q,Yl.HighlightMenuAndItem).get(q)},repositionMenus:D=>{yo.isOn(D)&&aB(D)}},_=(D,P)=>(Pf(D),A.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Sc(t.dropdownBehaviours,[yo.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),ua.config({others:{sandbox:D=>A4(t,D,{onOpen:()=>yo.on(D),onClose:()=>yo.off(D)})}}),mn.config({mode:"special",onSpace:_,onEnter:_,onDown:(D,P)=>{if($d.isOpen(D)){const H=ua.getCoupled(D,"sandbox");g(H)}else $d.open(D);return A.some(!0)},onEscape:(D,P)=>$d.isOpen(D)?($d.close(D),A.some(!0)):A.none()}),Vn.config({})]),events:mT(A.some(C)),eventOrder:{...t.eventOrder,[di()]:["disabling","toggling","alloy.base.behaviour"]},apis:w,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},$d=_l({name:"Dropdown",configFields:F7(),partFields:H7(),factory:V7,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),z7=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},U7=t=>{const s=Zt.getValue(t),a=UT(t).map(Hw);$d.refetch(s).get(()=>{const l=ua.getCoupled(s,"sandbox");a.each(d=>UT(l).each(g=>h8(g,d)))})},hE=(t,s)=>{W7(t).each(a=>{u2(t,a.element,s.event.eventType,s.event.interactionEvent)})},W7=t=>Yo.getState(t).bind(Pt.getHighlighted).bind(Pt.getHighlighted),pE=t=>Oi(t.element,WT)?A.some(t.element):Cs(t.element,"."+WT),cB=(t,s,a)=>{jN(t).each(l=>{p8(l,a),pE(s).each(g=>{B(g,"id").each(h=>Ot(l.element,"aria-controls",h))})}),Ot(a.element,"aria-selected","true")},Z7=(t,s,a)=>{Ot(a.element,"aria-selected","false")},j7=t=>{jN(t).each(s=>Vn.focus(s))},G7=t=>ua.getExistingCoupled(t,"sandbox").bind(UT).map(Hw).map(a=>a.fetchPattern).getOr("");var O4;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(O4||(O4={}));const bE=(t,s,a,l,d)=>{const g=a.shared.providers,h=C=>d?{...C,shortcut:A.none(),icon:C.text.isSome()?A.none():C.icon}:C;switch(t.type){case"menuitem":return B8(t).fold(lg,C=>A.some(k7(h(C),s,g,l)));case"nestedmenuitem":return cP(t).fold(lg,C=>A.some(tB(h(C),s,g,l,d)));case"togglemenuitem":return L8(t).fold(lg,C=>A.some(_7(h(C),s,g,l)));case"separator":return T8(t).fold(lg,C=>A.some(eB(C)));case"fancymenuitem":return N8(t).fold(lg,C=>nB(C,a));default:return console.error("Unknown item in general menu",t),A.none()}},U0=(t,s,a,l,d,g,h)=>{const C=l===1,w=!C||GT(t);return ha(Ze(t,_=>{switch(_.type){case"separator":return _u(_).fold(lg,D=>A.some(eB(D)));case"cardmenuitem":return R8(_).fold(lg,D=>A.some(A7({...D,onAction:P=>{D.onAction(P),a(D.value,D.meta)}},d,g,{itemBehaviours:e4(D.meta,g,A.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return uf(_).fold(lg,D=>A.some(E7(D,s,C,"normal",a,d,g,w)))}}))},D4=(t,s,a,l,d,g)=>{const h=GT(s),C=ha(Ze(s,D=>{const P=U=>d?!po(U,"text"):h,H=U=>bE(U,a,l,P(U),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?H({...D,enabled:!1}):H(D)})),w=z7(g);return(d?KN:IO)(t,h,C,1,w)},vE=t=>Lp.singleData(t.value,t),q7=(t,s,a,l)=>{const d=fE(s,l),g=Vp(l);return{data:vE({...t,movement:d,menuBehaviours:Zw.unnamedEvents(s!=="auto"?[]:[_r((h,C)=>{tE(h,4,g.item).each(({numColumns:w,numRows:_})=>{mn.setGridSize(h,_,w)})})])}),menu:{markers:Vp(l),fakeFocus:a===O4.ContentFocus}}},K7=t=>bp.create(he.fromDom(t.startContainer),t.startOffset,he.fromDom(t.endContainer),t.endOffset),Y7={register:(t,s)=>{const a=jt("autocompleter"),l=gn(!1),d=gn(!1),g=os(),h=nl(Zr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:ft([co("dismissAutocompleter",[Ye(Wm(),()=>P()),Ye(E1(),(fe,Se)=>{B(Se.event.target,"id").each(Ce=>Ot(he.fromDom(t.getBody()),"aria-activedescendant",Ce))})])]),lazySink:s.getSink})),C=()=>Zr.isOpen(h),w=d.get,_=()=>{if(C()){Zr.hide(h),t.dom.remove(a,!1);const fe=he.fromDom(t.getBody());B(fe,"aria-owns").filter(Se=>Se===a).each(()=>{oe(fe,"aria-owns"),oe(fe,"aria-activedescendant")})}},D=()=>Zr.getContent(h).bind(fe=>bs(fe.components(),0)),P=()=>t.execCommand("mceAutocompleterClose"),H=fe=>{const Se=gs(fe,Ce=>A.from(Ce.columns)).getOr(1);return we(fe,Ce=>{const We=Ce.items;return U0(We,Ce.matchText,(Ve,gt)=>{const dt={hide:()=>P(),reload:Ue=>{_(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ue})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(Ue=>{l.set(!0),Ce.onAction(dt,Ue,Ve,gt),l.set(!1)})},Se,wm.BUBBLE_TO_SANDBOX,s,Ce.highlightOn)})},U=(fe,Se)=>{const Ce=gs(fe,We=>A.from(We.columns)).getOr(1);Zr.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(K7),root:he.fromDom(t.getBody())}},q7(IO("autocompleter-value",!0,Se,Ce,{menuType:"normal"}),Ce,O4.ContentFocus,"normal")),D().each(Pt.highlightFirst)},z=fe=>{const Se=H(fe);Se.length>0?(U(fe,Se),Ot(he.fromDom(t.getBody()),"aria-owns",a),t.inline||ae()):_()},ae=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const fe=t.getDoc().documentElement,Se=t.selection.getNode(),Ce=c_(h.element);Ws(Ce,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Se.offsetTop}px`,left:`${Se.offsetLeft}px`}),t.dom.add(fe,Ce.dom),Cs(Ce,'[role="menu"]').each(We=>{_o(We,"position"),_o(We,"max-height")})};t.on("AutocompleterStart",({lookupData:fe})=>{d.set(!0),l.set(!1),z(fe)}),t.on("AutocompleterUpdate",({lookupData:fe})=>z(fe)),t.on("AutocompleterUpdateActiveRange",({range:fe})=>g.set(fe)),t.on("AutocompleterEnd",()=>{_(),d.set(!1),l.set(!1),g.clear()});const Ee={cancelIfNecessary:P,isMenuOpen:C,isActive:w,isProcessingAction:l.get,getMenu:D};d8.setup(Ee,t)}},Jw=(t,s,a)=>Ad(t,s,a).isSome(),lB=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},iB=5,X7=400,uB=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},J7=(t,s)=>{const a=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return a>iB||l>iB},Q7=t=>{const s=os(),a=gn(!1),l=lB(_=>{t.triggerEvent(Nf(),_),a.set(!0)},X7),d=_=>(uB(_).each(D=>{l.cancel();const P={x:D.clientX,y:D.clientY,target:_.target};l.schedule(_),a.set(!1),s.set(P)}),A.none()),g=_=>(l.cancel(),uB(_).each(D=>{s.on(P=>{J7(D,P)&&s.clear()})}),A.none()),h=_=>{l.cancel();const D=P=>Ko(P.target,_.target);return s.get().filter(D).map(P=>a.get()?(_.prevent(),!1):t.triggerEvent(tv(),_))},C=ss([{key:Do(),value:d},{key:Xs(),value:g},{key:ac(),value:h}]);return{fireIfReady:(_,D)=>mt(C,D).bind(P=>P(_))}},dB=t=>t.raw.which===us[0]&&!vo(["input","textarea"],aa(t.target))&&!Jw(t.target,'[contenteditable="true"]'),W0=(t,s)=>{const a={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=Q7(a),g=Ze(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),U=>Zl(t,U,z=>{d.fireIfReady(z,U).each(Ee=>{Ee&&z.kill()}),a.triggerEvent(U,z)&&z.kill()})),h=os(),C=Zl(t,"paste",U=>{d.fireIfReady(U,"paste").each(ae=>{ae&&U.kill()}),a.triggerEvent("paste",U)&&U.kill(),h.set(setTimeout(()=>{a.triggerEvent(Mf(),U)},0))}),w=Zl(t,"keydown",U=>{a.triggerEvent("keydown",U)?U.kill():a.stopBackspace&&dB(U)&&U.prevent()}),_=Zl(t,"focusin",U=>{a.triggerEvent("focusin",U)&&U.kill()}),D=os(),P=Zl(t,"focusout",U=>{a.triggerEvent("focusout",U)&&U.kill(),D.set(setTimeout(()=>{a.triggerEvent(Um(),U)},0))});return{unbind:()=>{ut(g,U=>{U.unbind()}),w.unbind(),_.unbind(),P.unbind(),C.unbind(),h.on(clearTimeout),D.on(clearTimeout)}}},Up=(t,s)=>{const a=mt(t,"target").getOr(s);return gn(a)},eH=(t,s)=>{const a=gn(!1),l=gn(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},mB=t=>{const s=gn(!1);return{stop:()=>{s.set(!0)},cut:q,isStopped:s.get,isCut:ro,event:t,setSource:le("Cannot set source of a broadcasted event"),getSource:le("Cannot get source of a broadcasted event")}},Z0=me.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),Qw=(t,s,a,l,d,g)=>{const h=t(s,l),C=eH(a,d);return h.fold(()=>(g.logEventNoHandlers(s,l),Z0.complete()),w=>{const _=w.descHandler;return Hf(_)(C),C.isStopped()?(g.logEventStopped(s,w.element,_.purpose),Z0.stopped()):C.isCut()?(g.logEventCut(s,w.element,_.purpose),Z0.complete()):Xr(w.element).fold(()=>(g.logNoParent(s,w.element,_.purpose),Z0.complete()),P=>(g.logEventResponse(s,w.element,_.purpose),Z0.resume(P)))})},fB=(t,s,a,l,d,g)=>Qw(t,s,a,l,d,g).fold(Wt,h=>fB(t,s,a,h,d,g),ro),eS=(t,s,a,l,d)=>{const g=Up(a,l);return Qw(t,s,a,l,g,d)},tS=(t,s,a)=>{const l=mB(s);return ut(t,d=>{const g=d.descHandler;Hf(g)(l)}),l.isStopped()},tH=(t,s,a,l)=>gB(t,s,a,a.target,l),gB=(t,s,a,l,d)=>{const g=Up(a,l);return fB(t,s,a,l,g,d)},nH=(t,s)=>({element:t,descHandler:s}),oH=(t,s)=>({id:t,descHandler:s}),sH=()=>{const t={},s=(h,C,w)=>{Ne(w,(_,D)=>{const P=t[D]!==void 0?t[D]:{};P[C]=F1(_,h),t[D]=P})},a=(h,C)=>L1(C).bind(w=>mt(h,w)).map(w=>nH(C,w));return{registerId:s,unregisterId:h=>{Ne(t,(C,w)=>{po(C,h)&&delete C[h]})},filterByType:h=>mt(t,h).map(C=>Hn(C,(w,_)=>oH(_,w))).getOr([]),find:(h,C,w)=>mt(t,C).bind(_=>sm(w,D=>a(_,D),h))}},rH=()=>{const t=sH(),s={},a=_=>{const D=_.element;return L1(D).getOrThunk(()=>f_("uid-",_.element))},l=(_,D)=>{const P=s[D];if(P===_)g(_);else throw new Error('The tagId "'+D+'" is already used by: '+Ri(P.element)+`
Cannot use it for: `+Ri(_.element)+`
The conflicting element is`+(No(P.element)?" ":" not ")+"already in the DOM")},d=_=>{const D=a(_);Dr(s,D)&&l(_,D);const P=[_];t.registerId(P,D,_.events),s[D]=_},g=_=>{L1(_.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(_,D,P)=>t.find(_,D,P),filter:_=>t.filterByType(_),register:d,unregister:g,getById:_=>mt(s,_)}},mf=gi({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:ob(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[ke("components",[]),wc("containerBehaviours",[]),ke("events",{}),ke("domModification",{}),ke("eventOrder",{})]}),nS=t=>{const s=fe=>Xr(t.element).fold(Wt,Se=>Ko(fe,Se)),a=rH(),l=(fe,Se)=>a.find(s,fe,Se),d=W0(t.element,{triggerEvent:(fe,Se)=>kd(fe,Se.target,Ce=>tH(l,fe,Se,Ce))}),g={debugInfo:W("real"),triggerEvent:(fe,Se,Ce)=>{kd(fe,Se,We=>gB(l,fe,Ce,Se,We))},triggerFocus:(fe,Se)=>{L1(fe).fold(()=>{Ki(fe)},Ce=>{kd(Zu(),fe,We=>(eS(l,Zu(),{originator:Se,kill:q,prevent:q,target:fe},fe,We),!1))})},triggerEscape:(fe,Se)=>{g.triggerEvent("keydown",fe.element,Se.event)},getByUid:fe=>ae(fe),getByDom:fe=>Ee(fe),build:nl,buildOrPatch:Tv,addToGui:fe=>{w(fe)},removeFromGui:fe=>{_(fe)},addToWorld:fe=>{h(fe)},removeFromWorld:fe=>{C(fe)},broadcast:fe=>{H(fe)},broadcastOn:(fe,Se)=>{U(fe,Se)},broadcastEvent:(fe,Se)=>{z(fe,Se)},isConnected:Wt},h=fe=>{fe.connect(g),dr(fe.element)||(a.register(fe),ut(fe.components(),h),g.triggerEvent(w1(),fe.element,{target:fe.element}))},C=fe=>{dr(fe.element)||(ut(fe.components(),C),a.unregister(fe)),fe.disconnect()},w=fe=>{hm(t,fe)},_=fe=>{ef(fe)},D=()=>{d.unbind(),ai(t.element)},P=fe=>{const Se=a.filter(ju());ut(Se,Ce=>{const We=Ce.descHandler;Hf(We)(fe)})},H=fe=>{P({universal:!0,data:fe})},U=(fe,Se)=>{P({universal:!1,channels:fe,data:Se})},z=(fe,Se)=>{const Ce=a.filter(fe);return tS(Ce,Se)},ae=fe=>a.getById(fe).fold(()=>ao.error(new Error('Could not find component with uid: "'+fe+'" in system.')),ao.value),Ee=fe=>{const Se=L1(fe).getOr("not found");return ae(Se)};return h(t),{root:t,element:t.element,destroy:D,add:w,remove:_,getByUid:ae,getByDom:Ee,addToWorld:h,removeFromWorld:C,broadcast:H,broadcastOn:U,broadcastEvent:z}},aH=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ze(t.items,s.interpreter)}),cH=W([ke("prefix","form-field"),wc("fieldBehaviours",[jo,Zt])]),lH=W([tu({schema:[Qe("dom")],name:"label"}),tu({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Qe("text")],name:"aria-descriptor"}),Yc({factory:{sketch:t=>{const s=go(t,["factory"]);return t.factory.sketch(s)}},schema:[Qe("factory")],name:"field"})]),hB=(t,s,a,l)=>{const d=Sc(t.fieldBehaviours,[jo.config({find:C=>ht(C,t,"field")}),Zt.config({store:{mode:"manual",getValue:C=>jo.getCurrent(C).bind(Zt.getValue),setValue:(C,w)=>{jo.getCurrent(C).each(_=>{Zt.setValue(_,w)})}}})]),g=ys([_r((C,w)=>{const _=Gx(C,t,["label","field","aria-descriptor"]);_.field().each(D=>{const P=jt(t.prefix);_.label().each(H=>{Ot(H.element,"for",P),Ot(D.element,"id",P)}),_["aria-descriptor"]().each(H=>{const U=jt(t.prefix);Ot(H.element,"id",U),Ot(D.element,"aria-describedby",U)})})})]),h={getField:C=>ht(C,t,"field"),getLabel:C=>ht(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},Es=_l({name:"FormField",configFields:cH(),partFields:lH(),factory:hB,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var iH=tinymce.util.Tools.resolve("tinymce.html.Entities");const oS=(t,s,a,l)=>{const d=uH(t,s,a,l);return Es.sketch(d)},pB=(t,s)=>oS(t,s,[],[]),uH=(t,s,a,l)=>({dom:bB(a),components:t.toArray().concat([s]),fieldBehaviours:ft(l)}),dH=()=>bB([]),bB=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Wp=(t,s)=>Es.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[na(s.translate(t))]}),Ou=jt("form-component-change"),j0=jt("form-close"),Dh=jt("form-cancel"),mg=jt("form-action"),sS=jt("form-submit"),M4=jt("form-block"),N4=jt("form-unblock"),vB=jt("form-tabchange"),P4=jt("form-resize"),G0=(t,s,a)=>{const l=t.label.map(U=>Wp(U,s)),d=s.icons(),g=U=>{var z;return(z=d[U])!==null&&z!==void 0?z:U},h=U=>(z,ae)=>{Ad(ae.event.target,"[data-collection-item-value]").each(Ee=>{U(z,ae,Ee,Ns(Ee,"data-collection-item-value"))})},C=(U,z)=>{const ae=Ze(z,Se=>{const Ce=ed.translate(Se.text),We=t.columns===1?`<div class="tox-collection__item-label">${Ce}</div>`:"",Ve=`<div class="tox-collection__item-icon">${g(Se.icon)}</div>`,gt={_:" "," - ":" ","-":" "},dt=Ce.replace(/\_| \- |\-/g,Wn=>gt[Wn]),Ue=s.isDisabled()?" tox-collection__item--state-disabled":"";return`<div data-mce-tooltip="${dt}" class="tox-collection__item${Ue}" tabindex="-1" data-collection-item-value="${iH.encodeAllRaw(Se.value)}" aria-label="${dt}">${Ve}${We}</div>`}),Ee=t.columns!=="auto"&&t.columns>1?qs(ae,t.columns):[ae],fe=Ze(Ee,Se=>`<div class="tox-collection__group">${Se.join("")}</div>`);ap(U.element,fe.join(""))},w=h((U,z,ae,Ee)=>{z.stop(),s.isDisabled()||dn(U,mg,{name:t.name,value:Ee})}),_=[Ye(am(),h((U,z,ae)=>{Ki(ae)})),Ye(Wg(),w),Ye(tv(),w),Ye(wd(),h((U,z,ae)=>{Cs(U.element,"."+xb).each(Ee=>{Wr(Ee,xb)}),ar(ae,xb)})),Ye(Df(),h(U=>{Cs(U.element,"."+xb).each(z=>{Wr(z,xb),W1(z)})})),qu(h((U,z,ae,Ee)=>{dn(U,mg,{name:t.name,value:Ee})}))],D=(U,z)=>Ze(sl(U.element,".tox-collection__item"),z),P=Es.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:St},behaviours:ft([Ln.config({disabled:s.isDisabled,onDisabled:U=>{D(U,z=>{ar(z,"tox-collection__item--state-disabled"),Ot(z,"aria-disabled",!0)})},onEnabled:U=>{D(U,z=>{Wr(z,"tox-collection__item--state-disabled"),oe(z,"aria-disabled")})}}),xc(),Kn.config({}),al.config({...s.tooltips.getConfig({tooltipText:"",onShow:U=>{Cs(U.element,"."+xb+"[data-mce-tooltip]").each(z=>{B(z,"data-mce-tooltip").each(ae=>{al.setComponents(U,s.tooltips.getComponents({tooltipText:ae}))})})}}),mode:"children-keyboard-focus",anchor:U=>({type:"node",node:Cs(U.element,"."+xb).orThunk(()=>Ev(".tox-collection__item")),root:U.element,layouts:{onLtr:W([Pa,cc,Za,ja,Na,Os]),onRtl:W([Pa,cc,Za,ja,Na,Os])},bubble:Yu(0,-2,{})})}),Zt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(U,z)=>{C(U,z),t.columns==="auto"&&tE(U,5,"tox-collection__item").each(({numRows:ae,numColumns:Ee})=>{mn.setGridSize(U,ae,Ee)}),Ro(U,P4)}}),Cr.config({}),mn.config(f7(t.columns,"normal")),co("collection-events",_)]),eventOrder:{[di()]:["disabling","alloy.base.behaviour","collection-events"],[wd()]:["collection-events","tooltipping"]}});return oS(l,P,["tox-form__group--collection"],[])},mH=["input","textarea"],yB=t=>{const s=aa(t);return vo(mH,s)},CB=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Wr(a,s.invalidClass),s.notify.each(l=>{yB(t.element)&&Ot(t.element,"aria-invalid",!1),l.getContainer(t).each(d=>{ap(d,l.validHtml)}),l.onValid(t)})},rS=(t,s,a,l)=>{const d=s.getRoot(t).getOr(t.element);ar(d,s.invalidClass),s.notify.each(g=>{yB(t.element)&&Ot(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{ap(h,l)}),g.onInvalid(t,l)})},nd=(t,s,a)=>s.validator.fold(()=>cl.pure(ao.value(!0)),l=>l.validate(t)),aS=(t,s,a)=>(s.notify.each(l=>{l.onValidate(t)}),nd(t,s).map(l=>t.getSystem().isConnected()?l.fold(d=>(rS(t,s,a,d),ao.error(d)),d=>(CB(t,s),ao.value(d))):ao.error("No longer in system")));var gH=Object.freeze({__proto__:null,markValid:CB,markInvalid:rS,query:nd,run:aS,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Oi(a,s.invalidClass)}}),hH=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>ys([Ye(a.onEvent,l=>{aS(l,t,s).get(St)})].concat(a.validateOnLoad?[_r(l=>{aS(l,t,s).get(q)})]:[]))).getOr({})}),pH=[Qe("invalidClass"),ke("getRoot",A.none),qr("notify",[ke("aria","alert"),ke("getContainer",A.none),ke("validHtml",""),Zo("onValid"),Zo("onInvalid"),Zo("onValidate")]),qr("validator",[Qe("validate"),ke("onEvent","input"),ke("validateOnLoad",!0)])];const ff=Nc({fields:pH,name:"invalidating",active:hH,apis:gH,extra:{validation:t=>s=>{const a=Zt.getValue(s);return cl.pure(t(a))}}});var vH=Object.freeze({__proto__:null,events:()=>ys([d2(Ey(),Wt)]),exhibit:()=>_i({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const q0=Nc({fields:[],name:"unselecting",active:vH}),yH=(t,s)=>$d.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:ft([Fc.button(s.providers.isDisabled),xc(),q0.config({}),Cr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>cl.nu(l=>t.fetch(l)).map(l=>A.from(vE($s(S4(jt("menu-value"),l,d=>{t.onItemAction(a,d)},t.columns,t.presets,wm.CLOSE_ON_EXECUTE,ro,s.providers),{movement:fE(t.columns,t.presets)})))),parts:{menu:Fw(!1,1,t.presets)}}),B4=jt("color-input-change"),$4=jt("color-swatch-change"),I4=jt("color-picker-cancel"),CH=(t,s,a,l)=>{const d=Es.parts.field({factory:lf,inputClasses:["tox-textfield"],data:l,onSetValue:_=>ff.run(_).get(q),inputBehaviours:ft([Ln.config({disabled:s.providers.isDisabled}),xc(),Cr.config({}),ff.config({invalidClass:"tox-textbox-field-invalid",getRoot:_=>Ac(_.element),notify:{onValid:_=>{const D=Zt.getValue(_);dn(_,B4,{color:D})}},validator:{validateOnLoad:!1,validate:_=>{const D=Zt.getValue(_);if(D.length===0)return cl.pure(ao.value(!0));{const P=he.fromTag("span");Yt(P,"background-color",D);const H=Ms(P,"background-color").fold(()=>ao.error("blah"),U=>ao.value(D));return cl.pure(H)}}}})]),selectOnFocus:!1}),g=t.label.map(_=>Wp(_,s.providers)),h=(_,D)=>{dn(_,$4,{value:D})},C=(_,D)=>{w.getOpt(_).each(P=>{D==="custom"?a.colorPicker(H=>{H.fold(()=>Ro(P,I4),U=>{h(P,U),$P(t.storageKey,U)})},"#ffffff"):D==="remove"?h(P,""):h(P,D)})},w=ps(yH({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Na,Za,Pa],onLtr:()=>[Za,Na,Pa]},components:[],fetch:WP(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:C},s));return Es.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,w.asSpec()]}]),fieldBehaviours:ft([co("form-field-events",[Ye(B4,(_,D)=>{w.getOpt(_).each(P=>{Yt(P.element,"background-color",D.event.color)}),dn(_,Ou,{name:t.name})}),Ye($4,(_,D)=>{Es.getField(_).each(P=>{Zt.setValue(P,D.event.value),jo.getCurrent(_).each(Vn.focus)})}),Ye(I4,(_,D)=>{Es.getField(_).each(P=>{jo.getCurrent(_).each(Vn.focus)})})])])})},wH=tu({schema:[Qe("dom")],name:"label"}),Zp=t=>tu({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:ys([Kh(Do(),(d,g,h)=>l(d,h),[s]),Kh(ui(),(d,g,h)=>l(d,h),[s]),Kh(Ug(),(d,g,h)=>{h.mouseIsDown.get()&&l(d,h)},[s])])}))}),SH=Zp("top-left"),xH=Zp("top"),TH=Zp("top-right"),L4=Zp("right"),EH=Zp("bottom-right"),kH=Zp("bottom"),wB=Zp("bottom-left"),_H=Zp("left"),AH=Yc({name:"thumb",defaults:W({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:ys([jg(Do(),t,"spectrum"),jg(Xs(),t,"spectrum"),jg(ac(),t,"spectrum"),jg(ui(),t,"spectrum"),jg(Ug(),t,"spectrum"),jg(rm(),t,"spectrum")])})}),yE=t=>Cm(t.event),OH=Yc({schema:[hc("mouseIsDown",()=>gn(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,l=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,t,h));return{behaviours:ft([mn.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,t,yE(g)),onRight:(d,g)=>a.onRight(d,t,yE(g)),onUp:(d,g)=>a.onUp(d,t,yE(g)),onDown:(d,g)=>a.onDown(d,t,yE(g))}),Cr.config({}),Vn.config({})]),events:ys([Ye(Do(),l),Ye(Xs(),l),Ye(ui(),l),Ye(Ug(),(d,g)=>{t.mouseIsDown.get()&&l(d,g)})])}}});var DH=[wH,_H,L4,xH,kH,SH,TH,wB,EH,AH,OH];const cS=W("slider.change.value"),SB=t=>t.type.indexOf("touch")!==-1,CE=t=>{const s=t.event.raw;if(SB(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?A.some(a.touches[0]).map(l=>or(l.clientX,l.clientY)):A.none()}else{const a=s;return a.clientX!==void 0?A.some(a).map(l=>or(l.clientX,l.clientY)):A.none()}},RH="top",MH="right",NH="bottom",PH="left",Mb=t=>t.model.minX,Nb=t=>t.model.minY,lS=t=>t.model.minX-1,iS=t=>t.model.minY-1,jp=t=>t.model.maxX,Rh=t=>t.model.maxY,wE=t=>t.model.maxX+1,uS=t=>t.model.maxY+1,xB=(t,s,a)=>s(t)-a(t),F4=t=>xB(t,jp,Mb),H4=t=>xB(t,Rh,Nb),TB=t=>F4(t)/2,SE=t=>H4(t)/2,od=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,EB=t=>t.snapToGrid,K0=t=>t.snapStart,kB=t=>t.rounded,Y0=(t,s)=>t[s+"-edge"]!==void 0,_B=t=>Y0(t,PH),AB=t=>Y0(t,MH),OB=t=>Y0(t,RH),V4=t=>Y0(t,NH),Mh=t=>t.model.value.get(),fg=(t,s)=>({x:t,y:s}),sd=(t,s)=>{dn(t,cS(),{value:s})},z4=(t,s)=>{sd(t,fg(lS(s),iS(s)))},BH=(t,s)=>{sd(t,iS(s))},rd=(t,s)=>{sd(t,fg(TB(s),iS(s)))},$H=(t,s)=>{sd(t,fg(wE(s),iS(s)))},IH=(t,s)=>{sd(t,wE(s))},DB=(t,s)=>{sd(t,fg(wE(s),SE(s)))},RB=(t,s)=>{sd(t,fg(wE(s),uS(s)))},LH=(t,s)=>{sd(t,uS(s))},FH=(t,s)=>{sd(t,fg(TB(s),uS(s)))},HH=(t,s)=>{sd(t,fg(lS(s),uS(s)))},VH=(t,s)=>{sd(t,lS(s))},zH=(t,s)=>{sd(t,fg(lS(s),SE(s)))},U4=(t,s,a,l)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-l),W4=(t,s,a,l)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+l),Z4=(t,s,a)=>Math.max(s,Math.min(a,t)),UH=(t,s,a,l,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/l)*l;return Z4(s+h,s-1,a+1)},g=>{const h=(t-g)%l,C=Math.round(h/l),w=Math.floor((t-g)/l),_=Math.floor((a-g)/l),D=Math.min(_,w+C),P=g+D*l;return Math.max(g,P)}),WH=(t,s,a)=>Math.min(a,Math.max(t,s))-s,MB=t=>{const{min:s,max:a,range:l,value:d,step:g,snap:h,snapStart:C,rounded:w,hasMinEdge:_,hasMaxEdge:D,minBound:P,maxBound:H,screenRange:U}=t,z=_?s-1:s,ae=D?a+1:a;if(d<P)return z;if(d>H)return ae;{const Ee=WH(d,P,H),fe=Z4(Ee/U*l+s,z,ae);return h&&fe>=s&&fe<=a?UH(fe,s,a,g,C):w?Math.round(fe):fe}},j4=t=>{const{min:s,max:a,range:l,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:w,centerMinEdge:_,centerMaxEdge:D}=t;return d<s?g?0:_:d>a?h?C:D:(d-s)/l*w},dS="top",NB="right",xE="bottom",Gp="left",PB="width",BB="height",gf=t=>t.element.dom.getBoundingClientRect(),Tm=(t,s)=>t[s],TE=t=>{const s=gf(t);return Tm(s,Gp)},mS=t=>{const s=gf(t);return Tm(s,NB)},EE=t=>{const s=gf(t);return Tm(s,dS)},$B=t=>{const s=gf(t);return Tm(s,xE)},G4=t=>{const s=gf(t);return Tm(s,PB)},q4=t=>{const s=gf(t);return Tm(s,BB)},kE=(t,s,a)=>(t+s)/2-a,K4=(t,s)=>{const a=gf(t),l=gf(s),d=Tm(a,Gp),g=Tm(a,NB),h=Tm(l,Gp);return kE(d,g,h)},pi=(t,s)=>{const a=gf(t),l=gf(s),d=Tm(a,dS),g=Tm(a,xE),h=Tm(l,dS);return kE(d,g,h)},fS=(t,s)=>{dn(t,cS(),{value:s})},Y4=(t,s,a)=>{const l={min:Mb(s),max:jp(s),range:F4(s),value:a,step:od(s),snap:EB(s),snapStart:K0(s),rounded:kB(s),hasMinEdge:_B(s),hasMaxEdge:AB(s),minBound:TE(t),maxBound:mS(t),screenRange:G4(t)};return MB(l)},ZH=(t,s,a)=>{const l=Y4(t,s,a);return fS(t,l),l},IB=(t,s)=>{const a=Mb(s);fS(t,a)},jH=(t,s)=>{const a=jp(s);fS(t,a)},GH=(t,s,a,l)=>{const g=(t>0?W4:U4)(Mh(a),Mb(a),jp(a),od(a,l));return fS(s,g),A.some(g)},LB=t=>(s,a,l)=>GH(t,s,a,l).map(Wt),FB=t=>CE(t).map(a=>a.left),gg=(t,s,a,l,d)=>{const h=G4(t),C=l.bind(D=>A.some(K4(D,t))).getOr(0),w=d.bind(D=>A.some(K4(D,t))).getOr(h),_={min:Mb(s),max:jp(s),range:F4(s),value:a,hasMinEdge:_B(s),hasMaxEdge:AB(s),minBound:TE(t),minOffset:0,maxBound:mS(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:w};return j4(_)},gS=(t,s,a,l,d,g)=>{const h=gg(s,g,a,l,d);return TE(s)-TE(t)+h},HB=(t,s,a,l)=>{const d=Mh(a),g=gS(t,l.getSpectrum(t),d,l.getLeftEdge(t),l.getRightEdge(t),a),h=dc(s.element)/2;Yt(s.element,"left",g-h+"px")},_E=LB(-1),X4=LB(1),qH=A.none,KH=A.none,YH={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(IH),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(VH)};var XH=Object.freeze({__proto__:null,setValueFrom:ZH,setToMin:IB,setToMax:jH,findValueOfOffset:Y4,getValueFromEvent:FB,findPositionOfValue:gS,setPositionFromValue:HB,onLeft:_E,onRight:X4,onUp:qH,onDown:KH,edgeActions:YH});const AE=(t,s)=>{dn(t,cS(),{value:s})},J4=(t,s,a)=>{const l={min:Nb(s),max:Rh(s),range:H4(s),value:a,step:od(s),snap:EB(s),snapStart:K0(s),rounded:kB(s),hasMinEdge:OB(s),hasMaxEdge:V4(s),minBound:EE(t),maxBound:$B(t),screenRange:q4(t)};return MB(l)},JH=(t,s,a)=>{const l=J4(t,s,a);return AE(t,l),l},VB=(t,s)=>{const a=Nb(s);AE(t,a)},QH=(t,s)=>{const a=Rh(s);AE(t,a)},hg=(t,s,a,l)=>{const g=(t>0?W4:U4)(Mh(a),Nb(a),Rh(a),od(a,l));return AE(s,g),A.some(g)},hS=t=>(s,a,l)=>hg(t,s,a,l).map(Wt),eV=t=>CE(t).map(a=>a.top),tV=(t,s,a,l,d)=>{const h=q4(t),C=l.bind(D=>A.some(pi(D,t))).getOr(0),w=d.bind(D=>A.some(pi(D,t))).getOr(h),_={min:Nb(s),max:Rh(s),range:H4(s),value:a,hasMinEdge:OB(s),hasMaxEdge:V4(s),minBound:EE(t),minOffset:0,maxBound:$B(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:w};return j4(_)},OE=(t,s,a,l,d,g)=>{const h=tV(s,g,a,l,d);return EE(s)-EE(t)+h},zB=(t,s,a,l)=>{const d=Mh(a),g=OE(t,l.getSpectrum(t),d,l.getTopEdge(t),l.getBottomEdge(t),a),h=Ys(s.element)/2;Yt(s.element,"top",g-h+"px")},Q4=A.none,DE=A.none,pS=hS(-1),bS=hS(1),UB={"top-left":A.none(),top:A.some(BH),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(LH),"bottom-left":A.none(),left:A.none()};var WB=Object.freeze({__proto__:null,setValueFrom:JH,setToMin:VB,setToMax:QH,findValueOfOffset:J4,getValueFromEvent:eV,findPositionOfValue:OE,setPositionFromValue:zB,onLeft:Q4,onRight:DE,onUp:pS,onDown:bS,edgeActions:UB});const vS=(t,s)=>{dn(t,cS(),{value:s})},yS=(t,s)=>({x:t,y:s}),nV=(t,s,a)=>{const l=Y4(t,s,a.left),d=J4(t,s,a.top),g=yS(l,d);return vS(t,g),g},oV=(t,s,a,l,d)=>{const g=t>0?W4:U4,h=s?Mh(l).x:g(Mh(l).x,Mb(l),jp(l),od(l,d)),C=s?g(Mh(l).y,Nb(l),Rh(l),od(l,d)):Mh(l).y;return vS(a,yS(h,C)),A.some(h)},RE=(t,s)=>(a,l,d)=>oV(t,s,a,l,d).map(Wt),sV=(t,s)=>{const a=Mb(s),l=Nb(s);vS(t,yS(a,l))},rV=(t,s)=>{const a=jp(s),l=Rh(s);vS(t,yS(a,l))},ZB=t=>CE(t),jB=(t,s,a,l)=>{const d=Mh(a),g=gS(t,l.getSpectrum(t),d.x,l.getLeftEdge(t),l.getRightEdge(t),a),h=OE(t,l.getSpectrum(t),d.y,l.getTopEdge(t),l.getBottomEdge(t),a),C=dc(s.element)/2,w=Ys(s.element)/2;Yt(s.element,"left",g-C+"px"),Yt(s.element,"top",h-w+"px")},aV=RE(-1,!1),GB=RE(1,!1),cV=RE(-1,!0),qB=RE(1,!0),CS={"top-left":A.some(z4),top:A.some(rd),"top-right":A.some($H),right:A.some(DB),"bottom-right":A.some(RB),bottom:A.some(FH),"bottom-left":A.some(HH),left:A.some(zH)};var lV=Object.freeze({__proto__:null,setValueFrom:nV,setToMin:sV,setToMax:rV,getValueFromEvent:ZB,setPositionFromValue:jB,onLeft:aV,onRight:GB,onUp:cV,onDown:qB,edgeActions:CS});const KB=[ke("stepSize",1),ke("speedMultiplier",10),ke("onChange",q),ke("onChoose",q),ke("onInit",q),ke("onDragStart",q),ke("onDragEnd",q),ke("snapToGrid",!1),ke("rounded",!0),ms("snapStart"),ta("model",Fl("mode",{x:[ke("minX",0),ke("maxX",100),hc("value",t=>gn(t.mode.minX)),Qe("getInitialValue"),cr("manager",XH)],y:[ke("minY",0),ke("maxY",100),hc("value",t=>gn(t.mode.minY)),Qe("getInitialValue"),cr("manager",WB)],xy:[ke("minX",0),ke("maxX",100),ke("minY",0),ke("maxY",100),hc("value",t=>gn({x:t.mode.minX,y:t.mode.minY})),Qe("getInitialValue"),cr("manager",lV)]})),wc("sliderBehaviours",[mn,Zt]),hc("mouseIsDown",()=>gn(!1))],Em=_l({name:"Slider",configFields:KB,partFields:DH,factory:(t,s,a,l)=>{const d=Ve=>Gl(Ve,t,"thumb"),g=Ve=>Gl(Ve,t,"spectrum"),h=Ve=>ht(Ve,t,"left-edge"),C=Ve=>ht(Ve,t,"right-edge"),w=Ve=>ht(Ve,t,"top-edge"),_=Ve=>ht(Ve,t,"bottom-edge"),D=t.model,P=D.manager,H=(Ve,gt)=>{P.setPositionFromValue(Ve,gt,t,{getLeftEdge:h,getRightEdge:C,getTopEdge:w,getBottomEdge:_,getSpectrum:g})},U=(Ve,gt)=>{D.value.set(gt);const dt=d(Ve);H(Ve,dt)},z=(Ve,gt)=>{U(Ve,gt);const dt=d(Ve);return t.onChange(Ve,dt,gt),A.some(!0)},ae=Ve=>{P.setToMin(Ve,t)},Ee=Ve=>{P.setToMax(Ve,t)},fe=Ve=>{const gt=()=>{ht(Ve,t,"thumb").each(Ue=>{const Wn=D.value.get();t.onChoose(Ve,Ue,Wn)})},dt=t.mouseIsDown.get();t.mouseIsDown.set(!1),dt&&gt()},Se=(Ve,gt)=>{gt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Ve,d(Ve))},Ce=(Ve,gt)=>{gt.stop(),t.onDragEnd(Ve,d(Ve)),fe(Ve)},We=Ve=>{ht(Ve,t,"spectrum").map(mn.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Sc(t.sliderBehaviours,[mn.config({mode:"special",focusIn:We}),Zt.config({store:{mode:"manual",getValue:Ve=>D.value.get(),setValue:U}}),fi.config({channels:{[eb()]:{onReceive:fe}}})]),events:ys([Ye(cS(),(Ve,gt)=>{z(Ve,gt.event.value)}),_r((Ve,gt)=>{const dt=D.getInitialValue();D.value.set(dt);const Ue=d(Ve);H(Ve,Ue);const Wn=g(Ve);t.onInit(Ve,Ue,Wn,D.value.get())}),Ye(Do(),Se),Ye(ac(),Ce),Ye(ui(),(Ve,gt)=>{We(Ve),Se(Ve,gt)}),Ye(rm(),Ce)]),apis:{resetToMin:ae,resetToMax:Ee,setValue:U,refresh:H},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),eD=jt("rgb-hex-update"),YB=jt("slider-update"),tD=jt("palette-update"),iV=(t,s)=>{const a=Em.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=Em.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Em.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:W(0)},components:[a,l],sliderBehaviours:ft([Vn.config({})]),onChange:(d,g,h)=>{Ot(d.element,"aria-valuenow",Math.floor(360-h*3.6)),dn(d,YB,{value:h})}})},nD="form",oD=[wc("formBehaviours",[Zt])],pg=t=>"<alloy.field."+t+">",sD=t=>{const s=(()=>{const g=[];return{field:(C,w)=>(g.push(C),jx(nD,pg(C),w)),record:W(g)}})(),a=t(s),l=s.record(),d=Ze(l,g=>Yc({name:g,pname:pg(g)}));return of(nD,oD,d,JB,a)},XB=(t,s)=>t.fold(()=>ao.error(s),ao.value),JB=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Sc(t.formBehaviours,[Zt.config({store:{mode:"manual",getValue:a=>{const l=aw(a,t);return Xe(l,(d,g)=>d().bind(h=>{const C=jo.getCurrent(h);return XB(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Ri(h.element)))}).map(Zt.getValue))},setValue:(a,l)=>{Ne(l,(d,g)=>{ht(a,t,g).each(h=>{jo.getCurrent(h).each(C=>{Zt.setValue(C,d)})})})}}})]),apis:{getField:(a,l)=>ht(a,t,l).bind(jo.getCurrent)}}),qp={getField:dp((t,s,a)=>t.getField(s,a)),sketch:sD},rD=jt("valid-input"),wS=jt("invalid-input"),aD=jt("validating-input"),ME="colorcustom.rgb.",uV=(t,s,a,l)=>{const d=(H,U)=>ff.config({invalidClass:s("invalid"),notify:{onValidate:z=>{dn(z,aD,{type:H})},onValid:z=>{dn(z,rD,{type:H,value:Zt.getValue(z)})},onInvalid:z=>{dn(z,wS,{type:H,value:Zt.getValue(z)})}},validator:{validate:z=>{const ae=Zt.getValue(z),Ee=U(ae)?ao.value(!0):ao.error(t("aria.input.invalid"));return cl.pure(Ee)},validateOnLoad:!1}}),g=(H,U,z,ae,Ee)=>{const fe=t(ME+"range"),Se=Es.parts.label({dom:{tag:"label",attributes:{"aria-label":ae}},components:[na(z)]}),Ce=Es.parts.field({data:Ee,factory:lf,inputAttributes:{type:"text",...U==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:ft([d(U,H),Cr.config({})]),onSetValue:dt=>{ff.isInvalid(dt)&&ff.run(dt).get(q)}}),We=[Se,Ce],Ve=U!=="hex"?[Es.parts["aria-descriptor"]({text:fe})]:[],gt=We.concat(Ve);return{dom:{tag:"div",attributes:{role:"presentation"}},components:gt}},h=(H,U)=>{const z=jw(U);return qp.getField(H,"hex").each(ae=>{Vn.isFocused(ae)||Zt.setValue(H,{hex:z.value})}),z},C=(H,U)=>{const z=U.red,ae=U.green,Ee=U.blue;Zt.setValue(H,{red:z,green:ae,blue:Ee})},w=ps({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),_=(H,U)=>{w.getOpt(H).each(z=>{Yt(z.element,"background-color","#"+U.value)})};return gi({factory:()=>{const H={red:gn(A.some(255)),green:gn(A.some(255)),blue:gn(A.some(255)),hex:gn(A.some("ffffff"))},U=(xn,ds)=>{const Qo=Gw(ds);C(xn,Qo),fe(Qo)},z=xn=>H[xn].get(),ae=(xn,ds)=>{H[xn].set(ds)},Ee=()=>z("red").bind(xn=>z("green").bind(ds=>z("blue").map(Qo=>zp(xn,ds,Qo,1)))),fe=xn=>{const ds=xn.red,Qo=xn.green,Eo=xn.blue;ae("red",A.some(ds)),ae("green",A.some(Qo)),ae("blue",A.some(Eo))},Se=(xn,ds)=>{const Qo=ds.event;Qo.type!=="hex"?ae(Qo.type,A.none()):l(xn)},Ce=(xn,ds)=>{a(xn);const Qo=CP(ds);ae("hex",A.some(Qo.value));const Eo=Gw(Qo);C(xn,Eo),fe(Eo),dn(xn,eD,{hex:Qo}),_(xn,Qo)},We=(xn,ds,Qo)=>{const Eo=parseInt(Qo,10);ae(ds,A.some(Eo)),Ee().each(Et=>{const sn=h(xn,Et);dn(xn,eD,{hex:sn}),_(xn,sn)})},Ve=xn=>xn.type==="hex",gt=(xn,ds)=>{const Qo=ds.event;Ve(Qo)?Ce(xn,Qo.value):We(xn,Qo.type,Qo.value)},dt=xn=>({label:t(ME+xn+".label"),description:t(ME+xn+".description")}),Ue=dt("red"),Wn=dt("green"),en=dt("blue"),Mn=dt("hex");return $s(qp.sketch(xn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[xn.field("red",Es.sketch(g(a4,"red",Ue.label,Ue.description,255))),xn.field("green",Es.sketch(g(a4,"green",Wn.label,Wn.description,255))),xn.field("blue",Es.sketch(g(a4,"blue",en.label,en.description,255))),xn.field("hex",Es.sketch(g(o4,"hex",Mn.label,Mn.description,"ffffff"))),w.asSpec()],formBehaviours:ft([ff.config({invalidClass:s("form-invalid")}),co("rgb-form-events",[Ye(rD,gt),Ye(wS,Se),Ye(aD,Se)])])})),{apis:{updateHex:(xn,ds)=>{Zt.setValue(xn,{hex:ds.value}),U(xn,ds),_(xn,ds)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(H,U,z)=>{H.updateHex(U,z)}},extraApis:{}})},dV=(t,s)=>{const a=Em.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=Em.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(_,D)=>{const{width:P,height:H}=_,U=_.getContext("2d");if(U===null)return;U.fillStyle=D,U.fillRect(0,0,P,H);const z=U.createLinearGradient(0,0,P,0);z.addColorStop(0,"rgba(255,255,255,1)"),z.addColorStop(1,"rgba(255,255,255,0)"),U.fillStyle=z,U.fillRect(0,0,P,H);const ae=U.createLinearGradient(0,0,0,H);ae.addColorStop(0,"rgba(0,0,0,0)"),ae.addColorStop(1,"rgba(0,0,0,1)"),U.fillStyle=ae,U.fillRect(0,0,P,H)},g=(_,D)=>{const P=_.components()[0].element.dom,H=Kw(D,100,100),U=c4(H);d(P,_P(U))},h=(_,D)=>{const P=Yw(Gw(D));Em.setValue(_,{x:P.saturation,y:100-P.value}),Ot(_.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",P.saturation,P.value]))};return gi({factory:_=>{const D=W({x:0,y:0}),P=(z,ae,Ee)=>{jn(Ee)||Ot(z.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(Ee.x),Math.floor(100-Ee.y)])),dn(z,tD,{value:Ee})},H=(z,ae,Ee,fe)=>{d(Ee.element.dom,_P(AP))},U=ft([jo.config({find:A.some}),Vn.config({})]);return Em.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,l],onChange:P,onInit:H,sliderBehaviours:U})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(_,D,P)=>{g(D,P)},setThumb:(_,D,P)=>{h(D,P)}},extraApis:{}})},mV=(t,s)=>{const a=d=>{const g=uV(t,s,d.onValidHex,d.onInvalidHex),h=dV(t,s),C=gt=>(100-gt)/100*360,w=gt=>100-gt/360*100,_={paletteRgba:gn(AP),paletteHue:gn(0)},D=ps(iV(t,s)),P=ps(h.sketch({})),H=ps(g.sketch({})),U=(gt,dt,Ue)=>{P.getOpt(gt).each(Wn=>{h.setHue(Wn,Ue)})},z=(gt,dt)=>{H.getOpt(gt).each(Ue=>{g.updateHex(Ue,dt)})},ae=(gt,dt,Ue)=>{D.getOpt(gt).each(Wn=>{Em.setValue(Wn,w(Ue))})},Ee=(gt,dt)=>{P.getOpt(gt).each(Ue=>{h.setThumb(Ue,dt)})},fe=(gt,dt)=>{const Ue=Gw(gt);_.paletteRgba.set(Ue),_.paletteHue.set(dt)},Se=(gt,dt,Ue,Wn)=>{fe(dt,Ue),ut(Wn,en=>{en(gt,dt,Ue)})},Ce=()=>{const gt=[z];return(dt,Ue)=>{const Wn=Ue.event.value,en=_.paletteHue.get(),Mn=Kw(en,Wn.x,100-Wn.y),xn=Xw(Mn);Se(dt,xn,en,gt)}},We=()=>{const gt=[U,z];return(dt,Ue)=>{const Wn=C(Ue.event.value),en=_.paletteRgba.get(),Mn=Yw(en),xn=Kw(Wn,Mn.saturation,Mn.value),ds=Xw(xn);Se(dt,ds,Wn,gt)}},Ve=()=>{const gt=[U,ae,Ee];return(dt,Ue)=>{const Wn=Ue.event.hex,en=m4(Wn);Se(dt,Wn,en.hue,gt)}};return{uid:d.uid,dom:d.dom,components:[P.asSpec(),D.asSpec(),H.asSpec()],behaviours:ft([co("colour-picker-events",[Ye(eD,Ve()),Ye(tD,Ce()),Ye(YB,We())]),jo.config({find:gt=>H.getOpt(gt)}),mn.config({mode:"acyclic"})])}};return gi({name:"ColourPicker",configFields:[Qe("dom"),ke("onValidHex",q),ke("onInvalidHex",q)],factory:a})},Id={self:()=>jo.config({find:A.some}),memento:t=>jo.config({find:t.getOpt}),childAt:t=>jo.config({find:s=>pl(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},gV=Nn([ke("preprocess",St),ke("postprocess",St)]),hV=(t,s)=>{const a=st("RepresentingConfigs.memento processors",gV,s);return Zt.config({store:{mode:"manual",getValue:l=>{const d=t.get(l),g=Zt.getValue(d);return a.postprocess(g)},setValue:(l,d)=>{const g=a.preprocess(d),h=t.get(l);Zt.setValue(h,g)}}})},Pb=(t,s,a)=>Zt.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:a}}),SS=(t,s,a)=>Pb(t,l=>s(l.element),(l,d)=>a(l.element,d)),pV=t=>SS(t,mi,ap),NE=t=>Zt.config({store:{mode:"memory",initialValue:t}}),QB={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},e$=t=>s=>Mt(s)?t.translate(QB[s]):t.translate(s),bV=(t,s,a)=>{const l=w=>"tox-"+w,d=mV(e$(s),l),g=w=>{dn(w,mg,{name:"hex-valid",value:!0})},h=w=>{dn(w,mg,{name:"hex-valid",value:!1})},C=ps(d.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:h}));return{dom:{tag:"div"},components:[C.asSpec()],behaviours:ft([Pb(a,w=>{const _=C.get(w);return jo.getCurrent(_).bind(H=>Zt.getValue(H).hex).map(H=>"#"+fl(H,"#")).getOr("")},(w,_)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,P=A.from(D.exec(_)).bind(z=>bs(z,1)),H=C.get(w);jo.getCurrent(H).fold(()=>{console.log("Can not find form")},z=>{Zt.setValue(z,{hex:P.getOr("")}),qp.getField(z,"hex").each(ae=>{Ro(ae,cm())})})}),Id.self()])}};var vV=tinymce.util.Tools.resolve("tinymce.Resource");const PE=t=>po(t,"init"),yV=t=>{const s=os(),a=ps({dom:{tag:t.tag}}),l=os(),d=!PE(t)&&t.onFocus.isSome()?[Vn.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),Cr.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:ft([co("custom-editor-events",[_r(g=>{a.getOpt(g).each(h=>{(PE(t)?t.init(h.element.dom):vV.load(t.scriptId,t.scriptUrl).then(C=>C(h.element.dom,t.settings))).then(C=>{l.on(w=>{C.setValue(w)}),l.clear(),s.set(C)})})})]),Pb(A.none(),()=>s.get().fold(()=>l.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>l.set(h),C=>C.setValue(h))}),Id.self()].concat(d)),components:[a.asSpec()]}};var bg=tinymce.util.Tools.resolve("tinymce.util.Tools");const CV=(t,s)=>{const a=bg.explode(s.getOption("images_file_types")),l=d=>Gs(a,g=>La(d.name.toLowerCase(),`.${g.toLowerCase()}`));return io(er(t),l)},wV=(t,s,a)=>{const l=(H,U)=>{U.stop()},d=H=>(U,z)=>{ut(H,ae=>{ae(U,z)})},g=(H,U)=>{var z;if(!Ln.isDisabled(H)){const ae=U.event.raw;C(H,(z=ae.dataTransfer)===null||z===void 0?void 0:z.files)}},h=(H,U)=>{const z=U.event.raw.target;C(H,z.files)},C=(H,U)=>{U&&(Zt.setValue(H,CV(U,s)),dn(H,Ou,{name:t.name}))},w=ps({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:ft([co("input-file-events",[Sd(Wg()),Sd(tv())])])}),_=H=>({uid:H.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:ft([NE(a.getOr([])),Id.self(),Ln.config({}),yo.config({toggleClass:"dragenter",toggleOnExecute:!1}),co("dropzone-events",[Ye("dragenter",d([l,yo.toggle])),Ye("dragleave",d([l,yo.toggle])),Ye("dragover",l),Ye("drop",d([l,g])),Ye(zm(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[na(s.translate("Drop an image here"))]},rl.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[na(s.translate("Browse for an image")),w.asSpec()],action:U=>{w.get(U).element.dom.click()},buttonBehaviours:ft([Cr.config({}),Fc.button(s.isDisabled),xc()])})]}]}),D=t.label.map(H=>Wp(H,s)),P=Es.parts.field({factory:{sketch:_}});return oS(D,P,["tox-form__group--stretched"],[])},SV=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ze(t.items,s.interpreter)}),t$=(t,s)=>{let a=null,l=null;return{cancel:()=>{Qt(a)||(clearTimeout(a),a=null,l=null)},throttle:(...h)=>{l=h,Qt(a)&&(a=setTimeout(()=>{const C=l;a=null,l=null,t.apply(null,C)},s))}}},n$=(t,s)=>{let a=null;return{cancel:()=>{Qt(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{Qt(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},cD=(t,s)=>{let a=null;const l=()=>{Qt(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...g)=>{l(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},lD=jt("alloy-fake-before-tabstop"),iD=jt("alloy-fake-after-tabstop"),o$=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:ft([Vn.config({ignore:!0}),Cr.config({})])}),uD=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[o$([lD]),s,o$([iD])],behaviours:ft([Id.childAt(1)])}),s$=(t,s)=>{dn(t,qi(),{raw:{which:9,shiftKey:s}})},r$=(t,s)=>{const a=s.element;Oi(a,lD)?s$(t,!0):Oi(a,iD)&&s$(t,!1)},xS=t=>Jw(t,["."+lD,"."+iD].join(","),ro),BE=jt("update-dialog"),a$=jt("update-title"),c$=jt("update-body"),l$=jt("update-footer"),i$=jt("body-send-message"),$E=jt("dialog-focus-shifted"),dD=vl().browser,TS=dD.isSafari(),mD=dD.isFirefox(),u$=TS||mD,xV=dD.isChromium(),TV=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,X0=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),fD=(t,s)=>{const a=t.body;return A.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!xV&&!TS||qe(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},d$=(t,s,a)=>{const l=t.dom;A.from(l.contentDocument).fold(a,d=>{let g=0;const h=fD(d,s).map(w=>(g=w.scrollTop,w)).forall(TV),C=()=>{const w=l.contentWindow;qe(w)&&(h?X0(w,"bottom"):!h&&u$&&g!==0&&X0(w,g))};TS&&l.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),TS||C()})},gD=wn(u$,TS?500:200).map(t=>t$(d$,t)),EV=(t,s)=>{const a=gn(t.getOr(""));return{getValue:l=>a.get(),setValue:(l,d)=>{if(a.get()!==d){const g=l.element,h=()=>Ot(g,"srcdoc",d);s?gD.fold(W(d$),C=>C.throttle)(g,d,h):h()}a.set(d)}}},hD=(t,s,a)=>{const l="tox-dialog__iframe",d=t.transparent?[]:[`${l}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(P=>({title:P})).getOr({}),...a.map(P=>({srcdoc:P})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=EV(a,t.streamContent),w=t.label.map(P=>Wp(P,s)),_=P=>uD(A.from(g),{uid:P.uid,dom:{tag:"iframe",attributes:h,classes:[l,...d]},behaviours:ft([Cr.config({}),Vn.config({}),Pb(a,C.getValue,C.setValue),fi.config({channels:{[$E]:{onReceive:(H,U)=>{U.newFocus.each(z=>{Ac(H.element).each(ae=>{(Ko(H.element,z)?ar:Wr)(ae,"tox-navobj-bordered-focus")})})}}}})])}),D=Es.parts.field({factory:{sketch:_}});return oS(w,D,["tox-form__group--stretched"],[])},m$=t=>new Promise((s,a)=>{const l=()=>{g(),s(t)},d=[Zl(t,"load",l),Zl(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>ut(d,h=>h.unbind());t.dom.complete&&l()}),kV=(t,s,a,l,d)=>{const g=a*d,h=l*d,C=Math.max(0,t/2-g/2),w=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:w.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},_V=(t,s,a)=>{const l=dc(t),d=Ys(t);return Math.min(l/s,d/a,1)},f$=(t,s)=>{const a=gn(s.getOr({url:""})),l=ps({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(w=>({src:w.url})).getOr({})}}),d=ps({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(w,_)=>{const D={url:_.url};_.zoom.each(H=>D.zoom=H),_.cachedWidth.each(H=>D.cachedWidth=H),_.cachedHeight.each(H=>D.cachedHeight=H),a.set(D);const P=()=>{const{cachedWidth:H,cachedHeight:U,zoom:z}=D;if(!Nt(H)&&!Nt(U)){if(Nt(z)){const Ee=_V(w.element,H,U);D.zoom=Ee}const ae=kV(dc(w.element),Ys(w.element),H,U,D.zoom);d.getOpt(w).each(Ee=>{Ws(Ee.element,ae)})}};l.getOpt(w).each(H=>{const U=H.element;_.url!==Ns(U,"src")&&(Ot(U,"src",_.url),Wr(w.element,"tox-imagepreview__loaded")),P(),m$(U).then(z=>{w.getSystem().isConnected()&&(ar(w.element,"tox-imagepreview__loaded"),D.cachedWidth=z.dom.naturalWidth,D.cachedHeight=z.dom.naturalHeight,P())})})},h={};t.height.each(w=>h.height=w);const C=s.map(w=>({url:w.url,zoom:A.from(w.zoom),cachedWidth:A.from(w.cachedWidth),cachedHeight:A.from(w.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:ft([Id.self(),Pb(C,()=>a.get(),g)])}},g$=(t,s)=>{const a="tox-label",l=t.align==="center"?[`${a}--center`]:[],d=t.align==="end"?[`${a}--end`]:[],g={dom:{tag:"label",classes:[a,...l,...d]},components:[na(s.providers.translate(t.label))]},h=Ze(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[g,...h],behaviours:ft([Id.self(),Kn.config({}),pV(A.none()),mn.config({mode:"acyclic"})])}},h$=jt("toolbar.button.execute"),p$=t=>qu((s,a)=>{sE(t,s)(l=>{dn(s,h$,{buttonApi:l}),t.onAction(l)})}),Kp=jt("common-button-display-events"),b$={[di()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[el()]:["toolbar-button-events",Kp],[Gu()]:["toolbar-button-events","dropdown-events","tooltipping"],[ui()]:["focusing","alloy.base.behaviour",Kp]},IE=t=>Yt(t.element,"width",xs(t.element,"width")),pD=(t,s,a)=>Pd(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),LE=(t,s)=>pD(t,s,[]),Yp=(t,s)=>pD(t,s,[Kn.config({})]),v$=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[na(a.translate(t))],behaviours:ft([Kn.config({})])}),Ld=jt("update-menu-text"),Xp=jt("update-menu-icon"),bD=(t,s,a,l)=>{const d=gn(q),g=t.text.map(z=>ps(v$(z,s,a.providers))),h=t.icon.map(z=>ps(Yp(z,a.providers.icons))),C=(z,ae)=>{const Ee=Zt.getValue(z);return Vn.focus(Ee),dn(Ee,"keydown",{raw:ae.event.raw}),$d.close(Ee),A.some(!0)},w=t.role.fold(()=>({}),z=>({role:z})),_=t.ariaLabel.fold(()=>({}),z=>({"aria-label":a.providers.translate(z)})),D=Pd("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),P=jt("common-button-display-events"),H="dropdown-events";return ps($d.sketch({...t.uid?{uid:t.uid}:{},...w,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ze(t.classes,z=>`${s}--${z}`)),attributes:{..._,...qe(l)?{"data-mce-name":l}:{}}},components:_b([h.map(z=>z.asSpec()),g.map(z=>z.asSpec()),A.some(D)]),matchWidth:!0,useMinWidth:!0,onOpen:(z,ae,Ee)=>{t.searchable&&j7(Ee)},dropdownBehaviours:ft([...t.dropdownBehaviours,Fc.button(()=>t.disabled||a.providers.isDisabled()),xc(),q0.config({}),Kn.config({}),...t.tooltip.map(z=>al.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(z)}))).toArray(),co(H,[ig(t,d),Oh(t,d)]),co(P,[_r((z,ae)=>IE(z))]),co("menubutton-update-display-text",[Ye(Ld,(z,ae)=>{g.bind(Ee=>Ee.getOpt(z)).each(Ee=>{Kn.set(Ee,[na(a.providers.translate(ae.event.text))])})}),Ye(Xp,(z,ae)=>{h.bind(Ee=>Ee.getOpt(z)).each(Ee=>{Kn.set(Ee,[Yp(ae.event.icon,a.providers.icons)])})})])]),eventOrder:$s(b$,{[ui()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[el()]:["toolbar-button-events",al.name(),H,P]}),sandboxBehaviours:ft([mn.config({mode:"special",onLeft:C,onRight:C}),co("dropdown-sandbox-events",[Ye(NO,(z,ae)=>{U7(z),ae.stop()}),Ye(WN,(z,ae)=>{hE(z,ae),ae.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Fw(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:cB,onCollapseMenu:(z,ae,Ee)=>{Pt.getHighlighted(Ee).each(fe=>{cB(z,Ee,fe)})},onDehighlightItem:Z7}},getAnchorOverrides:()=>({maxHeightFunction:(z,ae)=>{$v()(z,ae-10)}}),fetch:z=>cl.nu(cn(t.fetch,z))})).asSpec()},y$=t=>Mt(t),C$=t=>t.type==="separator",AV=t=>po(t,"getSubmenuItems"),vD={type:"separator"},OV=(t,s)=>{const a=Vo(t,(l,d)=>y$(d)?d===""?l:d==="|"?l.length>0&&!C$(l[l.length-1])?l.concat([vD]):l:po(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return a.length>0&&C$(a[a.length-1])&&a.pop(),a},DV=(t,s)=>{const a=t.getSubmenuItems(),l=yD(a,s),d=$s(l.menus,{[t.value]:l.items}),g=$s(l.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},RV=t=>{const s=mt(t,"value").getOrThunk(()=>jt("generated-menu-item"));return $s({value:s},t)},yD=(t,s)=>{const a=OV(Mt(t)?t.split(" "):t,s);return as(a,(l,d)=>{if(AV(d)){const g=RV(d),h=DV(g,s);return{menus:$s(l.menus,h.menus),items:[h.item,...l.items],expansions:$s(l.expansions,h.expansions)}}else return{...l,items:[d,...l.items]}},{menus:{},expansions:{},items:[]})},MV=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),w$=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),J0=(t,s,a,l)=>{const d=jt("primary-menu"),g=yD(t,a.shared.providers.menuItems());if(g.items.length===0)return A.none();const h=MV(l),C=D4(d,g.items,s,a,l.isHorizontalMenu,h),w=w$(l),_=Xe(g.menus,(P,H)=>D4(H,P,s,a,!1,w)),D=$s(_,vs(d,C));return A.from(Lp.tieredData(d,D,g.expansions))},FE=t=>!po(t,"items"),S$="data-value",x$=(t,s,a,l)=>Ze(a,d=>FE(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===l,onAction:()=>{Zt.setValue(t,d.value),dn(t,Ou,{name:s}),Vn.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>x$(t,s,d.items,l)}),CD=(t,s)=>gs(t,a=>FE(a)?wn(a.value===s,a):CD(a.items,s)),NV=(t,s,a)=>{const l=s.shared.providers,d=a.bind(w=>CD(t.items,w)).orThunk(()=>Qs(t.items).filter(FE)),g=t.label.map(w=>Wp(w,l)),h=Es.parts.field({dom:{},factory:{sketch:w=>bD({uid:w.uid,text:d.map(_=>_.text),icon:A.none(),tooltip:A.none(),role:A.none(),ariaLabel:t.label,fetch:(_,D)=>{const P=x$(_,t.name,t.items,Zt.getValue(_));D(J0(P,wm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:W(q),getApi:W({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Cr.config({}),Pb(d.map(_=>_.value),_=>Ns(_.element,S$),(_,D)=>{CD(t.items,D).each(P=>{Ot(_.element,S$,P.value),dn(_,Ld,{text:P.text})})})]},"tox-listbox",s.shared)}}),C={dom:{tag:"div",classes:["tox-listboxfield"]},components:[h]};return Es.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:tn([g.toArray(),[C]]),fieldBehaviours:ft([Ln.config({disabled:W(!t.enabled),onDisabled:w=>{Es.getField(w).each(Ln.disable)},onEnabled:w=>{Es.getField(w).each(Ln.enable)}})])})},T$=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ze(t.items,s.shared.interpreter)}),PV=(t,s)=>{const a=Ze(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=t.data.map(d=>vs("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Sc(t.selectBehaviours,[Vn.config({}),Zt.config({store:{mode:"manual",getValue:d=>Pe(d.element),setValue:(d,g)=>{const h=Qs(t.options);An(t.options,w=>w.value===g).isSome()?gm(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(w=>gm(d.element,w.value))},...l}})])}},BV=gi({name:"HtmlSelect",configFields:[Qe("options"),wc("selectBehaviours",[Vn,Zt]),ke("selectClasses",[]),ke("selectAttributes",{}),ms("data")],factory:PV}),E$=(t,s,a)=>{const l=Ze(t.items,w=>({text:s.translate(w.text),value:w.value})),d=t.label.map(w=>Wp(w,s)),g=Es.parts.field({dom:{},...a.map(w=>({data:w})).getOr({}),selectAttributes:{size:t.size},options:l,factory:BV,selectBehaviours:ft([Ln.config({disabled:()=>!t.enabled||s.isDisabled()}),Cr.config({}),co("selectbox-change",[Ye(zm(),(w,_)=>{dn(w,Ou,{name:t.name})})])])}),h=t.size>1?A.none():A.some(Pd("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:tn([[g],h.toArray()])};return Es.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:tn([d.toArray(),[C]]),fieldBehaviours:ft([Ln.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{Es.getField(w).each(Ln.disable)},onEnabled:w=>{Es.getField(w).each(Ln.enable)}}),xc()])})},$V=W([ke("field1Name","field1"),ke("field2Name","field2"),Cu("onLockedChange"),mm(["lockClass"]),ke("locked",!1),xu.field("coupledFieldBehaviours",[jo,Zt])]),IV=(t,s,a)=>ht(t,s,a).bind(jo.getCurrent),k$=(t,s)=>Yc({factory:Es,name:t,overrides:a=>({fieldBehaviours:ft([co("coupled-input-behaviour",[Ye(cm(),l=>{IV(l,a,s).each(d=>{ht(l,a,"lock").each(g=>{yo.isOn(g)&&a.onLockedChange(l,d,g)})})})])])})}),_$=W([k$("field1","field2"),k$("field2","field1"),Yc({factory:rl,schema:[Qe("dom")],name:"lock",overrides:t=>({buttonBehaviours:ft([yo.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),LV=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:xu.augment(t.coupledFieldBehaviours,[jo.config({find:A.some}),Zt.config({store:{mode:"manual",getValue:d=>{const g=lb(d,t,["field1","field2"]);return{[t.field1Name]:Zt.getValue(g.field1()),[t.field2Name]:Zt.getValue(g.field2())}},setValue:(d,g)=>{const h=lb(d,t,["field1","field2"]);Dr(g,t.field1Name)&&Zt.setValue(h.field1(),g[t.field1Name]),Dr(g,t.field2Name)&&Zt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>ht(d,t,"field1"),getField2:d=>ht(d,t,"field2"),getLock:d=>ht(d,t,"lock")}}),ad=_l({name:"FormCoupledInputs",configFields:$V(),partFields:_$(),factory:LV,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),FV=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let l=t.value.toFixed(a(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},HE=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const l=parseFloat(a[1]),d=a[2];return ao.value({value:l,unit:d})}else return ao.error(t)},wD=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>po(a,d);return t.unit===s?A.some(t.value):l(t.unit)&&l(s)?a[t.unit]===a[s]?A.some(t.value):A.some(t.value/a[t.unit]*a[s]):A.none()},VE=t=>A.none(),zE=(t,s)=>a=>wD(a,s).map(l=>({value:l*t,unit:s})),HV=(t,s)=>{const a=HE(t).toOptional(),l=HE(s).toOptional();return Ta(a,l,(d,g)=>wD(d,g.unit).map(h=>g.value/h).map(h=>zE(h,g.unit)).getOr(VE)).getOr(VE)},VV=(t,s)=>{let a=VE;const l=jt("ratio-event"),d=U=>Pd(U,{tag:"span",classes:["tox-icon","tox-lock-icon__"+U]},s.icons),g=t.label.getOr("Constrain proportions"),h=s.translate(g),C=ad.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h,"data-mce-name":g}},components:[d("lock"),d("unlock")],buttonBehaviours:ft([Ln.config({disabled:()=>!t.enabled||s.isDisabled()}),xc(),Cr.config({}),al.config(s.tooltips.getConfig({tooltipText:h}))])}),w=U=>({dom:{tag:"div",classes:["tox-form__group"]},components:U}),_=U=>Es.parts.field({factory:lf,inputClasses:["tox-textfield"],inputBehaviours:ft([Ln.config({disabled:()=>!t.enabled||s.isDisabled()}),xc(),Cr.config({}),co("size-input-events",[Ye(wd(),(z,ae)=>{dn(z,l,{isField1:U})}),Ye(zm(),(z,ae)=>{dn(z,Ou,{name:t.name})})])]),selectOnFocus:!1}),D=U=>({dom:{tag:"label",classes:["tox-label"]},components:[na(s.translate(U))]}),P=ad.parts.field1(w([Es.parts.label(D("Width")),_(!0)])),H=ad.parts.field2(w([Es.parts.label(D("Height")),_(!1)]));return ad.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[P,H,w([D(Xf),C])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(U,z,ae)=>{HE(Zt.getValue(U)).each(Ee=>{a(Ee).each(fe=>{Zt.setValue(z,FV(fe))})})},coupledFieldBehaviours:ft([Ln.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:U=>{ad.getField1(U).bind(Es.getField).each(Ln.disable),ad.getField2(U).bind(Es.getField).each(Ln.disable),ad.getLock(U).each(Ln.disable)},onEnabled:U=>{ad.getField1(U).bind(Es.getField).each(Ln.enable),ad.getField2(U).bind(Es.getField).each(Ln.enable),ad.getLock(U).each(Ln.enable)}}),xc(),co("size-input-events2",[Ye(l,(U,z)=>{const ae=z.event.isField1,Ee=ae?ad.getField1(U):ad.getField2(U),fe=ae?ad.getField2(U):ad.getField1(U),Se=Ee.map(Zt.getValue).getOr(""),Ce=fe.map(Zt.getValue).getOr("");a=HV(Se,Ce)})])])})},zV=(t,s,a)=>{const l=Em.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[na(s.translate(t.label))]}),d=Em.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Em.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Em.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:W(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,d,g],sliderBehaviours:ft([Id.self(),Vn.config({})]),onChoose:(h,C,w)=>{dn(h,Ou,{name:t.name,value:w})}})},UV=(t,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),l=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ze(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:Ze(C,d)}),h=C=>({dom:{tag:"tbody"},components:Ze(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),h(t.cells)],behaviours:ft([Cr.config({}),Vn.config({})])}},SD=(t,s)=>{const a=t.label.map(U=>Wp(U,s)),l=[Ln.config({disabled:()=>t.disabled||s.isDisabled()}),xc(),mn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:U=>(Ro(U,sS),A.some(!0))}),co("textfield-change",[Ye(cm(),(U,z)=>{dn(U,Ou,{name:t.name})}),Ye(Mf(),(U,z)=>{dn(U,Ou,{name:t.name})})]),Cr.config({})],d=t.validation.map(U=>ff.config({getRoot:z=>Ac(z.element),invalidClass:"tox-invalid",validator:{validate:z=>{const ae=Zt.getValue(z),Ee=U.validator(ae);return cl.pure(Ee===!0?ao.value(ae):ao.error(Ee))},validateOnLoad:U.validateOnLoad}})).toArray(),g=t.placeholder.fold(W({}),U=>({placeholder:s.translate(U)})),h=t.inputMode.fold(W({}),U=>({inputmode:U})),C={...g,...h},w=Es.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(U=>({data:U})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:ft(tn([l,d])),selectOnFocus:!1,factory:lf}),_=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[w]}:w,P=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),H=[Ln.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:U=>{Es.getField(U).each(Ln.disable)},onEnabled:U=>{Es.getField(U).each(Ln.enable)}}),xc()];return oS(a,_,P,H)},WV=(t,s,a)=>SD({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized,data:a},s),ZV=(t,s,a)=>SD({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized,data:a},s),ES=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),vg=t=>t.dimension.property,Jp=(t,s)=>t.dimension.getDimension(s),UE=(t,s)=>{const a=ES(t,s);Di(a,[s.shrinkingClass,s.growingClass])},xD=(t,s)=>{Wr(t.element,s.openClass),ar(t.element,s.closedClass),Yt(t.element,vg(s),"0px"),ec(t.element)},WE=(t,s)=>{Wr(t.element,s.closedClass),ar(t.element,s.openClass),_o(t.element,vg(s))},A$=(t,s,a,l)=>{a.setCollapsed(),Yt(t.element,vg(s),Jp(s,t.element)),UE(t,s),xD(t,s),s.onStartShrink(t),s.onShrunk(t)},jV=(t,s,a,l)=>{const d=l.getOrThunk(()=>Jp(s,t.element));a.setCollapsed(),Yt(t.element,vg(s),d),ec(t.element);const g=ES(t,s);Wr(g,s.growingClass),ar(g,s.shrinkingClass),xD(t,s),s.onStartShrink(t)},Yn=(t,s,a)=>{const l=Jp(s,t.element);(l==="0px"?A$:jV)(t,s,a,A.some(l))},Q0=(t,s,a)=>{const l=ES(t,s),d=Oi(l,s.shrinkingClass),g=Jp(s,t.element);WE(t,s);const h=Jp(s,t.element);(d?()=>{Yt(t.element,vg(s),g),ec(t.element)}:()=>{xD(t,s)})(),Wr(l,s.shrinkingClass),ar(l,s.growingClass),WE(t,s),Yt(t.element,vg(s),h),a.setExpanded(),s.onStartGrow(t)},O$=(t,s,a)=>{if(a.isExpanded()){_o(t.element,vg(s));const l=Jp(s,t.element);Yt(t.element,vg(s),l)}},D$=(t,s,a)=>{a.isExpanded()||Q0(t,s,a)},R$=(t,s,a)=>{a.isExpanded()&&Yn(t,s,a)},M$=(t,s,a)=>{a.isExpanded()&&A$(t,s,a)},N$=(t,s,a)=>a.isExpanded(),lG=(t,s,a)=>a.isCollapsed(),ey=(t,s,a)=>{const l=ES(t,s);return Oi(l,s.growingClass)===!0},P$=(t,s,a)=>{const l=ES(t,s);return Oi(l,s.shrinkingClass)===!0};var qV=Object.freeze({__proto__:null,refresh:O$,grow:D$,shrink:R$,immediateShrink:M$,hasGrown:N$,hasShrunk:lG,isGrowing:ey,isShrinking:P$,isTransitioning:(t,s,a)=>ey(t,s)||P$(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?Yn:Q0)(t,s,a)},disableTransitions:UE,immediateGrow:(t,s,a)=>{a.isExpanded()||(WE(t,s),Yt(t.element,vg(s),Jp(s,t.element)),UE(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),$$=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const l=s.expanded;return _i(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:vs(s.dimension.property,"0px")})},events:(t,s)=>ys([Yh(y1(),(a,l)=>{l.event.raw.propertyName===t.dimension.property&&(UE(a,t),s.isExpanded()&&_o(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),YV=[Qe("closedClass"),Qe("openClass"),Qe("shrinkingClass"),Qe("growingClass"),ms("getAnimationRoot"),Zo("onShrunk"),Zo("onStartShrink"),Zo("onGrown"),Zo("onStartGrow"),ke("expanded",!1),ta("dimension",Fl("property",{width:[cr("property","width"),cr("getDimension",t=>dc(t)+"px")],height:[cr("property","height"),cr("getDimension",t=>Ys(t)+"px")]}))],XV=Object.freeze({__proto__:null,init:t=>{const s=gn(t.expanded),a=()=>"expanded: "+s.get();return Ai({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:cn(s.set,!1),setExpanded:cn(s.set,!0),readState:a})}});const ou=Nc({fields:YV,name:"sliding",active:$$,apis:qV,state:XV}),I$=t=>({isEnabled:()=>!Ln.isDisabled(t),setEnabled:s=>Ln.set(t,!s),setActive:s=>{const a=t.element;s?(ar(a,"tox-tbtn--enabled"),Ot(a,"aria-pressed",!0)):(Wr(a,"tox-tbtn--enabled"),oe(a,"aria-pressed"))},isActive:()=>Oi(t.element,"tox-tbtn--enabled"),setText:s=>{dn(t,Ld,{text:s})},setIcon:s=>dn(t,Xp,{icon:s})}),kS=(t,s,a,l,d=!0,g)=>bD({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(h,C)=>{const w={pattern:t.search.isSome()?G7(h):""};t.fetch(_=>{C(J0(_,wm.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},w,I$(h))},onSetup:t.onSetup,getApi:I$,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[Cr.config({})]:[]]},s,a.shared,g),JV=(t,s,a)=>{const l=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),a.shared.getSink().each(w=>{s().getOpt(w).each(_=>{Ki(_.element),dn(_,mg,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(Ze(t,h=>{const C=h.text.fold(()=>({}),w=>({text:w}));return{type:h.type,active:!1,...C,onAction:l(h),onSetup:d(h)}}))}},L$=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[na(t)]}),F$=jt("leaf-label-event-id"),TD=({leaf:t,onLeafAction:s,visible:a,treeId:l,selectedId:d,backstage:g})=>{const h=t.menu.map(w=>kS(w,"tox-mbtn",g,A.none(),a)),C=[L$(t.title)];return h.each(w=>C.push(w)),rl.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:w=>{s(t.id),w.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[qi()]:[F$,"keying"]},buttonBehaviours:ft([...a?[Cr.config({})]:[],yo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),fi.config({channels:{[`update-active-item-${l}`]:{onReceive:(w,_)=>{(_.value===t.id?yo.on:yo.off)(w)}}}}),co(F$,[_r((w,_)=>{d.each(D=>{(D===t.id?yo.on:yo.off)(w)})}),Ye(qi(),(w,_)=>{const D=_.event.raw.code==="ArrowLeft",P=_.event.raw.code==="ArrowRight";D?(Km(w.element,".tox-tree--directory").each(H=>{w.getSystem().getByDom(H).each(U=>{sC(H,".tox-tree--directory__label").each(z=>{U.getSystem().getByDom(z).each(Vn.focus)})})}),_.stop()):P&&_.stop()})])])})},H$=(t,s,a)=>Pd(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),QV=(t,s)=>H$(t,s,[]),V$=jt("directory-label-event-id"),ez=({directory:t,visible:s,noChildren:a,backstage:l})=>{const d=t.menu.map(C=>kS(C,"tox-mbtn",l,A.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[QV("chevron-right",l.shared.providers.icons)]},L$(t.title)];d.each(C=>{g.push(C)});const h=C=>{Km(C.element,".tox-tree--directory").each(w=>{C.getSystem().getByDom(w).each(_=>{const D=!yo.isOn(_);yo.toggle(_),dn(C,"expand-tree-node",{expanded:D,node:t.id})})})};return rl.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[qi()]:[V$,"keying"]},buttonBehaviours:ft([...s?[Cr.config({})]:[],co(V$,[Ye(qi(),(C,w)=>{const _=w.event.raw.code==="ArrowRight",D=w.event.raw.code==="ArrowLeft";_&&a&&w.stop(),(_||D)&&Km(C.element,".tox-tree--directory").each(P=>{C.getSystem().getByDom(P).each(H=>{!yo.isOn(H)&&_||yo.isOn(H)&&D?(h(C),w.stop()):D&&!yo.isOn(H)&&(Km(H.element,".tox-tree--directory").each(U=>{sC(U,".tox-tree--directory__label").each(z=>{H.getSystem().getByDom(z).each(Vn.focus)})}),w.stop())})})})])])})},tz=({children:t,onLeafAction:s,visible:a,treeId:l,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?TD({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:l,backstage:h}):ED({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:h})),behaviours:ft([ou.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Kn.config({})])}),nz=jt("directory-event-id"),ED=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=t,w=gn(g),_=P=>C.map(H=>H.type==="leaf"?TD({leaf:H,selectedId:h,onLeafAction:s,visible:P,treeId:l,backstage:d}):ED({directory:H,expandedIds:w.get(),selectedId:h,onLeafAction:s,labelTabstopping:P,treeId:l,backstage:d})),D=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[ez({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),tz({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:D,treeId:l,backstage:d})],behaviours:ft([co(nz,[_r((P,H)=>{yo.set(P,D)}),Ye("expand-tree-node",(P,H)=>{const{expanded:U,node:z}=H.event;w.set(U?[...w.get(),z]:w.get().filter(ae=>ae!==z))})]),yo.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(P,H)=>{const U=P.components()[1],z=_(H);H?ou.grow(U):ou.shrink(U),Kn.set(U,z)}})])}},oz=jt("tree-event-id"),sz=(t,s)=>{const a=t.onLeafAction.getOr(q),l=t.onToggleExpand.getOr(q),d=t.defaultExpandedIds,g=gn(d),h=gn(t.defaultSelectedId),C=jt("tree-id"),w=(_,D)=>t.items.map(P=>P.type==="leaf"?TD({leaf:P,selectedId:_,onLeafAction:a,visible:!0,treeId:C,backstage:s}):ED({directory:P,selectedId:_,onLeafAction:a,expandedIds:D,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:w(h.get(),g.get()),behaviours:ft([mn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),co(oz,[Ye("expand-tree-node",(_,D)=>{const{expanded:P,node:H}=D.event;g.set(P?[...g.get(),H]:g.get().filter(U=>U!==H)),l(g.get(),{expanded:P,node:H})})]),fi.config({channels:{[`update-active-item-${C}`]:{onReceive:(_,D)=>{h.set(A.some(D.value)),Kn.set(_,w(A.some(D.value),g.get()))}}}}),Kn.config({})])}};var rz=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return ys([Ye(t.event,l),im(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Ye(d,()=>s.cancel())]).getOr([])))}});const z$=t=>{const s=gn(null);return Ai({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var cz=Object.freeze({__proto__:null,throttle:z$,init:t=>t.stream.streams.state(t)});const lz=(t,s)=>{const a=t.stream,l=cD(t.onStream,a.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),a.stopEvent&&g.stop()}};var iz=[ta("stream",Fl("mode",{throttle:[Qe("delay"),ke("stopEvent",!0),cr("streams",{setup:lz,state:z$})]})),ke("event","input"),ms("cancelEvent"),Cu("onStream")];const kD=Nc({fields:iz,name:"streaming",active:rz,state:cz}),ZE=(t,s,a)=>{const l=Zt.getValue(a);Zt.setValue(s,l),_D(s)},U$=(t,s)=>{const a=t.element,l=Pe(a),d=a.dom;Ns(a,"type")!=="number"&&s(d,l)},_D=t=>{U$(t,(s,a)=>s.setSelectionRange(a.length,a.length))},uz=(t,s)=>{U$(t,(a,l)=>a.setSelectionRange(s,l.length))},W$=(t,s,a)=>{if(t.selectsOver){const l=Zt.getValue(s),d=t.getDisplayText(l),g=Zt.getValue(a);return t.getDisplayText(g).indexOf(d)===0?A.some(()=>{ZE(t,s,a),uz(s,d.length)}):A.none()}else return A.none()},AD=W("alloy.typeahead.itemexecute"),Z$=(t,s,a,l)=>{const d=(P,H,U)=>{t.previewing.set(!1);const z=ua.getCoupled(P,"sandbox");if(Yo.isOpen(z))jo.getCurrent(z).each(ae=>{Pt.getHighlighted(ae).fold(()=>{U(ae)},()=>{_1(z,ae.element,"keydown",H)})});else{const ae=Ee=>{jo.getCurrent(Ee).each(U)};z0(t,h(P),P,z,l,ae,Yl.HighlightMenuAndItem).get(q)}},g=VN(t),h=P=>H=>H.map(U=>{const z=ur(U.menus),ae=we(z,fe=>io(fe.items,Se=>Se.type==="item"));return Zt.getState(P).update(Ze(ae,fe=>fe.data)),U}),C=P=>jo.getCurrent(P),w="typeaheadevents",_=[Vn.config({}),Zt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:P=>Pe(P.element),getFallbackEntry:P=>({value:P,meta:{}}),setValue:(P,H)=>{gm(P.element,t.model.getDisplayText(H))},...t.initialData.map(P=>vs("initialValue",P)).getOr({})}}),kD.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(P,H)=>{const U=ua.getCoupled(P,"sandbox");if(Vn.isFocused(P)&&Pe(P.element).length>=t.minChars){const ae=C(U).bind(fe=>Pt.getHighlighted(fe).map(Zt.getValue));t.previewing.set(!0);const Ee=fe=>{C(U).each(Se=>{ae.fold(()=>{t.model.selectsOver&&Pt.highlightFirst(Se)},Ce=>{Pt.highlightBy(Se,We=>Zt.getValue(We).value===Ce.value),Pt.getHighlighted(Se).orThunk(()=>(Pt.highlightFirst(Se),A.none()))})})};z0(t,h(P),P,U,l,Ee,Yl.HighlightJustMenu).get(q)}},cancelEvent:nv()}),mn.config({mode:"special",onDown:(P,H)=>(d(P,H,Pt.highlightFirst),A.some(!0)),onEscape:P=>{const H=ua.getCoupled(P,"sandbox");return Yo.isOpen(H)?(Yo.close(H),A.some(!0)):A.none()},onUp:(P,H)=>(d(P,H,Pt.highlightLast),A.some(!0)),onEnter:P=>{const H=ua.getCoupled(P,"sandbox"),U=Yo.isOpen(H);if(U&&!t.previewing.get())return C(H).bind(z=>Pt.getHighlighted(z)).map(z=>(dn(P,AD(),{item:z}),!0));{const z=Zt.getValue(P);return Ro(P,nv()),t.onExecute(H,P,z),U&&Yo.close(H),A.some(!0)}}}),yo.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),ua.config({others:{sandbox:P=>A4(t,P,{onOpen:()=>yo.on(P),onClose:()=>{t.lazyTypeaheadComp.get().each(H=>oe(H.element,"aria-activedescendant")),yo.off(P)}})}}),co(w,[_r(P=>{t.lazyTypeaheadComp.set(A.some(P))}),im(P=>{t.lazyTypeaheadComp.set(A.none())}),qu(P=>{const H=q;E4(t,h(P),P,l,H,Yl.HighlightMenuAndItem).get(q)}),Ye(AD(),(P,H)=>{const U=ua.getCoupled(P,"sandbox");ZE(t.model,P,H.event.item),Ro(P,nv()),t.onItemExecute(P,U,H.event.item,Zt.getValue(P)),Yo.close(U),_D(P)})].concat(t.dismissOnBlur?[Ye(Um(),P=>{const H=ua.getCoupled(P,"sandbox");Wl(H.element).isNone()&&Yo.close(H)})]:[]))],D={[Gu()]:[Zt.name(),kD.name(),w],...t.eventOrder};return{uid:t.uid,dom:zN($s(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...Sc(t.typeaheadBehaviours,_)},eventOrder:D}},j$=W([ms("lazySink"),Qe("fetch"),ke("minChars",5),ke("responseTime",1e3),Zo("onOpen"),ke("getHotspot",A.some),ke("getAnchorOverrides",W({})),ke("layouts",A.none()),ke("eventOrder",{}),F("model",{},[ke("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),ke("selectsOver",!0),ke("populateFromBrowse",!0)]),Zo("onSetValue"),zl("onExecute"),Zo("onItemExecute"),ke("inputClasses",[]),ke("inputAttributes",{}),ke("inputStyles",{}),ke("matchWidth",!0),ke("useMinWidth",!1),ke("dismissOnBlur",!0),mm(["openClass"]),ms("initialData"),wc("typeaheadBehaviours",[Vn,Zt,kD,mn,yo,ua]),hc("lazyTypeaheadComp",()=>gn(A.none)),hc("previewing",()=>gn(!0))].concat(HN()).concat(gE())),OD=W([Tu({schema:[Qg()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{W$(t.model,d,l).fold(()=>{t.model.selectsOver?(Pt.dehighlight(a,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&ZE(t.model,d,l),B(l.element,"id").each(g=>Ot(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(l=>(dn(l,AD(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&ZE(t.model,l,a)})}})})]),dz=_l({name:"Typeahead",configFields:j$(),partFields:OD(),factory:Z$}),Fd=t=>({...t,toCached:()=>Fd(t.toCached()),bindFuture:w=>Fd(t.bind(_=>_.fold(D=>cl.pure(ao.error(D)),D=>w(D)))),bindResult:w=>Fd(t.map(_=>_.bind(w))),mapResult:w=>Fd(t.map(_=>_.map(w))),mapError:w=>Fd(t.map(_=>_.mapError(w))),foldResult:(w,_)=>t.map(D=>D.fold(w,_)),withTimeout:(w,_)=>Fd(cl.nu(D=>{let P=!1;const H=setTimeout(()=>{P=!0,D(ao.error(_()))},w);t.get(U=>{P||(clearTimeout(H),D(U))})}))}),DD=t=>Fd(cl.nu(t)),G$=t=>Fd(cl.pure(ao.value(t))),jE={nu:DD,wrap:Fd,pure:G$,value:G$,error:t=>Fd(cl.pure(ao.error(t))),fromResult:t=>Fd(cl.pure(t)),fromFuture:t=>Fd(t.map(ao.value)),fromPromise:t=>DD(s=>{t.then(a=>{s(ao.value(a))},a=>{s(ao.error(a))})})},Bb=(t,s,a=[],l,d,g,h)=>{const C=s.fold(()=>({}),D=>({action:D})),w={buttonBehaviours:ft([Fc.button(()=>!t.enabled||h.isDisabled()),xc(),Cr.config({}),...g.map(D=>al.config(h.tooltips.getConfig({tooltipText:h.translate(D)}))).toArray(),co("button press",[qh("click"),qh("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},_=$s(w,{dom:l});return $s(_,{components:d})},fz=(t,s,a,l=[],d)=>{const g=t.tooltip.map(_=>({"aria-label":a.translate(_)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=t.icon.map(_=>LE(_,a.icons)),w=_b([C]);return Bb(t,s,l,h,w,t.tooltip,a)},_S=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},q$=(t,s,a,l=[],d=[])=>{const g=a.translate(t.text),h=t.icon.map(U=>LE(U,a.icons)),C=[h.getOrThunk(()=>na(g))],w=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),P={tag:"button",classes:[..._S(w),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},H=t.icon.map(W(g));return Bb(t,s,l,P,C,H,a)},GE=(t,s,a,l=[],d=[])=>{const g=q$(t,A.some(s),a,l,d);return rl.sketch(g)},RD=(t,s)=>a=>{s==="custom"?dn(a,mg,{name:t,value:{}}):s==="submit"?Ro(a,sS):s==="cancel"?Ro(a,Dh):console.error("Unknown button type: ",s)},MD=(t,s)=>s==="menu",gz=(t,s)=>s==="custom"||s==="cancel"||s==="submit",hz=(t,s)=>s==="togglebutton",K$=(t,s,a)=>{var l,d;const g=t.icon.map(Ce=>Yp(Ce,s.icons)).map(ps),h=Ce=>{dn(Ce,mg,{name:t.name,value:{setIcon:We=>{g.map(Ve=>Ve.getOpt(Ce).each(gt=>{Kn.set(gt,[Yp(We,s.icons)])}))}}})},C=t.buttonType.getOr(t.primary?"primary":"secondary"),w={...t,name:(l=t.name)!==null&&l!==void 0?l:"",primary:C==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},_=w.tooltip.or(t.text).map(Ce=>({"aria-label":s.translate(Ce)})).getOr({}),D=_S(C??"secondary"),P=t.icon.isSome()&&t.text.isSome(),H={tag:"button",classes:[...D.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...P?["tox-button--icon-and-text"]:[]],attributes:{..._,...qe(a)?{"data-mce-name":a}:{}}},U=[],z=s.translate(t.text.getOr("")),ae=na(z),fe=[..._b([g.map(Ce=>Ce.asSpec())]),...t.text.isSome()?[ae]:[]],Se=Bb(w,A.some(h),U,H,fe,t.tooltip,s);return rl.sketch(Se)},qE=(t,s,a)=>{if(MD(t,s)){const l=()=>h,d=t,g={...t,type:"menubutton",search:A.none(),onSetup:C=>(C.setEnabled(t.enabled),q),fetch:JV(d.items,l,a)},h=ps(kS(g,"tox-tbtn",a,A.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(gz(t,s)){const l=RD(t.name,s),d={...t,borderless:!1};return GE(d,l,a.shared.providers,[])}else{if(hz(t,s))return K$(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},pz=(t,s)=>{const a=RD(t.name,"custom");return pB(A.none(),Es.parts.field({factory:rl,...q$(t,A.some(a),s,[NE(""),Id.self()])}))},ND={type:"separator"},bz=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:q}),PD=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:q}),Y$=t=>Ze(t,bz),X$=(t,s)=>io(s,a=>a.type===t),J$=(t,s)=>Y$(X$(t,s)),vz=t=>J$("header",t.targets),yz=t=>J$("anchor",t.targets),Cz=t=>A.from(t.anchorTop).map(s=>PD("<top>",s)).toArray(),Q$=t=>A.from(t.anchorBottom).map(s=>PD("<bottom>",s)).toArray(),hf=t=>Ze(t,s=>PD(s,s)),BD=t=>Vo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(ND,a),[]),$D=(t,s)=>{const a=t.toLowerCase();return io(s,l=>{var d;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,h=(d=l.value)!==null&&d!==void 0?d:"";return nr(g.toLowerCase(),a)||nr(h.toLowerCase(),a)})},wz=(t,s,a)=>{var l,d;const g=Zt.getValue(s),h=(d=(l=g==null?void 0:g.meta)===null||l===void 0?void 0:l.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],w=>{const _=$D(h,hf(a.getHistory(t)));return t==="file"?BD([_,$D(h,vz(w)),$D(h,tn([Cz(w),yz(w),Q$(w)]))]):_})},eI=jt("aria-invalid"),Sz=(t,s,a,l)=>{const d=s.shared.providers,g=Se=>{const Ce=Zt.getValue(Se);a.addToHistory(Ce.value,t.filetype)},h={...l.map(Se=>({initialData:Se})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":eI,type:"url"},minChars:0,responseTime:0,fetch:Se=>{const Ce=wz(t.filetype,Se,a),We=J0(Ce,wm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return cl.pure(We)},getHotspot:Se=>z.getOpt(Se),onSetValue:(Se,Ce)=>{Se.hasConfigured(ff)&&ff.run(Se).get(q)},typeaheadBehaviours:ft([...a.getValidationHandler().map(Se=>ff.config({getRoot:Ce=>Ac(Ce.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Ce,We)=>{D.getOpt(Ce).each(Ve=>{Ot(Ve.element,"title",d.translate(We))})}},validator:{validate:Ce=>{const We=Zt.getValue(Ce);return jE.nu(Ve=>{Se({type:t.filetype,url:We.value},gt=>{if(gt.status==="invalid"){const dt=ao.error(gt.message);Ve(dt)}else{const dt=ao.value(gt.message);Ve(dt)}})})},validateOnLoad:!1}})).toArray(),Ln.config({disabled:()=>!t.enabled||d.isDisabled()}),Cr.config({}),co("urlinput-events",[Ye(cm(),Se=>{const Ce=Pe(Se.element),We=Ce.trim();We!==Ce&&gm(Se.element,We),t.filetype==="file"&&dn(Se,Ou,{name:t.name})}),Ye(zm(),Se=>{dn(Se,Ou,{name:t.name}),g(Se)}),Ye(Mf(),Se=>{dn(Se,Ou,{name:t.name}),g(Se)})])]),eventOrder:{[cm()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Se=>Se.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Fw(!1,1,"normal")},onExecute:(Se,Ce,We)=>{dn(Ce,sS,{})},onItemExecute:(Se,Ce,We,Ve)=>{g(Se),dn(Se,Ou,{name:t.name})}},C=Es.parts.field({...h,factory:dz}),w=t.label.map(Se=>Wp(Se,d)),D=ps(((Se,Ce,We=Se,Ve=Se)=>Pd(We,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Se],attributes:{title:d.translate(Ve),"aria-live":"polite",...Ce.fold(()=>({}),gt=>({id:gt}))}},d.icons))("invalid",A.some(eI),"warning")),P=ps({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),H=a.getUrlPicker(t.filetype),U=jt("browser.url.event"),z=ps({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,P.asSpec()],behaviours:ft([Ln.config({disabled:()=>!t.enabled||d.isDisabled()})])}),ae=ps(GE({name:t.name,icon:A.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:A.none(),borderless:!0},Se=>Ro(Se,U),d,[],["tox-browse-url"])),Ee=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:tn([[z.asSpec()],H.map(()=>ae.asSpec()).toArray()])}),fe=Se=>{jo.getCurrent(Se).each(Ce=>{const We=Zt.getValue(Ce),Ve={fieldname:t.name,...We};H.each(gt=>{gt(Ve).get(dt=>{Zt.setValue(Ce,dt),dn(Se,Ou,{name:t.name})})})})};return Es.sketch({dom:dH(),components:w.toArray().concat([Ee()]),fieldBehaviours:ft([Ln.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:Se=>{Es.getField(Se).each(Ln.disable),ae.getOpt(Se).each(Ln.disable)},onEnabled:Se=>{Es.getField(Se).each(Ln.enable),ae.getOpt(Se).each(Ln.enable)}}),xc(),co("url-input-events",[Ye(U,fe)])])})},xz=(t,s)=>{const a=kO(t.icon,s.icons);return mf.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[rl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:l=>dn(l,mg,{name:"alert-banner",value:t.url}),buttonBehaviours:ft([_O()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},tI=(t,s)=>{t.dom.checked=s},nI=t=>t.dom.checked,hG=(t,s,a)=>{const l=w=>(w.element.dom.click(),A.some(!0)),d=Es.parts.field({factory:{sketch:St},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:ft([Id.self(),Ln.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:w=>{Ac(w.element).each(_=>ar(_,"tox-checkbox--disabled"))},onEnabled:w=>{Ac(w.element).each(_=>Wr(_,"tox-checkbox--disabled"))}}),Cr.config({}),Vn.config({}),SS(a,nI,tI),mn.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),co("checkbox-events",[Ye(zm(),(w,_)=>{dn(w,Ou,{name:t.name})})])])}),g=Es.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[na(s.translate(t.label))],behaviours:ft([q0.config({})])}),h=w=>Pd(w==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+w]},s.icons),C=ps({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Es.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:ft([Ln.config({disabled:()=>!t.enabled||s.isDisabled()}),xc()])})},pG=(t,s)=>t.presets==="presentation"?mf.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html},containerBehaviours:ft([al.config({...s.tooltips.getConfig({tooltipText:"",onShow:a=>{Cs(a.element,"[data-mce-tooltip]:hover").orThunk(()=>Wl(a.element)).each(l=>{B(l,"data-mce-tooltip").each(d=>{al.setComponents(a,s.tooltips.getComponents({tooltipText:d}))})})}}),mode:"children-normal",anchor:a=>({type:"node",node:Cs(a.element,"[data-mce-tooltip]:hover").orThunk(()=>Wl(a.element).filter(l=>B(l,"data-mce-tooltip").isSome())),root:a.element,layouts:{onLtr:W([Pa,cc,Za,ja,Na,Os]),onRtl:W([Pa,cc,Za,ja,Na,Os])},bubble:Yu(0,-2,{})})})])}):mf.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:ft([Cr.config({}),Vn.config({})])}),ks=t=>(s,a,l,d)=>mt(a,"name").fold(()=>t(a,d,A.none()),g=>s.field(g,t(a,d,mt(l,g)))),ID=t=>(s,a,l,d)=>{const g=$s(a,{source:"dynamic"});return ks(t)(s,g,l,d)},Tz={bar:ks((t,s)=>aH(t,s.shared)),collection:ks((t,s,a)=>G0(t,s.shared.providers,a)),alertbanner:ks((t,s)=>xz(t,s.shared.providers)),input:ks((t,s,a)=>WV(t,s.shared.providers,a)),textarea:ks((t,s,a)=>ZV(t,s.shared.providers,a)),label:ks((t,s)=>g$(t,s.shared)),iframe:ID((t,s,a)=>hD(t,s.shared.providers,a)),button:ks((t,s)=>pz(t,s.shared.providers)),checkbox:ks((t,s,a)=>hG(t,s.shared.providers,a)),colorinput:ks((t,s,a)=>CH(t,s.shared,s.colorinput,a)),colorpicker:ks((t,s,a)=>bV(t,s.shared.providers,a)),dropzone:ks((t,s,a)=>wV(t,s.shared.providers,a)),grid:ks((t,s)=>SV(t,s.shared)),listbox:ks((t,s,a)=>NV(t,s,a)),selectbox:ks((t,s,a)=>E$(t,s.shared.providers,a)),sizeinput:ks((t,s)=>VV(t,s.shared.providers)),slider:ks((t,s,a)=>zV(t,s.shared.providers,a)),urlinput:ks((t,s,a)=>Sz(t,s,s.urlinput,a)),customeditor:ks(yV),htmlpanel:ks((t,s)=>pG(t,s.shared.providers)),imagepreview:ks((t,s,a)=>f$(t,a)),table:ks((t,s)=>UV(t,s.shared.providers)),tree:ks((t,s)=>sz(t,s)),panel:ks((t,s)=>T$(t,s))},KE={field:(t,s)=>s,record:W([])},oI=(t,s,a,l)=>{const d=$s(l,{shared:{interpreter:g=>LD(t,g,a,d)}});return LD(t,s,a,d)},LD=(t,s,a,l)=>mt(Tz,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,l)),sI=(t,s,a)=>LD(KE,t,s,a),Qp="layout-inset",FD=t=>t.x,rI=(t,s)=>t.x+t.width/2-s.width/2,HD=(t,s)=>t.x+t.width-s.width,VD=t=>t.y,YE=(t,s)=>t.y+t.height-s.height,AS=(t,s)=>t.y+t.height/2-s.height/2,XE=(t,s,a)=>Bc(HD(t,s),YE(t,s),a.insetSouthwest(),lC(),"southwest",$c(t,{right:0,bottom:3}),Qp),OS=(t,s,a)=>Bc(FD(t),YE(t,s),a.insetSoutheast(),cC(),"southeast",$c(t,{left:1,bottom:3}),Qp),DS=(t,s,a)=>Bc(HD(t,s),VD(t),a.insetNorthwest(),aC(),"northwest",$c(t,{right:0,top:2}),Qp),ty=(t,s,a)=>Bc(FD(t),VD(t),a.insetNortheast(),gp(),"northeast",$c(t,{left:1,top:2}),Qp),km=(t,s,a)=>Bc(rI(t,s),VD(t),a.insetNorth(),iC(),"north",$c(t,{top:2}),Qp),RS=(t,s,a)=>Bc(rI(t,s),YE(t,s),a.insetSouth(),Kt(),"south",$c(t,{bottom:3}),Qp),zD=(t,s,a)=>Bc(HD(t,s),AS(t,s),a.insetEast(),uC(),"east",$c(t,{right:0}),Qp),Ez=(t,s,a)=>Bc(FD(t),AS(t,s),a.insetWest(),U1(),"west",$c(t,{left:1}),Qp),bG=t=>{switch(t){case"north":return km;case"northeast":return ty;case"northwest":return DS;case"south":return RS;case"southeast":return OS;case"southwest":return XE;case"east":return zD;case"west":return Ez}},aI=(t,s,a,l,d)=>nx(l).map(bG).getOr(km)(t,s,a,l,d),kz=t=>{switch(t){case"north":return RS;case"northeast":return OS;case"northwest":return XE;case"south":return km;case"southeast":return ty;case"southwest":return DS;case"east":return Ez;case"west":return zD}},_z=(t,s,a,l,d)=>nx(l).map(kz).getOr(km)(t,s,a,l,d),ny={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},UD=(t,s,a)=>{const d={maxHeightFunction:pp()},g=()=>({type:"node",root:ze(pe(t())),node:A.from(t()),bubble:Yu(12,12,ny),layouts:{onRtl:()=>[ty],onLtr:()=>[DS]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Yu(-12,12,ny),layouts:{onRtl:()=>[Za,Na,Pa],onLtr:()=>[Na,Za,Pa]},overrides:d});return()=>a()?g():h()},Az=(t,s,a,l)=>{const g={maxHeightFunction:pp()},h=()=>({type:"node",root:ze(pe(s())),node:A.from(s()),bubble:Yu(12,12,ny),layouts:{onRtl:()=>[km],onLtr:()=>[km]},overrides:g}),C=()=>t?{type:"node",root:ze(pe(s())),node:A.from(s()),bubble:Yu(0,-Pu(s()),ny),layouts:{onRtl:()=>[cc],onLtr:()=>[cc]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:Yu(0,0,ny),layouts:{onRtl:()=>[cc],onLtr:()=>[cc]},overrides:g};return()=>l()?h():C()},Oz=(t,s,a)=>{const l=()=>({type:"node",root:ze(pe(t())),node:A.from(t()),layouts:{onRtl:()=>[km],onLtr:()=>[km]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Pa],onLtr:()=>[Pa]}});return()=>a()?l():d()},cI=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),l=t.model.table.getSelectedCells();if(l.length>1){const d=l[0],g=l[l.length-1],h={firstCell:he.fromDom(d),lastCell:he.fromDom(g)};return A.some(h)}return A.some(Cp.range(he.fromDom(a.startContainer),a.startOffset,he.fromDom(a.endContainer),a.endOffset))}}),Dz=t=>s=>({type:"node",root:t(),node:s}),Rz=(t,s,a,l)=>{const d=D0(t),g=()=>he.fromDom(t.getBody()),h=()=>he.fromDom(t.getContentAreaContainer()),C=()=>d||!l();return{inlineDialog:UD(h,s,C),inlineBottomDialog:Az(t.inline,h,a,C),banner:Oz(h,s,C),cursor:cI(t,g),node:Dz(g)}},Mz=t=>(s,a)=>{KP(t)(s,a)},Nz=t=>()=>HP(t),WD=t=>s=>mE(t,s),lI=t=>s=>FP(t,s),Pz=t=>({colorPicker:Mz(t),hasCustomColors:Nz(t),getColors:WD(t),getColorCols:lI(t)}),Bz=t=>()=>pO(t),$z=t=>({isDraggableModal:Bz(t)}),Iz=t=>{const s=gn(ET(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},ZD=t=>Dr(t,"items"),iI=t=>Dr(t,"format"),MS=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],Lz=t=>po(t,"items"),JE=t=>po(t,"block"),Fz=t=>po(t,"inline"),jD=t=>po(t,"selector"),oy=t=>Vo(t,(s,a)=>{if(Lz(a)){const l=oy(a.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:a.title,items:l.formats}])}}else if(Fz(a)||JE(a)||jD(a)){const d=`custom-${Mt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),uI=(t,s)=>{const a=oy(s),l=d=>{ut(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(a.customFormats):t.on("init",()=>{l(a.customFormats)}),a.formats},dI=t=>dO(t).map(s=>{const a=uI(t,s);return mO(t)?MS.concat(a):a}).getOr(MS),mI=t=>{const s=es(t);return s.length===1&&vo(s,"title")},GD=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),qD=(t,s,a,l)=>{const d=w=>GD(w,a,l),g=w=>{const _=C(w.items);return{...w,type:"submenu",getStyleItems:W(_)}},h=w=>{const _=Mt(w.name)?w.name:jt(w.title),D=`custom-${_}`,P={...w,type:"formatter",format:D,isSelected:a(D),getStylePreview:l(D)};return t.formatter.register(_,P),P},C=w=>Ze(w,_=>ZD(_)?g(_):iI(_)?d(_):mI(_)?{..._,type:"separator"}:h(_));return C(s)},Hz=t=>{const s=C=>()=>t.formatter.match(C),a=C=>()=>{const w=t.formatter.get(C);return w!==void 0?A.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):A.none()},l=gn([]),d=gn([]),g=gn(!1);return t.on("PreInit",C=>{const w=dI(t),_=qD(t,w,s,a);l.set(_)}),t.on("addStyleModifications",C=>{const w=qD(t,C.items,s,a);d.set(w),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:l.get(),w=d.get();return C.concat(w)}}},KD=t=>{let l=0;const d=()=>l>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[na(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:W(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(w,_)=>{l++,C.onShow&&C.onShow(w,_)},onHide:()=>{l--}}),getComponents:g}},QE=t=>qe(t)&&t.nodeType===1,Vz=bg.trim,fI=t=>s=>!!(QE(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),sy=fI("true"),gI=fI("false"),hI=(t,s,a,l,d)=>({type:t,title:s,url:a,level:l,attach:d}),pI=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return sy(s)}return!1},YD=(t,s)=>Ze(sl(he.fromDom(s),t),a=>a.dom),ek=t=>t.innerText||t.textContent,zz=t=>t.id?t.id:jt("h"),Uz=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,Wz=t=>Uz(t)&&bI(t),tk=t=>t&&/^(H[1-6])$/.test(t.nodeName),bI=t=>pI(t)&&!gI(t),Zz=t=>tk(t)&&bI(t),jz=t=>tk(t)?parseInt(t.nodeName.substr(1),10):0,Gz=t=>{var s;const a=zz(t),l=()=>{t.id=a};return hI("header",(s=ek(t))!==null&&s!==void 0?s:"","#"+a,jz(t),l)},qz=t=>{const s=t.id||t.name,a=ek(t);return hI("anchor",a||"#"+s,"#"+s,0,q)},Kz=t=>Ze(io(t,Zz),Gz),Yz=t=>Ze(io(t,Wz),qz),vI=t=>YD("h1,h2,h3,h4,h5,h6,a:not([href])",t),Xz=t=>Vz(t.title).length>0,Jz={find:t=>{const s=vI(t);return io(Kz(s).concat(Yz(s)),Xz)}},ok="tinymce-url-history",sk=5,XD=t=>Mt(t)&&/^https?/.test(t),Qz=t=>Cn(t)&&t.length<=sk&&vt(t,XD),yI=t=>qt(t)&&cs(t,s=>!Qz(s)).isNone(),CI=()=>{const t=Rb.getItem(ok);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+ok+" was not valid JSON",a),{};throw a}return yI(s)?s:(console.log("Local storage "+ok+" was not valid format",s),{})},e9=t=>{if(!yI(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Rb.setItem(ok,JSON.stringify(t))},t9=t=>{const s=CI();return mt(s,t).getOr([])},n9=(t,s)=>{if(!XD(t))return;const a=CI(),l=mt(a,s).getOr([]),d=io(l,g=>g!==t);a[s]=[t].concat(d).slice(0,sk),e9(a)},wI=t=>!!t,o9=t=>Xe(bg.makeMap(t,/[, ]/),wI),JD=t=>A.from(GM(t)),vG=t=>{const s=A.from(KM(t)).filter(wI).map(o9);return JD(t).fold(ro,a=>s.fold(Wt,l=>es(l).length>0?l:!1))},s9=(t,s)=>{const a=vG(t);return Sn(a)?a?JD(t):A.none():a[s]?JD(t):A.none()},SI=(t,s)=>s9(t,s).map(a=>l=>cl.nu(d=>{const g=(C,w)=>{if(!Mt(C))throw new Error("Expected value to be string");if(w!==void 0&&!qt(w))throw new Error("Expected meta to be a object");d({value:C,meta:w})},h={filetype:s,fieldname:l.fieldname,...A.from(l.meta).getOr({})};a.call(t,g,l.value,h)})),QD=t=>A.from(t).filter(Mt).getOrUndefined(),rk=t=>YM(t)?A.some({targets:Jz.find(t.getBody()),anchorTop:QD(XM(t)),anchorBottom:QD(JM(t))}):A.none(),xI=t=>A.from(CT(t)),r9=t=>({getHistory:t9,addToHistory:n9,getLinkInformation:()=>rk(t),getValidationHandler:()=>xI(t),getUrlPicker:s=>SI(t,s)}),a9=(t,s,a,l)=>{const d=gn(!1),g=Iz(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:ed.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get,tooltips:KD(t.dialog)},C=r9(s),w=Hz(s),_=Pz(s),D=$z(s),P=()=>d.get(),H=Ee=>d.set(Ee),U={shared:{providers:h,anchors:Rz(s,a,l,g.isPositionedAtTop),header:g},urlinput:C,styles:w,colorinput:_,dialog:D,isContextMenuOpen:P,setContextMenuState:H},z={...U,shared:{...U.shared,interpreter:Ee=>sI(Ee,{},z),getSink:t.popup}},ae={...U,shared:{...U.shared,interpreter:Ee=>sI(Ee,{},ae),getSink:t.dialog}};return{popup:z,dialog:ae}},c9=(t,s,a)=>{const l=(Ue,Wn)=>{ut([s,...a],en=>{en.broadcastEvent(Ue,Wn)})},d=(Ue,Wn)=>{ut([s,...a],en=>{en.broadcastOn([Ue],Wn)})},g=Ue=>d(bm(),{target:Ue.target}),h=Xd(),C=Zl(h,"touchstart",g),w=Zl(h,"touchmove",Ue=>l(S1(),Ue)),_=Zl(h,"touchend",Ue=>l(a2(),Ue)),D=Zl(h,"mousedown",g),P=Zl(h,"mouseup",Ue=>{Ue.raw.button===0&&d(eb(),{target:Ue.target})}),H=Ue=>d(bm(),{target:he.fromDom(Ue.target)}),U=Ue=>{Ue.button===0&&d(eb(),{target:he.fromDom(Ue.target)})},z=()=>{ut(t.editorManager.get(),Ue=>{t!==Ue&&Ue.dispatch("DismissPopups",{relatedTarget:t})})},ae=Ue=>l(Zg(),wC(Ue)),Ee=Ue=>{d(hh(),{}),l(lm(),wC(Ue))},fe=pe(he.fromDom(t.getElement())),Se=CC(fe,"scroll",Ue=>{requestAnimationFrame(()=>{const Wn=t.getContainer();if(Wn!=null){const Mn=Hp(t,s.element).map(xn=>[xn.element,...xn.others]).getOr([]);Gs(Mn,xn=>Ko(xn,Ue.target))&&(t.dispatch("ElementScroll",{target:Ue.target.dom}),l(c2(),Ue))}})}),Ce=()=>d(hh(),{}),We=Ue=>{Ue.state&&d(bm(),{target:he.fromDom(t.getContainer())})},Ve=Ue=>{d(bm(),{target:he.fromDom(Ue.relatedTarget.getContainer())})},gt=Ue=>t.dispatch("focusin",Ue),dt=Ue=>t.dispatch("focusout",Ue);t.on("PostRender",()=>{t.on("click",H),t.on("tap",H),t.on("mouseup",U),t.on("mousedown",z),t.on("ScrollWindow",ae),t.on("ResizeWindow",Ee),t.on("ResizeEditor",Ce),t.on("AfterProgressState",We),t.on("DismissPopups",Ve),ut([s,...a],Ue=>{Ue.element.dom.addEventListener("focusin",gt),Ue.element.dom.addEventListener("focusout",dt)})}),t.on("remove",()=>{t.off("click",H),t.off("tap",H),t.off("mouseup",U),t.off("mousedown",z),t.off("ScrollWindow",ae),t.off("ResizeWindow",Ee),t.off("ResizeEditor",Ce),t.off("AfterProgressState",We),t.off("DismissPopups",Ve),ut([s,...a],Ue=>{Ue.element.dom.removeEventListener("focusin",gt),Ue.element.dom.removeEventListener("focusout",dt)}),D.unbind(),C.unbind(),w.unbind(),_.unbind(),P.unbind(),Se.unbind()}),t.on("detach",()=>{ut([s,...a],jC),ut([s,...a],Ue=>Ue.destroy())})},Vc=qx,Cg=Ux,l9=W([ke("shell",!1),Qe("makeItem"),ke("setupItem",q),xu.field("listBehaviours",[Kn])]),TI=tu({name:"items",overrides:()=>({behaviours:ft([Kn.config({})])})}),EI=W([TI]),i9=W("CustomList"),kI=(t,s,a,l)=>{const d=(C,w)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},_=>{const D=Kn.contents(_),P=w.length,H=P-D.length,U=H>0?mo(H,()=>t.makeItem()):[],z=D.slice(P);ut(z,Ee=>Kn.remove(_,Ee)),ut(U,Ee=>Kn.append(_,Ee));const ae=Kn.contents(_);ut(ae,(Ee,fe)=>{t.setupItem(C,Ee,w[fe],fe)})})},g=t.shell?{behaviours:[Kn.config({})],components:[]}:{behaviours:[],components:s},h=C=>t.shell?A.some(C):ht(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:Sc(t.listBehaviours,g.behaviours),apis:{setItems:d}}},_I=_l({name:i9(),configFields:l9(),partFields:EI(),factory:kI,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),ry=W([Qe("dom"),ke("shell",!0),wc("toolbarBehaviours",[Kn])]),$b=W([tu({name:"groups",overrides:()=>({behaviours:ft([Kn.config({})])})})]),AI=(t,s,a,l)=>{const d=(C,w)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},_=>{Kn.set(_,w)})},g=C=>t.shell?A.some(C):ht(C,t,"groups"),h=t.shell?{behaviours:[Kn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:Sc(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:q},domModification:{attributes:{role:"group"}}}},Du=_l({name:"Toolbar",configFields:ry(),partFields:$b(),factory:AI,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),ak=q,OI=ro,e3=W([]);var DI=Object.freeze({__proto__:null,setup:ak,isDocked:OI,getBehaviours:e3});const RI=W(jt("toolbar-height-change")),wg={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},MI="tox-tinymce--toolbar-sticky-on",NI="tox-tinymce--toolbar-sticky-off",u9=(t,s)=>{const a=ba(s),d=hl(s).dom.innerHeight,g=nc(a),h=he.fromDom(t.elm),C=Da(h),w=Ys(h),_=C.y,D=_+w,P=ka(s),H=Ys(s),U=P.top,z=U+H,ae=Math.abs(U-g.top)<2,Ee=Math.abs(z-(g.top+d))<2;if(ae&&_<z)wf(g.left,_-H,a);else if(Ee&&D>U){const fe=_-d+w+H;wf(g.left,fe,a)}},ck=(t,s)=>vo(Br.getModes(t),s),e1=t=>{const s=l=>Pu(l)+(parseInt(xs(l,"margin-top"),10)||0)+(parseInt(xs(l,"margin-bottom"),10)||0),a=t.element;Ac(a).each(l=>{const d="padding-"+Br.getModes(t)[0];if(Br.isDocked(t)){const g=dc(l);Yt(a,"width",g+"px"),Yt(l,d,s(a)+"px")}else _o(a,"width"),_o(l,d)})},ay=(t,s)=>{s?(Wr(t,wg.fadeOutClass),Qh(t,[wg.transitionClass,wg.fadeInClass])):(Wr(t,wg.fadeInClass),Qh(t,[wg.fadeOutClass,wg.transitionClass]))},lk=(t,s)=>{const a=he.fromDom(t.getContainer());s?(ar(a,MI),Wr(a,NI)):(ar(a,NI),Wr(a,MI))},d9=(t,s)=>{const a=ba(s);Od(a).filter(l=>!Ko(s,l)).filter(l=>Ko(l,he.fromDom(a.dom.body))||Yr(t,l)).each(()=>Ki(s))},m9=(t,s)=>Wl(t).orThunk(()=>s().toOptional().bind(a=>Wl(a.element))),t3=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Br.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(e1)}),t.on("SkinLoaded",()=>{a().each(l=>{Br.isDocked(l)?Br.reset(l):Br.refresh(l)})}),t.on("FullscreenStateChanged",()=>{a().each(Br.reset)})),t.on("AfterScrollIntoView",l=>{a().each(d=>{Br.refresh(d);const g=d.element;ZR(g)&&u9(l,g)})}),t.on("PostRender",()=>{lk(t,!1)})},f9=t=>t().map(Br.isDocked).getOr(!1),NS=()=>[fi.config({channels:{[RI()]:{onReceive:e1}}})],n3=(t,s)=>{const a=os(),l=s.getSink,d=C=>{l().each(w=>C(w.element))},g=C=>{t.inline||e1(C),lk(t,Br.isDocked(C)),C.getSystem().broadcastOn([hh()],{}),l().each(w=>w.getSystem().broadcastOn([hh()],{}))},h=t.inline?[]:NS();return[Vn.config({}),Br.config({contextual:{lazyContext:C=>{const w=Pu(C.element),_=t.inline?t.getContentAreaContainer():t.getContainer();return A.from(_).map(D=>{const P=mr(he.fromDom(D));return Hp(t,C.element).fold(()=>{const U=P.height-w,z=P.y+(ck(C,"top")?0:w);return zr(P.x,z,P.width,U)},U=>{const z=$g(P,Eh(U)),ae=ck(C,"top")?z.y:z.y+w;return zr(z.x,ae,z.width,z.height-w)})})},onShow:()=>{d(C=>ay(C,!0))},onShown:C=>{d(w=>Di(w,[wg.transitionClass,wg.fadeInClass])),a.get().each(w=>{d9(C.element,w),a.clear()})},onHide:C=>{m9(C.element,l).fold(a.clear,a.set),d(w=>ay(w,!1))},onHidden:()=>{d(C=>Di(C,[wg.transitionClass]))},...wg},lazyViewport:C=>Hp(t,C.element).fold(()=>{const _=za(),D=yT(t),P=_.y+(ck(C,"top")?D:0),H=_.height-(ck(C,"bottom")?D:0);return{bounds:zr(_.x,P,_.width,H),optScrollEnv:A.none()}},_=>({bounds:Eh(_),optScrollEnv:A.some({currentScrollTop:_.element.dom.scrollTop,scrollElmTop:ka(_.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var g9=Object.freeze({__proto__:null,setup:t3,isDocked:f9,getBehaviours:n3});const h9=t=>{const s=t.editor,a=t.sticky?n3:e3;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:ft(a(s,t.sharedBackstage))}},p9=Nn([$a,ta("items",mu([Zh([LO,ii("items",wa)]),wa]))].concat(zw)),b9=t=>Nr("GroupToolbarButton",p9,t),v9=[rc("text"),rc("tooltip"),rc("icon"),rr("search",!1,mu([nn,Nn([rc("placeholder")])],t=>Sn(t)?t?A.some({placeholder:A.none()}):A.none():A.some(t))),Zi("fetch"),kr("onSetup",()=>q)],PI=Nn([$a,...v9]),o3=t=>Nr("menubutton",PI,t),BI=Nn([$a,B0,td,Ah,x8,JN,Eb,Mc("presets","normal",["normal","color","listpreview"]),eP(1),P0,QN]),s3=t=>Nr("SplitButton",BI,t);var cy=gi({factory:(t,s)=>{const a=(d,g)=>{const h=Ze(g,C=>{const w={type:"menubutton",text:C.text,fetch:D=>{D(C.getItems())}},_=o3(w).mapError(D=>vu(D)).getOrDie();return kS(_,"tox-mbtn",s.backstage,A.some("menuitem"))});Kn.set(d,h)},l={focus:mn.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:ft([Kn.config({}),co("menubar-events",[_r(d=>{t.onSetup(d)}),Ye(am(),(d,g)=>{Cs(d.element,".tox-mbtn--active").each(h=>{Ad(g.event.target,".tox-mbtn").each(C=>{Ko(h,C)||d.getSystem().getByDom(h).each(w=>{d.getSystem().getByDom(C).each(_=>{$d.expand(_),$d.close(w),Vn.focus(_)})})})})}),Ye(x1(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{$d.isOpen(h)&&($d.expand(C),$d.close(h))})})})]),mn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),A.some(!0))}),Cr.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Qe("dom"),Qe("uid"),Qe("onEscape"),Qe("backstage"),ke("onSetup",q)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const ik="⚡️Upgrade",$I="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",y9=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:$I,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:ik}}]}),II="container",C9=[wc("slotBehaviours",[])],LI=t=>"<alloy.field."+t+">",r3=t=>{const s=(()=>{const g=[];return{slot:(C,w)=>(g.push(C),jx(II,LI(C),w)),record:W(g)}})(),a=t(s),l=s.record(),d=Ze(l,g=>Yc({name:g,pname:LI(g)}));return of(II,C9,d,a3,a)},a3=(t,s)=>{const a=ae=>cb(t),l=(ae,Ee)=>ht(ae,t,Ee),d=(ae,Ee)=>(fe,Se)=>ht(fe,t,Se).map(Ce=>ae(Ce,Se)).getOr(Ee),g=ae=>(Ee,fe)=>{ut(fe,Se=>ae(Ee,Se))},h=(ae,Ee)=>Ns(ae.element,"aria-hidden")!=="true",C=(ae,Ee)=>{if(!h(ae)){const fe=ae.element;_o(fe,"display"),oe(fe,"aria-hidden"),dn(ae,T1(),{name:Ee,visible:!0})}},w=(ae,Ee)=>{if(h(ae)){const fe=ae.element;Yt(fe,"display","none"),Ot(fe,"aria-hidden","true"),dn(ae,T1(),{name:Ee,visible:!1})}},_=d(h,!1),D=d(w),P=g(D),H=ae=>P(ae,a()),U=d(C),z={getSlotNames:a,getSlot:l,isShowing:_,hideSlot:D,hideAllSlots:H,showSlot:U};return{uid:t.uid,dom:t.dom,components:s,behaviours:ob(t.slotBehaviours),apis:z}},ll={...Xe({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>dp(t)),sketch:r3},w9=Nn([td,B0,kr("onShow",q),kr("onHide",q),Eb]),S9=t=>Nr("sidebar",w9,t),x9=t=>{const{sidebars:s}=t.ui.registry.getAll();ut(es(s),a=>{const l=s[a],d=()=>fa(A.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}}})})},T9=t=>({element:()=>t.element.dom}),E9=(t,s)=>{const a=Ze(es(s),l=>{const d=s[l],g=li(S9(d));return{name:l,getApi:T9,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ze(a,l=>{const d=gn(q);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Zw.unnamedEvents([ig(l,d),Oh(l,d),Ye(T1(),(g,h)=>{const C=h.event;An(a,_=>_.name===C.name).each(_=>{(C.visible?_.onShow:_.onHide)(_.getApi(g))})})])})})},xG=t=>ll.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:E9(s,t),slotBehaviours:Zw.unnamedEvents([_r(a=>ll.hideAllSlots(a))])})),TG=(t,s,a)=>{jo.getCurrent(t).each(d=>{Kn.set(d,[xG(s)]);const g=a==null?void 0:a.toLowerCase();Mt(g)&&po(s,g)&&jo.getCurrent(d).each(h=>{ll.showSlot(h,g),ou.immediateGrow(d),_o(d.element,"width"),PS(t.element,"region")})})},PS=(t,s)=>{Ot(t,"role",s)},k9=(t,s)=>{jo.getCurrent(t).each(l=>{jo.getCurrent(l).each(g=>{ou.hasGrown(l)?ll.isShowing(g,s)?(ou.shrink(l),PS(t.element,"presentation")):(ll.hideAllSlots(g),ll.showSlot(g,s),PS(t.element,"region")):(ll.hideAllSlots(g),ll.showSlot(g,s),ou.grow(l),PS(t.element,"region"))})})},FI=t=>jo.getCurrent(t).bind(a=>ou.isGrowing(a)||ou.hasGrown(a)?jo.getCurrent(a).bind(g=>An(ll.getSlotNames(g),h=>ll.isShowing(g,h))):A.none()),c3=jt("FixSizeEvent"),l3=jt("AutoSizeEvent"),_9=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:ft([Cr.config({}),Vn.config({}),ou.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{jo.getCurrent(s).each(ll.hideAllSlots),Ro(s,l3)},onGrown:s=>{Ro(s,l3)},onStartGrow:s=>{dn(s,c3,{width:Ms(s.element,"width").getOr("")})},onStartShrink:s=>{dn(s,c3,{width:dc(s.element)+"px"})}}),Kn.config({}),jo.config({find:s=>{const a=Kn.contents(s);return Qs(a)}})])}],behaviours:ft([Id.childAt(0),co("sidebar-sliding-events",[Ye(c3,(s,a)=>{Yt(s.element,"width",a.event.width)}),Ye(l3,(s,a)=>{_o(s.element,"width")})])])});var O9=Object.freeze({__proto__:null,block:(t,s,a,l)=>{Ot(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=ft([mn.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),Vn.config({})]),h=l(d,g),C=d.getSystem().build(h);Kn.append(d,Tl(C)),C.hasConfigured(mn)&&s.focus&&mn.focusIn(C),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Kn.remove(d,C))},unblock:(t,s,a)=>{oe(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),D9=[kr("getRoot",A.none),pc("focus",!0),Zo("onBlock"),Zo("onUnblock")],AG=Object.freeze({__proto__:null,init:()=>{const t=pd(),s=a=>{t.set({destroy:a})};return Ai({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Sg=Nc({fields:D9,name:"blocking",apis:O9,state:AG}),HI=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:kh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),i3=t=>jo.getCurrent(t).each(s=>Ki(s.element,!0)),R9=(t,s)=>{const a="tabindex",l=`data-mce-${a}`;A.from(t.iframeElement).map(he.fromDom).each(d=>{s?(B(d,a).each(g=>Ot(d,l,g)),Ot(d,a,-1)):(oe(d,a),B(d,l).each(g=>{Ot(d,a,g),oe(d,l)}))})},M9=(t,s,a,l)=>{const d=s.element;if(R9(t,a),a)Sg.block(s,HI(l)),_o(d,"display"),oe(d,"aria-hidden"),t.hasFocus()&&i3(s);else{const g=jo.getCurrent(s).exists(h=>Z1(h.element));Sg.unblock(s),Yt(d,"display","none"),Ot(d,"aria-hidden","true"),g&&t.focus()}},cd=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:ft([Kn.config({}),Sg.config({focus:!1}),jo.config({find:s=>Qs(s.components())})]),components:[]}),N9=t=>t.type==="focusin",VI=t=>N9(t)?(t.composed?Qs(t.composedPath()):A.from(t.target)).map(he.fromDom).filter(Uo).exists(a=>Oi(a,"mce-pastebin")):!1,zI=(t,s,a)=>{const l=gn(!1),d=os(),g=C=>{l.get()&&!VI(C)&&(C.preventDefault(),i3(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==l.get()&&(l.set(C),M9(t,s(),C,a.providers),J8(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),jn(C.time)){const w=E0.setEditorTimeout(t,()=>h(C.state),C.time);d.set(w)}else h(C.state),d.clear()})},P9=(t,s)=>Vo(t,(d,g)=>s(g,d.len).fold(W(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,Ib=(t,s,a)=>({within:t,extra:s,withinWidth:a}),UI=(t,s,a)=>{const l=P9(t,(C,w)=>{const _=a(C);return A.some({element:C,start:w,finish:w+_,width:_})}),d=io(l,C=>C.finish<=s),g=as(d,(C,w)=>C+w.width,0),h=l.slice(d.length);return{within:d,extra:h,withinWidth:g}},Lb=t=>Ze(t,s=>s.element),B9=(t,s,a)=>{const l=Lb(t.concat(s));return Ib(l,[],a)},uk=(t,s,a,l)=>{const d=Lb(t).concat([a]);return Ib(d,Lb(s),l)},$9=(t,s,a)=>Ib(Lb(t),[],a),I9=(t,s,a)=>{const l=UI(s,t,a);return l.extra.length===0?A.some(l):A.none()},Hd=(t,s,a,l)=>{const d=I9(t,s,a).getOrThunk(()=>UI(s,t-a(l),a)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=a(l)?B9(g,h,C):h.length>=1?uk(g,h,l,C):$9(g,h,C)},WI=(t,s)=>{const a=Ze(s,l=>Tl(l));Du.setGroups(t,a)},dk=t=>gs(t,s=>Wl(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),u3=(t,s,a)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=Gl(t,s,"primary"),g=ua.getCoupled(t,"overflowGroup");Yt(d.element,"visibility","hidden");const h=l.concat([g]),C=dk(h);a([]),WI(d,h);const w=dc(d.element),_=Hd(w,s.builtGroups.get(),D=>Math.ceil(D.element.dom.getBoundingClientRect().width),g);_.extra.length===0?(Kn.remove(d,g),a([])):(WI(d,_.within),a(_.extra)),_o(d.element,"visibility"),ec(d.element),C.each(Vn.focus)},d3=W([wc("splitToolbarBehaviours",[ua]),hc("builtGroups",()=>gn([]))]),L9=W([mm(["overflowToggledClass"]),om("getOverflowBounds"),Qe("lazySink"),hc("overflowGroups",()=>gn([])),Zo("onOpened"),Zo("onClosed")].concat(d3())),ZI=W([Yc({factory:Du,schema:ry(),name:"primary"}),Tu({schema:ry(),name:"overflow"}),Tu({name:"overflow-button"}),Tu({name:"overflow-group"})]),m3=W((t,s)=>{K(t,Math.floor(s))}),F9=W([mm(["toggledClass"]),Qe("lazySink"),Zi("fetch"),om("getBounds"),qr("fireDismissalEventInstead",[ke("event",Wm())]),Yf(),Zo("onToggled")]),H9=W([Tu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:ft([yo.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Tu({factory:Du,schema:ry(),name:"toolbar",overrides:t=>({toolbarBehaviours:ft([mn.config({mode:"cyclic",onEscape:s=>(ht(s,t,"button").each(Vn.focus),A.none())})])})})]),mk=os(),V9=(t,s)=>{mk.set(!0),f3(t,s),mk.clear()},f3=(t,s)=>{const a=ua.getCoupled(t,"toolbarSandbox");Yo.isOpen(a)?Yo.close(a):Yo.open(a,s.toolbar())},g3=(t,s,a,l)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(t).getOrDie();Ic.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:m3()}}},d)},h3=(t,s,a,l,d)=>{Du.setGroups(s,d),g3(t,s,a,l),yo.on(t)},jI=(t,s,a)=>{const l=kv(),d=(h,C)=>{const w=mk.get().getOr(!1);a.fetch().get(_=>{h3(t,C,a,s.layouts,_),l.link(t.element),w||mn.focusIn(C)})},g=()=>{yo.off(t),mk.get().getOr(!1)||Vn.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:ft([mn.config({mode:"special",onEscape:h=>(Yo.close(h),A.some(!0))}),Yo.config({onOpen:d,onClose:g,isPartOf:(h,C,w)=>zf(C,w)||zf(t,w),getAttachPoint:()=>a.lazySink(t).getOrDie()}),fi.config({channels:{...tf({isExtraPart:ro,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...r0({doReposition:()=>{Yo.getState(ua.getCoupled(t,"toolbarSandbox")).each(h=>{g3(t,h,a,s.layouts)})}})}})])}},t1=_l({name:"FloatingToolbarButton",factory:(t,s,a,l)=>({...rl.sketch({...l.button(),action:d=>{f3(d,l)},buttonBehaviours:xu.augment({dump:l.button().buttonBehaviours},[ua.config({others:{toolbarSandbox:d=>jI(d,a,t)}})])}),apis:{setGroups:(d,g)=>{Yo.getState(ua.getCoupled(d,"toolbarSandbox")).each(h=>{h3(d,h,t,a.layouts,g)})},reposition:d=>{Yo.getState(ua.getCoupled(d,"toolbarSandbox")).each(g=>{g3(d,g,t,a.layouts)})},toggle:d=>{f3(d,l)},toggleWithoutFocusing:d=>{V9(d,l)},getToolbar:d=>Yo.getState(ua.getCoupled(d,"toolbarSandbox")),isOpen:d=>Yo.isOpen(ua.getCoupled(d,"toolbarSandbox"))}}),configFields:F9(),partFields:H9(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),U9=W([Qe("items"),mm(["itemSelector"]),wc("tgroupBehaviours",[mn])]),GI=W([p0({name:"items",unit:"item"})]),qI=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Sc(t.tgroupBehaviours,[mn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),BS=_l({name:"ToolbarGroup",configFields:U9(),partFields:GI(),factory:qI}),KI=t=>Ze(t,s=>Tl(s)),YI=(t,s,a)=>{u3(t,a,l=>{a.overflowGroups.set(l),s.getOpt(t).each(d=>{t1.setGroups(d,KI(l))})})},W9=(t,s,a,l)=>{const d=ps(t1.sketch({fetch:()=>cl.nu(g=>{g(KI(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Na,Za],onRtl:()=>[Za,Na],onBottomLtr:()=>[Os,ja],onBottomRtl:()=>[ja,Os]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Sc(t.splitToolbarBehaviours,[ua.config({others:{overflowGroup:()=>BS.sketch({...l["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(Ze(h,g.getSystem().build)),YI(g,d,t)},refresh:g=>YI(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{t1.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(t1.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(t1.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{t1.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(t1.getToolbar)},domModification:{attributes:{role:"group"}}}},p3=_l({name:"SplitFloatingToolbar",configFields:L9(),partFields:ZI(),factory:W9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),Z9=W([mm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Zo("onOpened"),Zo("onClosed")].concat(d3())),j9=W([Yc({factory:Du,schema:ry(),name:"primary"}),Yc({factory:Du,schema:ry(),name:"overflow",overrides:t=>({toolbarBehaviours:ft([ou.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{ht(s,t,"overflow-button").each(a=>{yo.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{ht(s,t,"overflow-button").each(yo.on)}}),mn.config({mode:"acyclic",onEscape:s=>(ht(s,t,"overflow-button").each(Vn.focus),A.some(!0))})])})}),Tu({name:"overflow-button",overrides:t=>({buttonBehaviours:ft([yo.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Tu({name:"overflow-group"})]),G9=(t,s)=>ht(t,s,"overflow").map(ou.hasGrown).getOr(!1),b3=(t,s,a)=>{ht(t,s,"overflow-button").each(l=>{ht(t,s,"overflow").each(d=>{if(v3(t,s),ou.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||mn.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||Vn.focus(l),g(h),s.onClosed=g}}ou.toggleGrow(d)})})},v3=(t,s)=>{ht(t,s,"overflow").each(a=>{u3(t,s,l=>{const d=Ze(l,g=>Tl(g));Du.setGroups(a,d)}),ht(t,s,"overflow-button").each(l=>{ou.hasGrown(a)&&yo.on(l)}),ou.refresh(a)})},q9=(t,s,a,l)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const w=Ze(C,h.getSystem().build);t.builtGroups.set(w)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Sc(t.splitToolbarBehaviours,[ua.config({others:{overflowGroup:h=>BS.sketch({...l["overflow-group"](),items:[rl.sketch({...l["overflow-button"](),action:C=>{Ro(h,d)}})]})}}),co("toolbar-toggle-events",[Ye(d,h=>{b3(h,t,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),v3(h,t)},refresh:h=>v3(h,t),toggle:h=>{b3(h,t,!1)},toggleWithoutFocusing:h=>{b3(h,t,!0)},isOpen:h=>G9(h,t)},domModification:{attributes:{role:"group"}}}},y3=_l({name:"SplitSlidingToolbar",configFields:Z9(),partFields:j9(),factory:q9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),XI=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[BS.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:ft([Cr.config({}),Vn.config({})])}},fk=t=>BS.sketch(XI(t)),JI=(t,s)=>{const a=_r(l=>{const d=Ze(t.initGroups,fk);Du.setGroups(l,d)});return ft([Fc.toolbarButton(t.providers.isDisabled),xc(),mn.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),co("toolbar-events",[a])])},C3=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":XI({title:A.none(),items:[]}),"overflow-button":fz({name:"more",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:A.none(),borderless:!1},A.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:JI(t,s)}},K9=t=>{const s=C3(t),a=4,l=p3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return p3.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=Da(d),h=Ha(d),C=Da(h),w=Math.max(h.dom.scrollHeight,C.height);return zr(g.x+a,C.y,g.width-a*2,w)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},Y9=t=>{const s=y3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=y3.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=C3(t);return y3.sketch({...l,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([RI()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([RI()],{type:"closed"}),t.onToggled(d,!1)}})},ly=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Du.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Nd.scrolling?["tox-toolbar--scrolling"]:[])},components:[Du.parts.groups({})],toolbarBehaviours:JI(t,s)})},QI=[Ah,td,rc("tooltip"),Mc("buttonType","secondary",["primary","secondary"]),pc("borderless",!1),Zi("onAction")],gk=[...QI,_h,Hu("type",["button"])],X9=[...QI,pc("active",!1),Hu("type",["togglebutton"])],w3={button:gk,togglebutton:X9},J9=[Hu("type",["group"]),k("buttons",[],Fl("type",w3))],Q9=Fl("type",{...w3,group:J9}),OG=Nn([k("buttons",[],Q9),Zi("onShow"),Zi("onHide")]),eU=t=>Nr("view",OG,t),tU=(t,s)=>{var a,l;const d=t.type==="togglebutton",g=t.icon.map(Ce=>Yp(Ce,s.icons)).map(ps),C=Ce=>{const We=dt=>{g.map(Ue=>Ue.getOpt(Ce).each(Wn=>{Kn.set(Wn,[Yp(dt,s.icons)])}))},Ve=dt=>{const Ue=Ce.element;dt?(ar(Ue,"tox-button--enabled"),Ot(Ue,"aria-pressed",!0)):(Wr(Ue,"tox-button--enabled"),oe(Ue,"aria-pressed"))},gt=()=>Oi(Ce.element,"tox-button--enabled");if(d)return t.onAction({setIcon:We,setActive:Ve,isActive:gt});if(t.type==="button")return t.onAction({setIcon:We})},w={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:A.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},_=_S((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),D=d?t.text.map(s.translate):A.some(s.translate(t.text)),P=D.map(na),H=w.tooltip.or(D).map(Ce=>({"aria-label":s.translate(Ce)})).getOr({}),U=g.map(Ce=>Ce.asSpec()),z=_b([U,P]),ae=t.icon.isSome()&&P.isSome(),Ee={tag:"button",classes:_.concat(...t.icon.isSome()&&!ae?["tox-button--icon"]:[]).concat(...ae?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:H},fe=[],Se=Bb(w,A.some(C),fe,Ee,z,t.tooltip,s);return rl.sketch(Se)},hk=(t,s)=>tU(t,s),nU=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ze(t.buttons,a=>hk(a,s))}),$S=vl().deviceType,e5=$S.isPhone(),t5=$S.isTablet(),S3=t=>{let s=!1;const a=Ze(t.buttons,l=>l.type==="group"?(s=!0,nU(l,t.providers)):hk(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...e5||t5?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:ft([Vn.config({}),mn.config({mode:"flow",selector:"button, .tox-button",focusInside:yh.OnEnterOrSpaceMode})]),components:s?a:[mf.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),mf.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},oU=t=>({uid:t.uid,behaviours:ft([Vn.config({}),Cr.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),n5=(t,s,a,l)=>{const d={getPane:g=>Vc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:ft([Vn.config({}),mn.config({mode:"cyclic",focusInside:yh.OnEnterOrSpaceMode})]),apis:d}};var pf=_l({name:"silver.View",configFields:[Qe("viewConfig")],partFields:[tu({factory:{sketch:S3},schema:[Qe("buttons"),Qe("providers")],name:"header"}),tu({factory:{sketch:oU},schema:[],name:"pane"})],factory:n5,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const o5=(t,s,a)=>Hn(s,(l,d)=>{const g=li(eU(l));return t.slot(d,pf.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[pf.parts.header({buttons:g.buttons,providers:a})]:[],pf.parts.pane({})]}))}),sU=(t,s)=>ll.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:o5(a,t,s),slotBehaviours:Zw.unnamedEvents([_r(l=>ll.hideAllSlots(l))])})),s5=t=>An(ll.getSlotNames(t),s=>ll.isShowing(t,s)),rU=t=>{const s=t.element;Yt(s,"display","none"),Ot(s,"aria-hidden","true")},x3=t=>{const s=t.element;_o(s,"display"),oe(s,"aria-hidden")},aU=t=>({getContainer:W(t)}),r5=(t,s,a)=>{ll.getSlot(t,s).each(l=>{pf.getPane(l).each(d=>{a(l)(aU(d.element.dom))})})},a5=(t,s)=>r5(t,s,pf.getOnShow),c5=(t,s)=>r5(t,s,pf.getOnHide);var iy=gi({factory:(t,s)=>{const g={setViews:(h,C)=>{Kn.set(h,[sU(C,s.backstage.shared.providers)])},whichView:h=>jo.getCurrent(h).bind(s5),toggleView:(h,C,w,_)=>jo.getCurrent(h).exists(D=>{const P=s5(D),H=P.exists(z=>_===z),U=ll.getSlot(D,_).isSome();return U&&(ll.hideAllSlots(D),H?(rU(h),C()):(w(),x3(h),ll.showSlot(D,_),a5(D,_)),P.each(z=>c5(D,z))),U})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:ft([Kn.config({}),jo.config({find:h=>{const C=Kn.contents(h);return Qs(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Qe("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,l,d)=>t.toggleView(s,a,l,d),whichView:(t,s)=>t.whichView(s)}});const cU=(t,s,a)=>{let l=!1;const d=h=>{Ul(h,".tox-statusbar").each(C=>{xs(C,"display")==="none"&&Ns(C,"aria-hidden")==="true"?(_o(C,"display"),oe(C,"aria-hidden")):(Yt(C,"display","none"),Ot(C,"aria-hidden","true"))})},g={getSocket:h=>Vc.getPart(h,t,"socket"),setSidebar:(h,C,w)=>{Vc.getPart(h,t,"sidebar").each(_=>TG(_,C,w))},toggleSidebar:(h,C)=>{Vc.getPart(h,t,"sidebar").each(w=>k9(w,C))},whichSidebar:h=>Vc.getPart(h,t,"sidebar").bind(FI).getOrNull(),getHeader:h=>Vc.getPart(h,t,"header"),getToolbar:h=>Vc.getPart(h,t,"toolbar"),setToolbar:(h,C)=>{Vc.getPart(h,t,"toolbar").each(w=>{const _=Ze(C,fk);w.getApis().setGroups(w,_)})},setToolbars:(h,C)=>{Vc.getPart(h,t,"multiple-toolbar").each(w=>{const _=Ze(C,D=>Ze(D,fk));_I.setItems(w,_)})},refreshToolbar:h=>{Vc.getPart(h,t,"toolbar").each(w=>w.getApis().refresh(w))},toggleToolbarDrawer:h=>{Vc.getPart(h,t,"toolbar").each(C=>{is(C.getApis().toggle,w=>w(C))})},toggleToolbarDrawerWithoutFocusing:h=>{Vc.getPart(h,t,"toolbar").each(C=>{is(C.getApis().toggleWithoutFocusing,w=>w(C))})},isToolbarDrawerToggled:h=>Vc.getPart(h,t,"toolbar").bind(C=>A.from(C.getApis().isOpen).map(w=>w(C))).getOr(!1),getThrobber:h=>Vc.getPart(h,t,"throbber"),focusToolbar:h=>{Vc.getPart(h,t,"toolbar").orThunk(()=>Vc.getPart(h,t,"multiple-toolbar")).each(w=>{mn.focusIn(w)})},setMenubar:(h,C)=>{Vc.getPart(h,t,"menubar").each(w=>{cy.setMenus(w,C)})},focusMenubar:h=>{Vc.getPart(h,t,"menubar").each(C=>{cy.focus(C)})},setViews:(h,C)=>{Vc.getPart(h,t,"viewWrapper").each(w=>{iy.setViews(w,C)})},toggleView:(h,C)=>Vc.getPart(h,t,"viewWrapper").exists(w=>iy.toggleView(w,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>Vc.getPart(h,t,"viewWrapper").bind(iy.whichView).getOrNull(),hideMainView:h=>{l=g.isToolbarDrawerToggled(h),l&&g.toggleToolbarDrawer(h),Vc.getPart(h,t,"editorContainer").each(C=>{const w=C.element;d(w),Yt(w,"display","none"),Ot(w,"aria-hidden","true")})},showMainView:h=>{l&&g.toggleToolbarDrawer(h),Vc.getPart(h,t,"editorContainer").each(C=>{const w=C.element;d(w),_o(w,"display"),oe(w,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},lU=Cg.optional({factory:cy,name:"menubar",schema:[Qe("backstage")]}),l5=t=>t.type===Nd.sliding?Y9:t.type===Nd.floating?K9:ly,iU=Cg.optional({factory:{sketch:t=>_I.sketch({uid:t.uid,dom:t.dom,listBehaviours:ft([mn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>ly({type:t.type,uid:jt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),A.some(!0))}),setupItem:(s,a,l,d)=>{Du.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[Qe("dom"),Qe("onEscape")]}),uU=Cg.optional({factory:{sketch:t=>{const s=l5(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),A.some(!0)),onToggled:(l,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Qe("dom"),Qe("onEscape"),Qe("getSink")]}),dU=Cg.optional({factory:{sketch:h9},name:"header",schema:[Qe("dom")]}),i5=Cg.optional({factory:{sketch:y9},name:"promotion",schema:[Qe("dom")]}),mU=Cg.optional({name:"socket",schema:[Qe("dom")]}),fU=Cg.optional({factory:{sketch:_9},name:"sidebar",schema:[Qe("dom")]}),E3=Cg.optional({factory:{sketch:cd},name:"throbber",schema:[Qe("dom")]}),gU=Cg.optional({factory:iy,name:"viewWrapper",schema:[Qe("backstage")]}),hU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),u5=Cg.optional({factory:{sketch:hU},name:"editorContainer",schema:[]});var lr=_l({name:"OuterContainer",factory:cU,configFields:[Qe("dom"),Qe("behaviours")],partFields:[dU,lU,uU,iU,mU,fU,i5,E3,gU,u5],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,l)=>{t.setSidebar(s,a,l)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const d5="file edit view insert format tools table help",m5={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},f5=(t,s,a)=>{const l=fO(a).split(/[ ,]/);return{text:t.title,getItems:()=>we(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:Gs(l,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},k3=t=>t.split(" "),g5=(t,s)=>{const a={...m5,...s.menus},l=es(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?k3(d5):k3(s.menubar===!1?"":s.menubar),g=io(d,C=>{const w=po(m5,C);return l?w||mt(s.menus,C).exists(_=>po(_,"items")):w}),h=Ze(g,C=>{const w=a[C];return f5({title:w.title,items:k3(w.items)},s,t)});return io(h,C=>{const w=_=>Mt(_)||_.type!=="separator";return C.getItems().length>0&&Gs(C.getItems(),w)})},pU=t=>{const s=()=>{t._skinLoaded=!0,lE(t)};return()=>{t.initialized?s():t.on("init",s)}},h5=(t,s)=>()=>OP(t,{message:s}),p5=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),_3=(t,s,a,l)=>(t.on("remove",()=>l.unloadRawCss(s)),l.loadRawCss(s,a)),bU=async(t,s)=>{const l="ui/"+O0(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(l);if(Mt(d))_3(t,l,d,t.ui.styleSheetLoader);else{const g=t.editorManager.suffix,h=s+`/skin${g}.css`;return p5(t,h,t.ui.styleSheetLoader)}},A3=async(t,s)=>{if(wt(he.fromDom(t.getElement()))){const d="ui/"+O0(t).getOr("default")+"/skin.shadowdom.css",g=tinymce.Resource.get(d);if(Mt(g))_3(t,d,g,vb.DOM.styleSheetLoader);else{const h=t.editorManager.suffix,C=s+`/skin.shadowdom${h}.css`;return p5(t,C,vb.DOM.styleSheetLoader)}}},O3=async(t,s)=>{const a=()=>{const d=bO(s),g=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${g}.css`)};O0(s).fold(a,d=>{const g="ui/"+d+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(g);Mt(h)?_3(s,g,h,s.ui.styleSheetLoader):a()});const l=bO(s);if(!ST(s)&&Mt(l))return Promise.all([bU(s,l),A3(s,l)]).then()},b5=(t,s)=>O3(t,s).then(pU(s),h5(s,"Skin could not be loaded")),vU=cn(b5,!1),yU=cn(b5,!0),uy=(t,s,a)=>se(a)?t.translate(s):t.translate([s,t.translate(a)]),CU=(t,s)=>{const a=(h,C,w,_)=>{const D=t.shared.providers.translate(h.title);if(h.type==="separator")return A.some({type:"separator",text:D});if(h.type==="submenu"){const P=we(h.getStyleItems(),H=>l(H,C,_));return C===0&&P.length<=0?A.none():A.some({type:"nestedmenuitem",text:D,enabled:P.length>0,getSubmenuItems:()=>we(h.getStyleItems(),H=>l(H,C,_))})}else return A.some({type:"togglemenuitem",text:D,icon:h.icon,active:h.isSelected(_),enabled:!w,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),P=>({meta:{style:P}}))})},l=(h,C,w)=>{const _=h.type==="formatter"&&s.isInvalid(h);return C===0?_?[]:a(h,C,!1,w).toArray():a(h,C,_,w).toArray()},d=h=>{const C=s.getCurrentValue(),w=s.shouldHide?0:1;return we(h,_=>l(_,w,C))};return{validateItems:d,getFetch:(h,C)=>(w,_)=>{const D=C(),P=d(D),H=J0(P,wm.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:A.none()});_(H)}}},dy=(t,s)=>{const a=s.dataset,l=a.type==="basic"?()=>Ze(a.data,d=>GD(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:CU(t,s),getStyleItems:l}},IS=(t,s,a,l,d,g)=>{const{items:h,getStyleItems:C}=dy(s,a),w=gn(a.tooltip),_=P=>({getComponent:W(P),setTooltip:H=>{const U=s.shared.providers.translate(H);Ot(P.element,"aria-label",U),w.set(H)}}),D=P=>{const H=U=>P.setTooltip(uy(t,l(U.value),U.value));return t.on(d,H),iE(Db(t,"NodeChange",U=>{const z=U.getComponent();a.updateText(z),Ln.set(U.getComponent(),!t.selection.isEditable())})(P),()=>t.off(d,H))};return bD({text:a.icon.isSome()?A.none():a.text,icon:a.icon,ariaLabel:A.some(a.tooltip),tooltip:A.none(),role:A.none(),fetch:h.getFetch(s,C),onSetup:D,getApi:_,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[al.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:P=>{if(a.tooltip!==w.get()){const H=s.shared.providers.translate(w.get());al.setComponents(P,s.shared.providers.tooltips.getComponents({tooltipText:H}))}}})})]},"tox-tbtn",s.shared,g)},wU=t=>Ze(t,s=>{let a=s,l=s;const d=s.split("=");return d.length>1&&(a=d[0],l=d[1]),{title:a,format:l}}),SU=t=>({type:"basic",data:t});var Fb;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Fb||(Fb={}));const pk=(t,s)=>s===Fb.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),LS=(t,s,a)=>{const l=t.options.get(s);return{type:"basic",data:wU(pk(l,a))}},v5="Align",Nh=W("Alignment {0}"),D3="left",R3=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],y5=t=>{const s=()=>An(R3,C=>t.formatter.match(C.format)),a=C=>()=>t.formatter.match(C),l=C=>A.none,d=C=>{const _=s().fold(W(D3),D=>D.title.toLowerCase());dn(C,Xp,{icon:`align-${_}`}),MP(t,{value:_})},g=SU(R3),h=C=>()=>An(R3,w=>w.format===C.format).each(w=>t.execCommand(w.command));return{tooltip:uy(t,Nh(),D3),text:A.none(),icon:A.some("align-left"),isSelectedFor:a,getCurrentValue:A.none,getPreviewFor:l,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},xU=(t,s)=>IS(t,s,y5(t),Nh,"AlignTextUpdate","align"),TU=(t,s)=>{const a=dy(s,y5(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(v5),onSetup:hi(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},C5=(t,s)=>{const a=s(),l=Ze(a,d=>d.format);return A.from(t.formatter.closest(l)).bind(d=>An(a,g=>g.format===d))},EU="Blocks",w5=W("Block {0}"),bk="Paragraph",S5=t=>{const s=g=>()=>t.formatter.match(g),a=g=>()=>{const h=t.formatter.get(g);return h?A.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):A.none()},l=g=>{const C=C5(t,()=>d.data).fold(W(bk),w=>w.title);dn(g,Ld,{text:C}),t7(t,{value:C})},d=LS(t,"block_formats",Fb.SemiColon);return{tooltip:uy(t,w5(),bk),text:A.some(bk),icon:A.none(),isSelectedFor:s,getCurrentValue:A.none,getPreviewFor:a,onAction:PP(t),updateText:l,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},kU=(t,s)=>IS(t,s,S5(t),w5,"BlocksTextUpdate","blocks"),M3=(t,s)=>{const a=dy(s,S5(t));t.ui.registry.addNestedMenuItem("blocks",{text:EU,onSetup:hi(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},_U="Fonts",x5=W("Font {0}"),N3="System Font",AU=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],T5=t=>{const s=t.split(/\s*,\s*/);return Ze(s,a=>a.replace(/^['"]+|['"]+$/g,""))},E5=(t,s)=>s.length>0&&vt(s,a=>t.indexOf(a.toLowerCase())>-1),k5=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=T5(t.toLowerCase());return E5(a,AU)||E5(a,s)}else return!1},P3=t=>{const s=()=>{const w=z=>z?T5(z)[0]:"",_=t.queryCommandValue("FontName"),D=C.data,P=_?_.toLowerCase():"",H=rN(t);return{matchOpt:An(D,z=>{const ae=z.format;return ae.toLowerCase()===P||w(ae).toLowerCase()===w(P).toLowerCase()}).orThunk(()=>wn(k5(P,H),{title:N3,format:P})),font:_}},a=w=>_=>_.exists(D=>D.format===w),l=()=>{const{matchOpt:w}=s();return w},d=w=>()=>A.some({tag:"div",styles:w.indexOf("dings")===-1?{"font-family":w}:{}}),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,w.format)})},h=w=>{const{matchOpt:_,font:D}=s(),P=_.fold(W(D),H=>H.title);dn(w,Ld,{text:P}),n7(t,{value:P})},C=LS(t,"font_family_formats",Fb.SemiColon);return{tooltip:uy(t,x5(),N3),text:A.some(N3),icon:A.none(),isSelectedFor:a,getCurrentValue:l,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:ro}},_5=(t,s)=>IS(t,s,P3(t),x5,"FontFamilyTextUpdate","fontfamily"),OU=(t,s)=>{const a=dy(s,P3(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(_U),onSetup:hi(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},A5={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},DU=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),l="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",t+l+d(t)+d(a),l+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),RU=(t,s)=>Gs(s,a=>Gs(A5[a],l=>t===l)),vk=(t,s)=>A.from(DU.exec(t)).bind(l=>{const d=Number(l[1]),g=l[2];return RU(g,s)?A.some({value:d,unit:g}):A.none()}),O5=(t,s)=>vk(t,s).map(({value:a,unit:l})=>a+l),D5={tab:W(9),escape:W(27),enter:W(13),backspace:W(8),delete:W(46),left:W(37),up:W(38),right:W(39),down:W(40),space:W(32),home:W(36),end:W(35),pageUp:W(33),pageDown:W(34)},R5=(t,s,a,l)=>{let d=A.none();const g=Ce=>Ce.map(We=>Zt.getValue(We)).getOr(""),h=Db(t,"NodeChange SwitchMode",Ce=>{const We=Ce.getComponent();d=A.some(We),a.updateInputValue(We),Ln.set(We,!t.selection.isEditable())}),C=Ce=>({getComponent:W(Ce)}),w=gn(q),_=jt("custom-number-input-events"),D=(Ce,We,Ve)=>{const gt=g(d),dt=a.getNewValue(gt,Ce),Ue=gt.length-`${dt}`.length,Wn=d.map(Mn=>Mn.element.dom.selectionStart-Ue),en=d.map(Mn=>Mn.element.dom.selectionEnd-Ue);a.onAction(dt,Ve),d.each(Mn=>{Zt.setValue(Mn,dt),We&&(Wn.each(xn=>Mn.element.dom.selectionStart=xn),en.each(xn=>Mn.element.dom.selectionEnd=xn))})},P=(Ce,We)=>D((Ve,gt)=>Ve-gt,Ce,We),H=(Ce,We)=>D((Ve,gt)=>Ve+gt,Ce,We),U=Ce=>Ac(Ce.element).fold(A.none,We=>(Ki(We),A.some(!0))),z=Ce=>Z1(Ce.element)?(Pl(Ce.element).each(We=>Ki(We)),A.some(!0)):A.none(),ae=(Ce,We,Ve,gt)=>{const dt=gn(q),Ue=s.shared.providers.translate(Ve),Wn=jt("altExecuting"),en=Db(t,"NodeChange SwitchMode",xn=>{Ln.set(xn.getComponent(),!t.selection.isEditable())}),Mn=xn=>{Ln.isDisabled(xn)||Ce(!0)};return rl.sketch({dom:{tag:"button",attributes:{"aria-label":Ue,"data-mce-name":We},classes:gt.concat(We)},components:[LE(We,s.shared.providers.icons)],buttonBehaviours:ft([Ln.config({}),al.config(s.shared.providers.tooltips.getConfig({tooltipText:Ue})),co(Wn,[ig({onSetup:en,getApi:C},dt),Oh({getApi:C},dt),Ye(qi(),(xn,ds)=>{(ds.event.raw.keyCode===D5.space()||ds.event.raw.keyCode===D5.enter())&&(Ln.isDisabled(xn)||Ce(!1))}),Ye(Wg(),Mn),Ye(ac(),Mn)])]),eventOrder:{[qi()]:[Wn,"keying"],[Wg()]:[Wn,"alloy.base.behaviour"],[ac()]:[Wn,"alloy.base.behaviour"],[el()]:["alloy.base.behaviour",Wn,"tooltipping"],[Gu()]:[Wn,"tooltipping"]}})},Ee=ps(ae(Ce=>P(!1,Ce),"minus","Decrease font size",[])),fe=ps(ae(Ce=>H(!1,Ce),"plus","Increase font size",[])),Se=ps({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[lf.sketch({inputBehaviours:ft([Ln.config({}),co(_,[ig({onSetup:h,getApi:C},w),Oh({getApi:C},w)]),co("input-update-display-text",[Ye(Ld,(Ce,We)=>{Zt.setValue(Ce,We.event.text)}),Ye(Df(),Ce=>{a.onAction(Zt.getValue(Ce))}),Ye(zm(),Ce=>{a.onAction(Zt.getValue(Ce))})]),mn.config({mode:"special",onEnter:Ce=>(D(St,!0,!0),A.some(!0)),onEscape:U,onUp:Ce=>(H(!0,!1),A.some(!0)),onDown:Ce=>(P(!0,!1),A.some(!0)),onLeft:(Ce,We)=>(We.cut(),A.none()),onRight:(Ce,We)=>(We.cut(),A.none())})])})],behaviours:ft([Vn.config({}),mn.config({mode:"special",onEnter:z,onSpace:z,onEscape:U}),co("input-wrapper-events",[Ye(am(),Ce=>{ut([Ee,fe],We=>{const Ve=he.fromDom(We.get(Ce).element.dom);Z1(Ve)&&W1(Ve)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...qe(l)?{"data-mce-name":l}:{}}},components:[Ee.asSpec(),Se.asSpec(),fe.asSpec()],behaviours:ft([Vn.config({}),mn.config({mode:"flow",focusInside:yh.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Ce=>Z1(Ce.element)?A.none():(Ki(Ce.element),A.some(!0))})])}},MU="Font sizes",M5=W("Font size {0}"),N5="12pt",NU={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},PU={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},BU=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},$U=(t,s)=>/[0-9.]+px$/.test(t)?BU(parseInt(t,10)*72/96,s||0)+"pt":mt(PU,t).getOr(t),P5=t=>mt(NU,t).getOr(""),B5=t=>{const s=()=>{let w=A.none();const _=C.data,D=t.queryCommandValue("FontSize");if(D)for(let P=3;w.isNone()&&P>=0;P--){const H=$U(D,P),U=P5(H);w=An(_,z=>z.format===D||z.format===H||z.format===U)}return{matchOpt:w,size:D}},a=w=>_=>_.exists(D=>D.format===w),l=()=>{const{matchOpt:w}=s();return w},d=W(A.none),g=w=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,w.format)})},h=w=>{const{matchOpt:_,size:D}=s(),P=_.fold(W(D),H=>H.title);dn(w,Ld,{text:P}),e7(t,{value:P})},C=LS(t,"font_size_formats",Fb.Space);return{tooltip:uy(t,M5(),N5),text:A.some(N5),icon:A.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:ro}},IU=(t,s)=>IS(t,s,B5(t),M5,"FontSizeTextUpdate","fontsize"),LU=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},FU=16,HU=t=>t>=0,VU=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:l=>dn(l,Ld,{text:s()}),onAction:(l,d)=>t.execCommand("FontSize",!1,l,{skip_focus:!d}),getNewValue:(l,d)=>{vk(l,["unsupportedLength","empty"]);const g=s(),h=vk(l,["unsupportedLength","empty"]).or(vk(g,["unsupportedLength","empty"])),C=h.map(H=>H.value).getOr(FU),w=qM(t),_=h.map(H=>H.unit).filter(H=>H!=="").getOr(w),D=d(C,LU(_).step),P=`${HU(D)?D:C}${_}`;return P!==g&&NP(t,{value:P}),P}}},zU=(t,s)=>R5(t,s,VU(t),"fontsizeinput"),$5=(t,s)=>{const a=dy(s,B5(t));t.ui.registry.addNestedMenuItem("fontsize",{text:MU,onSetup:hi(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},UU="Formats",I5=t=>se(t)?"Formats":"Format {0}",B3=(t,s)=>{const a="Formats",l=h=>()=>t.formatter.match(h),d=h=>()=>{const C=t.formatter.get(h);return C!==void 0?A.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):A.none()},g=h=>{const C=P=>ZD(P)?we(P.items,C):iI(P)?[{title:P.title,format:P.format}]:[],w=we(dI(t),C),D=C5(t,W(w)).fold(W({title:a,tooltipLabel:""}),P=>({title:P.title,tooltipLabel:P.title}));dn(h,Ld,{text:D.title}),RP(t,{value:D.tooltipLabel})};return{tooltip:uy(t,I5(""),""),text:A.some(a),icon:A.none(),isSelectedFor:l,getCurrentValue:A.none,getPreviewFor:d,onAction:PP(t),updateText:g,shouldHide:vT(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},WU=(t,s)=>{const a={type:"advanced",...s.styles};return IS(t,s,B3(t,a),I5,"StylesTextUpdate","styles")},L5=(t,s)=>{const a={type:"advanced",...s.styles},l=dy(s,B3(t,a));t.ui.registry.addNestedMenuItem("styles",{text:UU,onSetup:hi(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},F5=W([Qe("toggleClass"),Qe("fetch"),Cu("onExecute"),ke("getHotspot",A.some),ke("getAnchorOverrides",W({})),Yf(),Cu("onItemExecute"),ms("lazySink"),Qe("dom"),Zo("onOpen"),wc("splitDropdownBehaviours",[ua,mn,Vn]),ke("matchWidth",!1),ke("useMinWidth",!1),ke("eventOrder",{}),ms("role")].concat(gE())),ZU=Yc({factory:rl,schema:[Qe("dom")],name:"arrow",defaults:()=>({buttonBehaviours:ft([Vn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Pf)},buttonBehaviours:ft([yo.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),jU=Yc({factory:rl,schema:[Qe("dom")],name:"button",defaults:()=>({buttonBehaviours:ft([Vn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),GU=W([ZU,jU,tu({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Qe("text")],name:"aria-descriptor"}),Tu({schema:[Qg()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,a)})}})}),sB()]),my=(t,s,a,l)=>{const d=D=>{jo.getCurrent(D).each(P=>{Pt.highlightFirst(P),mn.focusIn(P)})},g=D=>{E4(t,St,D,l,d,Yl.HighlightMenuAndItem).get(q)},h=D=>(g(D),A.some(!0)),C=D=>{const P=Gl(D,t,"button");return Pf(P),A.some(!0)},w={...ys([_r((D,P)=>{ht(D,t,"aria-descriptor").each(U=>{const z=jt("aria");Ot(U.element,"id",z),Ot(D.element,"aria-describedby",z)})})]),...mT(A.some(g))},_={repositionMenus:D=>{yo.isOn(D)&&aB(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:_,eventOrder:{...t.eventOrder,[di()]:["disabling","toggling","alloy.base.behaviour"]},events:w,behaviours:Sc(t.splitDropdownBehaviours,[ua.config({others:{sandbox:D=>{const P=Gl(D,t,"arrow");return A4(t,D,{onOpen:()=>{yo.on(P),yo.on(D)},onClose:()=>{yo.off(P),yo.off(D)}})}}}),mn.config({mode:"special",onSpace:C,onEnter:C,onDown:h}),Vn.config({}),yo.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},yk=_l({name:"SplitDropdown",configFields:F5(),partFields:GU(),factory:my,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),H5=t=>({isEnabled:()=>!Ln.isDisabled(t),setEnabled:s=>Ln.set(t,!s),setText:s=>dn(t,Ld,{text:s}),setIcon:s=>dn(t,Xp,{icon:s})}),qU=t=>({setActive:s=>{yo.set(t,s)},isActive:()=>yo.isOn(t),isEnabled:()=>!Ln.isDisabled(t),setEnabled:s=>Ln.set(t,!s),setText:s=>dn(t,Ld,{text:s}),setIcon:s=>dn(t,Xp,{icon:s})}),V5=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),z5=jt("focus-button"),$3=(t,s,a,l,d,g)=>{const h=s.map(w=>ps(v$(w,"tox-tbtn",d))),C=t.map(w=>ps(Yp(w,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...V5(a,d),...qe(g)?{"data-mce-name":g}:{}}},components:_b([C.map(w=>w.asSpec()),h.map(w=>w.asSpec())]),eventOrder:{[ui()]:["focusing","alloy.base.behaviour",Kp],[el()]:[Kp,"toolbar-group-button-events"]},buttonBehaviours:ft([Fc.toolbarButton(d.isDisabled),xc(),co(Kp,[_r((w,_)=>IE(w)),Ye(Ld,(w,_)=>{h.bind(D=>D.getOpt(w)).each(D=>{Kn.set(D,[na(d.translate(_.event.text))])})}),Ye(Xp,(w,_)=>{C.bind(D=>D.getOpt(w)).each(D=>{Kn.set(D,[Yp(_.event.icon,d.icons)])})}),Ye(ui(),(w,_)=>{_.event.prevent(),Ro(w,z5)})])].concat(l.getOr([])))}},KU=(t,s,a,l,d)=>{const g=s.shared,h=gn(q),C={toolbarButtonBehaviours:[],getApi:H5,onSetup:t.onSetup},w=[co("toolbar-group-button-events",[ig(C,h),Oh(C,h)])];return t1.sketch({lazySink:g.getSink,fetch:()=>cl.nu(_=>{_(Ze(a(t.items),fk))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:$3(t.icon,t.text,t.tooltip,A.some(w),g.providers,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},U5=(t,s,a,l)=>{var d;const g=gn(q),h=$3(t.icon,t.text,t.tooltip,A.none(),a,l);return rl.sketch({dom:h.dom,components:h.components,eventOrder:b$,buttonBehaviours:{...ft([co("toolbar-button-events",[p$({onAction:t.onAction,getApi:s.getApi}),ig(s,g),Oh(s,g)]),...t.tooltip.map(C=>al.config(a.tooltips.getConfig({tooltipText:a.translate(C)+t.shortcut.map(w=>` (${XO(w)})`).getOr("")}))).toArray(),Fc.toolbarButton(()=>!t.enabled||a.isDisabled()),xc()].concat(s.toolbarButtonBehaviours)),[Kp]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[Kp]}})},I3=(t,s,a)=>W5(t,s,[],a),W5=(t,s,a,l)=>U5(t,{toolbarButtonBehaviours:a.length>0?[co("toolbarButtonWith",a)]:[],getApi:H5,onSetup:t.onSetup},s,l),YU=(t,s,a)=>L3(t,s,[],a),L3=(t,s,a,l)=>U5(t,{toolbarButtonBehaviours:[Kn.config({}),yo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[co("toolbarToggleButtonWith",a)]:[]),getApi:qU,onSetup:t.onSetup},s,l),Z5=(t,s,a)=>l=>cl.nu(d=>s.fetch(d)).map(d=>A.from(vE($s(S4(jt("menu-value"),d,g=>{s.onItemAction(t(l),g)},s.columns,s.presets,wm.CLOSE_ON_EXECUTE,s.select.getOr(ro),a),{movement:fE(s.columns,s.presets),menuBehaviours:Zw.unnamedEvents(s.columns!=="auto"?[]:[_r((g,h)=>{tE(g,4,IN(s.presets)).each(({numRows:C,numColumns:w})=>{mn.setGridSize(g,C,w)})})])})))),XU=(t,s,a)=>{const l=gn(t.tooltip.getOr("")),d=C=>({isEnabled:()=>!Ln.isDisabled(C),setEnabled:w=>Ln.set(C,!w),setIconFill:(w,_)=>{Cs(C.element,`svg path[class="${w}"], rect[class="${w}"]`).each(D=>{Ot(D,"fill",_)})},setActive:w=>{Ot(C.element,"aria-pressed",w),Cs(C.element,"span").each(_=>{C.getSystem().getByDom(_).each(D=>yo.set(D,w))})},isActive:()=>Cs(C.element,"span").exists(w=>C.getSystem().getByDom(w).exists(yo.isOn)),setText:w=>Cs(C.element,"span").each(_=>C.getSystem().getByDom(_).each(D=>dn(D,Ld,{text:w}))),setIcon:w=>Cs(C.element,"span").each(_=>C.getSystem().getByDom(_).each(D=>dn(D,Xp,{icon:w}))),setTooltip:w=>{const _=s.providers.translate(w);Ot(C.element,"aria-label",_),l.set(w)}}),g=gn(q),h={getApi:d,onSetup:t.onSetup};return yk.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...V5(t.tooltip,s.providers),...qe(a)?{"data-mce-name":a}:{}}},onExecute:C=>{const w=d(C);w.isEnabled()&&t.onAction(w)},onItemExecute:(C,w,_)=>{},splitDropdownBehaviours:ft([Fc.splitButton(s.providers.isDisabled),xc(),co("split-dropdown-events",[_r((C,w)=>IE(C)),Ye(z5,Vn.focus),ig(h,g),Oh(h,g)]),q0.config({}),...t.tooltip.map(C=>al.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(C),onShow:w=>{if(l.get()!==C){const _=s.providers.translate(l.get());al.setComponents(w,s.providers.tooltips.getComponents({tooltipText:_}))}}})})).toArray()]),eventOrder:{[el()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Gu()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:Z5(d,t,s.providers),parts:{menu:Fw(!1,t.columns,t.presets)},components:[yk.parts.button($3(t.icon,t.text,A.none(),A.some([yo.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),yk.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:kO("chevron-down",s.providers.icons)},buttonBehaviours:ft([Fc.splitButton(s.providers.isDisabled),xc(),_O()])}),yk.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},JU=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],FS=(t,s)=>(a,l,d,g)=>{const h=t(a).mapError(C=>vu(C)).getOrDie();return s(h,l,d,g)},QU={button:FS(YT,(t,s,a,l)=>I3(t,s.shared.providers,l)),togglebutton:FS($0,(t,s,a,l)=>YU(t,s.shared.providers,l)),menubutton:FS(o3,(t,s,a,l)=>kS(t,"tox-tbtn",s,A.none(),!1,l)),splitbutton:FS(s3,(t,s,a,l)=>XU(t,s.shared,l)),grouptoolbarbutton:FS(b9,(t,s,a,l)=>{const d=a.ui.registry.getAll().buttons,g=C=>Hb(a,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,A.none()),h={[Kf]:s.shared.header.isPositionedAtTop()?qf.TopToBottom:qf.BottomToTop};switch(_0(a)){case Nd.floating:return KU(t,s,g,h,l);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},eW=(t,s,a,l)=>mt(QU,t.type).fold(()=>(console.error("skipping button defined by",t),A.none()),d=>A.some(d(t,s,a,l))),j5={styles:WU,fontsize:IU,fontsizeinput:zU,fontfamily:_5,blocks:kU,align:xU},G5=t=>{const s=Ze(JU,a=>{const l=io(a.items,d=>po(t,d)||po(j5,d));return{name:a.name,items:l}});return io(s,a=>a.items.length>0)},tW=t=>{const s=t.split("|");return Ze(s,a=>({items:a.trim().split(" ")}))},nW=t=>Ct(t,s=>po(s,"name")&&po(s,"items")),oW=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?G5(a):Mt(s)?tW(s):nW(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},sW=(t,s,a,l,d,g)=>mt(s,a.toLowerCase()).orThunk(()=>g.bind(h=>gs(h,C=>mt(s,C+a.toLowerCase())))).fold(()=>mt(j5,a.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()):eW(h,d,t,a.toLowerCase())),Hb=(t,s,a,l)=>{const d=oW(s),g=Ze(d,h=>{const C=we(h.items,w=>w.trim().length===0?[]:sW(t,s.buttons,w,s.allowToolbarGroups,a,l).toArray());return{title:A.from(t.translate(h.name)),items:C}});return io(g,h=>h.items.length>0)},q5=(t,s,a,l)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(Ct(g,Mt)){const C=g.map(w=>{const _={toolbar:w,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return Hb(t,_,l,A.none())});lr.setToolbars(d,C)}else lr.setToolbar(d,Hb(t,a,l,A.none()))},HS=vl(),Ck=HS.os.isiOS()&&HS.os.version.major<=12,K5=(t,s)=>{const{uiMotherships:a}=s,l=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=gn(or(d.innerWidth,d.innerHeight)),C=gn(or(g.offsetWidth,g.offsetHeight)),w=()=>{const H=h.get();(H.left!==d.innerWidth||H.top!==d.innerHeight)&&(h.set(or(d.innerWidth,d.innerHeight)),i4(t))},_=()=>{const H=t.getDoc().documentElement,U=C.get();(U.left!==H.offsetWidth||U.top!==H.offsetHeight)&&(C.set(or(H.offsetWidth,H.offsetHeight)),i4(t))},D=H=>{X8(t,H)};l.bind(d,"resize",w),l.bind(d,"scroll",D);const P=CC(he.fromDom(t.getBody()),"load",_);t.on("hide",()=>{ut(a,H=>{Yt(H.element,"display","none")})}),t.on("show",()=>{ut(a,H=>{_o(H.element,"display")})}),t.on("NodeChange",_),t.on("remove",()=>{P.unbind(),l.unbind(d,"resize",w),l.unbind(d,"scroll",D),d=null})},rW=(t,s,a)=>{Th(t)&&pm(a.mainUi.mothership.element,a.popupUi.mothership),Mx(s,a.dialogUi.mothership)};var aW=Object.freeze({__proto__:null,render:(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:h}=s,C=gn(0),w=g.outerContainer;vU(t);const _=he.fromDom(d.targetNode),D=ze(pe(_));pm(_,g.mothership),rW(t,D,s),t.on("SkinLoaded",()=>{lr.setSidebar(w,a.sidebar,nN(t)),q5(t,s,a,l),C.set(t.getWin().innerWidth),lr.setMenubar(w,g5(t,a)),lr.setViews(w,a.views),K5(t,s)});const P=lr.getSocket(w).getOrDie("Could not find expected socket element");if(Ck){Ws(P.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ae=n$(()=>{t.dispatch("ScrollContent")},20),Ee=Zl(P.element,"scroll",ae.throttle);t.on("remove",Ee.unbind)}uP(t,s),t.addCommand("ToggleSidebar",(ae,Ee)=>{lr.toggleSidebar(w,Ee),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var ae;return(ae=lr.whichSidebar(w))!==null&&ae!==void 0?ae:""}),t.addCommand("ToggleView",(ae,Ee)=>{if(lr.toggleView(w,Ee)){const fe=w.element;g.mothership.broadcastOn([bm()],{target:fe}),ut(h,Se=>{Se.broadcastOn([bm()],{target:fe})}),Qt(lr.whichView(w))&&(t.focus(),t.nodeChanged(),lr.refreshToolbar(w))}}),t.addQueryValueHandler("ToggleView",()=>{var ae;return(ae=lr.whichView(w))!==null&&ae!==void 0?ae:""});const H=_0(t),U=()=>{lr.refreshToolbar(s.mainUi.outerContainer)};(H===Nd.sliding||H===Nd.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ae=t.getWin().innerWidth;ae!==C.get()&&(U(),C.set(ae))});const z={setEnabled:ae=>{oE(s,!ae)},isEnabled:()=>!Ln.isDisabled(w)};return{iframeContainer:P.element.dom,editorContainer:w.element.dom,api:z}}});const Y5=t=>/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none(),F3=t=>jn(t)?t+"px":t,Vb=(t,s,a)=>{const l=s.filter(g=>t<g),d=a.filter(g=>t>g);return l.or(d).getOr(t)},X5=t=>{const s=pT(t),a=uO(t),l=Ew(t);return Y5(s).map(d=>Vb(d,a,l))},J5=t=>X5(t).getOr(pT(t)),H3=t=>{const s=lO(t),a=iO(t),l=bT(t);return Y5(s).map(d=>Vb(d,a,l))},Q5=t=>H3(t).getOr(lO(t)),{ToolbarLocation:V3,ToolbarMode:z3}=I6,cW=40,lW=(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:h}=a,C=vb.DOM,w=D0(t),_=wb(t),D=bT(t).or(H3(t)),P=l.shared.header,H=P.isPositionedAtTop,U=150,z=_0(t),ae=z===z3.sliding||z===z3.floating,Ee=gn(!1),fe=()=>Ee.get()&&!t.removed,Se=Eo=>ae?Eo.fold(W(0),Et=>Et.components().length>1?Ys(Et.components()[1].element):0):0,Ce=Eo=>{switch(gO(t)){case V3.auto:const Et=lr.getToolbar(g.outerContainer),sn=Se(Et),so=Ys(Eo.element)-sn,In=mr(s);if(In.y>so)return"top";{const Qn=Ha(s),Vs=Math.max(Qn.dom.scrollHeight,Ys(Qn));return In.bottom<Vs-so||za().bottom<In.bottom-so?"bottom":"top"}case V3.bottom:return"bottom";case V3.top:default:return"top"}},We=Eo=>{d.on(Et=>{Br.setModes(Et,[Eo]),P.setDockingMode(Eo);const sn=H()?qf.TopToBottom:qf.BottomToTop;Ot(Et.element,Kf,sn)})},Ve=()=>{d.on(Eo=>{const Et=D.getOrThunk(()=>Yd().width-tc(s).left-10);Yt(Eo.element,"max-width",Et+"px")})},gt=(Eo,Et)=>{d.on(sn=>{const so=lr.getToolbar(g.outerContainer),In=Se(so),_n=mr(s),Qn=dt(t,g.outerContainer.element),Vs=()=>Qn.fold(()=>_n.x,Ol=>{const dd=mr(Ol);return Ko(Ol,Wo())?_n.x:_n.x-dd.x}),fs=()=>Qn.fold(()=>H()?Math.max(_n.y-Ys(sn.element)+In,0):_n.bottom,Ol=>{var dd;const Wd=mr(Ol),ru=(dd=Ol.dom.scrollTop)!==null&&dd!==void 0?dd:0,Yb=Ko(Ol,Wo())?Math.max(_n.y-Ys(sn.element)+In,0):_n.y-Wd.y+ru-Ys(sn.element)+In;return H()?Yb:_n.bottom}),Jl=Vs(),ud=wn(Eo,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Ol=>Ol>U).map(Ol=>{const dd=Et.getOr(nc()),Wd=window.innerWidth-(Jl-dd.left),ru=Math.max(Math.min(Ol,Wd),U);return Wd<Ol&&Yt(g.outerContainer.element,"width",ru+"px"),{width:ru+"px"}}).getOr({width:"max-content"}),yf={position:"absolute",left:Math.round(Jl)+"px",top:fs()+"px"};Ws(g.outerContainer.element,{...yf,...ud})})},dt=(Eo,Et)=>Th(Eo)?If(Et):A.none(),Ue=()=>{ut(h,Eo=>{Eo.broadcastOn([hh()],{})})},Wn=()=>!w&&(ka(g.outerContainer.element).left+Va(g.outerContainer.element)>=window.innerWidth-cW||Ms(g.outerContainer.element,"width").isSome())?(Yt(g.outerContainer.element,"position","absolute"),Yt(g.outerContainer.element,"left","0px"),_o(g.outerContainer.element,"width"),!0):!1,en=Eo=>{if(!fe())return;w||Ve();const Et=nc(),sn=w?!1:Wn();if(ae&&lr.refreshToolbar(g.outerContainer),!w){const so=nc(),In=wn(Et.left!==so.left,Et);gt(sn,In),In.each(_n=>{wf(_n.left,so.top)})}_&&d.on(Eo),Ue()},Mn=()=>w||!_||!fe()?!1:d.get().exists(Eo=>{const Et=P.getDockingMode(),sn=Ce(Eo);return sn!==Et?(We(sn),!0):!1});return{isVisible:fe,isPositionedAtTop:H,show:()=>{Ee.set(!0),Yt(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),ut(h,Eo=>{_o(Eo.element,"display")}),Mn(),Th(t)?en(Eo=>Br.isDocked(Eo)?Br.reset(Eo):Br.refresh(Eo)):en(Br.refresh)},hide:()=>{Ee.set(!1),Yt(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),ut(h,Eo=>{Yt(Eo.element,"display","none")})},update:en,updateMode:()=>{Mn()&&en(Br.reset)},repositionPopups:Ue}},eL=(t,s)=>{const a=mr(t);return{pos:s?a.y:a.bottom,bounds:a}},iW=(t,s,a,l)=>{const d=gn(eL(s,a.isPositionedAtTop())),g=_=>{const{pos:D,bounds:P}=eL(s,a.isPositionedAtTop()),{pos:H,bounds:U}=d.get(),z=P.height!==U.height||P.width!==U.width;d.set({pos:D,bounds:P}),z&&i4(t,_),a.isVisible()&&(H!==D?a.update(Br.reset):z&&(a.updateMode(),a.repositionPopups()))};l||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Br.reset)),t.on("NodeChange keydown",_=>{requestAnimationFrame(()=>g(_))});let h=0;const C=cD(()=>a.update(Br.refresh),33);t.on("ScrollWindow",()=>{const _=nc().left;_!==h&&(h=_,C.throttle()),a.updateMode()}),Th(t)&&t.on("ElementScroll",_=>{a.update(Br.refresh)});const w=Gc();w.set(CC(he.fromDom(t.getBody()),"load",_=>g(_.raw))),t.on("remove",()=>{w.clear()})};var VS=Object.freeze({__proto__:null,render:(t,s,a,l,d)=>{const{mainUi:g}=s,h=os(),C=he.fromDom(d.targetNode),w=lW(t,C,s,l,h),_=jM(t);yU(t);const D=()=>{if(h.isSet()){w.show();return}h.set(lr.getHeader(g.outerContainer).getOrDie());const H=kT(t);Th(t)?(pm(C,g.mothership),pm(C,s.popupUi.mothership)):Mx(H,g.mothership),Mx(H,s.dialogUi.mothership);const U=()=>{q5(t,s,a,l),lr.setMenubar(g.outerContainer,g5(t,a)),w.show(),iW(t,C,w,_),t.nodeChanged()};_?t.once("SkinLoaded",U):U()};t.on("show",D),t.on("hide",w.hide),_||(t.on("focus",D),t.on("blur",w.hide)),t.on("init",()=>{(t.hasFocus()||_)&&D()}),uP(t,s);const P={show:D,hide:w.hide,setEnabled:H=>{oE(s,!H)},isEnabled:()=>!Ln.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:P}}});const uW=()=>{const t=os(),s=os(),a=os();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],w=>Ko(C.element,w.element)?[C]:[C,w]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},dW="contexttoolbar-show",tL="contexttoolbar-hide",nL=t=>({hide:()=>Ro(t,bc()),getValue:()=>Zt.getValue(t)}),oL=(t,s)=>Ye(h$,(a,l)=>{const d=t.get(a),g=nL(d);s.onAction(g,l.event.buttonApi)}),sL=(t,s,a)=>{const{primary:l,...d}=s.original,g=li(YT({...d,type:"button",onAction:q}));return W5(g,a,[oL(t,s)])},mW=(t,s,a)=>{const{primary:l,...d}=s.original,g=li($0({...d,type:"togglebutton",onAction:q}));return L3(g,a,[oL(t,s)])},fW=t=>t.type==="contextformtogglebutton",gW=(t,s,a)=>fW(s)?mW(t,s,a):sL(t,s,a),hW=(t,s,a)=>{const l=Ze(s,h=>ps(gW(t,h,a)));return{asSpecs:()=>Ze(l,h=>h.asSpec()),findPrimary:h=>gs(s,(C,w)=>C.primary?A.from(l[w]).bind(_=>_.getOpt(h)).filter(Ae(Ln.isDisabled)):A.none())}},rL=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),l=ps(lf.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:ft([mn.config({mode:"special",onEnter:g=>d.findPrimary(g).map(h=>(Pf(h),!0)),onLeft:(g,h)=>(h.cut(),A.none()),onRight:(g,h)=>(h.cut(),A.none())})])})),d=hW(l,t.commands,s);return[{title:A.none(),items:[l.asSpec()]},{title:A.none(),items:d.asSpecs()}]},aL={renderContextForm:(t,s,a)=>ly({type:t,uid:jt("context-toolbar"),initGroups:rL(s,a),onEscape:A.none,cyclicKeying:!0,providers:a}),buildInitGroups:rL},cL=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,pW=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Nu(he.fromDom(t.startContainer),t.startOffset).element;return(dr(a)?Xr(a):A.some(a)).filter(Uo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},Sk=t=>{const s=t.selection.getRng(),a=pW(s);if(t.inline){const l=nc();return zr(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=Da(he.fromDom(t.getBody()));return zr(l.x+a.left,l.y+a.top,a.width,a.height)}},U3=(t,s)=>s.filter(a=>No(a)&&Xc(a)).map(Da).getOrThunk(()=>Sk(t)),lL=(t,s,a)=>{const l=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:l,width:d-l}},iL=(t,s,a,l,d,g)=>{const h=he.fromDom(t.getContainer()),C=Cs(h,".tox-editor-header").getOr(h),w=mr(C),_=w.y>=s.bottom,D=l&&!_;if(t.inline&&D)return{y:Math.max(w.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(w.y-g,a.bottom)};const P=d==="line"?mr(h):s;return D?{y:Math.max(w.bottom+g,a.y),bottom:Math.min(P.bottom-g,a.bottom)}:{y:Math.max(P.y+g,a.y),bottom:Math.min(w.y-g,a.bottom)}},uL=(t,s,a,l=0)=>{const d=Yd(window),g=mr(he.fromDom(t.getContentAreaContainer())),h=xT(t)||TT(t)||Cb(t),{x:C,width:w}=lL(g,d,l);if(t.inline&&!h)return zr(C,d.y,w,d.height);{const _=s.header.isPositionedAtTop(),{y:D,bottom:P}=iL(t,g,d,_,a,l);return zr(C,D,w,P-D)}},Ph=12,zS={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},US={maxHeightFunction:pp(),maxWidthFunction:m3()},W3=(t,s)=>{const a=t.selection.getRng(),l=Nu(he.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Ko(l.element,s)},Z3=(t,s,a)=>{const l=Ms(t,"position");Yt(t,"position",s);const d=a(t);return l.each(g=>Yt(t,"position",g)),d},j3=t=>t==="node",xk=(t,s,a,l,d)=>{const g=Sk(t),h=l.lastElement().exists(C=>Ko(a,C));if(W3(t,a))return h?aI:km;if(h)return Z3(s,l.getMode(),()=>cL(g,mr(s),-20)&&!l.isReposition()?_z:aI);{const C=l.getMode()==="fixed"?d.y+nc().top:d.y,w=Ys(s)+Ph;return C+w<=g.y?km:RS}},dL=(t,s,a,l)=>{const d=w=>(_,D,P,H,U)=>{const z=xk(t,H,w,a,U),ae={..._,y:U.y,height:U.height};return{...z(ae,D,P,H,U),alwaysFit:!0}},g=w=>j3(l)?[d(w)]:[];return s?{onLtr:w=>[Pa,Za,Na,ja,Os,cc].concat(g(w)),onRtl:w=>[Pa,Na,Za,Os,ja,cc].concat(g(w))}:{onLtr:w=>[cc,Pa,ja,Za,Os,Na].concat(g(w)),onRtl:w=>[cc,Pa,Os,Na,ja,Za].concat(g(w))}},mL=(t,s,a,l)=>s==="line"?{bubble:Yu(Ph,0,zS),layouts:{onLtr:()=>[mC],onRtl:()=>[Ov]},overrides:US}:{bubble:Yu(0,Ph,zS,1/Ph),layouts:dL(t,a,l,s),overrides:US},WS=(t,s)=>{const a=io(s,g=>g.predicate(t.dom)),{pass:l,fail:d}=Lr(a,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},bW=t=>{if(t.length<=1)return t;{const s=g=>Gs(t,h=>h.position===g),a=g=>io(t,h=>h.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=a("node"),h=Ze(a("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return a(l?"selection":"node");else return a("line")}},fL=t=>{if(t.length<=1)return t;{const s=l=>An(t,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>io(t,d=>d.position===l))}},vW=(t,s,a)=>{const l=WS(t,s);if(l.contextForms.length>0)return A.some({elem:t,toolbars:[l.contextForms[0]]});{const d=WS(t,a);if(d.contextForms.length>0)return A.some({elem:t,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=bW(l.contextToolbars.concat(d.contextToolbars));return A.some({elem:t,toolbars:g})}else return A.none()}},yW=(t,s,a)=>t(s)?A.none():Wu(s,l=>{if(Uo(l)){const{contextToolbars:d,contextForms:g}=WS(l,a.inNodeScope),h=g.length>0?g:fL(d);return h.length>0?A.some({elem:l,toolbars:h}):A.none()}else return A.none()},t),Tk=(t,s)=>{const a=he.fromDom(s.getBody()),l=h=>Ko(h,a),d=h=>!l(h)&&!Yr(a,h),g=he.fromDom(s.selection.getNode());return d(g)?A.none():vW(g,t.inNodeScope,t.inEditorScope).orThunk(()=>yW(l,g,t))},gL=(t,s)=>{const a={},l=[],d=[],g={},h={},C=(D,P)=>{const H=li(Ww(P));a[D]=H,H.launch.map(U=>{g["form:"+D]={...P.launch,type:U.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(H)}}}),H.scope==="editor"?d.push(H):l.push(H),h[D]=H},w=(D,P)=>{D8(P).each(H=>{P.scope==="editor"?d.push(H):l.push(H),h[D]=H})},_=es(t);return ut(_,D=>{const P=t[D];P.type==="contextform"?C(D,P):P.type==="contexttoolbar"&&w(D,P)}),{forms:a,inNodeScope:l,inEditorScope:d,lookupTable:h,formNavigators:g}},hL=jt("forward-slide"),pL=jt("backward-slide"),G3=jt("change-slide-event"),q3="tox-pop--resizing",CW=t=>{const s=gn([]);return Zr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Zr.getContent(a).each(l=>{_o(l.element,"visibility")}),Wr(a.element,q3),_o(a.element,"width")},inlineBehaviours:ft([co("context-toolbar-events",[Yh(y1(),(a,l)=>{l.event.raw.propertyName==="width"&&(Wr(a.element,q3),_o(a.element,"width"))}),Ye(G3,(a,l)=>{const d=a.element;_o(d,"width");const g=dc(d);Zr.setContent(a,l.event.contents),ar(d,q3);const h=dc(d);Yt(d,"width",g+"px"),Zr.getContent(a).each(C=>{l.event.focus.bind(w=>(Ki(w),Wl(d))).orThunk(()=>(mn.focusIn(C),Od(pe(d))))}),setTimeout(()=>{Yt(a.element,"width",h+"px")},0)}),Ye(hL,(a,l)=>{Zr.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Od(pe(a.element))}]))}),dn(a,G3,{contents:l.event.forwardContents,focus:A.none()})}),Ye(pL,(a,l)=>{lc(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),dn(a,G3,{contents:Tl(d.bar),focus:d.focus})})})]),mn.config({mode:"special",onEscape:a=>lc(s.get()).fold(()=>t.onEscape(),l=>(Ro(a,pL),A.some(!0)))})]),lazySink:()=>ao.value(t.sink)})},Ek="tox-pop--transition",bL=(t,s,a,l)=>{const d=l.backstage,g=d.shared,h=vl().deviceType.isTouch,C=os(),w=os(),_=os(),D=nl(CW({sink:a,onEscape:()=>(t.focus(),A.some(!0))})),P=()=>{const en=_.get().getOr("node"),Mn=j3(en)?1:0;return uL(t,g,en,Mn)},H=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),U=en=>fa(Ta(en,C.get(),Ko),!0),z=()=>{if(H()){const en=P(),Mn=fa(_.get(),"node")?U3(t,C.get()):Sk(t);return en.height<=0||!cL(Mn,en,.01)}else return!0},ae=()=>{C.clear(),w.clear(),_.clear(),Zr.hide(D)},Ee=()=>{if(Zr.isOpen(D)){const en=D.element;_o(en,"display"),z()?Yt(en,"display","none"):(w.set(0),Zr.reposition(D))}},fe=en=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[en],behaviours:ft([mn.config({mode:"acyclic"}),co("pop-dialog-wrap-events",[_r(Mn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>mn.focusIn(Mn))}),im(Mn=>{t.shortcuts.remove("ctrl+F9")})])])}),Se=ne(()=>gL(s,en=>{const Mn=Ve([en]);dn(D,hL,{forwardContents:fe(Mn)})})),Ce=(en,Mn)=>Hb(t,{buttons:en,toolbar:Mn.items,allowToolbarGroups:!1},l.backstage,A.some(["form:"])),We=(en,Mn)=>aL.buildInitGroups(en,Mn),Ve=en=>{const{buttons:Mn}=t.ui.registry.getAll(),xn=Se(),ds={...Mn,...xn.formNavigators},Qo=_0(t)===Nd.scrolling?Nd.scrolling:Nd.default,Eo=tn(Ze(en,Et=>Et.type==="contexttoolbar"?Ce(ds,Et):We(Et,g.providers)));return ly({type:Qo,uid:jt("context-toolbar"),initGroups:Eo,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},gt=(en,Mn)=>{const xn=en==="node"?g.anchors.node(Mn):g.anchors.cursor(),ds=mL(t,en,h(),{lastElement:C.get,isReposition:()=>fa(w.get(),0),getMode:()=>Ic.getMode(a)});return $s(xn,ds)},dt=(en,Mn)=>{if(Wn.cancel(),!H())return;const xn=Ve(en),ds=en[0].position,Qo=gt(ds,Mn);_.set(ds),w.set(1);const Eo=D.element;_o(Eo,"display"),U(Mn)||(Wr(Eo,Ek),Ic.reset(a,D)),Zr.showWithinBounds(D,fe(xn),{anchor:Qo,transition:{classes:[Ek],mode:"placement"}},()=>A.some(P())),Mn.fold(C.clear,C.set),z()&&Yt(Eo,"display","none")};let Ue=!1;const Wn=cD(()=>{if(!(!t.hasFocus()||t.removed||Ue))if(Oi(D.element,Ek))Wn.throttle();else{const en=Se();Tk(en,t).fold(ae,Mn=>{dt(Mn.toolbars,A.some(Mn.elem))})}},17);t.on("init",()=>{t.on("remove",ae),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Ee),t.on("click keyup focus SetContent",Wn.throttle),t.on(tL,ae),t.on(dW,en=>{const Mn=Se();mt(Mn.lookupTable,en.toolbarKey).each(xn=>{dt([xn],wn(en.target!==t,en.target)),Zr.getContent(D).each(mn.focusIn)})}),t.on("focusout",en=>{E0.setEditorTimeout(t,()=>{Wl(a.element).isNone()&&Wl(D.element).isNone()&&ae()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ae()}),t.on("ExecCommand",({command:en})=>{en.toLowerCase()==="toggleview"&&ae()}),t.on("AfterProgressState",en=>{en.state?ae():t.hasFocus()&&Wn.throttle()}),t.on("dragstart",()=>{Ue=!0}),t.on("dragend drop",()=>{Ue=!1}),t.on("NodeChange",en=>{Wl(D.element).fold(Wn.throttle,q)})})},vL=t=>{ut([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Au(t,a.cmd),onSetup:uE(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:hi(t),onAction:Au(t,"JustifyNone")})},K3=(t,s)=>{const a=()=>{const l=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=os();return Ze(l,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const w=D=>{D&&(g.on(P=>P.setActive(!1)),g.set(C)),C.setActive(D)};w(fa(d,s.hash(h)));const _=s.watcher(t,h,w);return()=>{g.clear(),_()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},wW=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:Fp,hash:s=>O5(s,["fixed","relative","empty"]).getOr(s),display:St,watcher:(s,a,l)=>s.formatter.formatChanged("lineheight",l,!1,{value:a}).unbind,getCurrent:s=>A.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:hi(t),onMenuSetup:hi(t)}),yL=t=>A.from(UM(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:W(a),hash:l=>Nt(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>{var h;return l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:l=>{const d=he.fromDom(l.selection.getNode());return sm(d,g=>A.some(g).filter(Uo).bind(h=>B(h,"lang").map(w=>{const _=B(h,"data-mce-lang").getOrUndefined();return{code:w,customCode:_,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=Gc();return l.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",l.setActive,!0)),iE(d.clear,hi(t)(l))},onMenuSetup:hi(t)})),CL=t=>{K3(t,wW(t)),yL(t).each(s=>K3(t,s))},SW=(t,s)=>{TU(t,s),OU(t,s),L5(t,s),M3(t,s),$5(t,s)},MG=t=>Db(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),xW=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:MG(t),onAction:Au(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:hi(t),onAction:Au(t,"indent")})},TW=t=>{xW(t)},wL=(t,s)=>a=>{a.setActive(s.get());const l=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",l),iE(()=>t.off("PastePlainTextToggle",l),hi(t)(a))},EW=t=>{const s=gn(tN(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:wL(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:wL(t,s)})},Y3=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},kW=t=>{bg.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:uE(t,s.name),onAction:Y3(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,l=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:uE(t,a),onAction:Y3(t,a),shortcut:l})}},_W=t=>{bg.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Au(t,s.action),shortcut:s.shortcut})}),bg.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:hi(t),onAction:Au(t,s.action)})})},AW=t=>{bg.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Au(t,s.action),onSetup:uE(t,s.name)})})},OW=t=>{kW(t),_W(t),AW(t)},DW=t=>{bg.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Au(t,s.action)})}),bg.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:hi(t),onAction:Au(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:hi(t),onAction:Y3(t,"code")})},RW=t=>{OW(t),DW(t)},kk=(t,s)=>Db(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),MW=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:kk(t,"hasUndo"),onAction:Au(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:kk(t,"hasRedo"),onAction:Au(t,"redo")})},SL=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:kk(t,"hasUndo"),onAction:Au(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:kk(t,"hasRedo"),onAction:Au(t,"redo"),shortcut:"Meta+Y"})},NW=t=>{MW(t),SL(t)},PW=t=>Db(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),BW=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:PW(t),onAction:Au(t,"mceToggleVisualAid")})},$W=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Au(t,"mceToggleVisualAid")})},IW=t=>{$W(t),BW(t)},LW=(t,s)=>{vL(t),RW(t),SW(t,s),NW(t),d7(t),IW(t),TW(t),CL(t),EW(t)},FW=t=>Mt(t)?t.split(/[ ,]/):t,xL=t=>s=>s.options.get(t),HW=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Mt(a)||Ct(a,Mt)?{value:FW(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},_k=xL("contextmenu_never_use_native"),VW=xL("contextmenu_avoid_overlap"),zW=t=>Ak(t).length===0,Ak=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:io(a,l=>po(s,l))},fy=(t,s)=>({type:"makeshift",x:t,y:s}),TL=(t,s,a)=>fy(t.x+s,t.y+a),EL=t=>t.type==="longpress"||t.type.indexOf("touch")===0,UW=t=>{if(EL(t)){const s=t.touches[0];return fy(s.pageX,s.pageY)}else return fy(t.pageX,t.pageY)},WW=t=>{if(EL(t)){const s=t.touches[0];return fy(s.clientX,s.clientY)}else return fy(t.clientX,t.clientY)},ZW=(t,s)=>{const a=vb.DOM.getPos(t);return TL(s,a.x,a.y)},jW=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?UW(s):ZW(t.getContentAreaContainer(),WW(s)):Ok(t),Ok=t=>({type:"selection",root:he.fromDom(t.selection.getNode())}),GW=t=>({type:"node",node:A.some(he.fromDom(t.selection.getNode())),root:he.fromDom(t.getBody())}),X3=(t,s,a)=>{switch(a){case"node":return GW(t);case"point":return jW(t,s);case"selection":return Ok(t)}},qW=(t,s,a,l,d,g)=>{const h=a(),C=X3(t,s,g);J0(h,wm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:A.none()}).map(w=>{s.preventDefault(),Zr.showMenuAt(d,{anchor:C},{menu:{markers:Vp("normal")},data:w})})},KW={onLtr:()=>[Pa,Za,Na,ja,Os,cc,km,RS,ty,OS,DS,XE],onRtl:()=>[Pa,Na,Za,Os,ja,cc,km,RS,DS,XE,ty,OS]},J3=12,YW={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},kL=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=a.getRng();return yc(t.getWin(),Cp.domRange(d)).exists(h=>h.left<=l.clientX&&h.right>=l.clientX&&h.top<=l.clientY&&h.bottom>=l.clientY)}},XW=t=>{const s=t.selection.getRng(),a=()=>{E0.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const l=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",l,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",l)}},JW=(t,s,a)=>{const l=X3(t,s,a);return{bubble:Yu(0,a==="point"?J3:0,YW),layouts:KW,overrides:{maxWidthFunction:m3(),maxHeightFunction:pp()},...l}},Q3=(t,s,a,l,d,g,h)=>{const C=JW(t,s,g);J0(a,wm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:A.none()}).map(w=>{s.preventDefault();const _=h?Yl.HighlightMenuAndItem:Yl.HighlightNone;Zr.showMenuWithinBounds(d,{anchor:C},{menu:{markers:Vp("normal"),highlightOnOpen:_},data:w,type:"horizontal"},()=>A.some(uL(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(tL)})},QW=(t,s,a,l,d,g)=>{const h=vl(),C=h.os.isiOS(),w=h.os.isMacOS(),_=h.os.isAndroid(),D=h.deviceType.isTouch(),P=()=>!(_||C||w&&D),H=()=>{const U=a();Q3(t,s,U,l,d,g,P())};if((w||C)&&g!=="node"){const U=()=>{XW(t),H()};kL(t,s)?U():(t.once("selectionchange",U),t.once("touchend",()=>t.off("selectionchange",U)))}else H()},_L=t=>Mt(t)?t==="|":t.type==="separator",eR={type:"separator"},AL=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Mt(t))return t;switch(t.type){case"separator":return eR;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return Mt(l)?l:Ze(l,AL)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Fe(a.onAction)}}},OL=(t,s)=>{if(s.length===0)return t;const l=lc(t).filter(d=>!_L(d)).fold(()=>[],d=>[eR]);return t.concat(l).concat(s).concat([eR])},DL=(t,s,a)=>{const l=Vo(s,(d,g)=>mt(t,g.toLowerCase()).map(h=>{const C=h.update(a);if(Mt(C)&&ce(Fr(C)))return OL(d,C.split(" "));if(Cn(C)&&C.length>0){const w=Ze(C,AL);return OL(d,w)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&_L(l[l.length-1])&&l.pop(),l},eZ=(t,s)=>s.ctrlKey&&!_k(t),tZ=t=>t.type==="longpress"||po(t,"touches"),RL=(t,s)=>!tZ(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),ML=(t,s)=>RL(t,s)?t.selection.getStart(!0):s.target,nZ=(t,s)=>{const a=VW(t),l=RL(t,s)?"selection":"point";if(ce(a)){const d=ML(t,s);return Jw(he.fromDom(d),a)?"node":l}else return l},oZ=(t,s,a)=>{const d=vl().deviceType.isTouch,g=nl(Zr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:ft([co("dismissContextMenu",[Ye(Wm(),(w,_)=>{Yo.close(w),t.focus()})])])})),h=()=>Zr.hide(g),C=w=>{if(_k(t)&&w.preventDefault(),eZ(t,w)||zW(t))return;const _=nZ(t,w),D=()=>{const H=ML(t,w),U=t.ui.registry.getAll(),z=Ak(t);return DL(U.contextMenus,z,H)};(d()?QW:qW)(t,w,D,a,g,_)};t.on("init",()=>{const w="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(w,h),t.on("longpress contextmenu",C)})},tR=me.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Dk=t=>s=>s.translate(-t.left,-t.top),ZS=t=>s=>s.translate(t.left,t.top),Bh=t=>(s,a)=>Vo(t,(l,d)=>d(l),or(s,a)),jS=(t,s,a)=>t.fold(Bh([ZS(a),Dk(s)]),Bh([Dk(s)]),Bh([])),gy=(t,s,a)=>t.fold(Bh([ZS(a)]),Bh([]),Bh([ZS(s)])),NL=(t,s,a)=>t.fold(Bh([]),Bh([Dk(a)]),Bh([ZS(s),Dk(a)])),sZ=(t,s,a,l,d,g)=>{const h=gy(t,d,g),C=gy(s,d,g);return Math.abs(h.left-C.left)<=a&&Math.abs(h.top-C.top)<=l},zb=(t,s,a,l,d,g)=>{const h=gy(t,d,g),C=gy(s,d,g),w=Math.abs(h.left-C.left),_=Math.abs(h.top-C.top);return or(w,_)},nR=(t,s,a)=>{const l=t.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-a.left+"px"),top:A.some(g-a.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...l}},rZ=(t,s,a)=>t.fold((l,d)=>Rk(l+s,d+a),(l,d)=>n1(l+s,d+a),(l,d)=>o1(l+s,d+a)),oR=(t,s,a,l)=>{const d=(g,h)=>(C,w)=>{const _=g(s,a,l);return h(C.getOr(_.left),w.getOr(_.top))};return t.fold(d(NL,Rk),d(gy,n1),d(jS,o1))},Rk=tR.offset,n1=tR.absolute,o1=tR.fixed,PL=(t,s)=>{const a=Ns(t,s);return Nt(a)?NaN:parseInt(a,10)},aZ=(t,s)=>{const a=t.element,l=PL(a,s.leftAttr),d=PL(a,s.topAttr);return isNaN(l)||isNaN(d)?A.none():A.some(or(l,d))},cZ=(t,s,a)=>{const l=t.element;Ot(l,s.leftAttr,a.left+"px"),Ot(l,s.topAttr,a.top+"px")},lZ=(t,s)=>{const a=t.element;oe(a,s.leftAttr),oe(a,s.topAttr)},iZ=(t,s,a,l)=>aZ(t,s).fold(()=>a,d=>o1(d.left+l.left,d.top+l.top)),uZ=(t,s,a,l,d,g)=>{const h=iZ(t,s,a,l),C=s.mustSnap?mZ(t,s,h,d,g):fZ(t,s,h,d,g),w=jS(h,d,g);return cZ(t,s,w),C.fold(()=>({coord:o1(w.left,w.top),extra:A.none()}),_=>({coord:_.output,extra:_.extra}))},dZ=(t,s)=>{lZ(t,s)},BL=(t,s,a,l)=>gs(t,d=>{const g=d.sensor;return sZ(s,g,d.range.left,d.range.top,a,l)?A.some({output:oR(d.output,s,a,l),extra:d.extra}):A.none()}),mZ=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return BL(g,a,l,d).orThunk(()=>Vo(g,(w,_)=>{const D=_.sensor,P=zb(a,D,_.range.left,_.range.top,l,d);return w.deltas.fold(()=>({deltas:A.some(P),snap:A.some(_)}),H=>{const U=(P.left+P.top)/2,z=(H.left+H.top)/2;return U<=z?{deltas:A.some(P),snap:A.some(_)}:w})},{deltas:A.none(),snap:A.none()}).snap.map(w=>({output:oR(w.output,a,l,d),extra:w.extra})))},fZ=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return BL(g,a,l,d)},$L=(t,s,a)=>({coord:oR(t.output,t.output,s,a),extra:t.extra});var hZ=Object.freeze({__proto__:null,snapTo:(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ba(t.element),h=nc(g),C=By(d),w=$L(l,h,C),_=nR(w.coord,h,C);at(d,_)}}});const Ub="data-initial-z-index",pZ=t=>{Xr(t.element).filter(Uo).each(s=>{B(s,Ub).fold(()=>_o(s,"z-index"),a=>Yt(s,"z-index",a)),oe(s,Ub)})},bZ=t=>{Xr(t.element).filter(Uo).each(s=>{Ms(s,"z-index").each(a=>{Ot(s,Ub,a)}),Yt(s,"z-index",xs(t.element,"z-index"))})},Mk=(t,s)=>{t.getSystem().addToGui(s),bZ(s)},vZ=t=>{pZ(t),t.getSystem().removeFromGui(t)},IL=(t,s,a)=>t.getSystem().build(mf.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var yZ=qr("snaps",[Qe("getSnapPoints"),Zo("onSensor"),Qe("leftAttr"),Qe("topAttr"),ke("lazyViewport",za),ke("mustSnap",!1)]);const sR=[ke("useFixed",ro),Qe("blockerClass"),ke("getTarget",St),ke("onDrag",q),ke("repositionTarget",!0),ke("onDrop",q),kr("getBounds",za),yZ],CZ=t=>Ya(Ms(t,"left"),Ms(t,"top"),Ms(t,"position"),(s,a,l)=>(l==="fixed"?o1:Rk)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=ka(t);return n1(s.left,s.top)}),wZ=(t,s,a,l,d)=>{const g=d.bounds,h=gy(s,a,l),C=Ku(h.left,g.x,g.x+g.width-d.width),w=Ku(h.top,g.y,g.y+g.height-d.height),_=n1(C,w);return s.fold(()=>{const D=NL(_,a,l);return Rk(D.left,D.top)},W(_),()=>{const D=jS(_,a,l);return o1(D.left,D.top)})},SZ=(t,s,a,l,d,g,h)=>{const C=s.fold(()=>{const w=rZ(a,g.left,g.top),_=jS(w,l,d);return o1(_.left,_.top)},w=>{const _=uZ(t,w,a,g,l,d);return _.extra.each(D=>{w.onSensor(t,D)}),_.coord});return wZ(t,C,l,d,h)},xZ=(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ba(t.element),h=nc(g),C=By(d),w=CZ(d),_=SZ(t,s.snaps,w,h,C,l,a),D=nR(_,h,C);at(d,D)}s.onDrag(t,d,l)},LL=(t,s)=>({bounds:t.getBounds(),height:Pu(s.element),width:Va(s.element)}),rR=(t,s,a,l,d)=>{const g=a.update(l,d),h=a.getStartData().getOrThunk(()=>LL(s,t));g.each(C=>{xZ(t,s,h,C)})},FL=(t,s,a,l)=>{s.each(vZ),a.snaps.each(g=>{dZ(t,g)});const d=a.getTarget(t.element);l.reset(),a.onDrop(t,d)},aR=t=>(s,a)=>{const l=d=>{a.setStartData(LL(s,d))};return ys([Ye(Zg(),d=>{a.getStartData().each(()=>l(d))}),...t(s,a,l)])},TZ=t=>ys([Ye(ui(),t.forceDrop),Ye(rm(),t.drop),Ye(Ug(),(s,a)=>{t.move(a.event)}),Ye(Cd(),t.delayDrop)]);var EZ=Object.freeze({__proto__:null,getData:t=>A.from(or(t.x,t.y)),getDelta:(t,s)=>or(s.left-t.left,s.top-t.top)});const HL=(t,s,a)=>[Ye(ui(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>FL(l,A.some(_),t,s),C=lB(h,200),w={drop:h,delayDrop:C.schedule,forceDrop:h,move:P=>{C.cancel(),rR(l,t,s,EZ,P)}},_=IL(l,t.blockerClass,TZ(w));(()=>{a(l),Mk(l,_)})()})],Nk=[...sR,cr("dragger",{handlers:aR(HL)})],kZ=t=>ys([Ye(Do(),t.forceDrop),Ye(ac(),t.drop),Ye(Hl(),t.drop),Ye(Xs(),(s,a)=>{t.move(a.event)})]),_Z=t=>{const s=t[0];return A.some(or(s.clientX,s.clientY))};var VL=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?_Z(a):A.none()},getDelta:(t,s)=>or(s.left-t.left,s.top-t.top)});const zL=(t,s,a)=>{const l=os(),d=g=>{FL(g,l.get(),t,s),l.clear()};return[Ye(Do(),(g,h)=>{h.stop();const C=()=>d(g),w={drop:C,delayDrop:q,forceDrop:C,move:P=>{rR(g,t,s,VL,P)}},_=IL(g,t.blockerClass,kZ(w));l.set(_),(()=>{a(g),Mk(g,_)})()}),Ye(Xs(),(g,h)=>{h.stop(),rR(g,t,s,VL,h.event)}),Ye(ac(),(g,h)=>{h.stop(),d(g)}),Ye(Hl(),d)]},UL=[...sR,cr("dragger",{handlers:aR(zL)})],AZ=(t,s,a)=>[...HL(t,s,a),...zL(t,s,a)],OZ=[...sR,cr("dragger",{handlers:aR(AZ)})];var cR=Object.freeze({__proto__:null,mouse:Nk,touch:UL,mouseOrTouch:OZ}),RZ=Object.freeze({__proto__:null,init:()=>{let t=A.none(),s=A.none();const a=()=>{t=A.none(),s=A.none()},l=(w,_)=>{const D=t.map(P=>w.getDelta(P,_));return t=A.some(_),D},d=(w,_)=>w.getData(_).bind(D=>l(w,D)),g=w=>{s=A.some(w)},h=()=>s,C=W({});return Ai({readState:C,reset:a,update:d,getStartData:h,setStartData:g})}});const Wb=b2({branchKey:"mode",branches:cR,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:A.from(t.extra)})},state:RZ,apis:hZ}),lR=40,Pk=lR/2,WL=(t,s,a,l,d,g)=>t.fold(()=>Wb.snap({sensor:n1(a-Pk,l-Pk),range:or(d,g),output:n1(A.some(a),A.some(l)),extra:{td:s}}),h=>{const C=a-Pk,w=l-Pk,_=lR,D=lR,P=h.element.dom.getBoundingClientRect();return Wb.snap({sensor:n1(C,w),range:or(_,D),output:n1(A.some(a-P.width/2),A.some(l-P.height/2)),extra:{td:s}})}),ZL=(t,s,a)=>{const l=(d,g)=>d.exists(h=>Ko(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;l(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},jL=t=>ps(rl.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:ft([Wb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),q0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),MZ=(t,s)=>{const a=gn([]),l=gn([]),d=gn(!1),g=os(),h=os(),C=dt=>{const Ue=Da(dt);return WL(U.getOpt(s),dt,Ue.x,Ue.y,Ue.width,Ue.height)},w=()=>Ze(a.get(),dt=>C(dt)),_=dt=>{const Ue=Da(dt);return WL(z.getOpt(s),dt,Ue.right,Ue.bottom,Ue.width,Ue.height)},D=()=>Ze(l.get(),dt=>_(dt)),P=ZL(w,g,dt=>{h.get().each(Ue=>{t.dispatch("TableSelectorChange",{start:dt,finish:Ue})})}),H=ZL(D,h,dt=>{g.get().each(Ue=>{t.dispatch("TableSelectorChange",{start:Ue,finish:dt})})}),U=jL(P),z=jL(H),ae=nl(U.asSpec()),Ee=nl(z.asSpec()),fe=(dt,Ue,Wn,en)=>{const Mn=Ue.dom.getBoundingClientRect();_o(dt.element,"display");const xn=hl(he.fromDom(t.getBody())).dom.innerHeight,ds=Wn(Mn),Qo=en(Mn,xn);(ds||Qo)&&Yt(dt.element,"display","none")},Se=(dt,Ue,Wn,en)=>{const Mn=Wn(Ue);Wb.snapTo(dt,Mn),fe(dt,Ue,Qo=>Qo[en]<0,(Qo,Eo)=>Qo[en]>Eo)},Ce=dt=>Se(ae,dt,C,"top"),We=()=>g.get().each(Ce),Ve=dt=>Se(Ee,dt,_,"bottom"),gt=()=>h.get().each(Ve);if(vl().deviceType.isTouch()){const dt=Ue=>Ze(Ue,he.fromDom);t.on("TableSelectionChange",Ue=>{d.get()||(hm(s,ae),hm(s,Ee),d.set(!0));const Wn=he.fromDom(Ue.start),en=he.fromDom(Ue.finish);g.set(Wn),h.set(en),A.from(Ue.otherCells).each(Mn=>{a.set(dt(Mn.upOrLeftCells)),l.set(dt(Mn.downOrRightCells)),Ce(Wn),Ve(en)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{We(),gt()}),t.on("TableSelectionClear",()=>{d.get()&&(ef(ae),ef(Ee),d.set(!1)),g.clear(),h.clear()})}};var NZ=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const PZ=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",BZ=(t,s,a)=>{var l;const d=(l=s.delimiter)!==null&&l!==void 0?l:"›",g=(_,D,P)=>rl.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":P,"aria-level":P+1}},components:[na(_)],action:H=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:ft([Fc.button(a.isDisabled),xc()])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[na(` ${d} `)]}),C=_=>Vo(_,(D,P,H)=>{const U=g(P.name,P.element,H);return H===0?D.concat([U]):D.concat([h(),U])},[]),w=_=>{const D=[];let P=_.length;for(;P-- >0;){const H=_[P];if(H.nodeType===1&&!PZ(H)){const U=Q8(t,H);if(U.isDefaultPrevented()||D.push({name:U.name,element:H}),U.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:ft([mn.config({mode:"flow",selector:"div[role=button]"}),Ln.config({disabled:a.isDisabled}),xc(),Cr.config({}),Kn.config({}),co("elementPathEvents",[_r((_,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>mn.focusIn(_)),t.on("NodeChange",P=>{const H=w(P.parents),U=H.length>0?C(H):[];Kn.set(_,U)})})])]),components:[]}};var s1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(s1||(s1={}));const $Z=(t,s,a,l,d)=>{const g={height:Vb(l+s.top,uO(t),Ew(t))};return a===s1.Both&&(g.width=Vb(d+s.left,iO(t),bT(t))),g},GL=(t,s,a)=>{const l=he.fromDom(t.getContainer()),d=$Z(t,s,a,Ys(l),dc(l));Ne(d,(g,h)=>{jn(g)&&Yt(l,h,F3(g))}),Y8(t)},qL=t=>{const s=eN(t);return s===!1?s1.None:s==="both"?s1.Both:s1.Vertical},Bk=(t,s,a,l)=>{const g=or(a*20,l*20);return GL(t,g,s),A.some(!0)},IZ=(t,s)=>{const a=qL(t);if(a===s1.None)return A.none();const l=a===s1.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return A.some(Pd("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(l),"data-mce-name":"resize-handle"},behaviours:[Wb.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>GL(t,h,a),blockerClass:"tox-blocker"}),mn.config({mode:"special",onLeft:()=>Bk(t,a,-1,0),onRight:()=>Bk(t,a,1,0),onUp:()=>Bk(t,a,0,-1),onDown:()=>Bk(t,a,0,1)}),Cr.config({}),Vn.config({}),al.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},LZ=(t,s)=>{const a=(l,d,g)=>Kn.set(l,[na(s.translate(["{0} "+g,d[g]]))]);return rl.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:ft([Fc.button(s.isDisabled),xc(),Cr.config({}),Kn.config({}),Zt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),co("wordcount-events",[qu(l=>{const d=Zt.getValue(l),g=d.mode==="words"?"characters":"words";Zt.setValue(l,{mode:g,count:d.count}),a(l,d.count,g)}),_r(l=>{t.on("wordCountUpdate",d=>{const{mode:g}=Zt.getValue(l);Zt.setValue(l,{mode:g,count:d.wordCount}),a(l,d.wordCount,g)})})])]),eventOrder:{[di()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},FZ=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":ed.translate(["Powered by {0}","Tiny"])},innerHtml:NZ.trim()},behaviours:ft([Vn.config({})])}]}),l=()=>{const C=XO("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[na(ed.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return t.hasPlugin("wordcount")&&C.push(LZ(t,s)),A0(t)&&C.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],w=sN(t),_=QM(t),D=A0(t)||t.hasPlugin("wordcount"),P=()=>{const H="tox-statusbar__text-container--flex-start",U="tox-statusbar__text-container--flex-end",z="tox-statusbar__text-container--space-around";if(w){const ae="tox-statusbar__text-container-3-cols";return!D&&!_?[ae,z]:D&&!_?[ae,U]:[ae,H]}return[D&&!_?U:H]};return _&&C.push(BZ(t,{},s)),w&&C.push(l()),D&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...P()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),w=IZ(t,s);return C.concat(w.toArray())})()}},KL=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),HZ=(t,s)=>{const a=t.inline,l=a?VS:aW,d=wb(t)?g9:DI,g=uW(),h=os(),C=os(),w=os(),H=vl().deviceType.isTouch()?["tox-platform-touch"]:[],U=ET(t),z=_0(t),ae=ps({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ee=ps({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),fe=()=>g.mainUi.get().map(_n=>_n.outerContainer).bind(lr.getHeader),Se=()=>ao.fromOption(g.dialogUi.get().map(_n=>_n.sink),"UI has not been rendered"),Ce=()=>ao.fromOption(g.popupUi.get().map(_n=>_n.sink),"(popup) UI has not been rendered"),We=g.lazyGetInOuterOrDie("anchor bar",ae.getOpt),Ve=g.lazyGetInOuterOrDie("bottom anchor bar",Ee.getOpt),gt=g.lazyGetInOuterOrDie("toolbar",lr.getToolbar),dt=g.lazyGetInOuterOrDie("throbber",lr.getThrobber),Ue=a9({popup:Ce,dialog:Se},t,We,Ve),Wn=()=>{const _n={attributes:{[Kf]:U?qf.BottomToTop:qf.TopToBottom}},Qn=lr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Ue.popup,onEscape:()=>{t.focus()}}),Vs=lr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Ue.popup.shared.getSink,providers:Ue.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Yb=>{u4(t,Yb)},type:z,lazyToolbar:gt,lazyHeader:()=>fe().getOrDie("Could not find header element"),..._n}),fs=lr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Ue.popup.shared.providers,onEscape:()=>{t.focus()},type:z}),Jl=Cb(t),ud=TT(t),yf=xT(t),Ol=oN(t),dd=en(),Wd=Jl||ud||yf,ru=()=>Jl?[fs]:ud?[Vs]:[],Tg=Ol?[dd,Qn]:[Qn];return lr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Wd?[]:["tox-editor-header--empty"]),..._n},components:tn([yf?Tg:[],ru(),D0(t)?[]:[ae.asSpec()]]),sticky:wb(t),editor:t,sharedBackstage:Ue.popup.shared})},en=()=>lr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Mn=()=>{const _n=lr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Qn=lr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[_n,Qn]}},xn=()=>{const _n=kT(t),Qn=Ko(Wo(),_n)&&xs(_n,"display")==="grid",Vs={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(H),attributes:{...ed.isRtl()?{dir:"rtl"}:{}}},behaviours:ft([Ic.config({useFixed:()=>d.isDocked(fe)})])},fs={dom:{styles:{width:document.body.clientWidth+"px"}},events:ys([Ye(lm(),yf=>{Yt(yf.element,"width",document.body.clientWidth+"px")})])},Jl=nl($s(Vs,Qn?fs:{})),ud=nS(Jl);return C.set(ud),{sink:Jl,mothership:ud}},ds=()=>{const _n={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(H),attributes:{...ed.isRtl()?{dir:"rtl"}:{}}},behaviours:ft([Ic.config({useFixed:()=>d.isDocked(fe),getBounds:()=>s.getPopupSinkBounds()})])},Qn=nl(_n),Vs=nS(Qn);return w.set(Vs),{sink:Qn,mothership:Vs}},Qo=()=>{const _n=Wn(),Qn=Mn(),Vs=lr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Ue.popup}),fs=lr.parts.viewWrapper({backstage:Ue.popup}),Jl=wT(t)&&!a?A.some(FZ(t,Ue.popup.shared.providers)):A.none(),ud=tn([U?[]:[_n],a?[]:[Qn],U?[_n]:[]]),yf=lr.parts.editorContainer({components:tn([ud,a?[]:[Ee.asSpec()]])}),Ol=yO(t),dd={role:"application",...ed.isRtl()?{dir:"rtl"}:{},...Ol?{"aria-hidden":"true"}:{}},Wd=nl(lr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(U?["tox-tinymce--toolbar-bottom"]:[]).concat(H),styles:{visibility:"hidden",...Ol?{opacity:"0",border:"0"}:{}},attributes:dd},components:[yf,...a?[]:[fs,...Jl.toArray()],Vs],behaviours:ft([xc(),Ln.config({disableClass:"tox-tinymce--disabled"}),mn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),ru=nS(Wd);return h.set(ru),{mothership:ru,outerContainer:Wd}},Eo=_n=>{const Qn=F3(J5(t)),Vs=F3(Q5(t));return t.inline||(bl("div","width",Vs)&&Yt(_n.element,"width",Vs),bl("div","height",Qn)?Yt(_n.element,"height",Qn):Yt(_n.element,"height","400px")),Qn},Et=_n=>{t.addShortcut("alt+F9","focus menubar",()=>{lr.focusMenubar(_n)}),t.addShortcut("alt+F10","focus toolbar",()=>{lr.focusToolbar(_n)}),t.addCommand("ToggleToolbarDrawer",(Qn,Vs)=>{Vs!=null&&Vs.skipFocus?lr.toggleToolbarDrawerWithoutFocusing(_n):lr.toggleToolbarDrawer(_n)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>lr.isToolbarDrawerToggled(_n))},sn=_n=>{const{mainUi:Qn,popupUi:Vs,uiMotherships:fs}=_n;Xe(WM(t),(Cy,Wk)=>{t.ui.registry.addGroupToolbarButton(Wk,Cy)});const{buttons:Jl,menuItems:ud,contextToolbars:yf,sidebars:Ol,views:dd}=t.ui.registry.getAll(),Wd=vO(t),ru={menuItems:ud,menus:_T(t),menubar:hO(t),toolbar:Wd.getOrThunk(()=>kw(t)),allowToolbarGroups:z===Nd.floating,buttons:Jl,sidebar:Ol,views:dd};Et(Qn.outerContainer),c9(t,Qn.mothership,fs),d.setup(t,Ue.popup.shared,fe),LW(t,Ue.popup),oZ(t,Ue.popup.shared.getSink,Ue.popup),x9(t),zI(t,dt,Ue.popup.shared),bL(t,yf,Vs.sink,{backstage:Ue.popup}),MZ(t,Vs.sink);const Tg=t.getElement(),Yb=Eo(Qn.outerContainer),wR={targetNode:Tg,height:Yb};return l.render(t,_n,ru,Ue.popup,wR)},so=_n=>(w.set(_n.mothership),_n),In=()=>{const _n=Qo(),Qn=xn(),Vs=Th(t)?ds():so(Qn);g.dialogUi.set(Qn),g.popupUi.set(Vs),g.mainUi.set(_n);const fs={popupUi:Vs,dialogUi:Qn,mainUi:_n,uiMotherships:g.getUiMotherships()};return sn(fs)};return{popups:{backstage:Ue.popup,getMothership:()=>KL("popups",w)},dialogs:{backstage:Ue.dialog,getMothership:()=>KL("dialogs",C)},renderUI:In}},VZ=t=>t.dom.textContent,zZ=(t,s)=>{const a=B(t,"id").fold(()=>{const l=jt("dialog-label");return Ot(s,"id",l),l},St);Ot(t,"aria-labelledby",a)},YL=W([Qe("lazySink"),ms("dragBlockClass"),kr("getBounds",za),ke("useTabstopAt",Wt),ke("firstTabstop",0),ke("eventOrder",{}),wc("modalBehaviours",[mn]),zl("onExecute"),Gm("onEscape")]),$k={sketch:St},Zb=W([tu({name:"draghandle",overrides:(t,s)=>({behaviours:ft([Wb.config({mode:"mouse",getTarget:a=>Km(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Yc({schema:[Qe("dom")],name:"title"}),Yc({factory:$k,schema:[Qe("dom")],name:"close"}),Yc({factory:$k,schema:[Qe("dom")],name:"body"}),tu({factory:$k,schema:[Qe("dom")],name:"footer"}),Tu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[ke("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ke("components",[])],name:"blocker"})]),UZ=(t,s,a,l)=>{const d=os(),g=z=>{d.set(z);const ae=t.lazySink(z).getOrDie(),Ee=l.blocker(),fe=ae.getSystem().build({...Ee,components:Ee.components.concat([Tl(z)]),behaviours:ft([Vn.config({}),co("dialog-blocker-events",[Yh(wd(),()=>{Sg.isBlocked(z)?q():mn.focusIn(z)})])])});hm(ae,fe),mn.focusIn(z)},h=z=>{d.clear(),Xr(z.element).each(ae=>{z.getSystem().getByDom(ae).each(Ee=>{ef(Ee)})})},C=z=>Gl(z,t,"body"),w=z=>ht(z,t,"footer"),_=(z,ae)=>{Sg.block(z,ae)},D=z=>{Sg.unblock(z)},P=jt("modal-events"),H={...t.eventOrder,[el()]:[P].concat(t.eventOrder["alloy.system.attached"]||[])},U=vl();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:w,setIdle:D,setBusy:_},eventOrder:H,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Sc(t.modalBehaviours,[Kn.config({}),mn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Sg.config({getRoot:d.get}),co(P,[_r(z=>{const ae=Gl(z,t,"title").element,Ee=VZ(ae);U.os.isMacOS()&&qe(Ee)?Ot(z.element,"aria-label",Ee):zZ(z.element,ae)})])])}},Ga=_l({name:"ModalDialog",configFields:YL(),partFields:Zb(),factory:UZ,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),Ik=Nn([$a,LO].concat(L0)),WZ=nn,iR=[KT("button"),td,Mc("align","end",["start","end"]),qT,Sm,b1("buttonType",["primary","secondary"])],XL=[...iR,_h],uR=[Hu("type",["submit","cancel","custom"]),...XL],ZZ=[Hu("type",["menu"]),Ah,B0,td,ii("items",Ik),...iR],jb=[...iR,Hu("type",["togglebutton"]),B0,td,Ah,pc("active",!1)],JL=Fl("type",{submit:uR,cancel:uR,custom:uR,menu:ZZ,togglebutton:jb}),jZ=[$a,_h,Hu("level",["info","warn","error","success"]),XN,ke("url","")],GZ=Nn(jZ),qZ=t=>[$a,t],KZ=[$a,_h,Sm,KT("button"),td,zO,b1("buttonType",["primary","secondary","toolbar"]),qT],YZ=Nn(KZ),hy=[$a,LO],bf=hy.concat([HO]),XZ=hy.concat([FO,Sm]),dR=Nn(XZ),GS=nn,mR=bf.concat([eP("auto")]),Lk=Nn(mR),Gb=Zh([Tb,_h,XN]),Fk=bf.concat([ji("storageKey","default")]),JZ=Nn(Fk),QL=wa,eF=Nn(bf),ej=wa,tj=hy.concat([ji("tag","textarea"),Gr("scriptId"),Gr("scriptUrl"),om("onFocus"),S("settings",void 0)]),nj=hy.concat([ji("tag","textarea"),Zi("init")]),tF=bu(t=>Nr("customeditor.old",Ua(nj),t).orThunk(()=>Nr("customeditor.new",Ua(tj),t))),nF=wa,oj=Nn(bf),sj=Ty(),rj=t=>[$a,fr("columns"),t],sF=[$a,Gr("html"),Mc("presets","presentation",["presentation","document"])],aj=Nn(sF),cj=bf.concat([pc("border",!1),pc("sandboxed",!0),pc("streamContent",!1),pc("transparent",!0)]),lj=Nn(cj),fR=wa,gR=Nn(hy.concat([rc("height")])),ij=Nn([Gr("url"),Hm("zoom"),Hm("cachedWidth"),Hm("cachedHeight")]),rF=bf.concat([rc("inputMode"),rc("placeholder"),pc("maximized",!1),Sm]),uj=Nn(rF),dj=wa,aF=t=>[$a,FO,t,Mc("align","start",["start","center","end"])],mj=[_h,Tb],fj=[_h,ii("items",yd("items",()=>r1))],r1=mu([Nn(mj),Nn(fj)]),cF=bf.concat([ii("items",r1),Sm]),gj=Nn(cF),Hk=wa,py=bf.concat([p1("items",[_h,Tb]),Af("size",1),Sm]),Vk=Nn(py),lF=wa,zk=bf.concat([pc("constrain",!0),Sm]),su=Nn(zk),qS=Nn([Gr("width"),Gr("height")]),iF=hy.concat([FO,Af("min",0),Af("max",0)]),uF=Nn(iF),hj=gu,pj=[$a,ii("header",wa),ii("cells",tm(wa))],a1=Nn(pj),HG=bf.concat([rc("placeholder"),pc("maximized",!1),Sm]),bj=Nn(HG),dF=wa,qb=[Hu("type",["directory","leaf"]),YN,Gr("id"),zu("menu",PI)],pR=Nn(qb),vj=qb.concat([ii("children",yd("children",()=>pu("type",{directory:mF,leaf:pR})))]),mF=Nn(vj),yj=pu("type",{directory:mF,leaf:pR}),Cj=[$a,ii("items",yj),om("onLeafAction"),om("onToggleExpand"),k("defaultExpandedIds",[],wa),rc("defaultSelectedId")],by=Nn(Cj),VG=bf.concat([Mc("filetype","file",["image","media","file"]),Sm,rc("picker_text")]),wj=Nn(VG),Sj=Nn([Tb,UO]),fF=t=>ca("items","items",qc(),tm(bu(s=>Nr(`Checking item of ${t}`,bR,s).fold(a=>ao.error(vu(a)),a=>ao.value(a))))),bR=Fm(()=>pu("type",{alertbanner:GZ,bar:Nn(qZ(fF("bar"))),button:YZ,checkbox:dR,colorinput:JZ,colorpicker:eF,dropzone:oj,grid:Nn(rj(fF("grid"))),iframe:lj,input:uj,listbox:gj,selectbox:Vk,sizeinput:su,slider:uF,textarea:bj,urlinput:wj,customeditor:tF,htmlpanel:aj,imagepreview:gR,collection:Lk,label:Nn(aF(fF("label"))),table:a1,tree:by,panel:vy})),xj=[$a,ke("classes",[]),ii("items",bR)],vy=Nn(xj),Tj=[KT("tab"),YN,ii("items",bR)],Ej=[$a,p1("tabs",Tj)],gF=Nn(Ej),kj=XL,zG=JL,e=Nn([Gr("title"),ta("body",pu("type",{panel:vy,tabpanel:gF})),ji("size","normal"),k("buttons",[],zG),ke("initialData",{}),kr("onAction",q),kr("onChange",q),kr("onSubmit",q),kr("onClose",q),kr("onCancel",q),kr("onTabChange",q)]),n=t=>Nr("dialog",e,t),o=Nn([Hu("type",["cancel","custom"]),...kj]),r=Nn([Gr("title"),Gr("url"),Hm("height"),Hm("width"),Vg("buttons",o),kr("onAction",q),kr("onCancel",q),kr("onClose",q),kr("onMessage",q)]),c=t=>Nr("dialog",r,t),u=t=>qt(t)?[t].concat(we(ur(t),u)):Cn(t)?we(t,u):[],f=t=>Mt(t.type)&&Mt(t.name),b={checkbox:GS,colorinput:QL,colorpicker:ej,dropzone:sj,input:dj,iframe:fR,imagepreview:ij,selectbox:lF,sizeinput:qS,slider:hj,listbox:Hk,size:qS,textarea:dF,urlinput:Sj,customeditor:nF,collection:Gb,togglemenuitem:WZ},y=t=>A.from(b[t.type]),E=t=>io(u(t),f),M=t=>{const s=E(t),a=we(s,l=>y(l).fold(()=>[],d=>[ta(l.name,d)]));return Nn(a)},N=t=>{var s;const a=li(n(t)),l=M(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:l,initialData:d}},$={open:(t,s)=>{const a=N(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=li(c(s));return t(a)},redial:t=>N(t)};var ee=Object.freeze({__proto__:null,events:(t,s)=>{const a=(l,d)=>{t.updateState.each(g=>{const h=g(l,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?CM:wh)(l,h)})};return ys([Ye(ju(),(l,d)=>{const g=d;if(!g.universal){const h=t.channel;vo(g.channels,h)&&a(l,g.data)}}),_r((l,d)=>{t.initialData.each(g=>{a(l,g)})})])}}),te=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),be=[Qe("channel"),ms("renderComponents"),ms("updateState"),ms("initialData"),pc("reuseDom",!0)],ve=Object.freeze({__proto__:null,init:()=>{const t=gn(A.none()),s=()=>t.set(A.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Te=Nc({fields:be,name:"reflecting",active:ee,apis:te,state:ve}),et=t=>{const s=[],a={};return Ne(t,(l,d)=>{l.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?ao.error(s):ao.value(a)},xt=(t,s,a)=>{const l=ps(qp.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ze(t.items,g=>oI(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:ft([mn.config({mode:"acyclic",useTabstopAt:Ae(xS)}),Id.memento(l),hV(l,{postprocess:d=>et(d).fold(g=>(console.error(g),{}),St)}),co("dialog-body-panel",[Ye(wd(),(d,g)=>{d.getSystem().broadcastOn([$E],{newFocus:A.some(g.event.target)})})])])}},Vt=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:mT(t.action),behaviours:Sc(t.tabButtonBehaviours,[Vn.config({}),mn.config({mode:"execution",useSpace:!0,useEnter:!0}),Zt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),it=gi({name:"TabButton",configFields:[ke("uid",void 0),Qe("value"),ca("dom","dom",Tf(()=>({attributes:{role:"tab",id:jt("aria"),"aria-selected":"false"}})),fu()),ms("action"),ke("domModification",{}),wc("tabButtonBehaviours",[Vn,mn,Zt]),Qe("view")],factory:Vt}),Le=W([Qe("tabs"),Qe("dom"),ke("clickToDismiss",!1),wc("tabbarBehaviours",[Pt,mn]),mm(["tabClass","selectedClass"])]),Ge=p0({factory:it,name:"tabs",unit:"tab",overrides:t=>{const s=(l,d)=>{Pt.dehighlight(l,d),dn(l,i2(),{tabbar:l,button:d})},a=(l,d)=>{Pt.highlight(l,d),dn(l,l2(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(t.uid).getOrDie(),g=Pt.isHighlighted(d,l);(g&&t.clickToDismiss?s:g?q:a)(d,l)},domModification:{classes:[t.markers.tabClass]}}}}),Ht=W([Ge]),bn=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Sc(t.tabbarBehaviours,[Pt.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Ot(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Ot(g.element,"aria-selected","false")}}),mn.config({mode:"flow",getInitial:d=>Pt.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),uo=_l({name:"Tabbar",configFields:Le(),partFields:Ht(),factory:bn}),Lo=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Sc(t.tabviewBehaviours,[Kn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),_s=gi({name:"Tabview",configFields:[wc("tabviewBehaviours",[Kn])],factory:Lo}),Fs=W([ke("selectFirst",!0),Zo("onChangeTab"),Zo("onDismissTab"),ke("tabs",[]),wc("tabSectionBehaviours",[])]),pr=Yc({factory:uo,schema:[Qe("dom"),nm("markers",[Qe("tabClass"),Qe("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),il=Yc({factory:_s,name:"tabview"}),Hs=W([pr,il]),Rt=(t,s,a,l)=>{const d=h=>{const C=Zt.getValue(h);ht(h,t,"tabview").each(w=>{An(t.tabs,D=>D.value===C).each(D=>{const P=D.view();B(h.element,"id").each(H=>{Ot(w.element,"aria-labelledby",H)}),Kn.set(w,P),t.onChangeTab(w,h,P)})})},g=(h,C)=>{ht(h,t,"tabbar").each(w=>{C(w).each(Pf)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:ob(t.tabSectionBehaviours),events:ys(tn([t.selectFirst?[_r((h,C)=>{g(h,Pt.getFirst)})]:[],[Ye(l2(),(h,C)=>{const w=C.event.button;d(w)}),Ye(i2(),(h,C)=>{const w=C.event.button;t.onDismissTab(h,w)})]])),apis:{getViewItems:h=>ht(h,t,"tabview").map(C=>Kn.contents(C)).getOr([]),showTab:(h,C)=>{g(h,_=>{const D=Pt.getCandidates(_);return An(D,H=>Zt.getValue(H)===C).filter(H=>!Pt.isHighlighted(_,H))})}}}},un=_l({name:"TabSection",configFields:Fs(),partFields:Hs(),factory:Rt,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),rs=(t,s,a)=>Ze(t,(l,d)=>{Kn.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return Kn.set(a,[]),g.height}),Ft=t=>Qs(jr(t,(s,a)=>s>a?-1:s<a?1:0)),Rn=(t,s,a)=>{const l=Ha(t).dom,d=Km(t,".tox-dialog-wrap").getOr(t),g=xs(d,"position")==="fixed";let h;g?h=Math.max(l.clientHeight,window.innerHeight):h=Math.max(l.offsetHeight,l.scrollHeight);const C=Ys(s),_=s.dom.offsetLeft>=a.dom.offsetLeft+dc(a)?Math.max(Ys(a),C):C,D=parseInt(xs(t,"margin-top"),10)||0,P=parseInt(xs(t,"margin-bottom"),10)||0,U=Ys(t)+D+P-_;return h-U},xo=(t,s)=>{Qs(t).each(a=>un.showTab(s,a.value))},zt=(t,s)=>{Yt(t,"height",s+"px"),Yt(t,"flex-basis",s+"px")},ho=(t,s,a)=>{Km(t,'[role="dialog"]').each(l=>{Cs(l,'[role="tablist"]').each(d=>{a.get().map(g=>(Yt(s,"height","0"),Yt(s,"flex-basis","0"),Math.min(g,Rn(l,s,d)))).each(g=>{zt(s,g)})})})},To=t=>Cs(t,'[role="tabpanel"]'),Tc=t=>{const s=os();return{extraEvents:[_r(d=>{const g=d.element;To(g).each(h=>{Yt(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const w=rs(t,h,C);Ft(w).fold(s.clear,s.set)}),ho(g,h,s),_o(h,"visibility"),xo(t,d),requestAnimationFrame(()=>{ho(g,h,s)})})}),Ye(lm(),d=>{const g=d.element;To(g).each(h=>{ho(g,h,s)})}),Ye(P4,(d,g)=>{const h=d.element;To(h).each(C=>{const w=Od(pe(C));Yt(C,"visibility","hidden");const _=Ms(C,"height").map(H=>parseInt(H,10));_o(C,"height"),_o(C,"flex-basis");const D=C.dom.getBoundingClientRect().height;_.forall(H=>D>H)?(s.set(D),ho(h,C,s)):_.each(H=>{zt(C,H)}),_o(C,"visibility"),w.each(Ki)})})],selectFirst:!1}},Ss="send-data-to-section",qa="send-data-to-view",Vd=(t,s,a)=>{const l=gn({}),d=_=>{const D=Zt.getValue(_),P=et(D).getOr({}),H=l.get(),U=$s(H,P);l.set(U)},g=_=>{const D=l.get();Zt.setValue(_,D)},h=gn(null),C=Ze(t.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[na(a.shared.providers.translate(_.title))],view:()=>[qp.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:Ze(_.items,P=>oI(D,P,s,a)),formBehaviours:ft([mn.config({mode:"acyclic",useTabstopAt:Ae(xS)}),co("TabView.form.events",[_r(g),im(d)]),fi.config({channels:ss([{key:Ss,value:{onReceive:d}},{key:qa,value:{onReceive:g}}])})])}))]})),w=Tc(C);return un.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,D,P)=>{const H=Zt.getValue(D);dn(_,vB,{name:H,oldName:h.get()}),h.set(H)},tabs:C,components:[un.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[uo.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:ft([Cr.config({})])}),un.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:w.selectFirst,tabSectionBehaviours:ft([co("tabpanel",w.extraEvents),mn.config({mode:"acyclic"}),jo.config({find:_=>Qs(un.getViewItems(_))}),Pb(A.none(),_=>(_.getSystem().broadcastOn([Ss],{}),l.get()),(_,D)=>{l.set(D),_.getSystem().broadcastOn([qa],{})})])})},_m=(t,s,a,l,d)=>{const g=w=>{const _=w.body;switch(_.type){case"tabpanel":return[Vd(_,w.initialData,l)];default:return[xt(_,w.initialData,l)]}},h=(w,_)=>A.some({isTabPanel:()=>_.body.type==="tabpanel"}),C={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(w=>({id:w})).getOr({}),...d?C:{}}},components:[],behaviours:ft([Id.childAt(0),Te.config({channel:`${c$}-${s}`,updateState:h,renderComponents:g,initialData:t})])}},bi=(t,s,a,l,d)=>_m(t,s,A.some(a),l,d),Ru=(t,s,a)=>{const l=_m(t,s,A.none(),a,!1);return Ga.parts.body(l)},zd=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[uD(A.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:ft([Cr.config({}),Vn.config({})])})]}],behaviours:ft([mn.config({mode:"acyclic",useTabstopAt:Ae(xS)})])};return Ga.parts.body(s)},Mu=k0.deviceType.isTouch(),ld=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),yn=(t,s)=>Ga.parts.close(rl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:ft([Cr.config({})])})),Go=()=>Ga.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),$r=(t,s)=>Ga.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:kh(`<p>${TN(s.translate(t))}</p>`)}]}]}),sa=t=>Ga.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Ia=(t,s)=>[mf.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),mf.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Ec=t=>{const s="tox-dialog",a=s+"-wrap",l=a+"__backdrop",d=s+"__disable-scroll";return Ga.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),A.some(!0)),useTabstopAt:g=>!xS(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:kh(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Mu?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:ft([Vn.config({}),co("dialog-events",t.dialogEvents.concat([Yh(wd(),(g,h)=>{Sg.isBlocked(g)?q():mn.focusIn(g)}),Ye(x1(),(g,h)=>{g.getSystem().broadcastOn([$E],{newFocus:h.event.newFocus})})])),co("scroll-lock",[_r(()=>{ar(Wo(),d)}),im(()=>{Wr(Wo(),d)})]),...t.extraBehaviours]),eventOrder:{[di()]:["dialog-events"],[el()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Gu()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Sa=t=>rl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:ft([Cr.config({}),al.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Pd("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Ro(s,Dh)}}),xa=(t,s,a,l)=>{const d=g=>[na(l.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:ft([Te.config({channel:`${a$}-${s}`,initialData:t,renderComponents:d})])}},Xl=()=>({dom:kh('<div class="tox-dialog__draghandle"></div>')}),Am=(t,s,a,l)=>mf.sketch({dom:kh('<div class="tox-dialog__header"></div>'),components:[xa(t,s,A.some(a),l),Xl(),Sa(l)],containerBehaviours:ft([Wb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Ad(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Om=(t,s,a)=>{const l=Ga.parts.title(xa(t,s,A.none(),a)),d=Ga.parts.draghandle(Xl()),g=Ga.parts.close(Sa(a)),h=[l].concat(t.draggable?[d]:[]).concat([g]);return mf.sketch({dom:kh('<div class="tox-dialog__header"></div>'),components:h})},Ud=(t,s,a)=>Om({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),id=(t,s,a,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:kh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),$h=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{const d=Cs(t().element,".tox-dialog__header").map(g=>Ys(g));Ga.setBusy(t(),(g,h)=>id(l.message,h,s,d))},onUnblock:()=>{Ga.setIdle(t())}}),Kb="tox-dialog--fullscreen",c1="tox-dialog--width-lg",KS="tox-dialog--width-md",Dm=t=>{switch(t){case"large":return A.some(c1);case"medium":return A.some(KS);default:return A.none()}},YS=(t,s)=>{const a=he.fromDom(s.element.dom);Oi(a,Kb)||(Di(a,[c1,KS]),Dm(t).each(l=>ar(a,l)))},vR=(t,s)=>{const a=he.fromDom(t.element.dom),l=t_(a),d=An(l,g=>g===c1||g===KS).or(Dm(s));Jk(a,[Kb,...d.toArray()])},Al=(t,s,a)=>nl(Ec({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[NE({}),...t.extraBehaviours],onEscape:l=>{Ro(l,Dh)},dialogEvents:s,eventOrder:{[ju()]:[Te.name(),fi.name()],[el()]:["scroll-lock",Te.name(),"messages","dialog-events","alloy.base.behaviour"],[Gu()]:["alloy.base.behaviour","dialog-events","messages",Te.name(),"scroll-lock"]}})),Ih=(t,s={})=>{const a=l=>{const d=Ze(l.items,g=>{const h=mt(s,g.name).getOr(gn(!1));return{...g,storage:h}});return{...l,items:d}};return Ze(t,l=>l.type==="menu"?a(l):l)},yR=t=>Vo(t,(s,a)=>a.type==="menu"?Vo(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),Uk=(t,s)=>[Ay(wd(),r$),t(j0,(a,l,d,g)=>{Od(pe(g.element)).fold(q,W1),s.onClose(),l.onClose()}),t(Dh,(a,l,d,g)=>{l.onCancel(a),Ro(g,j0)}),Ye(N4,(a,l)=>s.onUnblock()),Ye(M4,(a,l)=>s.onBlock(l.event))],xg=(t,s)=>{const a=(d,g)=>Ye(d,(h,C)=>{l(h,(w,_)=>{g(t(),w,C.event,h)})}),l=(d,g)=>{Te.getState(d).get().each(h=>{g(h,d)})};return[...Uk(a,s),a(mg,(d,g,h)=>{g.onAction(d,{name:h.name})})]},yy=(t,s,a)=>{const l=(g,h)=>Ye(g,(C,w)=>{d(C,(_,D)=>{h(t(),_,w.event,C)})}),d=(g,h)=>{Te.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...Uk(l,s),l(sS,(g,h)=>h.onSubmit(g)),l(Ou,(g,h,C)=>{h.onChange(g,{name:C.name})}),l(mg,(g,h,C,w)=>{const _=()=>w.getSystem().isConnected()?mn.focusIn(w):void 0,D=U=>X(U,"disabled")||B(U,"aria-disabled").exists(z=>z==="true"),P=pe(w.element),H=Od(P);h.onAction(g,{name:C.name,value:C.value}),Od(P).fold(_,U=>{D(U)||H.exists(z=>Yr(U,z)&&D(z))?_():a().toOptional().filter(z=>!Yr(z.element,U)).each(_)})}),l(vB,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),im(g=>{const h=t();Zt.setValue(g,h.getData())})]},Me=(t,s)=>qE(t,t.type,s),Be=(t,s,a)=>An(s,l=>l.name===a).bind(l=>l.memento.getOpt(t)),At=(t,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),l=Lr(a,C=>C.align==="start"),d=(C,w)=>mf.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:Ze(w,_=>_.memento.asSpec())}),g=d("start",l.pass),h=d("end",l.fail);return[g,h]},bt=(t,s,a)=>{const l=(d,g)=>{const h=Ze(g.buttons,w=>{const _=ps(Me(w,a));return{name:w.name,align:w.align,memento:_}}),C=w=>Be(d,h,w);return A.some({lookupByName:C,footerButtons:h})};return{dom:kh('<div class="tox-dialog__footer"></div>'),components:[],behaviours:ft([Te.config({channel:`${l$}-${s}`,initialData:t,updateState:l,renderComponents:At})])}},Fn=(t,s,a)=>bt(t,s,a),Po=(t,s,a)=>Ga.parts.footer(bt(t,s,a)),Ir=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=jo.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return qp.getField(l,s).orThunk(()=>t.getFooter().bind(h=>Te.getState(h).get()).bind(h=>h.lookupByName(s)))}else return A.none()},Rm=(t,s)=>{const a=t.getRoot();return Te.getState(a).get().map(l=>li(Nr("data",l.dataValidator,s))).getOr(s)},XS=(t,s,a)=>{const l=z=>{const ae=t.getRoot();ae.getSystem().isConnected()&&z(ae)},U={getData:()=>{const z=t.getRoot(),ae=z.getSystem().isConnected()?t.getFormWrapper():z,Ee=Zt.getValue(ae),fe=Xe(a,Se=>Se.get());return{...Ee,...fe}},setData:z=>{l(ae=>{const Ee=U.getData(),fe=$s(Ee,z),Se=Rm(t,fe),Ce=t.getFormWrapper();Zt.setValue(Ce,Se),Ne(a,(We,Ve)=>{po(fe,Ve)&&We.set(fe[Ve])})})},setEnabled:(z,ae)=>{Ir(t,z).each(ae?Ln.enable:Ln.disable)},focus:z=>{Ir(t,z).each(Vn.focus)},block:z=>{if(!Mt(z))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(ae=>{dn(ae,M4,{message:z})})},unblock:()=>{l(z=>{Ro(z,N4)})},showTab:z=>{l(ae=>{const Ee=t.getBody();Te.getState(Ee).get().exists(Se=>Se.isTabPanel())&&jo.getCurrent(Ee).each(Se=>{un.showTab(Se,z)})})},redial:z=>{l(ae=>{const Ee=t.getId(),fe=s(z),Se=Ih(fe.internalDialog.buttons,a);ae.getSystem().broadcastOn([`${BE}-${Ee}`],fe),ae.getSystem().broadcastOn([`${a$}-${Ee}`],fe.internalDialog),ae.getSystem().broadcastOn([`${c$}-${Ee}`],fe.internalDialog),ae.getSystem().broadcastOn([`${l$}-${Ee}`],{...fe.internalDialog,buttons:Se}),U.setData(fe.initialData)})},close:()=>{l(z=>{Ro(z,j0)})},toggleFullscreen:t.toggleFullscreen};return U},_j=(t,s,a)=>{const l=jt("dialog"),d=t.internalDialog,g=Ud(d.title,l,a),h=gn(d.size),C=Dm(h.get()).toArray(),w=(Se,Ce)=>(h.set(Ce.internalDialog.size),YS(Ce.internalDialog.size,Se),A.some(Ce)),_=Ru({body:d.body,initialData:d.initialData},l,a),D=Ih(d.buttons),P=yR(D),H=wn(D.length!==0,Po({buttons:D},l,a)),U=yy(()=>fe,$h(()=>ae,a.shared.providers,s),a.shared.getSink),z={id:l,header:g,body:_,footer:H,extraClasses:C,extraBehaviours:[Te.config({channel:`${BE}-${l}`,updateState:w,initialData:t})],extraStyles:{}},ae=Al(z,U,a),Ee=(()=>{const Se=()=>{const We=Ga.getBody(ae);return jo.getCurrent(We).getOr(We)},Ce=()=>{vR(ae,h.get())};return{getId:W(l),getRoot:W(ae),getBody:()=>Ga.getBody(ae),getFooter:()=>Ga.getFooter(ae),getFormWrapper:Se,toggleFullscreen:Ce}})(),fe=XS(Ee,s.redial,P);return{dialog:ae,instanceApi:fe}},JS=(t,s,a,l=!1,d)=>{const g=jt("dialog"),h=jt("dialog-label"),C=jt("dialog-content"),w=t.internalDialog,_=gn(w.size),D=Dm(_.get()).toArray(),P=(dt,Ue)=>(_.set(Ue.internalDialog.size),YS(Ue.internalDialog.size,dt),d(),A.some(Ue)),H=ps(Am({title:w.title,draggable:!0},g,h,a.shared.providers)),U=ps(bi({body:w.body,initialData:w.initialData},g,C,a,l)),z=Ih(w.buttons),ae=yR(z),Ee=wn(z.length!==0,ps(Fn({buttons:z},g,a))),fe=yy(()=>gt,{onBlock:dt=>{Sg.block(We,(Ue,Wn)=>{const en=H.getOpt(We).map(Mn=>Ys(Mn.element));return id(dt.message,Wn,a.shared.providers,en)})},onUnblock:()=>{Sg.unblock(We)},onClose:()=>s.closeWindow()},a.shared.getSink),Se="tox-dialog-inline",Ce=vl().os,We=nl({dom:{tag:"div",classes:["tox-dialog",Se,...D],attributes:{role:"dialog",...Ce.isMacOS()?{"aria-label":w.title}:{"aria-labelledby":h}}},eventOrder:{[ju()]:[Te.name(),fi.name()],[di()]:["execute-on-form"],[el()]:["reflecting","execute-on-form"]},behaviours:ft([mn.config({mode:"cyclic",onEscape:dt=>(Ro(dt,j0),A.some(!0)),useTabstopAt:dt=>!xS(dt)&&(aa(dt)!=="button"||Ns(dt,"disabled")!=="disabled"),firstTabstop:1}),Te.config({channel:`${BE}-${g}`,updateState:P,initialData:t}),Vn.config({}),co("execute-on-form",fe.concat([Yh(wd(),(dt,Ue)=>{mn.focusIn(dt)}),Ye(x1(),(dt,Ue)=>{dt.getSystem().broadcastOn([$E],{newFocus:Ue.event.newFocus})})])),Sg.config({getRoot:()=>A.some(We)}),Kn.config({}),NE({})]),components:[H.asSpec(),U.asSpec(),...Ee.map(dt=>dt.asSpec()).toArray()]}),Ve=()=>{vR(We,_.get())},gt=XS({getId:W(g),getRoot:W(We),getFooter:()=>Ee.map(dt=>dt.get(We)),getBody:()=>U.get(We),getFormWrapper:()=>{const dt=U.get(We);return jo.getCurrent(dt).getOr(dt)},toggleFullscreen:Ve},s.redial,ae);return{dialog:We,instanceApi:gt}};var vf=tinymce.util.Tools.resolve("tinymce.util.URI");const hF=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!Mt(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{dn(C,M4,{message:h})})},unblock:()=>{s(h=>{Ro(h,N4)})},close:()=>{s(h=>{Ro(h,j0)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([i$],h)})}}},pF=["insertContent","setContent","execCommand","close","block","unblock"],CR=t=>qt(t)&&pF.indexOf(t.mceAction)!==-1,bF=t=>!CR(t)&&qt(t)&&po(t,"mceAction"),Aj=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const l=Sn(a.ui)?a.ui:!1;t.execCommand(a.cmd,l,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},Mo=(t,s,a,l)=>{const d=jt("dialog"),g=Ud(t.title,d,l),h=zd(t),C=t.buttons.bind(Ce=>Ce.length===0?A.none():A.some(Po({buttons:Ce},d,l))),w=xg(()=>Se,$h(()=>fe,l.shared.providers,s)),_={...t.height.fold(()=>({}),Ce=>({height:Ce+"px","max-height":Ce+"px"})),...t.width.fold(()=>({}),Ce=>({width:Ce+"px","max-width":Ce+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],P=new vf(t.url,{base_uri:new vf(window.location.href)}),H=`${P.protocol}://${P.host}${P.port?":"+P.port:""}`,U=Gc(),z=(Ce,We)=>A.some(We),ae=[Te.config({channel:`${BE}-${d}`,updateState:z,initialData:t}),co("messages",[_r(()=>{const Ce=Zl(he.fromDom(window),"message",We=>{if(P.isSameOrigin(new vf(We.raw.origin))){const Ve=We.raw.data;CR(Ve)?Aj(a,Se,Ve):bF(Ve)&&t.onMessage(Se,Ve)}});U.set(Ce)}),im(U.clear)]),fi.config({channels:{[i$]:{onReceive:(Ce,We)=>{Cs(Ce.element,"iframe").each(Ve=>{const gt=Ve.dom.contentWindow;qe(gt)&&gt.postMessage(We,H)})}}}})],fe=Al({id:d,header:g,body:h,footer:C,extraClasses:D,extraBehaviours:ae,extraStyles:_},w,l),Se=hF(fe);return{dialog:fe,instanceApi:Se}},$e=t=>{const s=t.shared;return{open:(l,d)=>{const g=()=>{Ga.hide(_),d()},h=ps(qE({name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",t)),C=Go(),w=yn(g,s.providers),_=nl(Ec({lazySink:()=>s.getSink(),header:ld(C,w),body:$r(l,s.providers),footer:A.some(sa(Ia([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ye(Dh,g)],eventOrder:{}}));Ga.show(_);const D=h.get(_);Vn.focus(D)}}},pn=t=>{const s=t.shared;return{open:(l,d)=>{const g=H=>{Ga.hide(D),d(H)},h=ps(qE({name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",t)),C=qE({name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",t),w=Go(),_=yn(()=>g(!1),s.providers),D=nl(Ec({lazySink:()=>s.getSink(),header:ld(w,_),body:$r(l,s.providers),footer:A.some(sa(Ia([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ye(Dh,()=>g(!1)),Ye(sS,()=>g(!0))],eventOrder:{}}));Ga.show(D);const P=h.get(D);Vn.focus(P)}}},zn=(t,s)=>li(Nr("data",s,t)),da=t=>Jw(t,".tox-alert-dialog")||Jw(t,".tox-confirm-dialog"),vi=(t,s,a)=>s&&a?[]:[Br.config({contextual:{lazyContext:()=>A.some(mr(he.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>Hp(t,l.element).map(g=>({bounds:Eh(g),optScrollEnv:A.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:ka(g.element).top})})).getOrThunk(()=>({bounds:za(),optScrollEnv:A.none()}))})],Mm=t=>{const s=t.editor,a=wb(s),l=$e(t.backstages.dialog),d=pn(t.backstages.dialog),g=(z,ae,Ee)=>{if(!Nt(ae)){if(ae.inline==="toolbar")return _(z,t.backstages.popup.shared.anchors.inlineDialog(),Ee,ae);if(ae.inline==="bottom")return D(z,t.backstages.popup.shared.anchors.inlineBottomDialog(),Ee,ae);if(ae.inline==="cursor")return _(z,t.backstages.popup.shared.anchors.cursor(),Ee,ae)}return w(z,Ee)},h=(z,ae)=>C(z,ae),C=(z,ae)=>{const Ee=fe=>{const Se=Mo(fe,{closeWindow:()=>{Ga.hide(Se.dialog),ae(Se.instanceApi)}},s,t.backstages.dialog);return Ga.show(Se.dialog),Se.instanceApi};return $.openUrl(Ee,z)},w=(z,ae)=>{const Ee=(fe,Se,Ce)=>{const We=Se,gt=_j({dataValidator:Ce,initialData:We,internalDialog:fe},{redial:$.redial,closeWindow:()=>{Ga.hide(gt.dialog),ae(gt.instanceApi)}},t.backstages.dialog);return Ga.show(gt.dialog),gt.instanceApi.setData(We),gt.instanceApi};return $.open(Ee,z)},_=(z,ae,Ee,fe)=>{const Se=(Ce,We,Ve)=>{const gt=zn(We,Ve),dt=os(),Ue=t.backstages.popup.shared.header.isPositionedAtTop(),Wn={dataValidator:Ve,initialData:gt,internalDialog:Ce},en=()=>dt.on(Qo=>{Zr.reposition(Qo),(!a||!Ue)&&Br.refresh(Qo)}),Mn=JS(Wn,{redial:$.redial,closeWindow:()=>{dt.on(Zr.hide),s.off("ResizeEditor",en),dt.clear(),Ee(Mn.instanceApi)}},t.backstages.popup,fe.ariaAttrs,en),xn=nl(Zr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:fe.persistent?{event:"doNotDismissYet"}:{},...Ue?{}:{fireRepositionEventInstead:{}},inlineBehaviours:ft([co("window-manager-inline-events",[Ye(Wm(),(Qo,Eo)=>{Ro(Mn.dialog,Dh)})]),...vi(s,a,Ue)]),isExtraPart:(Qo,Eo)=>da(Eo)}));dt.set(xn);const ds=()=>{const Qo=s.inline?Wo():he.fromDom(s.getContainer()),Eo=mr(Qo);return A.some(Eo)};return Zr.showWithinBounds(xn,Tl(Mn.dialog),{anchor:ae},ds),(!a||!Ue)&&(Br.refresh(xn),s.on("ResizeEditor",en)),Mn.instanceApi.setData(gt),mn.focusIn(Mn.dialog),Mn.instanceApi};return $.open(Se,z)},D=(z,ae,Ee,fe)=>{const Se=(Ce,We,Ve)=>{const gt=zn(We,Ve),dt=os(),Ue=t.backstages.popup.shared.header.isPositionedAtTop(),Wn={dataValidator:Ve,initialData:gt,internalDialog:Ce},en=()=>dt.on(Qo=>{Zr.reposition(Qo),Br.refresh(Qo)}),Mn=JS(Wn,{redial:$.redial,closeWindow:()=>{dt.on(Zr.hide),s.off("ResizeEditor ScrollWindow ElementScroll",en),dt.clear(),Ee(Mn.instanceApi)}},t.backstages.popup,fe.ariaAttrs,en),xn=nl(Zr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:fe.persistent?{event:"doNotDismissYet"}:{},...Ue?{}:{fireRepositionEventInstead:{}},inlineBehaviours:ft([co("window-manager-inline-events",[Ye(Wm(),(Qo,Eo)=>{Ro(Mn.dialog,Dh)})]),Br.config({contextual:{lazyContext:()=>A.some(mr(he.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Qo=>Hp(s,Qo.element).map(Et=>({bounds:Eh(Et),optScrollEnv:A.some({currentScrollTop:Et.element.dom.scrollTop,scrollElmTop:ka(Et.element).top})})).getOrThunk(()=>({bounds:za(),optScrollEnv:A.none()}))})]),isExtraPart:(Qo,Eo)=>da(Eo)}));dt.set(xn);const ds=()=>t.backstages.popup.shared.getSink().toOptional().bind(Qo=>{const Eo=Hp(s,Qo.element),Et=15,sn=Eo.map(_n=>Eh(_n)).getOr(za()),so=mr(he.fromDom(s.getContentAreaContainer())),In=$g(so,sn);return A.some(zr(In.x,In.y,In.width,In.height-Et))});return Zr.showWithinBounds(xn,Tl(Mn.dialog),{anchor:ae},ds),Br.refresh(xn),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",en),Mn.instanceApi.setData(gt),mn.focusIn(Mn.dialog),Mn.instanceApi};return $.open(Se,z)};return{open:g,openUrl:h,alert:(z,ae)=>{l.open(z,ae)},close:z=>{z.close()},confirm:(z,ae)=>{d.open(z,ae)}}},zc=t=>{Tw(t),a7(t),HW(t)};var Nm=()=>{Ig.add("silver",t=>{zc(t);let s=()=>za();const{dialogs:a,popups:l,renderUI:d}=HZ(t,{getPopupSinkBounds:()=>s()}),g=()=>{const _=d();return Hp(t,l.getMothership().element).each(P=>{s=()=>Eh(P)}),_};Y7.register(t,l.backstage.shared);const h=Mm({editor:t,backstages:{popup:l.backstage,dialog:a.backstage}}),C=os(),w=()=>ON(t,{backstage:l.backstage},l.getMothership(),C);return{renderUI:g,getWindowManagerImpl:W(h),getNotificationManagerImpl:w}})};Nm()})();const aK=["id"],cK={class:"grid"},lK={class:"field"},iK={class:"type-label"},uK={class:"field"},dK={class:"type-label"},mK={class:"field half"},fK={class:"type-label"},gK={class:"field half-right"},hK={class:"type-label"},pK={class:"content"},bK={class:"content"},vK=["src"],yK={class:"grid"},CK={class:"field half"},wK={class:"type-label"},SK={class:"field half-right"},xK={class:"type-label"},TK={class:"field half"},EK={class:"type-label"},kK={class:"field half-right"},_K={class:"type-label"},AK={class:"field half"},OK={class:"type-label"},DK={key:1,class:"field half"},RK={class:"type-label"},MK={class:"content"},NK={key:0,class:"media-preview",controls:"true"},PK=["src"],BK=["src"],$K={class:"grid"},IK={class:"field"},LK={class:"type-label"},FK={class:"field half"},HK={class:"type-label"},VK={class:"field half-right"},zK={class:"type-label"},UK={class:"grid"},WK={class:"field"},ZK={class:"type-label"},jK=mq({__name:"input-rich-text-html",props:{value:{},field:{},toolbar:{default:()=>["bold","italic","underline","h1","h2","h3","numlist","bullist","removeformat","blockquote","customLink","customImage","customMedia","code","fullscreen"]},font:{default:"sans-serif"},customFormats:{default:()=>[]},tinymceOverrides:{},disabled:{type:Boolean},imageToken:{},folder:{},softLength:{},direction:{}},emits:["input"],setup(lt,{emit:$n}){var tn;const an=lt,Xt=$n,{t:yt}=Pq(),Ut=Ql(null),Zn=Ql(null),{imageToken:Mt}=fq(an),qt=kq(),eo=Ql("all"),Cn=Ql([]);(tn=qt.settings)!=null&&tn.storage_asset_transform&&(eo.value=qt.settings.storage_asset_transform,Cn.value=qt.settings.storage_asset_presets??[]);const Qt=Ql(0),{imageDrawerOpen:Sn,imageSelection:Nt,closeImageDrawer:_t,onImageSelect:qe,saveImage:tt,imageButton:jn}=tK(Ut,Mt,{storageAssetTransform:eo,storageAssetPresets:Cn}),{mediaDrawerOpen:Ct,mediaSelection:q,closeMediaDrawer:Fe,openMediaTab:En,onMediaSelect:nt,embed:W,saveMedia:St,mediaHeight:Gt,mediaWidth:cn,mediaSource:Ae,mediaButton:le}=oK(Ut,Mt),{linkButton:Bo,linkDrawerOpen:ro,closeLinkDrawer:Wt,saveLink:A,linkSelection:lo,linkNode:rt}=nK(Ut),{codeDrawerOpen:Ho,code:ln,closeCodeDrawer:Ke,saveCode:vo,sourceCodeButton:Gs}=sK(Ut),mo=n2({get(){return an.value||""},set(we){an.value!==we&&Vo()}}),qs=Ql(!1),Ze=n2(()=>qs.value?an.disabled:!1);o2(()=>[an.direction,Ut],()=>{var we,vt,So,It,Ks,zo;Ut.value&&(an.direction==="rtl"?(So=(vt=(we=Ut.value.editorCommands)==null?void 0:we.commands)==null?void 0:vt.exec)==null||So.mcedirectionrtl():(zo=(Ks=(It=Ut.value.editorCommands)==null?void 0:It.commands)==null?void 0:Ks.exec)==null||zo.mcedirectionltr())});const ut=n2(()=>{let we=null;Array.isArray(an.customFormats)&&an.customFormats.length>0&&(we=an.customFormats);let vt=(an.toolbar??[]).map(So=>So.replace(/^link$/g,"customLink").replace(/^media$/g,"customMedia").replace(/^code$/g,"customCode").replace(/^image$/g,"customImage")).join(" ");return we&&(vt+=" styles"),{skin:!1,content_css:!1,content_style:eK(an.font),plugins:["media","table","lists","image","link","pagebreak","code","insertdatetime","autoresize","preview","fullscreen","directionality"],license_key:"gpl",branding:!1,max_height:1e3,elementpath:!1,statusbar:!1,menubar:!1,highlight_on_focus:!1,convert_urls:!1,image_dimensions:!1,extended_valid_elements:"audio[loop|controls],source[src|type]",toolbar:vt,style_formats:we,file_picker_types:"customImage customMedia image media",link_default_protocol:"https",browser_spellcheck:!0,directionality:an.direction,paste_data_images:!1,setup:An,...an.tinymceOverrides||{}}}),L=n2(()=>_q(Qt.value,an.softLength)??100);let Lr,io;function as(){var vt,So,It;const we=(vt=Ut.value)==null?void 0:vt.contentWindow.document.getElementById("tinymce");Qt.value=((It=(So=we==null?void 0:we.textContent)==null?void 0:So.replace(`
`,""))==null?void 0:It.length)??0}function Vo(){if(as(),!Lr)return;const we=Ut.value.getContent()?Ut.value.getContent():null;we!==io&&(io=we,Xt("input",we))}function kc(){if(Lr)return;const we=Ut.value.contentWindow.document.getElementById("tinymce");Lr=new MutationObserver(So=>{Vo()});const vt={characterData:!0,childList:!0,subtree:!0};Lr.observe(we,vt)}function An(we){Ut.value=we;const vt="meta+k";we.ui.registry.addToggleButton("customImage",jn),we.ui.registry.addToggleButton("customMedia",le),we.ui.registry.addToggleButton("customLink",{...Bo,shortcut:vt}),we.ui.registry.addButton("customCode",Gs),we.on("init",function(){we.shortcuts.remove(vt),we.addShortcut(vt,"Insert Link",()=>{we.ui.registry.getAll().buttons.customlink.onAction()}),as(),qs.value=!0}),we.on("OpenWindow",function(So){var It,Ks;if((It=So.dialog)!=null&&It.getData){const zo=(Ks=So.dialog)==null?void 0:Ks.getData();zo&&(zo.url&&(So.dialog.close(),we.ui.registry.getAll().buttons.customlink.onAction()),zo.src&&(So.dialog.close(),we.ui.registry.getAll().buttons.customimage.onAction(!0)))}})}function Xo(we){var So;if(Zn.value==null)return;const vt=(So=Zn.value.$el.parentElement)==null?void 0:So.querySelector(".tox-tinymce");vt!=null&&(we?vt.classList.add("focus"):vt.classList.remove("focus"))}return(we,vt)=>{const So=lu("v-card-title"),It=lu("v-input"),Ks=lu("v-checkbox"),zo=lu("v-card-text"),jr=lu("v-button"),bs=lu("v-card-actions"),Qs=lu("v-card"),lc=lu("v-dialog"),er=lu("interface-input-code"),gs=lu("v-icon"),es=lu("v-drawer"),ma=lu("v-select"),Ne=lu("v-upload"),Xe=lu("v-tab"),rn=lu("v-tabs"),$t=lu("v-tab-item"),to=lu("v-textarea"),Jo=lu("v-tabs-items"),ir=Nq("tooltip");return _g(),wy("div",{id:we.field,class:cq(["wysiwyg",{disabled:we.disabled}])},[Ar(Bn(Kq),{ref_key:"editorElement",ref:Zn,modelValue:mo.value,"onUpdate:modelValue":vt[0]||(vt[0]=Hn=>mo.value=Hn),init:ut.value,disabled:Ze.value,"model-events":"change keydown blur focus paste ExecCommand SetContent",onFocusin:vt[1]||(vt[1]=Hn=>Xo(!0)),onFocusout:vt[2]||(vt[2]=Hn=>Xo(!1)),onFocus:kc,onSetContent:Vo},null,8,["modelValue","init","disabled"]),we.softLength?(_g(),wy("span",{key:0,class:cq(["remaining",{warning:L.value<10,danger:L.value<5}])},yi(we.softLength-Qt.value),3)):TR("",!0),Ar(lc,{modelValue:Bn(ro),"onUpdate:modelValue":vt[7]||(vt[7]=Hn=>l1(ro)?ro.value=Hn:null)},{default:dl(()=>[Ar(Qs,null,{default:dl(()=>[Ar(So,null,{default:dl(()=>[ER(yi(Bn(yt)("wysiwyg_options.link")),1)]),_:1}),Ar(zo,null,{default:dl(()=>[Or("div",cK,[Or("div",lK,[Or("div",iK,yi(Bn(yt)("url")),1),Ar(It,{modelValue:Bn(lo).url,"onUpdate:modelValue":vt[3]||(vt[3]=Hn=>Bn(lo).url=Hn),placeholder:Bn(yt)("url_placeholder"),autofocus:""},null,8,["modelValue","placeholder"])]),Or("div",uK,[Or("div",dK,yi(Bn(yt)("display_text")),1),Ar(It,{modelValue:Bn(lo).displayText,"onUpdate:modelValue":vt[4]||(vt[4]=Hn=>Bn(lo).displayText=Hn),placeholder:Bn(yt)("display_text_placeholder")},null,8,["modelValue","placeholder"])]),Or("div",mK,[Or("div",fK,yi(Bn(yt)("tooltip")),1),Ar(It,{modelValue:Bn(lo).title,"onUpdate:modelValue":vt[5]||(vt[5]=Hn=>Bn(lo).title=Hn),placeholder:Bn(yt)("tooltip_placeholder")},null,8,["modelValue","placeholder"])]),Or("div",gK,[Or("div",hK,yi(Bn(yt)("open_link_in")),1),Ar(Ks,{modelValue:Bn(lo).newTab,"onUpdate:modelValue":vt[6]||(vt[6]=Hn=>Bn(lo).newTab=Hn),block:"",label:Bn(yt)(Bn(lo).newTab?"new_tab":"current_tab")},null,8,["modelValue","label"])])])]),_:1}),Ar(bs,null,{default:dl(()=>[Ar(jr,{secondary:"",onClick:Bn(Wt)},{default:dl(()=>[ER(yi(Bn(yt)("cancel")),1)]),_:1},8,["onClick"]),Ar(jr,{disabled:Bn(lo).url===null&&!Bn(rt),onClick:Bn(A)},{default:dl(()=>[ER(yi(Bn(yt)("save")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),Ar(es,{modelValue:Bn(Ho),"onUpdate:modelValue":vt[9]||(vt[9]=Hn=>l1(Ho)?Ho.value=Hn:null),title:Bn(yt)("wysiwyg_options.source_code"),icon:"code",onCancel:Bn(Ke)},{actions:dl(()=>[Ar(jr,{icon:"",rounded:"",onClick:Bn(vo)},{default:dl(()=>[Ar(gs,{name:"check"})]),_:1},8,["onClick"])]),default:dl(()=>[Or("div",pK,[Ar(er,{value:Bn(ln),language:"htmlmixed","line-wrapping":"",onInput:vt[8]||(vt[8]=Hn=>ln.value=Hn)},null,8,["value"])])]),_:1},8,["modelValue","title","onCancel"]),Ar(es,{modelValue:Bn(Sn),"onUpdate:modelValue":vt[16]||(vt[16]=Hn=>l1(Sn)?Sn.value=Hn:null),title:Bn(yt)("wysiwyg_options.image"),icon:"image",onCancel:Bn(_t)},{actions:dl(()=>[lq((_g(),xF(jr,{icon:"",rounded:"",onClick:Bn(tt)},{default:dl(()=>[Ar(gs,{name:"check"})]),_:1},8,["onClick"])),[[ir,Bn(yt)("save_image"),void 0,{bottom:!0}]])]),default:dl(()=>[Or("div",bK,[Bn(Nt)?(_g(),wy($j,{key:0},[Or("img",{class:"image-preview",src:Bn(Nt).previewUrl},null,8,vK),Or("div",yK,[Or("div",CK,[Or("div",wK,yi(Bn(yt)("image_url")),1),Ar(It,{modelValue:Bn(Nt).imageUrl,"onUpdate:modelValue":vt[10]||(vt[10]=Hn=>Bn(Nt).imageUrl=Hn)},null,8,["modelValue"])]),Or("div",SK,[Or("div",xK,yi(Bn(yt)("alt_text")),1),Ar(It,{modelValue:Bn(Nt).alt,"onUpdate:modelValue":vt[11]||(vt[11]=Hn=>Bn(Nt).alt=Hn),nullable:!1},null,8,["modelValue"])]),eo.value==="all"?(_g(),wy($j,{key:0},[Or("div",TK,[Or("div",EK,yi(Bn(yt)("width")),1),Ar(It,{modelValue:Bn(Nt).width,"onUpdate:modelValue":vt[12]||(vt[12]=Hn=>Bn(Nt).width=Hn),disabled:!!Bn(Nt).transformationKey},null,8,["modelValue","disabled"])]),Or("div",kK,[Or("div",_K,yi(Bn(yt)("height")),1),Ar(It,{modelValue:Bn(Nt).height,"onUpdate:modelValue":vt[13]||(vt[13]=Hn=>Bn(Nt).height=Hn),disabled:!!Bn(Nt).transformationKey},null,8,["modelValue","disabled"])])],64)):TR("",!0),Or("div",AK,[Or("div",OK,yi(Bn(yt)("wysiwyg_options.lazy_loading")),1),Ar(Ks,{modelValue:Bn(Nt).lazy,"onUpdate:modelValue":vt[14]||(vt[14]=Hn=>Bn(Nt).lazy=Hn),block:"",label:Bn(yt)("wysiwyg_options.lazy_loading_label")},null,8,["modelValue","label"])]),eo.value!=="none"&&Cn.value.length>0?(_g(),wy("div",DK,[Or("div",RK,yi(Bn(yt)("transformation_preset_key")),1),Ar(ma,{modelValue:Bn(Nt).transformationKey,"onUpdate:modelValue":vt[15]||(vt[15]=Hn=>Bn(Nt).transformationKey=Hn),items:Cn.value.map(Hn=>({text:Hn.key,value:Hn.key})),"show-deselect":""},null,8,["modelValue","items"])])):TR("",!0)])],64)):(_g(),xF(Ne,{key:1,multiple:!1,"from-library":"","from-url":"",folder:we.folder,onInput:Bn(qe)},null,8,["folder","onInput"]))])]),_:1},8,["modelValue","title","onCancel"]),Ar(es,{modelValue:Bn(Ct),"onUpdate:modelValue":vt[23]||(vt[23]=Hn=>l1(Ct)?Ct.value=Hn:null),title:Bn(yt)("wysiwyg_options.media"),icon:"slideshow",onCancel:Bn(Fe)},{sidebar:dl(()=>[Ar(rn,{modelValue:Bn(En),"onUpdate:modelValue":vt[17]||(vt[17]=Hn=>l1(En)?En.value=Hn:null),vertical:""},{default:dl(()=>[Ar(Xe,{value:"video"},{default:dl(()=>[ER(yi(Bn(yt)("media")),1)]),_:1}),Ar(Xe,{value:"embed"},{default:dl(()=>[ER(yi(Bn(yt)("embed")),1)]),_:1})]),_:1},8,["modelValue"])]),actions:dl(()=>[lq((_g(),xF(jr,{icon:"",rounded:"",onClick:Bn(St)},{default:dl(()=>[Ar(gs,{name:"check"})]),_:1},8,["onClick"])),[[ir,Bn(yt)("save_media"),void 0,{bottom:!0}]])]),default:dl(()=>[Or("div",MK,[Ar(Jo,{modelValue:Bn(En),"onUpdate:modelValue":vt[22]||(vt[22]=Hn=>l1(En)?En.value=Hn:null)},{default:dl(()=>[Ar($t,{value:"video"},{default:dl(()=>[Bn(q)?(_g(),wy($j,{key:0},[Bn(q).tag!=="iframe"?(_g(),wy("video",NK,[Or("source",{src:Bn(q).previewUrl},null,8,PK)])):TR("",!0),Bn(q).tag==="iframe"?(_g(),wy("iframe",{key:1,class:"media-preview",src:Bn(q).previewUrl},null,8,BK)):TR("",!0),Or("div",$K,[Or("div",IK,[Or("div",LK,yi(Bn(yt)("source")),1),Ar(It,{modelValue:Bn(Ae),"onUpdate:modelValue":vt[18]||(vt[18]=Hn=>l1(Ae)?Ae.value=Hn:null)},null,8,["modelValue"])]),Or("div",FK,[Or("div",HK,yi(Bn(yt)("width")),1),Ar(It,{modelValue:Bn(cn),"onUpdate:modelValue":vt[19]||(vt[19]=Hn=>l1(cn)?cn.value=Hn:null)},null,8,["modelValue"])]),Or("div",VK,[Or("div",zK,yi(Bn(yt)("height")),1),Ar(It,{modelValue:Bn(Gt),"onUpdate:modelValue":vt[20]||(vt[20]=Hn=>l1(Gt)?Gt.value=Hn:null)},null,8,["modelValue"])])])],64)):(_g(),xF(Ne,{key:1,multiple:!1,"from-library":"","from-url":"",folder:we.folder,onInput:Bn(nt)},null,8,["folder","onInput"]))]),_:1}),Ar($t,{value:"embed"},{default:dl(()=>[Or("div",UK,[Or("div",WK,[Or("div",ZK,yi(Bn(yt)("embed")),1),Ar(to,{modelValue:Bn(W),"onUpdate:modelValue":vt[21]||(vt[21]=Hn=>l1(W)?W.value=Hn:null),nullable:!1},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title","onCancel"])],10,aK)}}}),tY=Aq(jK,[["__scopeId","data-v-3feea970"]]);export{tY as default};
